webpackJsonp([0],[,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseInt(e+"",10);return!isNaN(n)&&isFinite(n)||(n=a(t)),n}function o(e){return!/^(false|0|no)$/i.test(String(e))&&(!!/^(true|1|yes)$/i.test(String(e))||!!e)}function i(e){if(e&&"string"==typeof e)return e;var t="Unknown error";if(e&&e instanceof Error?t=String(e):e&&e.responseJSON?t=Array.isArray(e.responseJSON.issue)&&e.responseJSON.issue.length?e.responseJSON.issue.map(function(e){return e.diagnostics||"-"}).join("\n"):e.responseJSON.message||e.responseJSON.error||"Unknown error":e&&e.responseText?t=e.responseText+" - "+e.statusText||"Unknown error":e&&e.statusText&&(t="timeout"==e.statusText?"The server failed to respond in the desired number of seconds":e.statusText||"Unknown error"),t&&"object"==(void 0===t?"undefined":T(t))){var n=[];for(var r in t)n.push(M.createElement("li",{key:r},t[r]));return M.createElement("div",null,["Multiple errors",M.createElement("ul",null,n)])}return String(t).replace(/(Error\:\s)+/,"Error: ")}function l(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").split(".").reduce(function(e,t){return e?e[t]:void 0},e)}function s(e){var t=[];for(var n in e){(function(n){var r=e[n];if(!r&&0!==r)return"continue";Array.isArray(r)?r.forEach(function(e){(e||0===e)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))})(n)}return t.join("&")}function u(e){var t={};return e=String(e||"").trim().split("?").pop(),e.split(/&/).forEach(function(e){var n=e.split("="),r=decodeURIComponent(n[0]);if(r){var a=decodeURIComponent(n[1]||"true");t.hasOwnProperty(r)?(Array.isArray(t[r])||(t[r]=[t[r]]),t[r].push(a)):t[r]=a}}),t}function c(e,t){var n=location.hash.split("?")[1]||"",r=location.hash.replace(/\?.*/,"");n=u(n||""),void 0===t?n.hasOwnProperty(e)&&delete n[e]:n[e]=t,n=s(n),location.hash=r+(n?"?"+n:"")}function f(e){if(Array.isArray(e))return e.find(function(e){return"MR"==e.code})}function d(e){return e.find(function(e){return!!f(l(e,"type.coding"))})}function p(e){var t=null;return Array.isArray(e.identifier)&&e.identifier.length&&(t=d(e.identifier))?t.value:t}function h(e){if(!e)return"";var t=e.name;if(Array.isArray(t)||(t=[t]),!(t=t[0]))return"";var n=Array.isArray(t.family)?t.family:[t.family],r=Array.isArray(t.given)?t.given:[t.given],a=Array.isArray(t.prefix)?t.prefix:[t.prefix],o=Array.isArray(t.suffix)?t.suffix:[t.suffix];return[a.map(function(e){return String(e||"").trim()}).join(" "),r.map(function(e){return String(e||"").trim()}).join(" "),n.map(function(e){return String(e||"").trim()}).join(" "),o.map(function(e){return String(e||"").trim()}).join(" ")].filter(Boolean).join(" ")}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.telecom||[]).find(function(e){return"phone"==e.system});return t?t.value:""}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.telecom||[]).find(function(e){return"email"==e.system});return t?t.value||"":""}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.address||[];t=t.find(function(e){return"home"==e.use})||t[0]||{};var n=[t.line,t.postalCode,t.city,t.country].map(function(e){return String(e||"").trim()}).filter(Boolean).join(" ");return n||(t.text||"")}function b(e){var t=(0,R.default)(e.birthDate),n=(0,R.default)(e.deceasedDateTime||void 0),r=n-t,a=Math.round(r/1e3);if(a<60)return a+" second";var o=Math.round(a/60);if(o<60)return o+" minute";var i=Math.round(o/60);if(i<24)return i+" hour";var l=Math.round(i/24);if(l<30)return l+" day";var s=Math.round(l/30);return s<24?s+" month":Math.round(l/365)+" year"}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=l(e,"photo.0.data")||"",r=l(e,"photo.0.url")||"",a=l(e,"photo.0.contentType")||"";0===r.indexOf("/")&&(r=t+""+r);var o=r&&r.match(/^https?:\/\//);return!o&&n?(a&&0!==n.indexOf("data:")&&(n="data:"+a+";base64,"+n),r=n):a&&!o&&(r="data:"+a+";base64,"+r),r}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return String(l(e,"coding.0.display")||l(e,"coding.0.code")||e.text||t)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return"string"==typeof e?e||t:x(e,t)}function E(e){return"http://ibm.com/fhir/cdm/insight/reference"==l(e,"coding.0.extension.0.url")}function O(e){var t={},n=l(e,"meta");if(n){var r=l(n,"extension");if(r&&Array.isArray(r))for(var a in r)if("http://ibm.com/fhir/cdm/insight/result"==l(r[a],"url")){var o=l(r[a],"extension");if(o&&Array.isArray(o))for(var i in o){var s=l(o[i],"url");if("http://ibm.com/fhir/cdm/StructureDefinition/process-type"==s)t.processType=l(o[i],"valueString");else if("http://ibm.com/fhir/cdm/StructureDefinition/process-name"==s)t.processName=l(o[i],"valueString");else if("http://ibm.com/fhir/cdm/StructureDefinition/process-version"==s)t.processVersion=l(o[i],"valueString");else if("http://ibm.com/fhir/cdm/insight/basedOn"==s)t.basedOn=l(o[i],"valueReference.reference");else if("http://ibm.com/fhir/cdm/insight/insight-entry"==s){var u=l(o[i],"extension");for(var c in u)if("http://ibm.com/fhir/cdm/insight/confidence"==l(u[c],"url")){var f=l(u[c],"extension");for(var d in f)if("http://ibm.com/fhir/cdm/insight/confidence-name"==l(f[d],"url")&&"Explicit Score"==l(f[d],"valueString"))for(var p in f)"http://ibm.com/fhir/cdm/insight/confidence-score"==l(f[p],"url")&&(t.confidence=l(f[p],"valueString"))}else if("http://ibm.com/fhir/cdm/insight/span"==l(u[c],"url")){var h=l(u[c],"extension");for(var m in h)"http://ibm.com/fhir/cdm/insight/covered-text"==l(h[m],"url")?t.coveredText=l(h[m],"valueString"):"http://ibm.com/fhir/cdm/insight/offset-begin"==l(h[m],"url")?t.offsetBegin=l(h[m],"valueInteger"):"http://ibm.com/fhir/cdm/insight/offset-end"==l(h[m],"url")&&(t.offsetEnd=l(h[m],"valueInteger"))}}}}}if("string"!=typeof t.processType)t.insightSource=q.NONE;else{var g=t.processType.toLowerCase().split(" ");g.includes("unstructured")?t.insightSource=q.DOCUMENT:g.includes("structured")?t.insightSource=q.SELF:t.insightSource=q.NONE}return t}function _(e){return O(e).insightSource}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=String(e),a=String(t),o=r;n||(o=o.toLowerCase(),a=a.toLowerCase());var i=o.indexOf(a);return i>-1?r.substr(0,i)+'<span class="search-match">'+r.substr(i,a.length)+"</span>"+r.substr(i+a.length):e}function P(e,t){return M.createElement("span",{dangerouslySetInnerHTML:{__html:t?S(e,t):e}})}function k(e,t){var n=e.link;return n?(n=n.find(function(e){return e.relation===t}),n&&n.url?n.url:null):null}function N(e){e="string"==typeof e?{url:e}:e||{};var t=L.default.extend(!0,e,{headers:{Accept:"application/fhir+json"}});return new Promise(function(e,n){L.default.ajax(t).then(e,function(e){var t=i(e);return n(t&&"string"==typeof t?new Error(t):{message:t})})})}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return N(e).then(function(n){(n.entry||[]).forEach(function(e){e.fullUrl&&-1==t.findIndex(function(t){return t.fullUrl===e.fullUrl})&&t.push(e)});var r=k(n,"next");return r?j(C({},e,{url:r}),t):t})}Object.defineProperty(t,"__esModule",{value:!0}),t.InsightSource=void 0;var C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.intVal=a,t.boolVal=o,t.getErrorMessage=i,t.getPath=l,t.compileQueryString=s,t.parseQueryString=u,t.setHashParam=c,t.findMRNCoding=f,t.findMRNIdentifier=d,t.getPatientMRN=p,t.getPatientName=h,t.getPatientPhone=m,t.getPatientEmail=g,t.getPatientHomeAddress=y,t.getPatientAge=b,t.getPatientImageUri=v,t.getCodeableConcept=x,t.getCodeOrConcept=w,t.codeIsNLPInsight=E,t.getInsightDetails=O,t.getInsightSource=_,t.searchHighlight=S,t.renderSearchHighlight=P,t.getBundleURL=k,t.request=N,t.getAllPages=j;var A=n(1),M=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(A),D=n(0),R=r(D),I=n(13),L=r(I),q=t.InsightSource={NONE:"None",SELF:"Self",DOCUMENT:"Document"}},,function(e,t){function n(e,t){var n=e[1]||"",a=e[3];if(!a)return n;if(t&&"function"==typeof btoa){var o=r(a);return[n].concat(a.sources.map(function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"})).concat([o]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(r[o]=!0)}for(a=0;a<e.length;a++){var i=e[a];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=h[r.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](r.parts[o]);for(;o<r.parts.length;o++)a.parts.push(c(r.parts[o],t))}else{for(var i=[],o=0;o<r.parts.length;o++)i.push(c(r.parts[o],t));h[r.id]={id:r.id,refs:1,parts:i}}}}function a(e){for(var t=[],n={},r=0;r<e.length;r++){var a=e[r],o=a[0],i=a[1],l=a[2],s=a[3],u={css:i,media:l,sourceMap:s};n[o]?n[o].parts.push(u):t.push(n[o]={id:o,parts:[u]})}return t}function o(e,t){var n=g(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=v[v.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),v.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function i(e){e.parentNode.removeChild(e);var t=v.indexOf(e);t>=0&&v.splice(t,1)}function l(e){var t=document.createElement("style");return e.attrs.type="text/css",u(t,e.attrs),o(e,t),t}function s(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",u(t,e.attrs),o(e,t),t}function u(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function c(e,t){var n,r,a;if(t.singleton){var o=b++;n=y||(y=l(t)),r=f.bind(null,n,o,!1),a=f.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=p.bind(null,n,t),a=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=l(t),r=d.bind(null,n),a=function(){i(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}function f(e,t,n,r){var a=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,a);else{var o=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function d(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t,n){var r=n.css,a=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||o)&&(r=x(r)),a&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var i=new Blob([r],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(i),l&&URL.revokeObjectURL(l)}var h={},m=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),g=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),y=null,b=0,v=[],x=n(326);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},void 0===t.singleton&&(t.singleton=m()),void 0===t.insertInto&&(t.insertInto="head"),void 0===t.insertAt&&(t.insertAt="bottom");var n=a(e);return r(n,t),function(e){for(var o=[],i=0;i<n.length;i++){var l=n[i],s=h[l.id];s.refs--,o.push(s)}if(e){r(a(e),t)}for(var i=0;i<o.length;i++){var s=o[i];if(0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete h[s.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Grid=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=r(c),d=n(2),p=r(d),h=n(3),m=n(9),g=t.Grid=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={__rows:n.sortRows(n.props.rows,n.props.comparator)},n}return l(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){Array.isArray(e.rows)&&this.setState({__rows:this.sortRows(e.rows,e.comparator)})}},{key:"sortRows",value:function(e,t){return t?e.sort(t):e}},{key:"renderResource",value:function(e,t){var n=this.props.settings.server.url+"/"+e.resourceType+"/"+e.id;return this.props.settings.fhirViewer.enabled&&(n=this.props.settings.fhirViewer.url+(this.props.settings.fhirViewer.url.indexOf("?")>-1?"&":"?")+this.props.settings.fhirViewer.param+"="+encodeURIComponent(n)),f.default.createElement("tr",{key:t},this.props.cols.map(function(t,n){var r=t.render,a=t.path,o=t.cellProps,i=t.defaultValue;return o=s({},o,{key:n}),"function"==typeof r?f.default.createElement("td",o,r(e)):f.default.createElement("td",o,(0,h.getPath)(e,a)||f.default.createElement("small",{className:"text-muted"},i||"-"))}))}},{key:"renderRows",value:function(){var e=this;if(!this.state.__enableGrouping)return this.state.__rows.map(this.renderResource,this);var t=this.props.groupBy?this.props.cols.findIndex(function(t){return t.name===e.props.groupBy||t.label===e.props.groupBy}):-1,n=t>-1?this.props.cols[t].path:null;if(!n)return this.state.__rows.map(this.renderResource,this);var r={};this.state.__rows.forEach(function(t,a){var o="function"==typeof n?n(t):(0,h.getPath)(t,n);o=o||"Empty Group",r.hasOwnProperty(o)||(r[o]=[]),r[o].push(e.renderResource(t,a))});var o=[];for(var i in r)!function(t){r[t].length>1?(o.push(f.default.createElement("tr",{className:"group-header",key:t},f.default.createElement("th",{colSpan:e.props.cols.length,onClick:function(){return e.setState(a({},t,!1===e.state[t]))}},f.default.createElement("i",{className:"glyphicon glyphicon-triangle-"+(!1!==e.state[t]?"bottom":"right")})," ",t," ",f.default.createElement("small",{className:"badge"},r[t].length)))),!1!==e.state[t]&&(o=o.concat(r[t]))):(o.push(f.default.createElement("tr",{className:"group-clear",key:t})),o=o.concat(r[t]))}(i);return o}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{className:"panel panel-default"+(this.state.__enableGrouping?" grouped":"")},this.props.title?f.default.createElement("div",{className:"panel-heading"},this.props.groupBy&&this.state.__rows.length>1&&f.default.createElement("label",{className:"pull-right"},"Group by ",this.props.groupBy," ",f.default.createElement("input",{type:"checkbox",checked:!!this.state.__enableGrouping,onChange:function(t){return e.setState({__enableGrouping:t.target.checked})}})),f.default.createElement("b",{className:"text-primary"},f.default.createElement("i",{className:"fa fa-address-card-o"})," ",this.props.title)):null,f.default.createElement("div",{className:"table-responsive"},f.default.createElement("table",{className:"table table-condensed table-hover table-striped table-bordered",style:{minWidth:200*this.props.cols.length}},f.default.createElement("thead",null,f.default.createElement("tr",null,this.props.cols.map(function(e,t){var n=e.headerProps,r=e.label;return n=s({},n,{key:t}),f.default.createElement("th",n,r||"")}))),f.default.createElement("tbody",null,this.renderRows()))))}}]),t}(f.default.Component);g.propTypes={rows:p.default.arrayOf(p.default.object).isRequired,cols:p.default.arrayOf(p.default.object).isRequired,settings:p.default.object.isRequired,title:p.default.string,groupBy:p.default.string,comparator:p.default.func},t.default=(0,m.connect)(function(e){return{settings:e.settings}})(g)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.goPrev=t.goNext=t.fetch=t.setLimit=t.setTags=t.delTag=t.addTag=t.setSort=t.setQueryType=t.setQueryString=t.setParam=t.setGender=t.setConditions=t.delCondition=t.addCondition=t.setAgeGroup=t.setMaxAge=t.setMinAge=t.setData=t.setError=t.setLoading=t.queryBuilder=void 0;var a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(18),l=n(241),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=n(3),c=t.queryBuilder=new s.default((0,u.parseQueryString)(window.location.hash.split("?")[1]||"")),f=o({},c.getState(),{loading:!1,error:null,bundle:null}),d=t.setLoading=(0,i.createAction)("app/search/SET_LOADING"),p=t.setError=(0,i.createAction)("app/search/SET_ERROR"),h=t.setData=(0,i.createAction)("app/search/SET_DATA"),m=(t.setMinAge=(0,i.createAction)("app/search/SET_MIN_AGE"),t.setMaxAge=(0,i.createAction)("app/search/SET_MAX_AGE"),t.setAgeGroup=(0,i.createAction)("app/search/SET_AGE_GROUP"),t.addCondition=(0,i.createAction)("app/search/ADD_CONDITION"),t.delCondition=(0,i.createAction)("app/search/DEL_CONDITION"),t.setConditions=(0,i.createAction)("app/search/SET_CONDITIONS"),t.setGender=(0,i.createAction)("app/search/SET_GENDER"),t.setParam=(0,i.createAction)("app/search/SET_PARAM"),t.setQueryString=(0,i.createAction)("app/search/SET_QUERY_STRING"),t.setQueryType=(0,i.createAction)("app/search/SET_QUERY_TYPE"),t.setSort=(0,i.createAction)("app/search/SET_SORT"),t.addTag=(0,i.createAction)("app/search/ADD_TAG"),t.delTag=(0,i.createAction)("app/search/DEL_TAG"),t.setTags=(0,i.createAction)("app/search/SET_TAGS"),t.setLimit=(0,i.createAction)("app/search/SET_LIMIT"),t.fetch=function(){return function(e,t){e(d(!0)),e(p(null));var n=t(),r=n.settings;c.fetch(r.server).then(function(t){e(h(t)),e(d(!1))},function(t){e(p(t)),e(d(!1))})}});t.goNext=function(){return function(e,t){var n=t().query.bundle,r=(0,u.getBundleURL)(n,"next");r&&(r=(0,u.parseQueryString)(r),c.setOffset(r._getpages,+r._getpagesoffset),e(m()))}},t.goPrev=function(){return function(e,t){var n=t().query.bundle,r=(0,u.getBundleURL)(n,"previous");r&&(r=(0,u.parseQueryString)(r),c.setOffset(r._getpages,+r._getpagesoffset),e(m()))}};t.default=(0,i.handleActions)((a={},r(a,"app/search/SET_SORT",function(e,t){return c.setSort(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_QUERY_STRING",function(e,t){return c.setQueryString(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_QUERY_TYPE",function(e,t){return c.setQueryType(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_PARAM",function(e,t){return c.setParam(t.payload.name,t.payload.value),o({},e,c.getState())}),r(a,"app/search/SET_MIN_AGE",function(e,t){return c.setMinAge(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_MAX_AGE",function(e,t){return c.setMaxAge(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_AGE_GROUP",function(e,t){return c.setAgeGroup(t.payload),o({},e,c.getState())}),r(a,"app/search/ADD_CONDITION",function(e,t){return c.addCondition(t.payload.key,t.payload.value),o({},e,c.getState())}),r(a,"app/search/SET_CONDITIONS",function(e,t){return c.setConditions(t.payload),o({},e,c.getState())}),r(a,"app/search/DEL_CONDITION",function(e,t){return c.removeCondition(t.payload),o({},e,c.getState())}),r(a,"app/search/ADD_TAG",function(e,t){return c.addTag(t.payload),o({},e,c.getState())}),r(a,"app/search/DEL_TAG",function(e,t){return c.removeTag(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_TAGS",function(e,t){return c.setTags(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_GENDER",function(e,t){return c.setGender(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_LIMIT",function(e,t){return c.setLimit(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_LOADING",function(e,t){return o({},e,c.getState(),{loading:!!t.payload})}),r(a,"app/search/SET_ERROR",function(e,t){return o({},e,c.getState(),{error:t.payload})}),r(a,"app/search/SET_DATA",function(e,t){return o({},e,c.getState(),{bundle:t.payload})}),a),f)},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){var t=e.moment,n=e.format,r=void 0===n?"MM/DD/YYYY":n,o=a(e,["moment","format"]);return l.default.createElement("span",o,(0,f.default)(t).format(r))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(1),l=r(i),s=n(2),u=r(s),c=n(0),f=r(c);o.propTypes={format:u.default.string,moment:u.default.oneOfType([u.default.string,u.default.instanceOf(o),u.default.object]).isRequired}},,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.start||"",n=e.end||"";return t&&n?(t=(0,s.default)(t),n=(0,s.default)(n),t.isSame(n,"day")?i.default.createElement("span",null,t.format("MM/DD/YYYY"),t.isSame(n,"hour")?null:i.default.createElement("span",null,i.default.createElement("small",{className:"text-muted"}," from "),t.format("HH:mm"),i.default.createElement("small",{className:"text-muted"}," to "),n.format("HH:mm"))):i.default.createElement("span",null,i.default.createElement("small",{className:"text-muted"}," from "),t.format("MM/DD/YYYY"),i.default.createElement("small",{className:"text-muted"}," to "),n.format("MM/DD/YYYY"))):t?(t=(0,s.default)(t),i.default.createElement("span",null,i.default.createElement("small",{className:"text-muted"}," from "),t.format("MM/DD/YYYY"))):n?(n=(0,s.default)(n),i.default.createElement("span",null,i.default.createElement("small",{className:"text-muted"}," to "),n.format("MM/DD/YYYY"))):i.default.createElement("small",{className:"text-muted"},"N/A")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(1),i=r(o),l=n(0),s=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(41),o=n(40),i=r(o),l=n(22),s=r(l),u=n(11),c=r(u),f=n(23),d=r(f),p=n(242),h=r(p),m=[i.default];t.default=(0,a.createStore)((0,a.combineReducers)({selection:s.default,query:c.default,settings:d.default,urlParams:h.default}),a.applyMiddleware.apply(void 0,m))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){(0,s.setHashParam)("_selection",Object.keys(e).filter(function(t){return e.hasOwnProperty(t)&&!!e[t]}).join(","))}Object.defineProperty(t,"__esModule",{value:!0}),t.setSelectionCleared=t.setAll=t.toggle=void 0;var o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(18),s=n(3),u=(0,s.parseQueryString)(location.hash),c=(0,s.boolVal)(u["single-selection"]),f={};(u._selection||"").split(/\s*,\s*/).forEach(function(e){e&&(c?f=r({},e,!0):f[e]=!0)});var d=i({},f,{selectionCleared:!1}),p="app/selection/TOGGLE";t.toggle=(0,l.createAction)(p),t.setAll=(0,l.createAction)("app/selection/SET_ALL"),t.setSelectionCleared=(0,l.createAction)("app/selection/SELECTION_CLEARED");t.default=(0,l.handleActions)((o={},r(o,p,function(e,t){var n,o=String(t.payload.id),l=(n={},r(n,o,!e[o]&&t.payload),r(n,"selectionCleared",!1),n);return c||(l=i({},e,l)),a(l),l}),r(o,"app/selection/SELECTION_CLEARED",function(e,t){return i({},e,{selectionCleared:!0})}),r(o,"app/selection/SET_ALL",function(e,t){var n=i({},t.payload,{selectionCleared:!1});return a(n),n}),o),d)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.showSelectedOnly=t.replace=t.merge=void 0;var o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(18),s=n(240),u=r(s),c=n(274),f=r(c),d="app/settings/MERGE";t.merge=(0,l.createAction)(d),t.replace=(0,l.createAction)("app/settings/REPLACE"),t.showSelectedOnly=(0,l.createAction)("app/settings/RENDER_SELECTED_ONLY");t.default=(0,l.handleActions)((o={},a(o,d,function(e,t){return(0,f.default)(e,t.payload,{loaded:!0})}),a(o,"app/settings/RENDER_SELECTED_ONLY",function(e,t){return i({},e,{renderSelectedOnly:!!t.payload})}),a(o,"app/settings/REPLACE",function(e,t){return i({},t.payload)}),o),u.default)},,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c),d=n(305),p=r(d),h=n(234),m=r(h),g=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{style:{color:"#337ab7",textAlign:"center"}},u.default.createElement(p.default,{trigger:u.default.createElement("button",null,u.default.createElement("i",{className:"fa fa-lightbulb-o fas fa-bold"})),position:"left center",on:["hover","click","focus"]},u.default.createElement(m.default,{resource:this.props.resource})))}}]),t}(u.default.Component);g.PropTypes={resource:f.default.object},t.default=g},,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c),d={info:"fa fa-info-circle",warning:"fa fa-exclamation-circle",danger:"fa fa-exclamation-triangle",success:"fa fa-thumbs-up"},p=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"container-fluid",style:{width:"100%"}},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12"},u.default.createElement("br",null),u.default.createElement("div",{className:"alert alert-"+this.props.type},this.props.close?u.default.createElement("span",{"aria-hidden":"true","data-dismiss":"alert",className:"close",style:{lineHeight:"1.2rem"}},"×"):null,this.props.icon?u.default.createElement("i",{className:d[this.props.type],style:{marginRight:"1ex"}}):null,this.props.children),u.default.createElement("br",null))))}}]),t}(u.default.Component);p.propTypes={type:f.default.oneOf(["info","warning","danger","success"]),close:f.default.bool,icon:f.default.bool,children:f.default.any},p.defaultProps={type:"info",close:!0,icon:!0},t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DialogFooter=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c),d=n(9),p=n(23),h=n(11),m=n(22);n(329);var g=window.opener&&window.name,y=parent!==self,b=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.selection).filter(function(t){return!!e.props.selection[t]&&"selectionCleared"!==t}).length,n=["btn"],r=["btn"];0===t&&(n.push("disabled"),r.push("disabled")),this.props.settings.renderSelectedOnly&&n.push("active");var a=this.props.canShowSelected&&t>0;return u.default.createElement("label",{disabled:0===t},u.default.createElement("span",null,t+" patient"+(1===t?"":"s")+" selected"+(a?":":"")),a?u.default.createElement("div",{className:"btn-group"},u.default.createElement("div",{className:n.join(" "),onClick:function(){e.props.onToggleSelectionVisibility(!e.props.settings.renderSelectedOnly)}},"View Selected"),u.default.createElement("div",{className:r.join(" "),onClick:function(){e.props.onResetSelection()}},"Clear Selected")):null)}}]),t}(u.default.Component);b.propTypes={settings:f.default.object.isRequired,selection:f.default.object.isRequired,onToggleSelectionVisibility:f.default.func.isRequired,onResetSelection:f.default.func.isRequired,canShowSelected:f.default.bool};var v=t.DialogFooter=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"export",value:function(){var e=this,t=this.props.selection;switch(this.props.settings.outputMode){case"id-array":return Object.keys(t).filter(function(e){return!!t[e]&&"selectionCleared"!==e});case"transactions":return Object.keys(t).filter(function(e){return!!t[e]&&"selectionCleared"!==e}).map(function(n){return e.createPatientTransaction(t[n])});case"patients":return Object.keys(t).filter(function(e){return!!t[e]&&"selectionCleared"!==e}).map(function(e){return t[e]});case"id-list":return Object.keys(t).filter(function(e){return!!t[e]&&"selectionCleared"!==e}).join(",")}}},{key:"createPatientTransaction",value:function(){throw new Error("No implemented")}},{key:"showSelectedOnly",value:function(e){if(e){var t=this.props.selection;this.props.setParam({name:"_id",value:Object.keys(t).filter(function(e){return!!t[e]}).join(",")})}else this.props.setParam({name:"_id",value:void 0});this.props.showSelectedOnly(e)}},{key:"renderDialogButtons",value:function(){var e=this;if(!g&&!y)return null;var t=window.opener||window.parent,n=Object.keys(this.props.selection).filter(function(t){return!!e.props.selection[t]}).length;return u.default.createElement("div",{className:"col-xs-6 text-right"},u.default.createElement("button",{className:"btn btn-default",onClick:function(){t.postMessage({type:"close"},"*")}},"Cancel"),u.default.createElement("button",{className:"btn btn-primary",onClick:function(){var r=!0;n<=0&&!e.props.selection.selectionCleared&&(r=window.confirm("No patients have been selected. Choose 'Cancel' to return to making a selection or 'OK' to close without selecting")),r&&t.postMessage({type:"result",data:e.export()},"*")}},"OK"))}},{key:"render",value:function(){var e=this.props.selection;return e=Object.keys(e).filter(function(t){return!!e[t]}),u.default.createElement("div",{className:"row dialog-buttons"},u.default.createElement("div",{className:"col-xs-6 text-left"},u.default.createElement(b,{selection:this.props.selection,settings:this.props.settings,onToggleSelectionVisibility:this.showSelectedOnly.bind(this),onResetSelection:this.props.resetSelection,canShowSelected:this.props.canShowSelected})),this.renderDialogButtons())}}]),t}(u.default.Component);v.propTypes={selection:f.default.object.isRequired,settings:f.default.object.isRequired,showSelectedOnly:f.default.func.isRequired,resetSelection:f.default.func.isRequired,setParam:f.default.func.isRequired,fetch:f.default.func.isRequired,canShowSelected:f.default.bool},t.default=(0,d.connect)(function(e){return{selection:e.selection,settings:e.settings,query:e.query}},function(e){return{showSelectedOnly:function(t){e((0,p.showSelectedOnly)(t)),e((0,h.fetch)())},resetSelection:function(){e((0,m.setAll)({})),e((0,p.showSelectedOnly)(!1)),e((0,h.setParam)({name:"_id",value:void 0})),e((0,h.fetch)()),e((0,m.setSelectionCleared)())},setParam:function(t,n){return e((0,h.setParam)(t,n))},fetch:function(){return e((0,h.fetch)())}}})(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c),d=n(3),p=n(42),h=r(p),m=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(h.default,{type:"danger"},(0,d.getErrorMessage)(this.props.error))}}]),t}(u.default.Component);m.propTypes={error:f.default.oneOfType([f.default.string,f.default.object])},m.defaultProps={error:"Unknown Error"},t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(l);n(332);var u=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"loader"},s.default.createElement("div",null,s.default.createElement("i",{className:"fa fa-spinner spin"})," Loading..."))}}]),t}(s.default.Component);t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){for(var t=String(e).toLowerCase().trim().split("").reduce(function(e,t){return e+t.charCodeAt(0).toString(16)},"");t.length<11;)t+=t.length?t:"000000000000";return t}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),d=r(f),p=n(2),h=r(p),m=n(3);n(334);var g=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),c(t,[{key:"componentDidMount",value:function(){this.renderCanvas()}},{key:"componentDidUpdate",value:function(){this.renderCanvas()}},{key:"renderCanvas",value:function(){if(!(0,m.getPatientImageUri)(this.props.patient,this.props.base)){var e=s((0,m.getPatientName)(this.props.patient));jdenticon.update("#img-"+this.props.patient.id,e,.1)}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,r=e.patient,o=(e.base,a(e,["className","style","patient","base"])),i=(0,m.getPatientImageUri)(r,this.props.base);return t="patient-image-wrap "+(t||""),n=u({},n||{}),i&&(n.backgroundImage="url('"+i+"')",n.backgroundColor="rgba(255, 255, 255, 0.6)"),d.default.createElement("div",u({className:t,style:n},o),i?null:d.default.createElement("canvas",{width:"480",height:"480",style:{width:"100%",height:"100%"},id:"img-"+r.id}))}}]),t}(d.default.Component);g.propTypes={patient:h.default.object.isRequired,className:h.default.string,style:h.default.object,base:h.default.string},g.defaultProps={base:""},t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CODE_SYSTEMS={LOINC:{url:"http://loinc.org"},"SNOMED-CT":{url:"http://snomed.info/sct"},RxNorm:{url:"http://www.nlm.nih.gov/research/umls/rxnorm"},CVX:{url:"http://hl7.org/fhir/sid/cvx"},NUBC:{url:"http://www.nubc.org/patient-discharge"},UMLS:{url:"http://uts.nlm.nih.gov/metathesaurus"}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(1),o=r(a),i=n(17),l=r(i),s=n(222),u=r(s),c=n(9),f=n(21),d=r(f),p=n(235),h=r(p),m=n(236),g=r(m),y=n(39),b=n(256),v=r(b),x=n(13),w=r(x);window.$=window.jQuery=w.default;var E=(0,v.default)();l.default.render(o.default.createElement(c.Provider,{store:d.default},o.default.createElement(y.Router,{history:E},o.default.createElement(y.Switch,null,o.default.createElement(u.default,null,o.default.createElement(y.Route,{path:"/",component:g.default,exact:!0}),o.default.createElement(y.Route,{path:"/patient/:index",component:h.default}))))),document.getElementById("main")),$(function(){$("body").tooltip({selector:".patient-detail-page [title]"})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),f=n(0),d=r(f),p=n(2),h=r(p);n(327);var m=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var l=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return l.onChangeMinValue=l.onChangeMinValue.bind(l),l.onChangeMinUnits=l.onChangeMinUnits.bind(l),l.onChangeMaxValue=l.onChangeMaxValue.bind(l),l.onChangeMaxUnits=l.onChangeMaxUnits.bind(l),l.onGroupChange=l.onGroupChange.bind(l),l.state=l._propsToState(l.props),l}return i(t,e),s(t,[{key:"_propsToState",value:function(e){var t={};return e.min&&"object"==l(e.min)&&(e.min.hasOwnProperty("value")&&(t.minValue=isNaN(e.min.value)?"":e.min.value),e.min.hasOwnProperty("units")&&(t.minUnits=e.min.units)),e.max&&"object"==l(e.max)&&(e.max.hasOwnProperty("value")&&(t.maxValue=isNaN(e.max.value)?"":e.max.value),e.max.hasOwnProperty("units")&&(t.maxUnits=e.max.units)),t}},{key:"componentWillReceiveProps",value:function(e){var t=this._propsToState(e);Object.keys(t).length&&this.setState(t)}},{key:"onChangeMinValue",value:function(e){if(this.props.onMinChange){var t={value:e.target.valueAsNumber||parseFloat(e.target.value||"0"),units:this.props.min.units};this.canSet(t,this.props.max)?this.props.onMinChange(t):this.setState(this._propsToState({min:t}))}}},{key:"onChangeMinUnits",value:function(e){if(this.props.onMinChange){var t={value:this.props.min.value,units:e.target.value};this.canSet(t,this.props.max)?this.props.onMinChange(t):this.setState(this._propsToState({min:t}))}}},{key:"onChangeMaxValue",value:function(e){if(this.props.onMaxChange){var t={value:e.target.valueAsNumber||parseFloat(e.target.value||"0"),units:this.props.max.units};this.canSet(this.props.min,t)?this.props.onMaxChange(t):this.setState(this._propsToState({max:t}))}}},{key:"onChangeMaxUnits",value:function(e){if(this.props.onMaxChange){var t={value:this.props.max.value,units:e.target.value};this.canSet(this.props.min,t)?this.props.onMaxChange(t):this.setState(this._propsToState({max:t}))}}},{key:"onGroupChange",value:function(e){this.props.onGroupChange&&this.props.onGroupChange(e.target.value)}},{key:"canSet",value:function(e,t){var n=d.default.duration(t.value,t.units);return d.default.duration(e.value,e.units)<n}},{key:"render",value:function(){var e=this.canSet({value:this.state.minValue,units:this.state.minUnits},{value:this.state.maxValue,units:this.state.maxUnits});return c.default.createElement("div",{className:"age-widget-wrap form-control input-sm"+("**custom**"==this.props.group?" custom":"")},c.default.createElement("select",{onChange:this.onGroupChange,value:this.props.group||""},c.default.createElement("option",{value:""},"Any Age"),c.default.createElement("option",{value:"infant"},"Infants (0 - 12 months, Alive only)"),c.default.createElement("option",{value:"child"},"Children (1 - 18 years, Alive only)"),c.default.createElement("option",{value:"adult"},"Adults (18 - 65 years, Alive only)"),c.default.createElement("option",{value:"elderly"},"Elderly (65+ years, Alive only)"),c.default.createElement("option",{value:"**custom**"},"**custom**"==this.props.group?"Custom Age, Alive only:":"Custom Age, Alive only")),"**custom**"==this.props.group?c.default.createElement("div",{className:"age-widget"+(e?"":" invalid")},c.default.createElement("span",null,"Min:"),c.default.createElement("input",{type:"number",value:this.state.minValue,onChange:this.onChangeMinValue,min:0,step:1}),c.default.createElement("select",{value:this.state.minUnits,onChange:this.onChangeMinUnits},c.default.createElement("option",{value:"years"},"Years"),c.default.createElement("option",{value:"months"},"Months"),c.default.createElement("option",{value:"days"},"Days"))):null,"**custom**"==this.props.group?c.default.createElement("div",{className:"age-widget"+(e?"":" invalid")},c.default.createElement("span",null,"Max:"),c.default.createElement("input",{type:"number",value:this.state.maxValue,onChange:this.onChangeMaxValue,min:0,step:1}),c.default.createElement("select",{value:this.state.maxUnits,onChange:this.onChangeMaxUnits},c.default.createElement("option",{value:"years"},"Years"),c.default.createElement("option",{value:"months"},"Months"),c.default.createElement("option",{value:"days"},"Days"))):null)}}]),t}(c.default.Component);m.propTypes={min:h.default.shape({value:h.default.number,units:h.default.oneOf(["years","months","days"])}),max:h.default.shape({value:h.default.number,units:h.default.oneOf(["years","months","days"])}),group:h.default.string,onMinChange:h.default.func,onMaxChange:h.default.func,onGroupChange:h.default.func,update:h.default.func},m.defaultProps={min:{value:0,units:"years"},max:{value:100,units:"years"},group:"",update:function(){return alert("No update function provided!")}},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),d=r(f),p=n(2),h=r(p),m=n(13),g=r(m),y=n(264),b=r(y),v=n(9),x=n(45),w=r(x),E=n(44),O=r(E),_=n(11),S=n(23),P=n(3);n(328);var k=window.opener||(window.parent===self?null:window.parent),N=t.App=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var l=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return l.state={error:null},l}return l(t,e),c(t,[{key:"handleUiBlocking",value:function(){var e=0,t=void 0,n=function(){t&&clearTimeout(t),e>0?(0,g.default)("#overlay").show():t=setTimeout(function(){(0,g.default)("#overlay").hide()},200)};(0,g.default)(document).ajaxStart(function(){e++,n()}),(0,g.default)(document).ajaxComplete(function(){e=Math.max(--e,0),n()})}},{key:"componentDidMount",value:function(){var e=this;this.handleUiBlocking();var t=(0,P.parseQueryString)(window.location.search),n=t.config,r=a(t,["config"]),o={};g.default.ajax({url:"./config/"+(n||"default")+".json5",dataType:"text",cache:!1}).then(function(e){e=b.default.parse(e),g.default.ajaxSetup({timeout:e.timeout||2e4}),o=u({},e,r)},function(e){console.warn("Loading custom config: "+e.statusText)}).always(function(){var t=!1,n=function(n){"config"==n.data.type&&n.data.data&&"object"==s(n.data.data)&&(t=!0,e.props.dispatch((0,S.merge)(n.data.data)),e.props.dispatch((0,_.fetch)()))};e.props.dispatch((0,S.merge)(o)),e.props.dispatch((0,_.setLimit)(o.patientsPerPage)),k?(window.addEventListener("unload",function(){k.postMessage({type:"close"},"*")}),window.addEventListener("message",n),setTimeout(function(){window.removeEventListener("message",n),t||e.props.dispatch((0,_.fetch)())},1e3),k.postMessage({type:"ready"},"*")):e.props.dispatch((0,_.fetch)())})}},{key:"render",value:function(){return this.state.error?d.default.createElement(O.default,{error:this.state.error}):this.props.settings&&this.props.settings.loaded?d.default.createElement("div",{className:"app"},this.props.children):d.default.createElement("div",{className:"app"},d.default.createElement(w.default,null))}}]),t}(d.default.Component);N.propTypes={children:h.default.any,settings:h.default.object.isRequired,dispatch:h.default.func.isRequired},t.default=(0,v.connect)(function(e){return u({},e)})(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c),d=n(10),p=r(d),h=n(3),m=n(20),g=r(m),y=n(0),b=r(y),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(p.default,{rows:(this.props.resources||[]).map(function(e){return e.resource}),title:"CarePlan",groupBy:"Category",comparator:function(e,t){var n=(0,h.getPath)(e,"period.start"),r=(0,h.getPath)(t,"period.start");return n=n?+(0,b.default)(n):0,(r=r?+(0,b.default)(r):0)-n},cols:[{label:"Category",path:"category.0.coding.0.display",render:function(e){return u.default.createElement("b",null,(0,h.getPath)(e,"category.0.coding.0.display"))}},{label:"Reason",render:function(e){return(e.activity||[]).map(function(e,t){var n=(0,h.getPath)(e,"detail.code.coding.0.display")||"";return n?u.default.createElement("div",{key:t},n,u.default.createElement("span",null," - "),u.default.createElement("span",{className:"text-muted"},(0,h.getPath)(e,"detail.status")||"no data")):""})}},{label:"Period",render:function(e){return(0,g.default)(e.period)}},{label:"Status",path:"status"}]})}}]),t}(u.default.Component);v.propTypes={resources:f.default.arrayOf(f.default.object)},t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c),d=n(47),p=n(10),h=r(p),m=n(14),g=r(m),y=n(3),b=n(0),v=r(b),x=n(30),w=r(x),E=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={doHighlight:!1},n.toggleHighlight=n.toggleHighlight.bind(n),n}return i(t,e),l(t,[{key:"toggleHighlight",value:function(){this.setState(function(e){return{doHighlight:!e.doHighlight}})}},{key:"render",value:function(){var e=this,t=this.props.resources||[],n=t.length;return u.default.createElement(h.default,{rows:(t||[]).map(function(e){return e.resource}),title:n+" Condition"+(1===n?"":"s"),comparator:function(e,t){var n=(0,y.getPath)(e,"onsetDateTime"),r=(0,y.getPath)(t,"onsetDateTime");return n=n?+(0,v.default)(n):0,(r=r?+(0,v.default)(r):0)-n},cols:[{label:"Condition",render:function(t){var n="-",r="-",a="",o="";if(e.state.doHighlight&&(0,y.codeIsNLPInsight)(t.code)&&(o="mark"),t.code&&(t.code.text&&(n=t.code.text),Array.isArray(t.code.coding)&&t.code.coding.length)){var i=t.code.coding[0];a=i.system;for(var l in d.CODE_SYSTEMS)if(d.CODE_SYSTEMS[l].url===i.system){a="("+l+")";break}i.display&&(n=i.display),i.code&&(r=i.code)}return u.default.createElement("div",null,u.default.createElement("b",null,n),u.default.createElement("small",{className:o+" text-muted pull-right"},r," ",a))}},{label:u.default.createElement("div",{className:"text-center"},"Clinical Status"),render:function(e){return u.default.createElement("div",{className:"text-center"},e.clinicalStatus?(0,y.getCodeOrConcept)(e.clinicalStatus):"-")}},{label:u.default.createElement("div",{className:"text-center"},"Verification Status"),render:function(e){return u.default.createElement("div",{className:"text-center"},e.verificationStatus?(0,y.getCodeOrConcept)(e.verificationStatus):"-")}},{label:u.default.createElement("div",{className:"text-center"},"Onset Date"),render:function(e){var t=e.onsetDateTime||"";return u.default.createElement("div",{className:"text-center"},t?u.default.createElement(g.default,{moment:e.onsetDateTime}):"-")}},{label:u.default.createElement("div",{style:{textAlign:"center"}},u.default.createElement("button",{onMouseUp:this.toggleHighlight,style:{backgroundColor:this.state.doHighlight?"#337ab7":"white",color:this.state.doHighlight?"white":"#337ab7",textAlign:"center"}},u.default.createElement("i",{className:"fa fa-lightbulb-o fas fa-bold"}))),render:function(e){return(0,y.getInsightSource)(e)!=y.InsightSource.NONE?u.default.createElement(w.default,{resource:e}):u.default.createElement("div",null)}}]})}}]),t}(u.default.Component);E.propTypes={resources:f.default.arrayOf(f.default.object)},t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return e.class&&"object"==c(e.class)?(0,v.getPath)(e,"class.type.0.text"):e.class}function s(e){var t=(0,v.getPath)(e,"type.0.text");if(t)return t;var n=l(e);return n?n+" encounter":""}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=n(1),d=r(f),p=n(2),h=r(p),m=n(0),g=r(m),y=n(10),b=r(y),v=n(3),x=n(20),w=r(x),E=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return d.default.createElement(b.default,{rows:(this.props.resources||[]).map(function(e){return e.resource}),title:"Encounter"+(1===this.props.resources.length?"":"s"),groupBy:"Type",comparator:function(e,t){var n=(0,v.getPath)(e,"period.start"),r=(0,v.getPath)(t,"period.start");return n=n?+(0,g.default)(n):0,(r=r?+(0,g.default)(r):0)-n},cols:[{label:"Type",path:function(e){return s(e)},render:function(e){var t=(0,v.getPath)(e,"type.0.text");if(t)return d.default.createElement("b",null,t);var n=l(e);return n?d.default.createElement("span",{className:"text-muted"},n+" encounter"):d.default.createElement("small",{className:"text-muted"},"N/A")}},{label:"Reason",path:"reason.0.coding.0.display",defaultValue:"N/A"},{label:"Class",render:function(e){var t=l(e);return t?d.default.createElement("b",null,t):d.default.createElement("small",{className:"text-muted"},"N/A")}},{label:"Status",path:"status",defaultValue:"N/A"},{label:"Time",path:"period",render:function(e){return(0,w.default)(e.period||{})}}]})}}]),t}(d.default.Component);E.propTypes={resources:h.default.arrayOf(h.default.object)},t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c),d=n(0),p=r(d),h=n(10),m=r(h),g=n(14),y=r(g),b=n(3),v=n(30),x=r(v),w=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={doHighlight:!1},n.toggleHighlight=n.toggleHighlight.bind(n),n}return i(t,e),l(t,[{key:"toggleHighlight",value:function(){this.setState(function(e){return{doHighlight:!e.doHighlight}})}},{key:"render",value:function(){return u.default.createElement(m.default,{rows:(this.props.resources||[]).map(function(e){return e.resource}),title:"Immunizations",groupBy:"Type",comparator:function(e,t){var n=(0,b.getPath)(e,"date"),r=(0,b.getPath)(t,"date");return n=n?+(0,p.default)(n):0,(r=r?+(0,p.default)(r):0)-n},cols:[{label:"Type",render:function(e){return u.default.createElement("div",{className:(0,b.codeIsNLPInsight)((0,b.getPath)(e,"vaccineCode"))?"mark":""},(0,b.getPath)(e,"vaccineCode.coding.0.display"))}},{label:"Status",render:function(e){return e.status||"-"}},{label:"Date",render:function(e){return e.date?u.default.createElement(y.default,{moment:e.date}):e.occurrenceDateTime?u.default.createElement(y.default,{moment:e.occurrenceDateTime}):e.occurrenceString||"-"}},{label:u.default.createElement("div",{style:{textAlign:"center"}},u.default.createElement("button",{onMouseUp:this.toggleHighlight,style:{backgroundColor:this.state.doHighlight?"#337ab7":"white",color:this.state.doHighlight?"white":"#337ab7",textAlign:"center"}},u.default.createElement("i",{className:"fa fa-lightbulb-o fas fa-bold"}))),render:function(e){return(0,b.getInsightSource)(e)!=b.InsightSource.NONE?u.default.createElement(x.default,{resource:e}):u.default.createElement("div",null)}}]})}}]),t}(u.default.Component);w.propTypes={resources:f.default.arrayOf(f.default.object)},t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c),d=n(0),p=r(d),h=n(3),m=n(10),g=r(m),y=n(231),b=r(y),v=n(230),x=r(v),w=n(20),E=r(w),O=n(14),_=r(O),S=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"getObservationLabel",value:function(e){return(0,h.getPath)(e,"code.coding.0.display")||(0,h.getPath)(e,"code.text")||(0,h.getPath)(e,"valueQuantity.code")}},{key:"renderObservation",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(e.component))return e.component.map(function(e,n){var r=t.renderObservation(e,!0);return u.default.createElement("span",{key:n},n>0&&u.default.createElement("span",null,", "),r)});var r=function(r){return u.default.createElement("span",null,n&&u.default.createElement("label",{className:"text-muted"},t.getObservationLabel(e).replace(/^\s*(Systolic|Diastolic)\s+blood\s+pressure\s*$/gi,"$1"),": "),r)};if(e.hasOwnProperty("valueBoolean"))return r(e.valueBoolean&&"false"!=e.valueBoolean?"Positive":"Negative");if(e.hasOwnProperty("valueString"))return r(String(e.valueString));if(e.hasOwnProperty("valueRange"))return r(u.default.createElement(b.default,{range:e.valueRange}));if(e.hasOwnProperty("valueTime"))return r(u.default.createElement(x.default,{moment:e.valueTime}));if(e.hasOwnProperty("valueDateTime"))return r(u.default.createElement(_.default,{moment:e.valueDateTime}));if(e.hasOwnProperty("valuePeriod"))return r((0,E.default)(e.valuePeriod));if(e.hasOwnProperty("valueCodeableConcept"))return r((0,h.getPath)(e,"valueCodeableConcept.coding.0.display"));if(e.hasOwnProperty("valueQuantity")){var a=(0,h.getPath)(e,"valueQuantity.value"),o=(0,h.getPath)(e,"valueQuantity.unit");return isNaN(parseFloat(a))||(a=Math.round(100*a)/100),r(u.default.createElement("span",null,a," ",u.default.createElement("span",{className:"text-muted"},o)))}return r(u.default.createElement("span",{className:"text-muted"},"N/A"))}},{key:"render",value:function(){var e=this;return u.default.createElement(g.default,{rows:(this.props.resources||[]).map(function(e){return e.resource}),title:"Observations",groupBy:"Name",comparator:function(e,t){var n=(0,h.getPath)(e,"effectiveDateTime")||(0,h.getPath)(e,"meta.lastUpdated"),r=(0,h.getPath)(t,"effectiveDateTime")||(0,h.getPath)(t,"meta.lastUpdated");return n=n?+(0,p.default)(n):0,(r=r?+(0,p.default)(r):0)-n},cols:[{label:"Name",path:function(t){return e.getObservationLabel(t)},render:function(t){return u.default.createElement("b",null,e.getObservationLabel(t))}},{label:"Value",render:function(t){return e.renderObservation(t)}},{label:"Date",render:function(e){var t=(0,h.getPath)(e,"effectiveDateTime")||(0,h.getPath)(e,"meta.lastUpdated");return t&&(t=(0,p.default)(t).format("MM/DD/YYYY")),u.default.createElement("div",{className:"text-muted"},t||"-")}}]})}}]),t}(u.default.Component);S.propTypes={resources:f.default.arrayOf(f.default.object)},t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c),d=n(0),p=r(d),h=n(10),m=r(h),g=n(14),y=r(g),b=n(3),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(m.default,{rows:(this.props.resources||[]).map(function(e){return e.resource}),title:this.props.title,comparator:function(e,t){var n=(0,b.getPath)(e,"birthDate"),r=(0,b.getPath)(t,"birthDate");return n=n?+(0,p.default)(n):0,(r=r?+(0,p.default)(r):0)-n},cols:[{label:"Identifier",render:function(e){var t=[u.default.createElement("tr",{key:"id"},u.default.createElement("td",{className:"label-cell"},"ID"),u.default.createElement("td",null,e.id))];return Array.isArray(e.identifier)&&(t=t.concat(e.identifier.map(function(e){var t=(0,b.getPath)(e,"type.coding.0.display")||(0,b.getPath)(e,"type.text")||(0,b.getPath)(e,"type.coding.0.code")||String((0,b.getPath)(e,"system")||"").split(/\b/).pop();return t?u.default.createElement("tr",{key:t},u.default.createElement("td",{className:"label-cell"},t),u.default.createElement("td",null,e.value)):null}).filter(Boolean))),u.default.createElement("table",null,u.default.createElement("tbody",null,t))}},{label:"Name",render:b.getPatientName,defaultValue:"N/A"},{label:"Gender",path:"gender",defaultValue:"N/A"},{label:"Birth Date",path:"birthDate",defaultValue:"N/A",render:function(e){return u.default.createElement(y.default,{moment:e.birthDate})}}]})}}]),t}(u.default.Component);v.propTypes={resources:f.default.arrayOf(f.default.object),title:f.default.string},v.defaultProps={title:"Person"},t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n,r){var a=[],o=function(n){var r=(0,b.getPath)(e,n.path);if(void 0!==r){var o=n.render?n.render(e):r,i=t&&Boolean(n.nlpCodePath)&&(0,b.codeIsNLPInsight)((0,b.getPath)(e,n.nlpCodePath)),l=n.raw?n.raw(e):o,s="function"==typeof n.label?n.label(e):n.label,u=a.find(function(e){return e.value===l});return u?(u.label+=", "+s,i&&(u.isNLP=!0)):a.push({label:s,value:o,isNLP:i}),!0}return!1};return n.forEach(o),a.length||r.some(o),a.length?p.default.createElement("table",null,p.default.createElement("tbody",null,a.map(function(e,t){return p.default.createElement("tr",{key:t,className:e.isNLP?"mark":""},p.default.createElement("td",{className:"label-cell"},e.label),p.default.createElement("td",null,e.value))}))):"-"}function s(e){for(var t=["authoredOn","dateWritten","performedDateTime","recorded","performedPeriod.start","availableTime.0.availableStartTime","whenHandedOver","issued","effectiveDateTime","assertedDate","meta.lastUpdated"],n=0,r=t.length;n<r;n++){var a=(0,b.getPath)(e,t[n]);if(void 0!==a)return a}return 0}function u(e){var t=e.settings,n=e.path,r=e.children,a=t.server.url+"/"+n;return t.fhirViewer.enabled&&(a=t.fhirViewer.url+(t.fhirViewer.url.indexOf("?")>-1?"&":"?")+t.fhirViewer.param+"="+encodeURIComponent(a)),p.default.createElement("a",{onClick:function(){return window.open(a,"_blank"),!1}},r)}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(2),m=r(h),g=n(10),y=r(g),b=n(3),v=n(20),x=r(v),w=n(14),E=r(w),O=n(0),_=r(O),S=n(30),P=r(S);u.propTypes={settings:m.default.object.isRequired,path:m.default.string.isRequired,children:m.default.any};var k=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={doHighlight:!1},n.toggleHighlight=n.toggleHighlight.bind(n),n}return i(t,e),f(t,[{key:"toggleHighlight",value:function(){this.setState(function(e){return{doHighlight:!e.doHighlight}})}},{key:"determineSchema",value:function(e){var t=this,n=[];return e?(n.push({label:"Identifier",render:function(e){return l(e,t.state.doHighlight,[{path:"id",label:"ID",ellipsis:15},{path:"name",label:"Name"},{path:"identifier.0.type.coding.0.code",label:"Identifiers",render:function(e){return Array.isArray(e.identifier)?e.identifier.map(function(e){var t=(0,b.getPath)(e,"type.coding.0.code");return t?t+": "+e.value:null}).filter(Boolean).join(", "):"-"}}])}}),n.push({label:"Details",render:function(e){return l(e,t.state.doHighlight,[{path:"description.text",label:"Description"},{path:"code.text",label:"Code"},{path:"code.coding.0.display",nlpCodePath:"code",label:"Display"},{path:"medicationCodeableConcept.coding.0.display",nlpCodePath:"medicationCodeableConcept",label:"Medication"},{path:"medicationCodeableConcept.coding.0.code",nlpCodePath:"medicationCodeableConcept",label:function(e){return((0,b.getPath)(e,"medicationCodeableConcept.coding.0.system")||"").split(/\b/).pop()}},{path:"code.coding.0.code",nlpCodePath:"code",label:function(e){return((0,b.getPath)(e,"code.coding.0.system")||"").replace(/\/$/,"").split(/\//).pop()+" code"}},{path:"result.0.display",label:"Result",render:function(e){return e.result.map(function(e){return e.display||0}).filter(Boolean).join(", ")}},{label:"Status",render:function(e){return(0,b.getCodeOrConcept)(e.status)}},{label:"Clinical Status",render:function(e){return(0,b.getCodeOrConcept)(e.clinicalStatus)}},{label:"Verification Status",render:function(e){return(0,b.getCodeOrConcept)(e.verificationStatus)}},{label:"Value as String",path:"valueString"},{label:"Comment",path:"comment"},{label:"Extra Details",path:"extraDetails"},{label:"Type",path:"type",render:function(e){return Array.isArray(e.type)?e.type.map(function(e){return e.text||(0,b.getPath)(e,"coding.0.display")||""}).filter(Boolean).join(", "):String((0,b.getPath)(e,"type.coding.0.display")||(0,b.getPath)(e,"type.text")||e.type)}},{label:"Criticality",path:"criticality"},{label:"Category",path:"category",render:function(e){function t(e){return e?"string"==typeof e?e:Array.isArray(e)?e.map(t).join(", "):"object"!=(void 0===e?"undefined":c(e))?"N/A":e.text||e.display||e.code||t(e.coding):"N/A"}return t(e.category)}},{label:"Quantity",path:"quantity.value",render:function(e){return p.default.createElement("span",null,e.quantity.value,p.default.createElement("span",{className:"text-muted"}," ",e.quantity.unit||e.quantity.units||""))}},{label:"Days Supply",path:"daysSupply.value",render:function(e){return p.default.createElement("span",null,e.daysSupply.value,p.default.createElement("span",{className:"text-muted"}," ",e.daysSupply.unit||e.daysSupply.units||""))}},{label:"Medication",path:"medicationReference.reference",render:function(e){return p.default.createElement(u,{settings:t.props.settings,path:e.medicationReference.reference},e.medicationReference.reference)}}],[{path:"text.div",label:"Text",render:function(e){return p.default.createElement("span",{dangerouslySetInnerHTML:{__html:e.text.div}})}}])}}),n.push({label:"Date",render:function(e){return l(e,[{path:"authoredOn",label:"Authored On",render:function(e){return p.default.createElement(E.default,{moment:e.authoredOn})}},{path:"dateWritten",label:"Date Written",render:function(e){return p.default.createElement(E.default,{moment:e.dateWritten})}},{path:"performedDateTime",label:"Performed At",render:function(e){return p.default.createElement(E.default,{moment:e.performedDateTime})}},{path:"recorded",label:"Recorded",render:function(e){return p.default.createElement(E.default,{moment:e.recorded})}},{path:"performedPeriod",label:"Performed",render:function(e){return(0,x.default)(e.performedPeriod)}},{path:"availableTime",label:"Available Time",render:function(e){if(Array.isArray(e.availableTime))return e.availableTime.map(function(e,t){return p.default.createElement("div",{key:t},e.availableStartTime&&p.default.createElement("span",null,p.default.createElement("label",null,"from: "),p.default.createElement("span",null,e.availableStartTime," ")),e.availableEndTime&&p.default.createElement("span",null,p.default.createElement("label",null,"to: "),p.default.createElement("span",null,e.availableEndTime)))})}},{path:"whenHandedOver",label:"Handed Over",render:function(e){return p.default.createElement(E.default,{moment:e.whenHandedOver})}},{path:"issued",label:"Issued",raw:function(e){return(0,_.default)(e.issued).format("MM/DD/YYYY")},render:function(e){return p.default.createElement(E.default,{moment:e.issued})}},{path:"effectiveDateTime",label:"Effective",raw:function(e){return(0,_.default)(e.effectiveDateTime).format("MM/DD/YYYY")},render:function(e){return p.default.createElement(E.default,{moment:e.effectiveDateTime})}},{path:"assertedDate",label:"Asserted",raw:function(e){return e.assertedDate},render:function(e){return p.default.createElement(E.default,{moment:e.assertedDate})}}],[{path:"meta.lastUpdated",label:"Last Updated",raw:function(e){return e.meta.lastUpdated},render:function(e){return p.default.createElement(E.default,{moment:e.meta.lastUpdated})}}])}}),n.push({label:p.default.createElement("div",{style:{textAlign:"center"}},p.default.createElement("button",{onMouseUp:this.toggleHighlight,style:{backgroundColor:this.state.doHighlight?"#337ab7":"white",color:this.state.doHighlight?"white":"#337ab7",textAlign:"center"}},p.default.createElement("i",{className:"fa fa-lightbulb-o fas fa-bold"}))),render:function(e){return(0,b.getInsightSource)(e)!=b.InsightSource.NONE?p.default.createElement(P.default,{resource:e}):p.default.createElement("div",null)}}),n):n}},{key:"render",value:function(){var e=this.props.resources||[],t=e.length;return p.default.createElement(y.default,{rows:e.map(function(e){return e.resource}),title:t+" resource"+(1===t?"":"s")+" of type "+this.props.type,cols:this.determineSchema(e[0].resource),comparator:function(e,t){var n=s(e),r=s(t);return n=n?+(0,_.default)(n):0,(r=r?+(0,_.default)(r):0)-n}})}}]),t}(p.default.Component);k.propTypes={type:m.default.string,resources:m.default.arrayOf(m.default.object).isRequired,settings:m.default.object.isRequired},t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){var t=e.moment,n=e.format,r=void 0===n?"HH:mm":n,o=a(e,["moment","format"]);return l.default.createElement("span",o,(0,f.default)(t).format(r))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(1),l=r(i),s=n(2),u=r(s),c=n(0),f=r(c);o.propTypes={format:u.default.string,moment:u.default.oneOfType([u.default.string,u.default.instanceOf(Date),u.default.object]).isRequired}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.range,n=t.low,r=t.high;return i.default.createElement("span",null,void 0!==n&&i.default.createElement("span",null,i.default.createElement("span",{className:"text-muted"},"low: "),i.default.createElement("span",null,n)),void 0!==r&&i.default.createElement("span",null,void 0!==n&&i.default.createElement("span",null," "),i.default.createElement("span",{className:"text-muted"},"high: "),i.default.createElement("span",null,r)),void 0===r&&void 0===n&&i.default.createElement("small",{className:"text-muted"},"N/A"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(1),i=r(o),l=n(2),s=r(l);a.propTypes={range:s.default.object.isRequired}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c),d=n(11),p=n(3),h=n(43),m=r(h);n(330);var g=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props.query.error?" Error! ":" Loading... ",n=this.props.bundle,r=n&&(0,p.getBundleURL)(n,"previous"),a=n&&(0,p.getBundleURL)(n,"next");if(n&&!this.props.query.error)if(this.props.query.params._id)t="Showing the selected patients only";else{var o=n&&n.entry?n.entry.length:0;if(o){var i=+(this.props.query.offset||0)+1,l=i+o-1;t=" patient "+i+" to "+l+" ","total"in n&&(t+=" of "+n.total+" ")}else t=" No Records! "}return u.default.createElement("div",{className:"app-footer"},u.default.createElement("div",{className:"container-fluid",style:{width:"100%"}},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-3 col-sm-4 text-right"},u.default.createElement("a",{href:"#prev",onClick:function(t){t.preventDefault(),e.props.dispatch((0,d.goPrev)())},disabled:!r},u.default.createElement("i",{className:"fa fa-arrow-left"})," Prev")),u.default.createElement("div",{className:"col-xs-6 col-sm-4 text-center"},t),u.default.createElement("div",{className:"col-xs-3 col-sm-4 text-left"},u.default.createElement("a",{href:"#next",onClick:function(t){t.preventDefault(),e.props.dispatch((0,d.goNext)())},disabled:!a},"Next ",u.default.createElement("i",{className:"fa fa-arrow-right"})))),u.default.createElement(m.default,{canShowSelected:this.props.canShowSelected})))}}]),t}(u.default.Component);g.propTypes={bundle:f.default.object,query:f.default.object.isRequired,dispatch:f.default.func.isRequired,selection:f.default.object.isRequired,canShowSelected:f.default.bool},t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c);n(331);var d=n(11),p=n(21),h=r(p),m=n(239),g=r(m),y=n(221),b=r(y),v=n(238),x=r(v),w=n(3),E=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"fetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;"automatic"==this.props.settings.submitStrategy&&(this.fetchDelay&&clearTimeout(this.fetchDelay),this.fetchDelay=setTimeout(function(){h.default.dispatch((0,d.fetch)())},e))}},{key:"renderAdvancedTabContents",value:function(){return u.default.createElement("div",{className:"form-group"},u.default.createElement("p",{className:"text-warning",style:{padding:"0 5px 5px",margin:0}},u.default.createElement("i",{className:"fa fa-info-circle"})," In advanced mode, provide a query string to browse and select from a list of matching patients. ",u.default.createElement("a",{target:"_blank",href:"http://hl7.org/fhir/patient.html#search"},"More Info...")),u.default.createElement("form",{onSubmit:function(e){e.preventDefault(),h.default.dispatch((0,d.fetch)())}},u.default.createElement("div",{className:"input-group input-group-sm"},u.default.createElement("span",{className:"input-group-addon"},"/Patient?"),u.default.createElement("input",{type:"text",className:"form-control",placeholder:"Patient Search Query String",name:"query",onChange:function(e){return h.default.dispatch((0,d.setQueryString)(e.target.value))},value:this.props.query.queryString}),u.default.createElement("span",{className:"input-group-btn"},u.default.createElement("button",{className:"btn btn-warning",type:"submit"},"Go")))))}},{key:"renderDemographicsTabContents",value:function(){var e=this;return u.default.createElement("form",{onSubmit:function(e){e.preventDefault(),h.default.dispatch((0,d.fetch)())}},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"**custom**"===this.props.query.ageGroup?"col-sm-6":"col-sm-12"},u.default.createElement("div",{className:"form-group"},u.default.createElement("div",{className:"input-group"},u.default.createElement("span",{className:"input-group-addon"},u.default.createElement("small",null,"Name:")),u.default.createElement("input",{type:"text",className:"form-control input-sm",placeholder:"Search by name...",value:this.props.query.params.name||"",onChange:function(t){h.default.dispatch((0,d.setParam)({name:"name",value:t.target.value})),e.fetch()}})))),u.default.createElement("div",{className:"col-sm-6"},u.default.createElement("div",{className:"form-group"},u.default.createElement("select",{className:"form-control input-sm",onChange:function(t){h.default.dispatch((0,d.setGender)(t.target.value)),e.fetch()},value:this.props.query.gender||""},u.default.createElement("option",{value:"male"},"Males"),u.default.createElement("option",{value:"female"},"Females"),u.default.createElement("option",{value:""},"Any Gender")))),u.default.createElement("div",{className:"**custom**"===this.props.query.ageGroup?"col-sm-12":"col-sm-6"},u.default.createElement("div",{className:"form-group"},u.default.createElement(b.default,{min:this.props.query.minAge||{value:0,units:"years"},max:this.props.query.maxAge||{value:100,units:"years"},onMinChange:function(t){h.default.dispatch((0,d.setMinAge)(t)),e.fetch()},onMaxChange:function(t){h.default.dispatch((0,d.setMaxAge)(t)),e.fetch()},onGroupChange:function(t){h.default.dispatch((0,d.setAgeGroup)(t)),e.fetch()},group:this.props.query.ageGroup})))))}},{key:"renderConditionsTabContents",value:function(){var e=this;return u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-12"},u.default.createElement("div",{className:"form-group"},u.default.createElement(g.default,{tags:Object.keys(this.props.settings.server.conditions).map(function(t){var n=e.props.settings.server.conditions[t];return{key:t,label:n.description,data:n}}),onChange:function(t){var n={};t.forEach(function(e){n[e.key]=e.data}),h.default.dispatch((0,d.setConditions)(n)),e.fetch()},label:"condition code",selected:Object.keys(this.props.query.conditions)}))))}},{key:"renderTagsTabContents",value:function(){var e=this,t=this.props.query.tags||this.props.settings.server.tags.filter(function(e){return!!e.selected}).map(function(e){return!!e.key});return u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-12"},u.default.createElement("div",{className:"form-group"},u.default.createElement(g.default,{tags:this.props.settings.server.tags,selected:t,onChange:function(t){var n=Object.keys(t).map(function(e){return t[e].key});h.default.dispatch((0,d.setTags)(n)),e.fetch()},label:"tag"}))))}},{key:"render",value:function(){var e=(0,w.parseQueryString)(this.props.location.search),t="advanced"==this.props.query.queryType,n=Object.keys(this.props.query.conditions).length,r=0,a=Object.keys(this.props.query.tags).length,o=["demographics","conditions"];this.props.settings.hideTagSelector||o.push("tags");var i=e._tab||"";return-1==o.indexOf(i)&&(i="demographics"),this.props.query.gender&&(r+=1),this.props.query.params.name&&(r+=1),null===this.props.query.maxAge&&null===this.props.query.minAge||(r+=1),u.default.createElement("div",{className:"app-header"},u.default.createElement("div",{style:{flexDirection:"row"}},u.default.createElement("label",{className:"pull-right advanced-label text-warning"},"Advanced ",u.default.createElement("span",{className:"hidden-xs"},"Mode ")," ",u.default.createElement("input",{type:"checkbox",checked:t,onChange:function(e){h.default.dispatch((0,d.setQueryType)(e.target.checked?"advanced":"basic"))}})),t?u.default.createElement("ul",{className:"nav nav-tabs"}):u.default.createElement("ul",{className:"nav nav-tabs"},u.default.createElement("li",{className:t||"demographics"!=i?null:"active"},u.default.createElement("a",{href:"",onClick:function(e){e.preventDefault(),(0,w.setHashParam)("_tab","demographics")}},u.default.createElement("b",null,"Demographics"),r?u.default.createElement("span",{className:"hidden-xs"}," ",u.default.createElement("small",{className:"badge"},r)):null)),u.default.createElement("li",{className:t||"conditions"!=i?null:"active"},u.default.createElement("a",{href:"",onClick:function(e){e.preventDefault(),(0,w.setHashParam)("_tab","conditions")}},u.default.createElement("b",null,"Conditions"),n?u.default.createElement("span",{className:"hidden-xs"}," ",u.default.createElement("small",{className:"badge"},n)):null)),this.props.settings.hideTagSelector||this.props.query.params._id?null:u.default.createElement("li",{className:t||"tags"!=i?null:"active"},u.default.createElement("a",{href:"",onClick:function(e){e.preventDefault(),(0,w.setHashParam)("_tab","tags")}},u.default.createElement("b",null,"Tags"),a?u.default.createElement("span",{className:"hidden-xs"}," ",u.default.createElement("small",{className:"badge"},a)):null)))),u.default.createElement("div",{className:"tab-content"},u.default.createElement("div",{className:"tab-pane "+(t?"active":"")},this.renderAdvancedTabContents()),u.default.createElement("div",{className:"tab-pane "+(t||"demographics"!=i?"":"active")},this.renderDemographicsTabContents()),u.default.createElement("div",{className:"tab-pane "+(t||"conditions"!=i?"":"active")},this.renderConditionsTabContents()),this.props.settings.hideTagSelector||this.props.query.params._id?null:u.default.createElement("div",{className:"tab-pane "+(t||"tags"!=i?"":"active")},this.renderTagsTabContents()),t||"manual"!=this.props.settings.submitStrategy?null:u.default.createElement("div",{className:"text-right",style:{height:0}},u.default.createElement("button",{type:"button",onClick:function(){return h.default.dispatch((0,d.fetch)())},className:"btn btn-primary btn-submit"},u.default.createElement("i",{className:"fa fa-search"})," Search"))),t?null:u.default.createElement(x.default,{sort:this.props.query.sort,onChange:function(e){h.default.dispatch((0,d.setSort)(e)),h.default.dispatch((0,d.fetch)())}}))}}]),t}(u.default.Component);E.propTypes={settings:f.default.object.isRequired,query:f.default.object.isRequired,location:f.default.object.isRequired,urlParams:f.default.object.isRequired},t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c),d=n(3),p=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.resource,t=(0,d.getInsightDetails)(e),n=t.insightSource==d.InsightSource.DOCUMENT;return u.default.createElement("div",{style:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"},className:"panel panel-default"},u.default.createElement("div",{className:"panel-heading"},u.default.createElement("b",{className:"text-primary"},u.default.createElement("i",{className:"fa fa-lightbulb-o fas fa-bold",style:{paddingRight:10}}),"Insights for ",e.resourceType," ",e.id)),u.default.createElement("div",{className:"table-responsive"},u.default.createElement("table",{className:"table table-condensed table-hover table-striped table-bordered"},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",{style:{fontWeight:"bold"}},"Process Name"),u.default.createElement("td",null,t.processName)),u.default.createElement("tr",null,u.default.createElement("td",{style:{fontWeight:"bold"}},"Process Type"),u.default.createElement("td",null,t.processType)),u.default.createElement("tr",null,u.default.createElement("td",{style:{fontWeight:"bold"}},"Process Version"),u.default.createElement("td",null,t.processVersion)),u.default.createElement("tr",null,u.default.createElement("td",{style:{fontWeight:"bold"}},"Insight Source"),u.default.createElement("td",null,n?t.basedOn.replace("/"," "):t.insightSource))),n?u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",{style:{fontWeight:"bold"}},"Confidence"),u.default.createElement("td",null,100*Number(t.confidence),"%")),u.default.createElement("tr",null,u.default.createElement("td",{style:{fontWeight:"bold"}},"Covered Text"),u.default.createElement("td",null,u.default.createElement("em",null,'"',t.coveredText,'"')))):null)))}}]),t}(u.default.Component);p.PropTypes={resource:f.default.object},t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PatientDetail=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),f=n(2),d=r(f),p=n(46),h=r(p),m=n(45),g=r(m),y=n(9),b=n(13),v=r(b),x=n(28),w=n(43),E=r(w),O=n(22),_=n(21),S=r(_),P=n(11),k=n(227),N=r(k),j=n(226),C=r(j),T=n(224),A=r(T),M=n(225),D=r(M),R=n(223),I=r(R),L=n(228),q=r(L),U=n(229),F=r(U),B=n(3);n(333);var H=t.PatientDetail=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.query=P.queryBuilder.clone(),s.state={loading:!1,error:null,conditions:[],patient:{},index:0,hasNext:!1,groups:{},selectedSubCat:"",bundle:v.default.isEmptyObject(s.props.query.bundle)?null:l({},s.props.query.bundle)},s}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.fetch(this.props.match.params.index)}},{key:"componentWillReceiveProps",value:function(e){e.match.params.index!==this.props.match.params.index&&this.fetch(e.match.params.index)}},{key:"fetch",value:function(e){var t=this;if((e=(0,B.intVal)(e,-1))<0)return this.setState({error:new Error("Invalid patient index")});this.setState({loading:!0,index:e},function(){t.fetchPatient(t.props.settings.server,e).then(function(e){t.setState(l({},e,{error:null,loading:!1}))}).catch(function(e){t.setState({loading:!1,error:e})})})}},{key:"fetchPatient",value:function(e,t){var n=this;return Promise.resolve(l({},this.state)).then(function(t){return n.query.cacheId=null,n.query.offset=null,n.query.fetch(e).then(function(e){return t.bundle=e,t})}).then(function(e){return(t=(0,B.intVal)(t,-1))<0?Promise.reject("Invalid patient index"):(e.patient=(0,B.getPath)(e,"bundle.entry."+t+".resource"),e.nextURL=(0,B.getBundleURL)(e.bundle,"next"),e.hasNext=!!e.nextURL||!!e.patient&&t<e.bundle.entry.length-1,Promise.resolve(e))}).then(function(r){if(!r.patient){var a=(0,B.parseQueryString)(r.nextURL);return n.query.setOffset(a._getpages,t),n.query.fetch(e).then(function(e){return r.bundle=e,r.patient=(0,B.getPath)(r,"bundle.entry.0.resource"),r.hasNext=!!r.patient&&(n.query.limit&&n.query.limit>1?r.bundle.entry.length>1:(0,B.getBundleURL)(r.bundle,"next")),r})}return r}).then(function(e){return new Promise(function(t){n.setState(e,function(){return t(e)})})}).then(function(t){return(0,B.getAllPages)({url:e.url+"/Patient/"+t.patient.id+"/$everything?_count=500"}).then(function(e){var n={};return e.forEach(function(e){var t=(0,B.getPath)(e,"resource.resourceType")||"Other",r=t;if("Observation"==r){var a=String((0,B.getPath)(e,"resource.category.0.text")||(0,B.getPath)(e,"resource.category.coding.0.code")||(0,B.getPath)(e,"resource.category.0.coding.0.code")||"Other").toLowerCase();a=a.split(/\-+/).map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join(" "),r+=" - "+a}Array.isArray(n[r])||(n[r]=[]),n[r].push(e)}),t.groups=n,t})}).then(function(e){return Promise.resolve(e)},function(e){return Promise.reject(new Error((0,B.getErrorMessage)(e)))})}},{key:"renderPatient",value:function(){var e=this;if(this.state.error)return this.state.error+"";var t=(this.state.patient.id||"").toLowerCase(),n=t&&Object.keys(this.props.selection).find(function(e){return e.toLowerCase()==t}),r=n&&!1!==this.props.selection[n];return c.default.createElement("div",{className:"panel panel-default patient col-xs-12"},c.default.createElement("div",{className:"row"},this.state.loading?c.default.createElement(g.default,null):null,c.default.createElement("div",{className:"col-xs-2 col-sm-2 col-md-1"},c.default.createElement("div",{className:"embed-responsive"},c.default.createElement(h.default,{patient:this.state.patient,className:"embed-responsive-item",base:this.props.settings.server.url}))),c.default.createElement("div",{className:"col-xs-10 col-md-11"},c.default.createElement("div",{className:"patient-row"},c.default.createElement("div",{className:"col-xs-7 patient-name"},c.default.createElement("h3",{className:"pull-left text-primary"},(0,B.getPatientName)(this.state.patient)||(this.state.loading?"loading...":"Unknown")),r?c.default.createElement("i",{className:"label label-success pull-left"},"Selected"):null),c.default.createElement("div",{className:"col-xs-5 text-right",style:{paddingRight:0}},c.default.createElement("button",{type:"button",className:"btn btn-sm btn-"+(r?"danger":"primary"),onClick:function(){return S.default.dispatch((0,O.toggle)({id:e.state.patient.id}))}},r?"Unselect":"Select"),c.default.createElement("button",{type:"button",className:"btn btn-default btn-sm",onClick:function(){return e.fetch(e.props.match.params.index)}},c.default.createElement("i",{className:"fa fa-refresh"})," Reload"))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"Gender:"),c.default.createElement("div",{className:"col-xs-8 col-sm-3 col-lg-3 text-left"},this.state.patient.gender||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"DOB:"),c.default.createElement("div",{className:"col-xs-8 col-sm-5 col-lg-3 text-left"},this.state.patient.birthDate||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"Age:"),c.default.createElement("div",{className:"col-xs-8 col-sm-3 col-lg-3 text-left"},(0,B.getPatientAge)(this.state.patient)||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"Email"),c.default.createElement("div",{className:"col-xs-8 col-sm-5 col-lg-3 text-left"},(0,B.getPatientEmail)(this.state.patient)||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"Phone:"),c.default.createElement("div",{className:"col-xs-8 col-sm-3 col-lg-3 text-left"},(0,B.getPatientPhone)(this.state.patient)||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"Address:"),c.default.createElement("div",{className:"col-xs-8 col-sm-5 col-lg-3 text-left"},(0,B.getPatientHomeAddress)(this.state.patient)||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"ID:"),c.default.createElement("div",{className:"col-xs-8 col-sm-3 col-lg-3 text-left"},this.state.patient.id||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"MRN:"),c.default.createElement("div",{className:"col-xs-8 col-sm-5 col-lg-3 text-left"},(0,B.getPatientMRN)(this.state.patient)||(this.state.loading?"loading...":"Unknown")),this.state.patient.deceasedBoolean||this.state.patient.deceasedDateTime?c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},c.default.createElement("span",{className:"deceased-label"},"Deceased:")):null,this.state.patient.deceasedBoolean||this.state.patient.deceasedDateTime?c.default.createElement("div",{className:"col-xs-8 col-sm-5 col-lg-3 text-left"},this.state.patient.deceasedDateTime?c.default.createElement("span",null,this.state.patient.deceasedDateTime):c.default.createElement("span",null,this.state.patient.deceasedBoolean?"Yes":"No")):null))))}},{key:"renderResources",value:function(e){var t=this.state.groups[e]||[];if(!t.length)return c.default.createElement("p",{className:"text-center text-muted"},'No items of type "',e,'" found');if(0===e.indexOf("Observation"))return c.default.createElement(N.default,{resources:t});switch(e){case"Immunization":return c.default.createElement(C.default,{resources:t});case"Condition":return c.default.createElement(A.default,{resources:t});case"Encounter":return c.default.createElement(D.default,{resources:t});case"CarePlan":return c.default.createElement(I.default,{resources:t});case"Patient":case"Practitioner":case"RelatedPerson":return c.default.createElement(q.default,{resources:t,title:e});default:return c.default.createElement(F.default,{resources:t,type:e,settings:this.props.settings})}}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.groups).sort(),n=this.state.selectedSubCat;return n&&this.state.groups[n]||(n=Object.keys(this.state.groups)[0]||""),c.default.createElement("div",{className:"page patient-detail-page"},c.default.createElement("nav",{className:"navbar bg-primary navbar-fixed-top"},c.default.createElement("div",{className:"container-fluid"},c.default.createElement("div",{className:"row navigator"},c.default.createElement("div",{className:"col-xs-4 col-sm-4 col-md-3 col-lg-2"},c.default.createElement(x.Link,{to:"/patient/"+(this.state.index-1),className:"btn btn-primary btn-block",disabled:this.state.index<1},c.default.createElement("i",{className:"fa fa-chevron-left"}),c.default.createElement("b",null,"Prev",c.default.createElement("span",{className:"hidden-xs"},"ious Patient")))),c.default.createElement("div",{className:"col-xs-4 col-sm-4 col-md-6 col-lg-8 text-center"},c.default.createElement(x.Link,{className:"btn btn-block text-center",to:"/"},c.default.createElement("span",{className:"hidden-xs"},"Browse Patients"),c.default.createElement("span",{className:"visible-xs"},"Browse"))),c.default.createElement("div",{className:"col-xs-4 col-sm-4 col-md-3 col-lg-2 text-right"},c.default.createElement(x.Link,{to:"/patient/"+(this.state.index+1),className:"btn btn-primary btn-block",disabled:!this.state.hasNext},c.default.createElement("b",null,"Next",c.default.createElement("span",{className:"hidden-xs"}," Patient")),c.default.createElement("i",{className:"fa fa-chevron-right"})))))),c.default.createElement("div",{className:"container"},this.renderPatient(),t.length?c.default.createElement("div",{className:"row patient-details"},c.default.createElement("br",null),c.default.createElement("div",{className:"col-xs-12 col-sm-3"},c.default.createElement("ul",{className:"list-group"},t.map(function(t,r){return c.default.createElement("a",{href:"#",key:r,className:"list-group-item"+(t===n?" active":""),onClick:function(n){n.preventDefault(),e.setState({selectedSubCat:t})}},c.default.createElement("b",{className:"badge pull-right"},e.state.groups[t].length),c.default.createElement("b",null,t))}))),c.default.createElement("div",{className:"col-xs-12 col-sm-9"},this.renderResources(n))):this.state.loading?null:c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12 text-muted text-center"},"No additional details for this patient"))),window.opener||window.parent&&window.parent!==window?c.default.createElement("nav",{className:"navbar navbar-default navbar-fixed-bottom"},c.default.createElement("div",{className:"container-fluid",style:{width:"100%"}},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12",style:{paddingTop:8}},c.default.createElement(E.default,null))))):null)}}]),t}(c.default.Component);H.propTypes={match:d.default.object,settings:d.default.object,selection:d.default.object,query:d.default.object},t.default=(0,y.connect)(function(e){return e})(H)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PatientList=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),f=n(2),d=r(f),p=n(237),h=r(p),m=n(22),g=n(23),y=n(11),b=n(21),v=r(b),x=n(9),w=n(232),E=r(w),O=n(233),_=r(O),S=n(44),P=r(S),k=n(42),N=r(k);n(335);var j=t.PatientList=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"page"},c.default.createElement(_.default,{query:this.props.query,settings:this.props.settings,location:this.props.location,urlParams:this.props.urlParams}),c.default.createElement("div",{className:"patient-search-results"},this.renderContents()),c.default.createElement(E.default,{query:this.props.query,bundle:this.props.query.bundle,dispatch:this.props.dispatch,selection:this.props.selection,canShowSelected:!0}))}},{key:"renderContents",value:function(){return this.props.query.error?c.default.createElement(P.default,{error:this.props.query.error}):!this.props.query.bundle||this.props.query.loading?c.default.createElement("div",{className:"patient-search-loading"},c.default.createElement("i",{className:"fa fa-spinner spin"})," Loading. Please wait..."):this.props.query.bundle.entry&&this.props.query.bundle.entry.length?this.renderPatientItems():c.default.createElement(N.default,null,"No patients found to match this search criteria")}},{key:"renderPatientItems",value:function(){var e=this,t=function(t){var n=(t.resource.id||"").toLowerCase(),r=Object.keys(e.props.selection).find(function(e){return e.toLowerCase()==n});return r&&!1!==e.props.selection[r]},n=this.props.query.offset||0,r=this.props.query.bundle.entry||[];return this.props.settings.renderSelectedOnly&&(r=r.filter(t)),r.map(function(r,a){return c.default.createElement(h.default,l({},r.resource,{patient:r.resource,key:r.resource.id,index:n+a,selected:t(r),onSelectionChange:function(t){e.props.settings.renderSelectedOnly&&1===Object.keys(e.props.selection).filter(function(t){return!!e.props.selection[t]}).length?(v.default.dispatch((0,m.setAll)({})),v.default.dispatch((0,g.showSelectedOnly)(!1)),v.default.dispatch((0,y.setParam)({name:"_id",value:void 0})),v.default.dispatch((0,y.fetch)())):v.default.dispatch((0,m.toggle)(t))},query:e.props.query,settings:e.props.settings}))})}}]),t}(c.default.Component);j.propTypes={query:d.default.object,selection:d.default.object,location:d.default.object,settings:d.default.object,urlParams:d.default.object,dispatch:d.default.func},t.default=(0,x.connect)(function(e){return e})(j)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c),d=n(28),p=n(46),h=r(p),m=n(0),g=r(m),y=n(3),b=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=(0,y.getPatientAge)(this.props.patient),n=(0,y.getPatientName)(this.props);return this.props.query.params.name&&(n=(0,y.renderSearchHighlight)(n,this.props.query.params.name)),u.default.createElement(d.Link,{to:"/patient/"+this.props.index,className:"patient"+(this.props.selected?" selected":"")},u.default.createElement("div",{className:"patient-select-zone",onClick:function(t){t.stopPropagation(),t.preventDefault(),e.props.onSelectionChange(e.props.patient)}},u.default.createElement("i",{className:this.props.selected?"fa fa-check-square-o":"fa fa-square-o"})),u.default.createElement(h.default,{patient:this.props.patient,base:this.props.settings.server.url}),u.default.createElement("div",{className:"patient-info"},u.default.createElement("b",null,n," ",this.props.patient.deceasedBoolean||this.props.patient.deceasedDateTime?u.default.createElement("span",{className:"deceased-label"},"Deceased"):null),u.default.createElement("small",null,u.default.createElement("b",null,t)," old ",this.renderGender()),u.default.createElement("footer",{className:"small"},u.default.createElement("span",null,"DOB: ",this.props.patient.birthDate||"Unknown",this.props.patient.deceasedDateTime?" / DOD: "+(0,g.default)(this.props.patient.deceasedDateTime).format("YYYY-MM-DD"):null),u.default.createElement("span",null,"ID: ",this.props.patient.id||"Unknown"),u.default.createElement("span",null,"MRN: ",(0,y.getPatientMRN)(this.props.patient)||"Unknown"))),u.default.createElement("i",{className:"fa fa-angle-right"}))}},{key:"renderGender",value:function(){var e=this.props.patient.gender;return e?u.default.createElement("span",{className:e},e):null}}]),t}(u.default.Component);b.propTypes={patient:f.default.object,query:f.default.object,settings:f.default.object,selected:f.default.bool,onSelectionChange:f.default.func,index:f.default.number},b.defaultProps={onSelectionChange:function(){return 1}},t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c);n(336);var d=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"change",value:function(e,t){if("function"==typeof this.props.onChange){var n=this.parseSort(this.props.sort);t?n[e]=t:n.hasOwnProperty(e)&&delete n[e],this.props.onChange(this.compileSort(n))}}},{key:"parseSort",value:function(e){var t={};return String(e||"").split(",").filter(Boolean).forEach(function(e){var n=e.replace(/^\-/,"");t[n]=0===e.indexOf("-")?"desc":"asc"}),t}},{key:"compileSort",value:function(e){return Object.keys(e).map(function(t){return"desc"==e[t]?"-"+t:t}).join(",")}},{key:"render",value:function(){var e=this,t=this.parseSort(this.props.sort);return u.default.createElement("div",{className:"sort-widget small"},u.default.createElement("span",{className:"pull-left"},"Sort",u.default.createElement("span",{className:"hidden-xs"}," by"),":"),u.default.createElement("ul",{className:"nav nav-pills"},this.props.options.map(function(n,r){return u.default.createElement("li",{key:r,role:"presentation",className:n.value in t?"active":null},u.default.createElement("a",{href:"#",onClick:function(t){switch(t.preventDefault(),e.parseSort(e.props.sort)[n.value]){case"asc":return e.change(n.value,"desc");case"desc":return e.change(n.value,"");default:return e.change(n.value,"asc")}}},n.label||n.name,"asc"==t[n.value]?u.default.createElement("span",{className:"sort"},u.default.createElement("span",{className:"hidden-xs"}," Asc")," ",u.default.createElement("i",{className:"fa fa-sort-amount-asc"})):"desc"==t[n.value]?u.default.createElement("span",{className:"sort"},u.default.createElement("span",{className:"hidden-xs"}," Desc")," ",u.default.createElement("i",{className:"fa fa-sort-amount-desc"})):null))})))}}]),t}(u.default.Component);d.propTypes={sort:f.default.string,options:f.default.arrayOf(f.default.shape({name:f.default.string,value:f.default.string})),onChange:f.default.func},d.defaultProps={sort:"name,-birthdate",options:[{label:u.default.createElement("span",null,u.default.createElement("span",{className:"hidden-xs"},"Patient "),"ID"),name:"Patient ID",value:"_id"},{name:"Name",value:"given"},{name:"Gender",value:"gender"},{name:"DOB",value:"birthdate"}]},t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),d=r(f),p=n(2),h=r(p),m=n(13),g=r(m),y=n(3);n(337);var b=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var l=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return l.state={selected:[],open:!1,selectedIndex:-1,search:""},l.stateFromProps(l.state,l.props),l.addTag=l.addTag.bind(l),l.removeTag=l.removeTag.bind(l),l.onFocus=l.onFocus.bind(l),l.onBlur=l.onBlur.bind(l),l.onKeyDown=l.onKeyDown.bind(l),l.onInput=l.onInput.bind(l),l}return l(t,e),c(t,[{key:"stateFromProps",value:function(e,t){var n=this,r=!1;return t.search&&(e.search=t.search,r=!0),t.selected&&(e.selected=[].concat(a(t.selected.map(function(e){return n.props.tags.find(function(t){return t.key===e})||{key:e,label:e,custom:!0,data:{description:e,codes:{"":[e]}}}}))),r=!0),r}},{key:"componentWillReceiveProps",value:function(e){var t={};this.stateFromProps(t,e)&&this.setState(t)}},{key:"componentDidUpdate",value:function(){var e=this,t=this.refs.menu;if(t){var n=t.clientHeight,r=t.scrollTop,a=parseInt((0,g.default)(t).css("paddingTop"),10),o=parseInt((0,g.default)(t).css("paddingBottom"),10),i=(0,g.default)(".selected",this.refs.menu);if(i.length){var l=i[0].offsetTop,s=i[0].offsetHeight;l<r?requestAnimationFrame(function(){return e.refs.menu.scrollTop=l-a}):l+s-r>n&&requestAnimationFrame(function(){return e.refs.menu.scrollTop=l+s+o-n})}}}},{key:"onFocus",value:function(){this.setState({open:!0})}},{key:"onBlur",value:function(){this.setState({open:!1})}},{key:"onInput",value:function(e){var t=this.filterTags(e.target.value);this.setState({search:e.target.value,open:!0,selectedIndex:t.length&&-1==this.state.selectedIndex?0:this.state.selectedIndex})}},{key:"onKeyDown",value:function(e){var t=this,n=this.filterTags(this.state.search);switch(e.keyCode){case 27:this.setState({open:!1});break;case 13:e.preventDefault(),n.length<2&&this.setState({open:!1});var r=this.state.selectedIndex;r===n.length-1?this.setState({selectedIndex:r-1},function(){t.addTag(n[r])}):this.addTag(n[r]);break;case 40:e.preventDefault();var a=n.length-1;this.setState({open:!0,selectedIndex:Math.min(this.state.selectedIndex+1,a)});break;case 38:e.preventDefault(),this.state.selectedIndex>0?this.setState({selectedIndex:this.state.selectedIndex-1}):this.state.open&&this.setState({open:!1,selectedIndex:-1})}}},{key:"addTag",value:function(e){var t=this;e&&e.key&&(this.state.selected.find(function(t){return t.key===e.key})||this.setState(u({},this.state,{selected:[].concat(a(this.state.selected),[e]),search:"",open:!1,selectedIndex:-1}),function(){return t.props.onChange(t.state.selected)}))}},{key:"removeTag",value:function(e){var t=this;if(e){var n=this.state.selected.findIndex(function(t){return t.key===e});n>-1&&(this.state.selected.splice(n,1),this.setState({},function(){return t.props.onChange(t.state.selected)}))}}},{key:"filterTags",value:function(e){var t=this,n=this.props.tags.filter(function(n){if(t.state.selected.find(function(e){return n.key===e.key}))return!1;if(e){if(n.label.toLowerCase().indexOf(e.toLowerCase())>-1)return!0;if(n.data&&n.data.codes&&"object"==s(n.data.codes))for(var r in n.data.codes)return n.data.codes[r].some(function(t){return t.toLowerCase().indexOf(e.toLowerCase())>-1});return!1}return!0}).sort(function(e,t){return e.label>t.label?1:e.label<t.label?-1:0}).map(function(e){return u({},e)});return this.state.search&&n.unshift({key:this.state.search,label:this.state.search,custom:!0,data:{description:this.state.search,codes:{"":[this.state.search]}}}),n}},{key:"renderTagCode",value:function(e){if(!e||!e.data||!e.data.codes)return null;var t="",n=e.data.codes;if(n["SNOMED-CT"])t=n["SNOMED-CT"].join("|");else for(var r in n){t=n[r].join(",")+" ("+r+")";break}return this.state.search&&(t=(0,y.renderSearchHighlight)(t,this.state.search)),t?d.default.createElement("small",{key:e.key,className:"text-muted code"},t,":"):null}},{key:"renderTag",value:function(e,t){var n=this;return d.default.createElement("div",{className:"menu-item"+(this.state.selectedIndex===t?" selected":"")+(e.custom?" custom text-primary":""),key:e.key,onMouseDown:function(t){t.preventDefault(),n.addTag(e)},title:e.label},e.custom?d.default.createElement("span",null,"Search for ",d.default.createElement("b",{className:"tag custom"},this.state.search),this.props.label?" "+this.props.label:""):null,e.custom?null:this.renderTagCode(e),e.custom?null:(0,y.renderSearchHighlight)(e.label,this.state.search))}},{key:"render",value:function(){var e=this,t=this.filterTags(this.state.search).map(this.renderTag,this),n=0===t.length,r=this.state.selected.map(function(t){return d.default.createElement("div",{className:"tag"+(t.custom?" custom":""),key:t.key},t.label,d.default.createElement("i",{className:"tag-remove fa fa-times-circle",title:"Remove",onMouseDown:function(n){n.preventDefault(),n.stopPropagation(),e.removeTag(t.key)}}))}),a="Type to search";return this.props.label&&(a+=" for "+this.props.label+"s"),a+=" ...",d.default.createElement("div",{className:"tag-selector"+(this.state.open?" open":"")},r.length?d.default.createElement("div",{className:"tags"},r):null,d.default.createElement("input",{className:"input form-control input-sm",placeholder:a,onFocus:this.onFocus,onClick:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onInput:this.onInput,onChange:function(){return 1},value:this.state.search}),d.default.createElement("i",{className:"fa fa-caret-down"}),n&&!this.state.search?null:d.default.createElement("div",{className:"menu dropdown-menu",ref:"menu"},t))}}]),t}(d.default.Component);b.propTypes={tags:h.default.arrayOf(h.default.object),selected:h.default.arrayOf(h.default.string),onChange:h.default.func,search:h.default.string,label:h.default.string},b.defaultProps={onChange:function(){return 1},tags:[],selected:[],search:""},t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={server:{type:"STU-3",url:"https://r3.smarthealthit.org",conditions:{},tags:[]},hideTagSelector:!1,patientsPerPage:25,timeout:2e4,renderSelectedOnly:!1,fhirViewer:{enabled:!0,url:"http://docs.smarthealthit.org/fhir-viewer/index.html",param:"url"},outputMode:"id-list",submitStrategy:"manual"}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=n(47),c=n(3),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.__cache__={},this.__scheduled__={},this.conditions=o({},t.conditions||{}),this.minAge=null,this.maxAge=null,this.gender=t.gender||null,this.limit=t.limit||null,this.offset=null,this.params={},this.queryType=t.queryType||"default",this.queryString=t.queryString||"",this.sort=t.sort||"",this.tags=String(t.tags||"").split(/\s*,\s*/).filter(Boolean)}return i(e,[{key:"schedule",value:function(e){this.__scheduled__=o({},this.__scheduled__,e)}},{key:"hasParam",value:function(e){return this.params.hasOwnProperty(e)}},{key:"setParam",value:function(e,t){var n=this.hasParam(e);return void 0===t?n&&delete this.params[e]:this.params[e]=t,this.offset=null,this.cacheId=null,this}},{key:"setQueryType",value:function(e){return this.queryType="advanced"==e?"advanced":"default",this}},{key:"setQueryString",value:function(e){return this.queryString=String(e||""),this}},{key:"addCondition",value:function(e,t){return this.conditions[e]=t,this.__cache__.patientIDs=null,this}},{key:"removeCondition",value:function(e){return this.conditions.hasOwnProperty(e)&&(delete this.conditions[e],this.__cache__.patientIDs=null),this}},{key:"setConditions",value:function(e){return this.conditions=o({},e),this.schedule({offset:null,cacheId:null}),this.__cache__.patientIDs=null,this}},{key:"addTag",value:function(e){return-1==this.tags.findIndex(e)&&this.tags.push(e),this}},{key:"removeTag",value:function(e){var t=this.tags.findIndex(e);return t>-1&&this.tags.splice(t,1),this}},{key:"setTags",value:function(e){return this.tags=[].concat(r(e)),this.schedule({offset:null,cacheId:null}),this}},{key:"setMinAge",value:function(e){return this.minAge=e,this.schedule({offset:null,cacheId:null}),this}},{key:"setMaxAge",value:function(e){return this.maxAge=e,this.schedule({offset:null,cacheId:null}),this}},{key:"setAgeGroup",value:function(e){switch(this.ageGroup=e,this.schedule({offset:null,cacheId:null}),e){case"infant":this.setMinAge(null),this.setMaxAge({value:1,units:"years"});break;case"child":this.setMinAge({value:1,units:"years"}),this.setMaxAge({value:18,units:"years"});break;case"adult":this.setMinAge({value:18,units:"years"}),this.setMaxAge({value:65,units:"years"});break;case"elderly":this.setMinAge({value:65,units:"years"}),this.setMaxAge(null);break;default:this.setMinAge(null),this.setMaxAge(null)}return this}},{key:"setGender",value:function(e){return e!==this.gender&&(this.gender=e,this.schedule({offset:null,cacheId:null})),this}},{key:"setLimit",value:function(e){return this.limit=(0,c.intVal)(e),this.limit<1&&(this.limit=null),this}},{key:"setOffset",value:function(e,t){return this.offset=(0,c.intVal)(t),this.cacheId=e,this.offset<1&&(this.offset=null,this.cacheId=null),this}},{key:"setSort",value:function(e){return this.sort=e,this.offset=null,this.cacheId=null,this}},{key:"clone",value:function(){var t=new e;return t.conditions=o({},this.conditions),t.params=o({},this.params),t.tags=[].concat(r(this.tags)),t.setSort(this.sort).setAgeGroup(this.ageGroup).setMinAge(this.minAge).setMaxAge(this.maxAge).setGender(this.gender).setLimit(this.limit).setOffset(this.cacheId,this.offset).setQueryType(this.queryType).setQueryString(this.queryString),t}},{key:"reset",value:function(){return this.conditions={},this.minAge=null,this.maxAge=null,this.gender=null,this.limit=null,this.offset=null,this.cacheId=null,this.ageGroup=null,this.params={},this.queryString="",this.queryType="default",this.sort="",this.tags=[],this}},{key:"getState",value:function(){return{conditions:this.conditions,minAge:this.minAge,maxAge:this.maxAge,gender:this.gender,limit:this.limit,offset:this.offset,cacheId:this.cacheId,ageGroup:this.ageGroup,params:o({},this.params),queryString:this.queryString,queryType:this.queryType,sort:this.sort,tags:[].concat(r(this.tags))}}},{key:"compile",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=[];if(["minAge","maxAge","gender","limit","offset","queryType","queryString","sort"].forEach(function(t){e.__scheduled__.hasOwnProperty(t)&&(e[t]=e.__scheduled__[t],delete e.__scheduled__[t])}),this.tags.length&&!this.params._id&&n.push({name:"_tag",value:this.tags.join(",")}),"advanced"==this.queryType){var r=this.queryString.trim();if(r){var a=(0,c.parseQueryString)(r);for(var o in a)n.push({name:o,value:a[o]})}}else if(Object.keys(this.params).forEach(function(t){String(e.params[t]).trim()&&n.push({name:t,value:e.params[t]})}),this.sort&&String(this.sort).split(",").forEach(function(e){0===e.indexOf("-")?n.push({name:"_sort:desc",value:e.substring(1)}):n.push({name:"_sort:asc",value:e})}),!this.params._id){if(this.minAge){var i=(0,s.default)().subtract(this.minAge.value,this.minAge.units);n.push({name:"birthdate",value:"le"+i.format("YYYY-MM-DD")})}if(this.maxAge){var l=(0,s.default)().subtract(this.maxAge.value,this.maxAge.units);n.push({name:"birthdate",value:"ge"+l.format("YYYY-MM-DD")})}if(this.maxAge||this.minAge){var u=n.find(function(e){return"deceased"===e.name});u?u.value=!1:n.push({name:"deceased",value:!1})}this.gender&&n.push({name:"gender",value:this.gender})}return this.limit&&n.push({name:"_count",value:this.limit}),this.offset&&this.cacheId&&n.push({name:"_getpages",value:this.cacheId},{name:"_getpagesoffset",value:this.offset}),n.map(function(e){return t?encodeURIComponent(e.name)+"="+encodeURIComponent(e.value):e.name+"="+e.value}).join("&")}},{key:"hasConditions",value:function(){for(var e in this.conditions)if(this.conditions.hasOwnProperty(e))return!0;return!1}},{key:"compileConditions",value:function(){var e=this,t=[];for(var n in this.conditions)!function(n){var r=e.conditions[n],a=[];for(var o in r.codes)!function(e){var t=(u.CODE_SYSTEMS[e]||{}).url||"http://snomed.info/sct";r.codes[e].forEach(function(e){a.push(t+"|"+e)})}(o);a.length&&t.push(a.join(","))}(n);return t.length?"code="+encodeURIComponent(t.join(",")):""}},{key:"getConditionKeys",value:function(){var e=this,t=[];for(var n in this.conditions)!function(n){var r=e.conditions[n],a=[];for(var o in r.codes)!function(e){var t=(u.CODE_SYSTEMS[e]||{}).url||"http://snomed.info/sct";r.codes[e].forEach(function(e){a.push(t+"|"+e)})}(o);a.length&&t.push(a.join(","))}(n);return t}},{key:"getPatientIDs",value:function(e){var t=this;if(this.__cache__.patientIDs)return Promise.resolve(this.__cache__.patientIDs);var n=this.compileConditions();if(!n)return Promise.resolve([]);var r=this.getConditionKeys(),a={},o=function t(n){if(n.entry){n.entry.forEach(function(t){var n="DSTU-2"==e.type?t.resource.patient.reference.split("/").pop():t.resource.subject.reference.split("/").pop();a[n]||(a[n]=[]),a[n].push(((0,c.getPath)(t,"resource.code.coding.0.system")||"http://snomed.info/sct")+"|"+(0,c.getPath)(t,"resource.code.coding.0.code"))});var o=(n.link||[]).find(function(e){return"next"==e.relation});if(o)return(0,c.request)({url:o.url}).then(t)}return a=Object.keys(a).filter(function(e){return r.every(function(t){return a[e].indexOf(t)>-1})}),Promise.resolve(a)},i=[n];return i.push("DSTU-2"==e.type?"_elements=patient,code":"_elements=subject,code"),i.push("_count=500"),this.tags.length&&i.push("_tag="+encodeURIComponent(this.tags.join(","))),(0,c.request)({url:e.url+"/Condition?"+i.join("&")}).then(o).then(function(e){return t.__cache__.patientIDs=e,e})}},{key:"fetch",value:function(e){var t=this,n=this.compile();"DSTU-2"==e.type&&(n=n.replace(/\bdeceased=(true|false)\b/gi,""));var r={url:this.offset&&this.cacheId?e.url:e.url+"/Patient/_search",method:this.offset&&this.cacheId?"GET":"POST",processData:!1,data:n,headers:{accept:"application/fhir+json","content-type":"application/x-www-form-urlencoded"}};return this.getPatientIDs(e).then(function(e){if(e.length)r.data=[r.data,"_id="+encodeURIComponent(e.join(","))].filter(Boolean).join("&");else if(t.hasConditions())return Promise.reject("No patients found with the specified conditions!");return r}).then(c.request)}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){return r({},o)};var a=n(3),o=(0,a.parseQueryString)(location.hash.replace(/^.*\?/,""))},function(e,t,n){t=e.exports=n(5)(!1),t.push([e.i,".age-widget-wrap {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  white-space: nowrap;\n  padding: 0;\n  position: relative;\n  font-size: 12px;\n}\n.age-widget-wrap > * {\n  display: flex;\n  flex-grow: 1;\n  flex-shrink: 1;\n  margin: 0;\n  height: 100%;\n  font-size: 13px;\n}\n.age-widget-wrap select {\n  border: 1px solid transparent;\n  border-radius: 4px;\n  height: 100%;\n}\n.age-widget-wrap.custom > select {\n  flex-grow: 0;\n  min-width: 0;\n  flex-basis: 180px;\n}\n.age-widget-wrap input {\n  height: 100%;\n  border: 1px solid transparent;\n}\n.age-widget {\n  display: flex;\n  flex-basis: 30%;\n  min-width: 0;\n  overflow: hidden;\n  align-items: center;\n  box-shadow: 2px 1px 2px -2px #BBB inset;\n}\n.age-widget:last-of-type {\n  border-radius: 0 3px 3px 0;\n}\n.age-widget span {\n  display: flex;\n  white-space: nowrap;\n  flex-basis: 7ex;\n  flex-shrink: 0;\n  flex-grow: 0;\n  margin: 0 1ex 0 0;\n  flex-direction: column;\n  align-content: flex-end;\n  background: rgba(0, 0, 0, 0.06);\n  box-shadow: 1px 0 0 0 rgba(0, 0, 0, 0.1), 1px 0 2px 0px rgba(0, 0, 0, 0.1);\n  line-height: 2.1em;\n  padding: 0 1ex;\n  text-align: right;\n  height: 100%;\n  font-weight: 500;\n}\n.age-widget input {\n  flex-shrink: 1;\n  flex-grow: 2;\n  flex-basis: 30px;\n  display: flex;\n  margin: 0;\n  background: transparent;\n  min-width: 32px;\n  border-right: 1px dotted rgba(0, 0, 0, 0.2);\n}\n.age-widget select {\n  display: flex;\n  flex-shrink: 1;\n  flex-grow: 1;\n  flex-basis: 6em;\n  min-width: 6em;\n}\n.age-widget:hover {\n  box-shadow: 0 0 0 1px #369;\n  background: #ebf0f5;\n}\n.age-widget.invalid {\n  background: rgba(255, 0, 0, 0.1);\n  background: rgba(255, 0, 0, 0.03) repeating-linear-gradient(-45deg, rgba(255, 50, 0, 0), rgba(255, 50, 0, 0) 2.5px, rgba(255, 0, 0, 0.2) 3px, rgba(255, 50, 0, 0) 3.5px);\n  background-size: 40px 40px;\n}\n@media (max-width: 600px) {\n  .age-widget-wrap.custom {\n    flex-wrap: wrap;\n    white-space: normal;\n    height: auto;\n  }\n  .age-widget-wrap.custom > select {\n    flex-basis: 600px;\n    flex-grow: 1;\n    flex-shrink: 1;\n    width: 100%;\n    line-height: 2.1em;\n    height: 2.1em;\n  }\n  .age-widget-wrap.custom .age-widget {\n    flex-basis: 50%;\n    flex-grow: 1;\n    min-width: none;\n    box-shadow: 0px 3px 0px -2px #DDD inset;\n  }\n  .age-widget-wrap.custom .age-widget:hover {\n    box-shadow: 0 0 0 1px #369;\n    background: #ebf0f5;\n  }\n  .age-widget-wrap.custom .age-widget:last-of-type {\n    border-radius: 0 0 3px 0;\n  }\n  .age-widget-wrap.custom .age-widget ~ .age-widget span {\n    box-shadow: 1px 0 0 0 rgba(0, 0, 0, 0.1), 1px 0 0 0 rgba(0, 0, 0, 0.1) inset, 1px 0 2px 0px rgba(0, 0, 0, 0.1);\n  }\n}\n",""])},function(e,t,n){t=e.exports=n(5)(!1),t.push([e.i,"* {\n  box-sizing: border-box;\n}\nhtml {\n  height: 100%;\n  display: block;\n}\nbody {\n  background: linear-gradient(#F6F6F6, #FFF);\n  color: #444;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n  height: 100%;\n  font-family: \"Helvetica Neue\", Arial, sans-serif;\n  font-size: 14px;\n  line-height: normal;\n}\na {\n  text-decoration: none;\n  color: #369;\n}\na:disabled,\na[disabled] {\n  pointer-events: none;\n  opacity: 0.4 !important;\n}\nhr {\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.9);\n}\n*:focus {\n  outline: none !important;\n}\n.tab-content {\n  background: linear-gradient(#FFF, transparent);\n  border: 1px solid #DDD;\n  border-top: 0;\n  padding: 15px 15px 0;\n  border-radius: 0 0 5px 5px;\n}\n#overlay {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(150, 150, 150, 0.1);\n  z-index: 1000000000;\n}\n#main {\n  height: 100%;\n}\n.app {\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  height: 100%;\n}\n.page {\n  display: flex;\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.page {\n  display: flex;\n}\n.patient-search-loading {\n  display: flex;\n  flex-grow: 1;\n  align-content: center;\n  align-items: center;\n  align-self: center;\n}\n.patient-search-loading .fa {\n  margin: 1ex;\n}\n.spin {\n  animation: spin 2s linear infinite;\n}\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(359deg);\n  }\n}\n.page {\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n  height: 100%;\n}\n.pre {\n  white-space: pre;\n  font-family: monospace;\n  font-size: 12px;\n  display: block;\n}\n.search-match {\n  background: #FFCF39;\n  box-shadow: 0 0 1px rgba(255, 255, 255, 0.8) inset, 0 0 1px rgba(0, 0, 0, 0.99) !important;\n  border-radius: 2px;\n  text-shadow: 0 0 1px #FFF !important;\n  color: #000 !important;\n}\n.small.pull-left,\n.small.pull-right,\nsmall.pull-left,\nsmall.pull-right {\n  margin-top: 0.5ex;\n}\nlabel[disabled] {\n  color: rgba(0, 0, 0, 0.4);\n  cursor: not-allowed;\n  user-select: none;\n}\n.deceased-label {\n  vertical-align: baseline;\n  color: #e45f00;\n  font-size: 11px;\n  padding: 0px 4px 1px;\n  border-radius: 3px;\n  border: 1px solid #ff6a00;\n  box-shadow: 0 1px 4px 0px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(255, 255, 255, 0.31) inset;\n}\nselect,\nselect.form-control {\n  padding: 0 10px;\n  line-height: 30px;\n  font: inherit;\n  background-color: transparent;\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwMCIgaGVpZ2h0PSI1MTIiIHZpZXdCb3g9IjAgMCAxMDAwIDUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTSA5Ni4wMCw5Ni4wMGwtOTYuMDAsOTYuMDBsIDI1Ni4wMCwyNTYuMDBsIDI1Ni4wMC0yNTYuMDBsLTk2LjAwLTk2LjAwTCAyNTYuMDAsMjU2LjAwTCA5Ni4wMCw5Ni4wMHoiID48L3BhdGg+PC9zdmc+');\n  background-position: 100% 50%;\n  background-repeat: no-repeat;\n  background-size: 15px;\n  position: relative;\n  padding-right: 20px;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  -ms-appearance: none;\n}\nselect::-ms-expand,\nselect.form-control::-ms-expand {\n  display: none;\n}\n",""])},function(e,t,n){t=e.exports=n(5)(!1),t.push([e.i,".dialog-buttons button {\n  min-width: 10em;\n  margin: 0 0 0 1em;\n}\n.dialog-buttons label {\n  margin: 2px 0;\n  display: flex;\n  align-items: center;\n  min-height: 30px;\n}\n.dialog-buttons .btn-group {\n  display: inline-flex;\n  flex: 0 1 18em;\n  line-height: 1;\n  flex-direction: row;\n  box-shadow: 0 1px 1px #FFF;\n  margin: 0 6px;\n}\n.dialog-buttons .btn-group > .btn {\n  display: flex;\n  flex: 1 1 120px;\n  align-items: center;\n  align-content: center;\n  align-self: center;\n  flex-direction: column;\n  min-width: 4em;\n  margin: 0;\n  border: 1px solid #BBB;\n  padding: 4px 2ex;\n  background: linear-gradient(#F9F9F9, #E9E9E9);\n  font-weight: normal;\n  color: #666;\n  text-shadow: 0 1px 0 #FFF;\n  box-shadow: 0 1px 1px #FFF inset;\n  overflow: hidden;\n}\n.dialog-buttons .btn-group > .btn:hover {\n  background: linear-gradient(#FFF, #EEE);\n}\n.dialog-buttons .btn-group > .btn:active,\n.dialog-buttons .btn-group > .btn.active {\n  background: linear-gradient(#CCC, #DDD);\n  box-shadow: 0 1px 1px #BBB inset;\n  border-color: #999 #AAA #BBB;\n}\n.dialog-buttons .btn-group > .btn + .btn {\n  margin-left: -1px;\n}\n.dialog-buttons .btn-group > .btn:first-child {\n  border-radius: 4px 0 0 4px;\n}\n.dialog-buttons .btn-group > .btn:last-child {\n  border-radius: 0 4px 4px 0;\n}\n.dialog-buttons :disabled .btn-group,\n.dialog-buttons [disabled] .btn-group,\n.dialog-buttons .disabled .btn-group {\n  opacity: 0.5;\n  pointer-events: none;\n}\n",""])},function(e,t,n){t=e.exports=n(5)(!1),t.push([e.i,".app-footer {\n  position: relative;\n  z-index: 3;\n  display: flex;\n  flex-grow: 0;\n  flex-shrink: 0;\n  justify-content: center;\n  align-items: center;\n  box-shadow: 0 -1px 0 rgba(0, 0, 0, 0.2), 0 0 5px 0 rgba(0, 0, 0, 0.25);\n  text-shadow: 0 1px 0 #FFF;\n  background: #F0F0F0;\n  white-space: nowrap;\n}\n.app-footer .row {\n  padding: 4px 0;\n  box-shadow: 0 -1px 0 0 rgba(0, 0, 0, 0.1) inset;\n}\n.app-footer .row + .row {\n  box-shadow: 0 -1px 0 0 rgba(0, 0, 0, 0.1) inset, 0 1px 0 0 rgba(255, 255, 255, 0.9) inset;\n}\n.app-footer .row:first-child .col-xs-6 {\n  padding: 6px 0px;\n}\n.app-footer a {\n  display: block;\n  padding: 5px 0px;\n  text-align: center;\n  border-radius: 4px;\n  border: 1px solid transparent;\n}\n.app-footer a:hover {\n  background: rgba(51, 122, 183, 0.15);\n  border: 1px solid rgba(51, 122, 183, 0.29);\n}\n",""])},function(e,t,n){t=e.exports=n(5)(!1),t.push([e.i,'.app-header {\n  color: #1f3d5c;\n  padding: 5px 0 0;\n  background: linear-gradient(#DFDFDF, #EEE 5px, #e2e2e2);\n  position: relative;\n  z-index: 3;\n  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 5px 0 rgba(0, 0, 0, 0.5);\n  text-shadow: 0 1px 0 #FFF;\n  display: flex;\n  flex-shrink: 0;\n  flex-direction: column;\n}\n.app-header .nav.nav-tabs {\n  padding-left: 5px;\n}\n.app-header .nav.nav-tabs a {\n  padding: 5px 10px;\n}\n.app-header .tab-content {\n  background: linear-gradient(#FFF, #F6F6F6);\n  border: 0;\n  border-bottom: 1px solid #BBB;\n  padding: 5px 5px 0;\n  border-radius: 0;\n  font-size: small;\n  box-shadow: 0 2px 1px -1px rgba(0, 0, 0, 0.1);\n}\n.app-header .badge {\n  text-shadow: 0 0 1px #FFF;\n  background: rgba(0, 0, 0, 0.08);\n  color: #444;\n  font-weight: 400;\n  box-shadow: 0 0 0.5px 0 rgba(0, 0, 0, 0.2) inset;\n}\n.app-header .advanced-label {\n  margin: 7px 6px 0 0;\n}\n.app-header .advanced-label input[type="checkbox"] {\n  margin: 0;\n  vertical-align: middle;\n}\n.app-header .form-group {\n  margin-bottom: 5px;\n}\n.app-header label,\n.app-header .alert {\n  margin-bottom: 3px;\n}\n.app-header .alert {\n  padding: 5px 10px;\n}\n.app-header .btn-submit {\n  margin: 4px 5px 0 auto;\n  padding: 3px 8px;\n  box-shadow: -13px 3px 0px -6px #e3e3e3, 13px 3px 0px -6px #e3e3e3, 0px 1px 0px 2px #e3e3e3, 0 2px 0 2px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.4), 0px 1px 1px -1px #FFF inset, 0px -17px 0px -5px rgba(0, 0, 0, 0.05) inset;\n  border-radius: 30px;\n  text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25), 0 0 1px rgba(0, 0, 0, 0.5);\n  border-color: rgba(0, 0, 0, 0.5);\n  position: relative;\n  z-index: 100000000;\n  min-width: 10%;\n}\n',""])},function(e,t,n){t=e.exports=n(5)(!1),t.push([e.i,".loader {\n  background: rgba(255, 255, 255, 0.5);\n  text-align: center;\n  position: absolute;\n  z-index: 2;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  border-radius: inherit;\n}\n.loader div {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  font-size: 18px;\n  transform: translate(-50%, -50%);\n  background: #FFF;\n  border-radius: 5px;\n  padding: 1ex 2em;\n  box-shadow: 0 0 1px 0px rgba(0, 0, 0, 0.5), 0 0 15px 1px rgba(0, 0, 0, 0.15);\n}\n",""])},function(e,t,n){t=e.exports=n(5)(!1),t.push([e.i,'.patient-detail-page {\n  overflow: auto;\n  padding: 65px 0 50px;\n  display: block;\n  -webkit-overflow-scrolling: touch;\n}\n.patient-detail-page > .container {\n  width: 100%;\n}\n.patient-detail-page .navigator {\n  color: #FFF;\n}\n.patient-detail-page .navigator a {\n  white-space: nowrap;\n  padding: 8px 15px;\n  margin: 5px 0;\n  color: #FFF;\n}\n.patient-detail-page .navigator a:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n.patient-detail-page .navigator .fa {\n  margin: 0 5px;\n}\n.patient-detail-page .embed-responsive {\n  padding-bottom: 100%;\n}\n.patient-detail-page .page-header {\n  margin: 0;\n  padding-bottom: 1.5ex;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n}\n.patient-detail-page .patient {\n  background: transparent;\n  padding: 0;\n  border: 0;\n  box-shadow: none;\n  position: relative;\n}\n.patient-detail-page .patient .text-left {\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.1);\n}\n.patient-detail-page .patient-row {\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 3px;\n  margin-bottom: 5px;\n  padding: 5px;\n}\n.patient-detail-page .patient-row:after {\n  content: "";\n  display: table;\n  clear: both;\n}\n.patient-detail-page .patient-row ~ .row > div {\n  padding: 3px 5px;\n}\n.patient-detail-page .patient-row h3 {\n  margin: 0;\n  line-height: 1.45em;\n}\n.patient-detail-page .patient-row .label {\n  margin: 8px 0 0 12px;\n  font-size: 13px;\n}\n.patient-detail-page .patient-row .btn {\n  min-width: 7em;\n  margin: 2px;\n}\n.patient-detail-page .patient-image-wrap {\n  margin-right: 1ex;\n}\n.patient-detail-page .patient-name {\n  font-size: 24px;\n}\n.patient-detail-page td,\n.patient-detail-page th {\n  font-size: 13px;\n  line-height: 16px;\n}\n.patient-detail-page td .text-muted,\n.patient-detail-page th .text-muted {\n  font-weight: 400;\n}\n.patient-detail-page td b,\n.patient-detail-page th b {\n  font-weight: 500;\n}\n.patient-detail-page td label,\n.patient-detail-page th label {\n  margin-bottom: 0;\n}\n.patient-detail-page td td,\n.patient-detail-page th td {\n  vertical-align: top;\n  font-size: 12px;\n  line-height: 16px;\n}\n.patient-detail-page td .label-cell,\n.patient-detail-page th .label-cell {\n  color: #888;\n  white-space: nowrap;\n  text-align: right;\n  font-weight: 400;\n  padding-right: 1ex;\n}\n.patient-detail-page td .label-cell:after,\n.patient-detail-page th .label-cell:after {\n  content: ": ";\n}\n.patient-detail-page td {\n  font-weight: 500;\n}\n.patient-detail-page th {\n  font-weight: 700;\n}\n.patient-detail-page thead th .glyphicon,\n.patient-detail-page thead th .fa {\n  text-shadow: 0 1px 2px #FFF, 0 0 0px #214b6f;\n  color: rgba(51, 122, 183, 0.3);\n}\n.patient-detail-page .patient-details {\n  white-space: normal;\n  word-wrap: break-word;\n}\n.patient-detail-page .patient-details .badge {\n  opacity: 0.75;\n  margin: 0 0 0 2px;\n}\n.patient-detail-page .patient-details table a {\n  white-space: normal;\n  word-break: break-all;\n  word-wrap: break-word;\n}\n.patient-detail-page .patient-details .panel-heading {\n  text-shadow: 0 1px 0 #FFF;\n}\n.patient-detail-page .list-group-item {\n  padding-top: 7px;\n  padding-bottom: 7px;\n}\n.patient-detail-page .group-header {\n  cursor: pointer;\n  background: linear-gradient(90deg, #ebf2f8, #f5f8fb);\n  text-indent: 0;\n}\n.patient-detail-page .group-header .glyphicon-triangle-bottom {\n  position: relative;\n  top: 2px;\n}\n.patient-detail-page .group-header ~ tr > td:first-child {\n  text-indent: 17px;\n}\n.patient-detail-page .group-clear + tr > td:first-child {\n  text-indent: 0;\n}\n.patient-detail-page .group-clear + tr > td:first-child:before {\n  content: "\\E250";\n  position: relative;\n  top: 1px;\n  display: inline-block;\n  font-family: \'Glyphicons Halflings\';\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  margin-right: 3px;\n  opacity: 0.3;\n}\n.patient-detail-page .table-responsive {\n  border: none !important;\n}\n',""])},function(e,t,n){t=e.exports=n(5)(!1),t.push([e.i,".patient-image-wrap {\n  height: 80px;\n  width: 80px;\n  background: #F6F6F6;\n  border-radius: 3px;\n  text-align: center;\n  position: relative;\n  box-shadow: 0 0 0.5px 0 rgba(0, 0, 0, 0.5) inset, 0 0 1px 1px #FFF;\n  background-size: cover;\n  background-position: center;\n  flex-shrink: 0;\n  flex-grow: 0;\n}\n",""])},function(e,t,n){t=e.exports=n(5)(!1),t.push([e.i,".patient-search-results {\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n  background: #FFF;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n}\n.patient-search-results .male {\n  color: #369;\n}\n.patient-search-results .female {\n  color: #936;\n}\n.patient-search-results .patient {\n  position: relative;\n  padding: 1ex;\n  cursor: pointer;\n  flex-flow: 0;\n  flex-shrink: 0;\n  align-items: center;\n  display: flex;\n  transition: background 0.1s;\n  color: #444;\n  text-decoration: none;\n  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.85) inset, 0 -1px 0 rgba(0, 0, 0, 0.15) inset;\n}\n.patient-search-results .patient:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n.patient-search-results .patient .patient-select-zone {\n  display: inline-block;\n  vertical-align: middle;\n  height: 54px;\n  line-height: 54px;\n  width: 30px;\n  border-radius: 3px;\n  text-align: center;\n  color: #369;\n  min-width: 30px;\n}\n.patient-search-results .patient .patient-select-zone:hover {\n  background: rgba(51, 102, 153, 0.1);\n}\n.patient-search-results .patient .fa-angle-right {\n  opacity: 0.5;\n  font-size: 20px;\n  display: flex;\n  flex-basis: 1em;\n}\n.patient-search-results .patient .patient-image-wrap {\n  height: 54px;\n  width: 54px;\n  margin: 0 1ex;\n}\n.patient-search-results .patient .patient-info {\n  flex-grow: 1;\n}\n.patient-search-results .patient .patient-info > b {\n  font-size: 16px;\n  line-height: 1;\n  display: block;\n  margin-bottom: 2px;\n}\n.patient-search-results .patient .patient-info small {\n  opacity: 0.7;\n  display: block;\n}\n.patient-search-results .patient .patient-info footer {\n  opacity: 0.7;\n  display: flex;\n  flex-direction: row;\n  margin-top: 5px;\n}\n.patient-search-results .patient .patient-info footer > span {\n  display: flex;\n  flex-basis: 14em;\n  flex-grow: 1;\n}\n.patient-search-results .patient .patient-info footer > span + span {\n  margin-left: 2em;\n}\n.patient-search-results .patient.selected {\n  background: #369;\n  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.05) inset, 0 -1px 0 rgba(0, 0, 0, 0.15) inset;\n  text-shadow: 0 0 1px #000;\n}\n.patient-search-results .patient.selected,\n.patient-search-results .patient.selected * {\n  color: #FFF;\n}\n.patient-search-results .patient.selected .patient-image-wrap {\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.3), 0 0 0 0.5px rgba(255, 255, 255, 0.5) inset;\n}\n.patient-search-results .patient.selected .patient-select-zone:hover {\n  background: rgba(255, 255, 255, 0.07);\n}\n.patient-search-results .patient.selected:hover {\n  background: #2f5e8e;\n}\n@media (max-width: 480px) {\n  .patient-search-results .patient .patient-info footer span + span {\n    display: none;\n  }\n}\n",""])},function(e,t,n){t=e.exports=n(5)(!1),t.push([e.i,".sort-widget {\n  padding: 0 5px;\n  float: left;\n  width: 100%;\n}\n.sort-widget > span {\n  padding: 6px 1ex 0 0;\n  font-weight: bold;\n}\n.sort-widget .nav.nav-pills li {\n  margin: 3px 3px 3px 0;\n}\n.sort-widget .nav.nav-pills li a {\n  padding: 4px 8px;\n}\n.sort-widget .nav.nav-pills li a .sort {\n  opacity: 0.6;\n}\n.sort-widget .nav.nav-pills li.active a,\n.sort-widget .nav.nav-pills li:hover a,\n.sort-widget .nav.nav-pills li:active a,\n.sort-widget .nav.nav-pills li a:focus {\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.2) inset;\n}\n.sort-widget .nav.nav-pills li.active a {\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.3);\n}\n",""])},function(e,t,n){t=e.exports=n(5)(!1),t.push([e.i,'.tag-selector {\n  position: relative;\n  display: block;\n  width: 100%;\n  color: #000;\n  min-width: 200px;\n  font-size: small;\n}\n.tag-selector .tags {\n  margin-bottom: 4px;\n}\n.tag-selector input {\n  padding-right: 24px;\n}\n.tag-selector .tag {\n  margin: 1px 6px 1px 0px;\n  padding: 3px 26px 3px 6px;\n  background: #DC9;\n  box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.5) inset;\n  border-radius: 3px;\n  color: #520;\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.3);\n  display: inline-block;\n  position: relative;\n  font-weight: 500;\n  line-height: 1.2;\n  font-size: 12px;\n  cursor: default;\n}\n.tag-selector .tag:last-of-type {\n  margin-right: 0;\n}\n.tag-selector .tag .tag-remove {\n  position: absolute;\n  top: 4px;\n  right: 5px;\n  color: rgba(0, 0, 0, 0.4);\n  text-shadow: none;\n  opacity: 0.6;\n}\n.tag-selector .tag:hover {\n  background-color: #d7c286;\n}\n.tag-selector .tag:hover .tag-remove {\n  opacity: 0.5;\n}\n.tag-selector .tag:hover .tag-remove:hover {\n  opacity: 1;\n  color: #900;\n}\n.tag-selector .tag.custom {\n  background: #adc2d6;\n  color: #19334d;\n}\n.tag-selector .tag.custom:hover {\n  background-color: #9cb5ce;\n}\n.tag-selector .menu {\n  padding: 4px;\n  top: 100%;\n  width: 100%;\n  text-align: left;\n  max-height: 50vh;\n  overflow: auto;\n  z-index: 10000000000;\n}\n.tag-selector .menu-item {\n  padding: 5px 10px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  cursor: default;\n}\n.tag-selector .menu-item small {\n  line-height: 1.4;\n  font-weight: 400;\n}\n.tag-selector .menu-item .code {\n  width: 110px;\n  display: inline-block;\n  text-align: right;\n  padding-right: 1ex;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  float: left;\n  margin: 1px 0 -1px;\n}\n.tag-selector .menu-item:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n.tag-selector .menu-item.selected {\n  color: #FFF;\n  background: #369;\n  text-shadow: 0 0 1px #000000;\n}\n.tag-selector .menu-item.selected small {\n  color: rgba(255, 255, 255, 0.6);\n  text-shadow: none;\n}\n.tag-selector .menu-item.selected .tag.custom {\n  box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.5);\n}\n.tag-selector .menu-item.custom {\n  font-weight: bold;\n  cursor: pointer;\n  padding: 3px 10px;\n}\n.tag-selector .menu-item.custom + .menu-item {\n  position: relative;\n  overflow: visible;\n  margin-top: 9px;\n}\n.tag-selector .menu-item.custom + .menu-item:before {\n  content: "";\n  display: block;\n  height: 1px;\n  background: #CCC;\n  position: absolute;\n  top: -5px;\n  left: 0;\n  right: 0;\n}\n.tag-selector .menu-item.custom .tag {\n  margin: 0 1px;\n  padding: 3px 6px;\n  line-height: 1;\n}\n.tag-selector.open {\n  outline: none;\n}\n.tag-selector .fa.fa-caret-down {\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  pointer-events: none;\n}\n',""])},function(e,t,n){"use strict";/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
e.exports=function(e,t,n){for(var r in e)if(!1===t.call(n,e[r],r,e))break}},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e){return"/"===e.charAt(0)?e:"/"+e}function i(e){return"/"===e.charAt(0)?e.substr(1):e}function l(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}function s(e,t){return l(e,t)?e.substr(t.length):e}function u(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function c(e){var t=e||"/",n="",r="",a=t.indexOf("#");-1!==a&&(r=t.substr(a),t=t.substr(0,a));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}function f(e){var t=e.pathname,n=e.search,r=e.hash,a=t||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:"#"+r),a}function d(e,t,n,r){var o;"string"==typeof e?(o=c(e)).state=t:(void 0===(o=a({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=j(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function p(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&C(e.state,t.state)}function h(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,a){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,a):a(!0):a(!1!==o)}else a(!0)},appendListener:function(e){function n(){r&&e.apply(void 0,arguments)}var r=!0;return t.push(n),function(){r=!1,t=t.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}function m(e,t){t(window.confirm(e))}function g(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}function y(){return-1===window.navigator.userAgent.indexOf("Trident")}function b(){return-1===window.navigator.userAgent.indexOf("Firefox")}function v(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}function x(){try{return window.history.state||{}}catch(e){return{}}}function w(e){function t(e){var t=e||{},n=t.key,r=t.state,a=window.location,o=a.pathname+a.search+a.hash;return I&&(o=s(o,I)),d(o,r,n)}function n(){return Math.random().toString(36).substr(2,R)}function r(e){a(G,e),G.length=E.length,L.notifyListeners(G.location,G.action)}function i(e){v(e)||c(t(e.state))}function l(){c(t(x()))}function c(e){q?(q=!1,r()):L.confirmTransitionTo(e,"POP",j,function(t){t?r({action:"POP",location:e}):function(e){var t=G.location,n=F.indexOf(t.key);-1===n&&(n=0);var r=F.indexOf(e.key);-1===r&&(r=0);var a=n-r;a&&(q=!0,b(a))}(e)})}function p(e){return I+f(e)}function b(e){E.go(e)}function w(e){1===(B+=e)&&1===e?(window.addEventListener(M,i),_&&window.addEventListener(D,l)):0===B&&(window.removeEventListener(M,i),_&&window.removeEventListener(D,l))}void 0===e&&(e={}),A||T(!1);var E=window.history,O=g(),_=!y(),S=e,P=S.forceRefresh,k=void 0!==P&&P,N=S.getUserConfirmation,j=void 0===N?m:N,C=S.keyLength,R=void 0===C?6:C,I=e.basename?u(o(e.basename)):"",L=h(),q=!1,U=t(x()),F=[U.key],B=0,H=!1,G={length:E.length,action:"POP",location:U,createHref:p,push:function(e,t){var a=d(e,t,n(),G.location);L.confirmTransitionTo(a,"PUSH",j,function(e){if(e){var t=p(a),n=a.key,o=a.state;if(O)if(E.pushState({key:n,state:o},null,t),k)window.location.href=t;else{var i=F.indexOf(G.location.key),l=F.slice(0,i+1);l.push(a.key),F=l,r({action:"PUSH",location:a})}else window.location.href=t}})},replace:function(e,t){var a="REPLACE",o=d(e,t,n(),G.location);L.confirmTransitionTo(o,a,j,function(e){if(e){var t=p(o),n=o.key,i=o.state;if(O)if(E.replaceState({key:n,state:i},null,t),k)window.location.replace(t);else{var l=F.indexOf(G.location.key);-1!==l&&(F[l]=o.key),r({action:a,location:o})}else window.location.replace(t)}})},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},block:function(e){void 0===e&&(e=!1);var t=L.setPrompt(e);return H||(w(1),H=!0),function(){return H&&(H=!1,w(-1)),t()}},listen:function(e){var t=L.appendListener(e);return w(1),function(){w(-1),t()}}};return G}function E(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function O(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function _(e){window.location.hash=e}function S(e){window.location.replace(E(window.location.href)+"#"+e)}function P(e){function t(){var e=N(O());return w&&(e=s(e,w)),d(e)}function n(e){a(H,e),H.length=c.length,j.notifyListeners(H.location,H.action)}function r(){var e=O(),r=k(e);if(e!==r)S(r);else{var a=t(),o=H.location;if(!C&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(o,a))return;if(M===f(a))return;M=null,function(e){C?(C=!1,n()):j.confirmTransitionTo(e,"POP",y,function(t){t?n({action:"POP",location:e}):function(e){var t=H.location,n=U.lastIndexOf(f(t));-1===n&&(n=0);var r=U.lastIndexOf(f(e));-1===r&&(r=0);var a=n-r;a&&(C=!0,i(a))}(e)})}(a)}}function i(e){c.go(e)}function l(e){1===(F+=e)&&1===e?window.addEventListener(R,r):0===F&&window.removeEventListener(R,r)}void 0===e&&(e={}),A||T(!1);var c=window.history,p=(b(),e),g=p.getUserConfirmation,y=void 0===g?m:g,v=p.hashType,x=void 0===v?"slash":v,w=e.basename?u(o(e.basename)):"",P=I[x],k=P.encodePath,N=P.decodePath,j=h(),C=!1,M=null,D=O(),L=k(D);D!==L&&S(L);var q=t(),U=[f(q)],F=0,B=!1,H={length:c.length,action:"POP",location:q,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=E(window.location.href)),n+"#"+k(w+f(e))},push:function(e,t){var r=d(e,void 0,void 0,H.location);j.confirmTransitionTo(r,"PUSH",y,function(e){if(e){var t=f(r),a=k(w+t);if(O()!==a){M=t,_(a);var o=U.lastIndexOf(f(H.location)),i=U.slice(0,o+1);i.push(t),U=i,n({action:"PUSH",location:r})}else n()}})},replace:function(e,t){var r="REPLACE",a=d(e,void 0,void 0,H.location);j.confirmTransitionTo(a,r,y,function(e){if(e){var t=f(a),o=k(w+t);O()!==o&&(M=t,S(o));var i=U.indexOf(f(H.location));-1!==i&&(U[i]=t),n({action:r,location:a})}})},go:i,goBack:function(){i(-1)},goForward:function(){i(1)},block:function(e){void 0===e&&(e=!1);var t=j.setPrompt(e);return B||(l(1),B=!0),function(){return B&&(B=!1,l(-1)),t()}},listen:function(e){var t=j.appendListener(e);return l(1),function(){l(-1),t()}}};return H}function k(e,t,n){return Math.min(Math.max(e,t),n)}function N(e){function t(e){a(x,e),x.length=x.entries.length,g.notifyListeners(x.location,x.action)}function n(){return Math.random().toString(36).substr(2,m)}function r(e){var n=k(x.index+e,0,x.entries.length-1),r=x.entries[n];g.confirmTransitionTo(r,"POP",i,function(e){e?t({action:"POP",location:r,index:n}):t()})}void 0===e&&(e={});var o=e,i=o.getUserConfirmation,l=o.initialEntries,s=void 0===l?["/"]:l,u=o.initialIndex,c=void 0===u?0:u,p=o.keyLength,m=void 0===p?6:p,g=h(),y=k(c,0,s.length-1),b=s.map(function(e){return d(e,void 0,"string"==typeof e?n():e.key||n())}),v=f,x={length:b.length,action:"POP",location:b[y],index:y,entries:b,createHref:v,push:function(e,r){var a=d(e,r,n(),x.location);g.confirmTransitionTo(a,"PUSH",i,function(e){if(e){var n=x.index+1,r=x.entries.slice(0);r.length>n?r.splice(n,r.length-n,a):r.push(a),t({action:"PUSH",location:a,index:n,entries:r})}})},replace:function(e,r){var a="REPLACE",o=d(e,r,n(),x.location);g.confirmTransitionTo(o,a,i,function(e){e&&(x.entries[x.index]=o,t({action:a,location:o}))})},go:r,goBack:function(){r(-1)},goForward:function(){r(1)},canGo:function(e){var t=x.index+e;return 0<=t&&t<x.entries.length},block:function(e){return void 0===e&&(e=!1),g.setPrompt(e)},listen:function(e){return g.appendListener(e)}};return x}Object.defineProperty(t,"__esModule",{value:!0});var j=r(n(215)),C=r(n(218));n(217);var T=r(n(216)),A=!("undefined"==typeof window||!window.document||!window.document.createElement),M="popstate",D="hashchange",R="hashchange",I={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+i(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:i,decodePath:o},slash:{encodePath:o,decodePath:o}};t.createBrowserHistory=w,t.createHashHistory=P,t.createMemoryHistory=N,t.createLocation=d,t.locationsAreEqual=p,t.parsePath=c,t.createPath=f},function(e,t,n){"use strict";n(258)("createHashHistory"),e.exports=n(257).createHashHistory},function(e,t,n){"use strict";e.exports=n(255)},function(e,t,n){"use strict";var r=function(){};e.exports=function(e){r('Please use `require("history").%s` instead of `require("history/%s")`. Support for the latter will be removed in the next major release.',[e,e])}},,function(e,t,n){"use strict";/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var r=n(261);e.exports=function(e){return r(e)||"function"==typeof e||Array.isArray(e)}},function(e,t,n){"use strict";function r(e){return!0===a(e)&&"[object Object]"===Object.prototype.toString.call(e)}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var a=n(263);e.exports=function(e){var t,n;return!1!==r(e)&&("function"==typeof(t=e.constructor)&&(n=t.prototype,!1!==r(n)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},,function(e,t,n){"use strict";/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},function(e,t,n){var r=t;r.parse=function(){"use strict";var e,t,n,r,a,o,i={"'":"'",'"':'"',"\\":"\\","/":"/","\n":"",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},l=[" ","\t","\r","\n","\v","\f"," ","\ufeff"],s=function(e){return""===e?"EOF":"'"+e+"'"},u=function(r){var o=new SyntaxError;throw o.message=r+" at line "+t+" column "+n+" of the JSON5 data. Still to read: "+JSON.stringify(a.substring(e-1,e+19)),o.at=e,o.lineNumber=t,o.columnNumber=n,o},c=function(o){return o&&o!==r&&u("Expected "+s(o)+" instead of "+s(r)),r=a.charAt(e),e++,n++,("\n"===r||"\r"===r&&"\n"!==f())&&(t++,n=0),r},f=function(){return a.charAt(e)},d=function(){var e=r;for("_"!==r&&"$"!==r&&(r<"a"||r>"z")&&(r<"A"||r>"Z")&&u("Bad identifier as unquoted key");c()&&("_"===r||"$"===r||r>="a"&&r<="z"||r>="A"&&r<="Z"||r>="0"&&r<="9");)e+=r;return e},p=function(){var e,t="",n="",a=10;if("-"!==r&&"+"!==r||(t=r,c(r)),"I"===r)return e=v(),("number"!=typeof e||isNaN(e))&&u("Unexpected word for number"),"-"===t?-e:e;if("N"===r)return e=v(),isNaN(e)||u("expected word to be NaN"),e;switch("0"===r&&(n+=r,c(),"x"===r||"X"===r?(n+=r,c(),a=16):r>="0"&&r<="9"&&u("Octal literal")),a){case 10:for(;r>="0"&&r<="9";)n+=r,c();if("."===r)for(n+=".";c()&&r>="0"&&r<="9";)n+=r;if("e"===r||"E"===r)for(n+=r,c(),"-"!==r&&"+"!==r||(n+=r,c());r>="0"&&r<="9";)n+=r,c();break;case 16:for(;r>="0"&&r<="9"||r>="A"&&r<="F"||r>="a"&&r<="f";)n+=r,c()}if(e="-"===t?-n:+n,isFinite(e))return e;u("Bad number")},h=function(){var e,t,n,a,o="";if('"'===r||"'"===r)for(n=r;c();){if(r===n)return c(),o;if("\\"===r)if(c(),"u"===r){for(a=0,t=0;t<4&&(e=parseInt(c(),16),isFinite(e));t+=1)a=16*a+e;o+=String.fromCharCode(a)}else if("\r"===r)"\n"===f()&&c();else{if("string"!=typeof i[r])break;o+=i[r]}else{if("\n"===r)break;o+=r}}u("Bad string")},m=function(){"/"!==r&&u("Not an inline comment");do{if(c(),"\n"===r||"\r"===r)return void c()}while(r)},g=function(){"*"!==r&&u("Not a block comment");do{for(c();"*"===r;)if(c("*"),"/"===r)return void c("/")}while(r);u("Unterminated block comment")},y=function(){"/"!==r&&u("Not a comment"),c("/"),"/"===r?m():"*"===r?g():u("Unrecognized comment")},b=function(){for(;r;)if("/"===r)y();else{if(!(l.indexOf(r)>=0))return;c()}},v=function(){switch(r){case"t":return c("t"),c("r"),c("u"),c("e"),!0;case"f":return c("f"),c("a"),c("l"),c("s"),c("e"),!1;case"n":return c("n"),c("u"),c("l"),c("l"),null;case"I":return c("I"),c("n"),c("f"),c("i"),c("n"),c("i"),c("t"),c("y"),1/0;case"N":return c("N"),c("a"),c("N"),NaN}u("Unexpected "+s(r))},x=function(){var e=[];if("["===r)for(c("["),b();r;){if("]"===r)return c("]"),e;if(","===r?u("Missing array element"):e.push(o()),b(),","!==r)return c("]"),e;c(","),b()}u("Bad array")},w=function(){var e,t={};if("{"===r)for(c("{"),b();r;){if("}"===r)return c("}"),t;if(e='"'===r||"'"===r?h():d(),b(),c(":"),t[e]=o(),b(),","!==r)return c("}"),t;c(","),b()}u("Bad object")};return o=function(){switch(b(),r){case"{":return w();case"[":return x();case'"':case"'":return h();case"-":case"+":case".":return p();default:return r>="0"&&r<="9"?p():v()}},function(i,l){var s;return a=String(i),e=0,t=1,n=1,r=" ",s=o(),b(),r&&u("Syntax error"),"function"==typeof l?function e(t,n){var r,a,o=t[n];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(a=e(o,r),void 0!==a?o[r]=a:delete o[r]);return l.call(t,n,o)}({"":s},""):s}}(),r.stringify=function(e,t,n){function a(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"_"===e||"$"===e}function o(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||"_"===e||"$"===e}function i(e){if("string"!=typeof e)return!1;if(!o(e[0]))return!1;for(var t=1,n=e.length;t<n;){if(!a(e[t]))return!1;t++}return!0}function l(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function s(e){return"[object Date]"===Object.prototype.toString.call(e)}function u(e){for(var t=0;t<m.length;t++)if(m[t]===e)throw new TypeError("Converting circular structure to JSON")}function c(e,t,n){if(!e)return"";e.length>10&&(e=e.substring(0,10));for(var r=n?"":"\n",a=0;a<t;a++)r+=e;return r}function f(e){return g.lastIndex=0,g.test(e)?'"'+e.replace(g,function(e){var t=y[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function d(e,t,n){var r,a,o=p(e,t,n);switch(o&&!s(o)&&(o=o.valueOf()),typeof o){case"boolean":return o.toString();case"number":return isNaN(o)||!isFinite(o)?"null":o.toString();case"string":return f(o.toString());case"object":if(null===o)return"null";if(l(o)){u(o),r="[",m.push(o);for(var g=0;g<o.length;g++)a=d(o,g,!1),r+=c(h,m.length),r+=null===a||void 0===a?"null":a,g<o.length-1?r+=",":h&&(r+="\n");m.pop(),o.length&&(r+=c(h,m.length,!0)),r+="]"}else{u(o),r="{";var y=!1;m.push(o);for(var b in o)if(o.hasOwnProperty(b)){var v=d(o,b,!1);n=!1,void 0!==v&&null!==v&&(r+=c(h,m.length),y=!0,t=i(b)?b:f(b),r+=t+":"+(h?" ":"")+v+",")}m.pop(),r=y?r.substring(0,r.length-1)+c(h,m.length)+"}":"{}"}return r;default:return}}if(t&&"function"!=typeof t&&!l(t))throw new Error("Replacer must be a function or an array");var p=function(e,n,r){var a=e[n];return a&&a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON()),"function"==typeof t?t.call(e,n,a):t?r||l(e)||t.indexOf(n)>=0?a:void 0:a};r.isWord=i;var h,m=[];n&&("string"==typeof n?h=n:"number"==typeof n&&n>=0&&(h=c(" ",n,!0)));var g=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,y={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},b={"":e};return void 0===e?p(b,"",!0):d(b,"",!0)}},,,,,,,,,,function(e,t,n){"use strict";function r(e,t){for(var n=arguments.length,r=0;++r<n;){var i=arguments[r];o(i)&&s(i,a,e)}return e}function a(e,t){if(i(t)){var n=this[t];o(e)&&o(n)?r(n,e):this[t]=e}}function o(e){return l(e)&&!Array.isArray(e)}function i(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}var l=n(260),s=n(254);e.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Popup",function(){return x});var a=n(1),o=n.n(a),i=n(17),l=n.n(i),s=function(e,t){void 0===t&&(t=!0),n.i(a.useEffect)(function(){if(t){var n=function(t){"Escape"===t.key&&e(t)};return document.addEventListener("keyup",n),function(){t&&document.removeEventListener("keyup",n)}}},[e,t])},u=function(e,t){void 0===t&&(t=!0),n.i(a.useEffect)(function(){if(t){var n=function(){e()};return window.addEventListener("resize",n),function(){t&&window.removeEventListener("resize",n)}}},[e,t])},c=function(e,t,r){void 0===r&&(r=!0),n.i(a.useEffect)(function(){if(r){var n=function(n){var r=Array.isArray(e)?e:[e],a=!1;r.forEach(function(e){if(!e.current||e.current.contains(n.target))return void(a=!0)}),n.stopPropagation(),a||t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){r&&(document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n))}}},[e,t,r])},f=function(e,t){void 0===t&&(t=!0),n.i(a.useEffect)(function(){if(t){var n=function(t){if(9===t.keyCode){var n,r=null===e||void 0===e?void 0:null===(n=e.current)||void 0===n?void 0:n.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),a=Array.prototype.slice.call(r);if(1===a.length)return void t.preventDefault();var o=a[0],i=a[a.length-1];t.shiftKey&&document.activeElement===o?(t.preventDefault(),i.focus()):document.activeElement===i&&(t.preventDefault(),o.focus())}};return document.addEventListener("keydown",n),function(){t&&document.removeEventListener("keydown",n)}}},[e,t])},d="undefined"!=typeof window?a.useLayoutEffect:a.useEffect,p={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},h=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],m=function(e,t,n,r,a){var o=a.offsetX,i=a.offsetY,l=r?8:0,s=n.split(" "),u=e.top+e.height/2,c=e.left+e.width/2,f=t.height,d=t.width,p=u-f/2,h=c-d/2,m="",g="0%",y="0%";switch(s[0]){case"top":p-=f/2+e.height/2+l,m="rotate(180deg)  translateX(50%)",g="100%",y="50%";break;case"bottom":p+=f/2+e.height/2+l,m="rotate(0deg) translateY(-100%) translateX(-50%)",y="50%";break;case"left":h-=d/2+e.width/2+l,m=" rotate(90deg)  translateY(50%) translateX(-25%)",y="100%",g="50%";break;case"right":h+=d/2+e.width/2+l,m="rotate(-90deg)  translateY(-150%) translateX(25%)",g="50%"}switch(s[1]){case"top":p=e.top,g=e.height/2+"px";break;case"bottom":p=e.top-f+e.height,g=f-e.height/2+"px";break;case"left":h=e.left,y=e.width/2+"px";break;case"right":h=e.left-d+e.width,y=d-e.width/2+"px"}return p="top"===s[0]?p-i:p+i,h="left"===s[0]?h-o:h+o,{top:p,left:h,transform:m,arrowLeft:y,arrowTop:g}},g=function(e){var t={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof e){var n=document.querySelector(e);null!==n&&(t=n.getBoundingClientRect())}return t},y=function(e,t,n,r,a,o){var i=a.offsetX,l=a.offsetY,s={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},u=0,c=g(o),f=Array.isArray(n)?n:[n];for((o||Array.isArray(n))&&(f=[].concat(f,h));u<f.length;){s=m(e,t,f[u],r,{offsetX:i,offsetY:l});var d={top:s.top,left:s.left,width:t.width,height:t.height};if(!(d.top<=c.top||d.left<=c.left||d.top+d.height>=c.top+c.height||d.left+d.width>=c.left+c.width))break;u++}return s},b=0,v=function(){var e=document.getElementById("popup-root");return null===e&&(e=document.createElement("div"),e.setAttribute("id","popup-root"),document.body.appendChild(e)),e},x=n.i(a.forwardRef)(function(e,t){var i=e.trigger,h=void 0===i?null:i,m=e.onOpen,g=void 0===m?function(){}:m,x=e.onClose,w=void 0===x?function(){}:x,E=e.defaultOpen,O=void 0!==E&&E,_=e.open,S=void 0===_?void 0:_,P=e.disabled,k=void 0!==P&&P,N=e.nested,j=void 0!==N&&N,C=e.closeOnDocumentClick,T=void 0===C||C,A=e.repositionOnResize,M=void 0===A||A,D=e.closeOnEscape,R=void 0===D||D,I=e.on,L=void 0===I?["click"]:I,q=e.contentStyle,U=void 0===q?{}:q,F=e.arrowStyle,B=void 0===F?{}:F,H=e.overlayStyle,G=void 0===H?{}:H,Y=e.className,z=void 0===Y?"":Y,V=e.position,Q=void 0===V?"bottom center":V,W=e.modal,J=void 0!==W&&W,$=e.lockScroll,X=void 0!==$&&$,Z=e.arrow,K=void 0===Z||Z,ee=e.offsetX,te=void 0===ee?0:ee,ne=e.offsetY,re=void 0===ne?0:ne,ae=e.mouseEnterDelay,oe=void 0===ae?100:ae,ie=e.mouseLeaveDelay,le=void 0===ie?100:ie,se=e.keepTooltipInside,ue=void 0!==se&&se,ce=e.children,fe=n.i(a.useState)(S||O),de=fe[0],pe=fe[1],he=n.i(a.useRef)(null),me=n.i(a.useRef)(null),ge=n.i(a.useRef)(null),ye=n.i(a.useRef)(null),be=n.i(a.useRef)("popup-"+ ++b),ve=!!J||!h,xe=n.i(a.useRef)(0);d(function(){return de?(ye.current=document.activeElement,Ce(),je(),ke()):Ne(),function(){clearTimeout(xe.current)}},[de]),n.i(a.useEffect)(function(){"boolean"==typeof S&&(S?we():Ee())},[S,k]);var we=function(e){de||k||(pe(!0),setTimeout(function(){return g(e)},0))},Ee=function(e){var t;de&&!k&&(pe(!1),ve&&(null===(t=ye.current)||void 0===t||t.focus()),setTimeout(function(){return w(e)},0))},Oe=function(e){null===e||void 0===e||e.stopPropagation(),de?Ee(e):we(e)},_e=function(e){clearTimeout(xe.current),xe.current=setTimeout(function(){return we(e)},oe)},Se=function(e){null===e||void 0===e||e.preventDefault(),Oe()},Pe=function(e){clearTimeout(xe.current),xe.current=setTimeout(function(){return Ee(e)},le)},ke=function(){ve&&X&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},Ne=function(){ve&&X&&(document.getElementsByTagName("body")[0].style.overflow="auto")},je=function(){var e,t=null===me||void 0===me?void 0:null===(e=me.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),n=Array.prototype.slice.call(t)[0];null===n||void 0===n||n.focus()};n.i(a.useImperativeHandle)(t,function(){return{open:function(){we()},close:function(){Ee()},toggle:function(){Oe()}}});var Ce=function(){if(!ve&&de&&(null===he||void 0===he?void 0:he.current)&&(null===he||void 0===he?void 0:he.current)&&(null===me||void 0===me?void 0:me.current)){var e=he.current.getBoundingClientRect(),t=me.current.getBoundingClientRect(),n=y(e,t,Q,K,{offsetX:te,offsetY:re},ue);if(me.current.style.top=n.top+window.scrollY+"px",me.current.style.left=n.left+window.scrollX+"px",K&&ge.current){var r,a;ge.current.style.transform=n.transform,ge.current.style.setProperty("-ms-transform",n.transform),ge.current.style.setProperty("-webkit-transform",n.transform),ge.current.style.top=(null===(r=B.top)||void 0===r?void 0:r.toString())||n.arrowTop,ge.current.style.left=(null===(a=B.left)||void 0===a?void 0:a.toString())||n.arrowLeft}}};s(Ee,R),f(me,de&&ve),u(Ce,M),c(h?[me,he]:[me],Ee,T&&!j);var Te=function(){var e=ve?p.popupContent.modal:p.popupContent.tooltip,t={className:"popup-content "+(""!==z?z.split(" ").map(function(e){return e+"-content"}).join(" "):""),style:r({},e,U,{pointerEvents:"auto"}),ref:me,onClick:function(e){e.stopPropagation()}};return!J&&L.indexOf("hover")>=0&&(t.onMouseEnter=_e,t.onMouseLeave=Pe),t},Ae=function(){return o.a.createElement("div",Object.assign({},Te(),{key:"C",role:ve?"dialog":"tooltip",id:be.current}),K&&!ve&&o.a.createElement("div",{ref:ge,style:p.popupArrow},o.a.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==z?z.split(" ").map(function(e){return e+"-arrow"}).join(" "):""),viewBox:"0 0 32 16",style:r({position:"absolute"},B)},o.a.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),ce&&"function"==typeof ce?ce(Ee,de):ce)},Me=!(L.indexOf("hover")>=0),De=ve?p.overlay.modal:p.overlay.tooltip,Re=[Me&&o.a.createElement("div",{key:"O","data-testid":"overlay","data-popup":ve?"modal":"tooltip",className:"popup-overlay "+(""!==z?z.split(" ").map(function(e){return e+"-overlay"}).join(" "):""),style:r({},De,G,{pointerEvents:T&&j||ve?"auto":"none"}),onClick:T&&j?Ee:void 0,tabIndex:-1},ve&&Ae()),!ve&&Ae()];return o.a.createElement(o.a.Fragment,null,function(){for(var e={key:"T",ref:he,"aria-describedby":be.current},t=Array.isArray(L)?L:[L],n=0,r=t.length;n<r;n++)switch(t[n]){case"click":e.onClick=Oe;break;case"right-click":e.onContextMenu=Se;break;case"hover":e.onMouseEnter=_e,e.onMouseLeave=Pe;break;case"focus":e.onFocus=_e,e.onBlur=Pe}if("function"==typeof h){var a=h(de);return!!h&&o.a.cloneElement(a,e)}return!!h&&o.a.cloneElement(h,e)}(),de&&l.a.createPortal(Re,v()))});t.default=x},,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a))return e;var o;return o=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}},function(e,t,n){var r=n(243);"string"==typeof r&&(r=[[e.i,r,""]]);n(6)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(244);"string"==typeof r&&(r=[[e.i,r,""]]);n(6)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(245);"string"==typeof r&&(r=[[e.i,r,""]]);n(6)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(246);"string"==typeof r&&(r=[[e.i,r,""]]);n(6)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(247);"string"==typeof r&&(r=[[e.i,r,""]]);n(6)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(248);"string"==typeof r&&(r=[[e.i,r,""]]);n(6)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(249);"string"==typeof r&&(r=[[e.i,r,""]]);n(6)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(250);"string"==typeof r&&(r=[[e.i,r,""]]);n(6)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(251);"string"==typeof r&&(r=[[e.i,r,""]]);n(6)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(252);"string"==typeof r&&(r=[[e.i,r,""]]);n(6)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(253);"string"==typeof r&&(r=[[e.i,r,""]]);n(6)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},,,,,,,,function(e,t,n){e.exports=n(220)}],[345]);
//# sourceMappingURL=index.js.a8f244729b9420dbf75f.map