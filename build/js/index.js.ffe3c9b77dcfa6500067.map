{"version":3,"sources":["webpack:///index.js","webpack:///./components/ErrorMessage/index.js","webpack:///./components/Loader/index.js","webpack:///./components/PatientImage/index.js","webpack:///./lib/constants.js","webpack:///../~/css-loader/lib/css-base.js","webpack:///../~/style-loader/addStyles.js","webpack:///./components/Fhir/Grid/index.js","webpack:///./redux/query.js","webpack:///../~/react-popup/dist/Bem.js","webpack:///../~/react-popup/dist/Constants.js","webpack:///./index.js","webpack:///./components/AgeSelector/index.js","webpack:///./components/App/index.js","webpack:///./components/Fhir/CarePlan.js","webpack:///./components/Fhir/ConditionList.js","webpack:///./components/Fhir/Encounter.js","webpack:///./components/Fhir/ImmunizationList.js","webpack:///./components/Fhir/Observation.js","webpack:///./components/Fhir/Person.js","webpack:///./components/Fhir/ResourceList.js","webpack:///./components/Fhir/Time.js","webpack:///./components/Fhir/ValueRange.js","webpack:///./components/Footer/index.js","webpack:///./components/Header/index.js","webpack:///./components/InsightsPopup/index.js","webpack:///./components/PatientDetail/index.js","webpack:///./components/PatientList/index.js","webpack:///./components/PatientListItem/index.js","webpack:///./components/SortWidget/index.js","webpack:///./components/TagSelector/index.js","webpack:///./config.default.js","webpack:///./lib/PatientSearch.js","webpack:///./redux/urlParams.js","webpack:///./components/Fhir/Date.js","webpack:///./components/AgeSelector/AgeSelector.less","webpack:///./components/App/App.less","webpack:///./components/DialogFooter/DialogFooter.less","webpack:///./components/Footer/Footer.less","webpack:///./components/Header/Header.less","webpack:///./components/Loader/Loader.less","webpack:///./components/PatientDetail/PatientDetail.less","webpack:///./components/PatientImage/PatientImage.less","webpack:///./components/PatientList/PatientList.less","webpack:///./components/SortWidget/SortWidget.less","webpack:///./components/TagSelector/TagSelector.less","webpack:///../~/events/events.js","webpack:///../~/for-in/index.js","webpack:///../~/is-plain-object/index.js","webpack:///../~/is-plain-object/~/isobject/index.js","webpack:///../~/json5/lib/json5.js","webpack:///../~/keymaster/keymaster.js","webpack:///../~/mixin-deep/index.js","webpack:///../~/mixin-deep/~/is-extendable/index.js","webpack:///../~/react-popup/dist/ActionButton.react.js","webpack:///../~/react-popup/dist/ButtonsSpace.react.js","webpack:///../~/react-popup/dist/Footer.react.js","webpack:///../~/react-popup/dist/Header.react.js","webpack:///../~/react-popup/dist/Popup.react.js","webpack:///../~/react-popup/dist/Store.js","webpack:///../~/react-popup/dist/index.js","webpack:///./components/Fhir/Period.js","webpack:///./redux/index.js","webpack:///./redux/selection.js","webpack:///./redux/settings.js","webpack:///../~/style-loader/fixUrls.js","webpack:///./components/AgeSelector/AgeSelector.less?f752","webpack:///./components/App/App.less?e748","webpack:///./components/DialogFooter/DialogFooter.less?53fd","webpack:///./components/Footer/Footer.less?27e7","webpack:///./components/Header/Header.less?b3d6","webpack:///./components/Loader/Loader.less?f4e6","webpack:///./components/PatientDetail/PatientDetail.less?113a","webpack:///./components/PatientImage/PatientImage.less?24b4","webpack:///./components/PatientList/PatientList.less?311a","webpack:///./components/SortWidget/SortWidget.less?7c58","webpack:///./components/TagSelector/TagSelector.less?15d5","webpack:///./lib/index.js","webpack:///./components/Alert/index.js","webpack:///./components/DialogFooter/index.js"],"names":["webpackJsonp","100","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_react","_react2","_propTypes","_propTypes2","_lib","_Alert","_Alert2","ErrorMessage","_React$Component","this","getPrototypeOf","apply","arguments","createElement","type","getErrorMessage","error","Component","propTypes","oneOfType","string","object","defaultProps","101","Loader","className","102","_objectWithoutProperties","keys","indexOf","hasOwnProperty","hash","input","out","String","toLowerCase","trim","split","reduce","sum","c","charCodeAt","toString","_extends","assign","source","PatientImage","renderCanvas","getPatientImageUri","patient","base","hex","getPatientName","jdenticon","update","id","_props","style","rest","url","backgroundImage","backgroundColor","width","height","isRequired","103","CODE_SYSTEMS","LOINC","SNOMED-CT","RxNorm","CVX","NUBC","UMLS","12","cssWithMappingToString","item","useSourceMap","content","cssMapping","btoa","sourceMapping","toComment","concat","sources","map","sourceRoot","join","sourceMap","unescape","encodeURIComponent","JSON","stringify","list","modules","mediaQuery","alreadyImportedModules","push","14","addStylesToDom","styles","options","domStyle","stylesInDom","refs","j","parts","addStyle","listToStyles","newStyles","css","media","part","insertStyleElement","styleElement","styleTarget","getElement","insertInto","Error","lastStyleElementInsertedAtTop","styleElementsInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","removeStyleElement","parentNode","removeChild","idx","splice","createStyleElement","document","attrs","attachTagAttrs","createLinkElement","linkElement","rel","element","forEach","setAttribute","remove","singleton","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","bind","URL","createObjectURL","revokeObjectURL","Blob","updateLink","href","applyToTag","newObj","index","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","autoFixUrls","undefined","convertToAbsoluteUrls","fixUrls","blob","oldSrc","isOldIE","fn","memo","window","all","atob","selector","querySelector","DEBUG","newList","mayRemove","textStore","replacement","filter","Boolean","20","_defineProperty","Grid","_reactRedux","_this","state","__rows","sortRows","rows","comparator","newProps","Array","isArray","setState","sort","res","settings","server","resourceType","fhirViewer","enabled","param","cols","col","render","path","cellProps","defaultValue","getPath","_this2","__enableGrouping","renderResource","groupColIndex","groupBy","findIndex","name","label","groupPath","groups","rec","groupValue","group","colSpan","onClick","_this3","title","checked","onChange","e","minWidth","headerProps","renderRows","arrayOf","func","connect","21","goPrev","goNext","fetch","setLimit","setTags","delTag","addTag","setSort","setQueryType","setQueryString","setParam","setGender","setConditions","delCondition","addCondition","setAgeGroup","setMaxAge","setMinAge","setData","setError","setLoading","queryBuilder","_handleActions","_reduxActions","_PatientSearch","_PatientSearch2","parseQueryString","location","INITIAL_STATE","getState","loading","bundle","createAction","dispatch","_getState","then","query","getBundleURL","setOffset","_getpages","_getpagesoffset","handleActions","action","payload","removeCondition","removeTag","260","modifier","el","modifiers","finalClass","singleClass","261","_default","SHOW","CLOSE","REFRESH","306","_reactDom","_reactDom2","_App","_App2","_redux","_redux2","_PatientDetail","_PatientDetail2","_PatientList","_PatientList2","_reactRouter","_createHashHistory","_createHashHistory2","_jquery","_jquery2","_reactPopup","_reactPopup2","$","jQuery","history","getElementById","Provider","store","Router","Switch","Route","component","exact","tooltip","307","_typeof","Symbol","iterator","_moment","_moment2","AgeSelector","_ref","_len","args","_key","onChangeMinValue","onChangeMinUnits","onChangeMaxValue","onChangeMaxUnits","onGroupChange","_propsToState","min","minValue","isNaN","minUnits","units","max","maxValue","maxUnits","newState","onMinChange","valueAsNumber","parseFloat","canSet","onMaxChange","maxDuration","duration","valid","step","shape","number","oneOf","alert","308","App","_json","_json2","_Loader","_Loader2","_ErrorMessage","_ErrorMessage2","_query","_settings","OWNER","opener","parent","runningRequests","hideDelay","handle","clearTimeout","show","setTimeout","hide","ajaxStart","ajaxComplete","Math","handleUiBlocking","_parseQueryString","search","config","params","ajax","dataType","cache","json","parse","ajaxSetup","timeout","errorXHR","console","warn","statusText","always","settingReceived","onMessage","data","merge","patientsPerPage","addEventListener","postMessage","removeEventListener","loaded","children","any","309","_Grid","_Grid2","_Period","_Period2","CarePlan","resources","o","resource","a","b","dA","dB","activity","reason","period","310","_constants","_Date","_Date2","ConditionList","doHighlight","toggleHighlight","prevState","recs","code","system","highlight","codeIsNLPInsight","text","coding","display","clinicalStatus","getCodeOrConcept","verificationStatus","onset","onsetDateTime","moment","textAlign","onMouseUp","color","getInsightSource","InsightSource","NONE","311","getEncounterClass","encounter","class","getEncounterLabel","result","_class","Encounter","312","ImmunizationList","status","date","occurrenceDateTime","occurrenceString","313","_ValueRange","_ValueRange2","_Time","_Time2","Observations","includeLabel","renderObservation","returnResult","getObservationLabel","replace","valueBoolean","valueString","range","valueRange","valueTime","valueDateTime","valuePeriod","round","format","314","Person","identifier","pop","birthDate","315","renderCell","record","allOf","entries","visit","meta","propValue","isNLP","nlpCodePath","raw","existing","find","some","getSortValue","paths","l","v","DataLink","open","_InsightsPopup","_InsightsPopup2","ResourceList","showPopup","closePopup","openPopup","log","sampleResource","ellipsis","r","t","renderCategory","category","quantity","unit","daysSupply","medicationReference","reference","dangerouslySetInnerHTML","__html","div","authoredOn","dateWritten","performedDateTime","recorded","performedPeriod","availableTime","availableStartTime","availableEndTime","whenHandedOver","issued","effectiveDateTime","assertedDate","lastUpdated","determineSchema","position","zIndex","closeWindow","316","Time","_ref$format","instanceOf","Date","317","ValueRange","low","high","318","_DialogFooter","_DialogFooter2","Footer","msg","hasPrev","hasNext","_id","len","entry","startRec","offset","endRec","total","preventDefault","disabled","canShowSelected","selection","bool","319","_query2","_TagSelector","_TagSelector2","_AgeSelector","_AgeSelector2","_SortWidget","_SortWidget2","Header","delay","submitStrategy","fetchDelay","padding","margin","onSubmit","placeholder","queryString","ageGroup","gender","minAge","maxAge","age","tags","conditions","condition","description","tag","selected","_this4","sel","k","_advanced","queryType","conditionsCount","demographicsCount","tagsCount","tabs","hideTagSelector","_tab","flexDirection","setHashParam","renderAdvancedTabContents","renderDemographicsTabContents","renderConditionsTabContents","renderTagsTabContents","urlParams","320","InsightsPopup","PropTypes","321","PatientDetail","_PatientImage","_PatientImage2","_reactRouterDom","_selection","_Observation","_Observation2","_ImmunizationList","_ImmunizationList2","_ConditionList","_ConditionList2","_Encounter","_Encounter2","_CarePlan","_CarePlan2","_Person","_Person2","_ResourceList","_ResourceList2","clone","selectedSubCat","isEmptyObject","match","intVal","fetchPatient","catch","Promise","resolve","cacheId","reject","nextURL","limit","getAllPages","subCat","token","charAt","toUpperCase","substr","idLower","paddingRight","toggle","getPatientAge","getPatientEmail","getPatientPhone","getPatientHomeAddress","getPatientMRN","deceasedBoolean","deceasedDateTime","items","_this5","Link","to","renderPatient","renderResources","paddingTop","322","PatientList","_PatientListItem","_PatientListItem2","_Footer","_Footer2","_Header","_Header2","renderContents","renderPatientItems","isSelected","renderSelectedOnly","onSelectionChange","setAll","showSelectedOnly","323","PatientListItem","renderSearchHighlight","stopPropagation","renderGender","324","SortWidget","parseSort","compileSort","s","role","change","325","_toConsumableArray","arr","arr2","from","TagSelector","selectedIndex","stateFromProps","onFocus","onBlur","onKeyDown","onInput","nextProps","hasChanged","custom","codes","","nextState","menu","menuHeight","clientHeight","menuScrollTop","scrollTop","parseInt","paddingBottom","selectedTop","offsetTop","selectedHeight","offsetHeight","requestAnimationFrame","listed","filterTags","keyCode","maxIndex","_this6","_this7","unshift","_this8","onMouseDown","renderTagCode","_this9","menuItems","renderTag","emptyMenu","ref","326","outputMode","327","_","PatientSearch","__cache__","__scheduled__","has","hasParam","patientIDs","schedule","inst","encode","prop","str","substring","d","subtract","p","systemUrl","compileConditions","conditionKeys","getConditionKeys","handleConditionsResponse","response","patientID","subject","nextLink","link","relation","request","every","conditionKey","ids","compile","method","processData","headers","accept","content-type","getPatientIDs","hasConditions","328","33","330","331","332","333","334","335","336","337","338","339","340","341","EventEmitter","_events","_maxListeners","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","n","emit","er","handler","listeners","err","context","slice","addListener","listener","m","newListener","warned","trace","on","once","g","removeListener","fired","removeAllListeners","listenerCount","evlistener","emitter","354","thisArg","360","isObjectObject","ctor","prot","361","val","362","JSON5","at","lineNumber","columnNumber","ch","escapee","'","\"","\\","/","\n","f","ws","renderChar","chr","SyntaxError","message","next","peek","sign","word","isFinite","delim","uffff","fromCharCode","inlineComment","blockComment","comment","white","Infinity","NaN","array","reviver","walk","holder","replacer","space","isWordChar","isWordStart","isWord","isDate","checkForCircular","objStack","makeIndent","num","noNewLine","indent","escapeString","escapable","lastIndex","test","internalStringify","isTopLevel","buffer","obj_part","getReplacedValueOrUndefined","valueOf","indentStr","nonEmpty","toJSON","\b","\t","\f","\r","topLevelHolder","363","global","compareArray","a1","a2","updateModifierKey","event","_mods","modifierMap","modifiersMatch","scope","_downKeys","_MODIFIERS","assignKey","_handlers","getScope","mods","returnValue","cancelBubble","clearModifier","resetModifiers","getKeys","getMods","shortcut","unbindKey","multipleKeys","isPressed","getPressedKeyCodes","tagName","srcElement","setScope","_scope","deleteScope","handlers","mi","addEvent","attachEvent","noConflict","previousKey","16","18","17","91","⇧","shift","⌥","alt","option","⌃","ctrl","control","⌘","command","_MAP","backspace","tab","clear","enter","return","esc","escape","left","up","right","down","del","delete","home","end","pageup","pagedown",",",".","`","-","=",";","[","]","x","unbind","372","mixinDeep","objects","forIn","copy","isExtendable","373","isPlainObject","443","_setPrototypeOf","_defineProperties","_assertThisInitialized","_getPrototypeOf","PopupAction","handleClick","node","444","_ActionButton","_Bem","PopupFooterButtons","onOk","onClose","buttonClick","buttons","btns","btn","btnClass","defaultOk","defaultCancel","isValidElement","btnComponent","445","_ButtonsSpace","PopupFooter","446","PopupHeader","447","_keymaster","_Store","_Constants","defaultKeyFilter","Store","handleClose","close","initialState","visible","noOverlay","closeOnOutsideClick","onOpen","Popup","bound","onShow","onRefresh","containerClick","handleButtonClick","boxRef","defaultKeyBindings","ok","defaultOkKey","cancel","defaultCancelKey","callback","getId","popups","queue","bringToFront","register","currentlyActive","active","plugins","refreshPosition","clearQueue","focus","setPosition","popup","activePopup","escToClose","handleKeyEvent","button","bindKeyEvents","box","boxPosition","opacity","top","y","excludeTags","_className","overlayStyle","closeBtn","closeHtml","boxClass","tabIndex","outline","background","448","PopupStore","_EventEmitter","449","get","_Popup","45","Period","start","isSame","46","_reduxThunk","_reduxThunk2","_selection2","_settings2","_urlParams","_urlParams2","middleWares","createStore","combineReducers","applyMiddleware","47","setHashSelection","setSelectionCleared","PARAMS","SINGLE","boolVal","initialSelection","selectionCleared","TOGGLE","_newState","48","_configDefault","_configDefault2","_mixinDeep","_mixinDeep2","MERGE","537","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","unquotedOrigUrl","$1","newUrl","538","locals","539","540","541","542","543","544","545","546","547","548","552","7","responseJSON","issue","diagnostics","responseText","out2","React","compileQueryString","pair","tokens","decodeURIComponent","findMRNCoding","codings","findMRNIdentifier","identifiers","mrn","family","given","prefix","suffix","phone","telecom","address","use","line","postalCode","city","country","seconds","minutes","hours","days","months","http","getCodeableConcept","concept","ext_outer","item_outer","ext_inner","item_inner","valueStringArr","includes","DOCUMENT","SELF","searchHighlight","caseSensitive","q","html","cfg","extend","Accept","xhr","fullUrl","nextUrl","98","ICONS","info","warning","danger","success","Alert","aria-hidden","data-dismiss","lineHeight","icon","marginRight","99","DialogFooter","IS_POPUP","IS_FRAME","SelectionUI","viewClass","resetClass","hasSelection","onToggleSelectionVisibility","onResetSelection","_React$Component2","createPatientTransaction","bOn","selectionCount","confirmClose","confirm","export","resetSelection","renderDialogButtons","bValue"],"mappings":"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","file":"index.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 100:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _lib = __webpack_require__(7);\n\nvar _Alert = __webpack_require__(98);\n\nvar _Alert2 = _interopRequireDefault(_Alert);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ErrorMessage = function (_React$Component) {\n    _inherits(ErrorMessage, _React$Component);\n\n    function ErrorMessage() {\n        _classCallCheck(this, ErrorMessage);\n\n        return _possibleConstructorReturn(this, (ErrorMessage.__proto__ || Object.getPrototypeOf(ErrorMessage)).apply(this, arguments));\n    }\n\n    _createClass(ErrorMessage, [{\n        key: \"render\",\n        value: function render() {\n            return _react2.default.createElement(\n                _Alert2.default,\n                { type: \"danger\" },\n                (0, _lib.getErrorMessage)(this.props.error)\n            );\n        }\n    }]);\n\n    return ErrorMessage;\n}(_react2.default.Component);\n\nErrorMessage.propTypes = {\n    error: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object])\n};\nErrorMessage.defaultProps = {\n    error: \"Unknown Error\"\n};\nexports.default = ErrorMessage;\n\n/***/ }),\n\n/***/ 101:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\n__webpack_require__(543);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n        _classCallCheck(this, Loader);\n\n        return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n        key: \"render\",\n        value: function render() {\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"loader\" },\n                _react2.default.createElement(\n                    \"div\",\n                    null,\n                    _react2.default.createElement(\"i\", { className: \"fa fa-spinner spin\" }),\n                    \" Loading...\"\n                )\n            );\n        }\n    }]);\n\n    return Loader;\n}(_react2.default.Component);\n\nexports.default = Loader;\n\n/***/ }),\n\n/***/ 102:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _lib = __webpack_require__(7);\n\n__webpack_require__(545);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* global jdenticon */\n\n\nfunction hash(input) {\n    var out = String(input).toLowerCase().trim().split(\"\").reduce(function (sum, c) {\n        return sum + c.charCodeAt(0).toString(16);\n    }, \"\");\n    while (out.length < 11) {\n        out += out.length ? out : \"000000000000\";\n    }\n    return out;\n}\n\nvar PatientImage = function (_React$Component) {\n    _inherits(PatientImage, _React$Component);\n\n    function PatientImage() {\n        _classCallCheck(this, PatientImage);\n\n        return _possibleConstructorReturn(this, (PatientImage.__proto__ || Object.getPrototypeOf(PatientImage)).apply(this, arguments));\n    }\n\n    _createClass(PatientImage, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n            this.renderCanvas();\n        }\n    }, {\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate() {\n            this.renderCanvas();\n        }\n    }, {\n        key: \"renderCanvas\",\n        value: function renderCanvas() {\n            var url = (0, _lib.getPatientImageUri)(this.props.patient, this.props.base);\n            if (!url) {\n                var hex = hash((0, _lib.getPatientName)(this.props.patient));\n                jdenticon.update(\"#img-\" + this.props.patient.id, hex, 0.1);\n            }\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _props = this.props,\n                className = _props.className,\n                style = _props.style,\n                patient = _props.patient,\n                base = _props.base,\n                rest = _objectWithoutProperties(_props, [\"className\", \"style\", \"patient\", \"base\"]);\n\n            var url = (0, _lib.getPatientImageUri)(patient, this.props.base);\n            className = \"patient-image-wrap \" + (className || \"\");\n\n            style = _extends({}, style || {});\n\n            if (url) {\n                style.backgroundImage = \"url('\" + url + \"')\";\n                style.backgroundColor = 'rgba(255, 255, 255, 0.6)';\n            }\n\n            return _react2.default.createElement(\n                \"div\",\n                _extends({ className: className, style: style }, rest),\n                url ? null : _react2.default.createElement(\"canvas\", {\n                    width: \"480\",\n                    height: \"480\",\n                    style: { width: \"100%\", height: \"100%\" },\n                    id: \"img-\" + patient.id\n                })\n            );\n        }\n    }]);\n\n    return PatientImage;\n}(_react2.default.Component);\n\nPatientImage.propTypes = {\n    patient: _propTypes2.default.object.isRequired,\n    className: _propTypes2.default.string,\n    style: _propTypes2.default.object,\n    base: _propTypes2.default.string\n};\nPatientImage.defaultProps = {\n    base: \"\"\n};\nexports.default = PatientImage;\n\n/***/ }),\n\n/***/ 103:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar CODE_SYSTEMS = exports.CODE_SYSTEMS = {\n    'LOINC': { url: 'http://loinc.org' },\n    'SNOMED-CT': { url: 'http://snomed.info/sct' },\n    'RxNorm': { url: 'http://www.nlm.nih.gov/research/umls/rxnorm' },\n    'CVX': { url: 'http://hl7.org/fhir/sid/cvx' },\n    'NUBC': { url: 'http://www.nubc.org/patient-discharge' },\n    'UMLS': { url: 'http://uts.nlm.nih.gov/metathesaurus' }\n};\n\n/***/ }),\n\n/***/ 12:\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n\n/***/ 14:\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\t// Test for IE <= 9 as proposed by Browserhacks\n\t\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t\t// Tests for existence of standard globals is to allow style-loader \n\t\t// to operate correctly into non-standard environments\n\t\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\t\treturn window && document && document.all && !window.atob;\n\t}),\n\tgetElement = (function(fn) {\n\t\tvar memo = {};\n\t\treturn function(selector) {\n\t\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t\t}\n\t\t\treturn memo[selector]\n\t\t};\n\t})(function (styleTarget) {\n\t\treturn document.querySelector(styleTarget)\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [],\n\tfixUrls = __webpack_require__(537);\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (typeof options.insertInto === \"undefined\") options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar styleTarget = getElement(options.insertInto)\n\tif (!styleTarget) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\tstyleTarget.insertBefore(styleElement, styleTarget.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\tstyleTarget.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\tstyleTarget.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\tstyleTarget.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\toptions.attrs.type = \"text/css\";\n\n\tattachTagAttrs(styleElement, options.attrs);\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\tattachTagAttrs(linkElement, options.attrs);\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction attachTagAttrs(element, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\telement.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement, options);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/* If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls){\n\t\tcss = fixUrls(css);\n\t}\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n\n/***/ 20:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Grid = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _lib = __webpack_require__(7);\n\nvar _reactRedux = __webpack_require__(19);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Renders group of resources in a grid (table) where each component represents\n * one row...\n */\nvar Grid = exports.Grid = function (_React$Component) {\n    _inherits(Grid, _React$Component);\n\n    function Grid(props) {\n        _classCallCheck(this, Grid);\n\n        var _this = _possibleConstructorReturn(this, (Grid.__proto__ || Object.getPrototypeOf(Grid)).call(this, props));\n\n        _this.state = {\n            __rows: _this.sortRows(_this.props.rows, _this.props.comparator)\n        };\n        return _this;\n    }\n\n    _createClass(Grid, [{\n        key: \"componentWillReceiveProps\",\n        value: function componentWillReceiveProps(newProps) {\n            if (Array.isArray(newProps.rows)) {\n                this.setState({\n                    __rows: this.sortRows(newProps.rows, newProps.comparator)\n                });\n            }\n        }\n    }, {\n        key: \"sortRows\",\n        value: function sortRows(rows, comparator) {\n            if (!comparator) {\n                return rows;\n            }\n            return rows.sort(comparator);\n        }\n    }, {\n        key: \"renderResource\",\n        value: function renderResource(res, i) {\n            var url = this.props.settings.server.url + \"/\" + res.resourceType + \"/\" + res.id;\n            if (this.props.settings.fhirViewer.enabled) {\n                url = this.props.settings.fhirViewer.url + (this.props.settings.fhirViewer.url.indexOf(\"?\") > -1 ? \"&\" : \"?\") + this.props.settings.fhirViewer.param + \"=\" + encodeURIComponent(url);\n            }\n\n            return _react2.default.createElement(\n                \"tr\",\n                { key: i },\n                this.props.cols.map(function (col, i) {\n                    var render = col.render,\n                        path = col.path,\n                        cellProps = col.cellProps,\n                        defaultValue = col.defaultValue;\n\n                    cellProps = _extends({}, cellProps, { key: i });\n                    if (typeof render == \"function\") {\n                        return _react2.default.createElement(\n                            \"td\",\n                            cellProps,\n                            render(res)\n                        );\n                    }\n                    return _react2.default.createElement(\n                        \"td\",\n                        cellProps,\n                        (0, _lib.getPath)(res, path) || _react2.default.createElement(\n                            \"small\",\n                            { className: \"text-muted\" },\n                            defaultValue || \"-\"\n                        )\n                    );\n                })\n            );\n        }\n    }, {\n        key: \"renderRows\",\n        value: function renderRows() {\n            var _this2 = this;\n\n            if (!this.state.__enableGrouping) {\n                return this.state.__rows.map(this.renderResource, this);\n            }\n\n            var groupColIndex = this.props.groupBy ? this.props.cols.findIndex(function (c) {\n                return c.name === _this2.props.groupBy || c.label === _this2.props.groupBy;\n            }) : -1;\n            var groupPath = groupColIndex > -1 ? this.props.cols[groupColIndex].path : null;\n\n            if (!groupPath) {\n                return this.state.__rows.map(this.renderResource, this);\n            }\n\n            var groups = {};\n            this.state.__rows.forEach(function (rec, i) {\n                var groupValue = typeof groupPath == \"function\" ? groupPath(rec) : (0, _lib.getPath)(rec, groupPath);\n                groupValue = groupValue || \"Empty Group\";\n                if (!groups.hasOwnProperty(groupValue)) {\n                    groups[groupValue] = [];\n                }\n                groups[groupValue].push(_this2.renderResource(rec, i));\n            });\n\n            var out = [];\n\n            var _loop = function _loop(group) {\n                if (groups[group].length > 1) {\n                    out.push(_react2.default.createElement(\n                        \"tr\",\n                        { className: \"group-header\", key: group },\n                        _react2.default.createElement(\n                            \"th\",\n                            { colSpan: _this2.props.cols.length, onClick: function onClick() {\n                                    return _this2.setState(_defineProperty({}, group, _this2.state[group] === false ? true : false));\n                                } },\n                            _react2.default.createElement(\"i\", { className: \"glyphicon glyphicon-triangle-\" + (_this2.state[group] !== false ? \"bottom\" : \"right\") }),\n                            \" \",\n                            group,\n                            \" \",\n                            _react2.default.createElement(\n                                \"small\",\n                                { className: \"badge\" },\n                                groups[group].length\n                            )\n                        )\n                    ));\n                    if (_this2.state[group] !== false) {\n                        out = out.concat(groups[group]);\n                    }\n                } else {\n                    out.push(_react2.default.createElement(\"tr\", { className: \"group-clear\", key: group }));\n                    out = out.concat(groups[group]);\n                }\n            };\n\n            for (var group in groups) {\n                _loop(group);\n            }\n            return out;\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _this3 = this;\n\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"panel panel-default\" + (this.state.__enableGrouping ? \" grouped\" : \"\") },\n                this.props.title ? _react2.default.createElement(\n                    \"div\",\n                    { className: \"panel-heading\" },\n                    this.props.groupBy && this.state.__rows.length > 1 && _react2.default.createElement(\n                        \"label\",\n                        { className: \"pull-right\" },\n                        \"Group by \",\n                        this.props.groupBy,\n                        \" \",\n                        _react2.default.createElement(\"input\", {\n                            type: \"checkbox\",\n                            checked: !!this.state.__enableGrouping,\n                            onChange: function onChange(e) {\n                                return _this3.setState({\n                                    __enableGrouping: e.target.checked\n                                });\n                            }\n                        })\n                    ),\n                    _react2.default.createElement(\n                        \"b\",\n                        { className: \"text-primary\" },\n                        _react2.default.createElement(\"i\", { className: \"fa fa-address-card-o\" }),\n                        \" \",\n                        this.props.title\n                    )\n                ) : null,\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"table-responsive\" },\n                    _react2.default.createElement(\n                        \"table\",\n                        { className: \"table table-condensed table-hover table-striped table-bordered\", style: {\n                                minWidth: this.props.cols.length * 200\n                            } },\n                        _react2.default.createElement(\n                            \"thead\",\n                            null,\n                            _react2.default.createElement(\n                                \"tr\",\n                                null,\n                                this.props.cols.map(function (col, i) {\n                                    var headerProps = col.headerProps,\n                                        label = col.label;\n\n                                    headerProps = _extends({}, headerProps, { key: i });\n                                    return _react2.default.createElement(\n                                        \"th\",\n                                        headerProps,\n                                        label || \"\"\n                                    );\n                                })\n                            )\n                        ),\n                        _react2.default.createElement(\n                            \"tbody\",\n                            null,\n                            this.renderRows()\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return Grid;\n}(_react2.default.Component);\n\nGrid.propTypes = {\n    rows: _propTypes2.default.arrayOf(_propTypes2.default.object).isRequired,\n    cols: _propTypes2.default.arrayOf(_propTypes2.default.object).isRequired,\n    settings: _propTypes2.default.object.isRequired,\n    title: _propTypes2.default.string,\n    groupBy: _propTypes2.default.string,\n    comparator: _propTypes2.default.func\n};\nexports.default = (0, _reactRedux.connect)(function (state) {\n    return {\n        settings: state.settings\n    };\n})(Grid);\n\n/***/ }),\n\n/***/ 21:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.goPrev = exports.goNext = exports.fetch = exports.setLimit = exports.setTags = exports.delTag = exports.addTag = exports.setSort = exports.setQueryType = exports.setQueryString = exports.setParam = exports.setGender = exports.setConditions = exports.delCondition = exports.addCondition = exports.setAgeGroup = exports.setMaxAge = exports.setMinAge = exports.setData = exports.setError = exports.setLoading = exports.queryBuilder = undefined;\n\nvar _handleActions;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _reduxActions = __webpack_require__(44);\n\nvar _PatientSearch = __webpack_require__(327);\n\nvar _PatientSearch2 = _interopRequireDefault(_PatientSearch);\n\nvar _lib = __webpack_require__(7);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar queryBuilder = exports.queryBuilder = new _PatientSearch2.default((0, _lib.parseQueryString)(window.location.hash.split(\"?\")[1] || \"\"));\n\n/**\n * The initial state is just an empty object that will be filled\n * with query parameters.\n */\nvar INITIAL_STATE = _extends({}, queryBuilder.getState(), {\n    loading: false,\n    error: null,\n    bundle: null\n\n    // Private action constants\n});var SET_LOADING = \"app/search/SET_LOADING\";\nvar SET_ERROR = \"app/search/SET_ERROR\";\nvar SET_DATA = \"app/search/SET_DATA\";\nvar SET_MIN_AGE = \"app/search/SET_MIN_AGE\";\nvar SET_MAX_AGE = \"app/search/SET_MAX_AGE\";\nvar SET_AGE_GROUP = \"app/search/SET_AGE_GROUP\";\nvar ADD_CONDITION = \"app/search/ADD_CONDITION\";\nvar DEL_CONDITION = \"app/search/DEL_CONDITION\";\nvar ADD_TAG = \"app/search/ADD_TAG\";\nvar DEL_TAG = \"app/search/DEL_TAG\";\nvar SET_CONDITIONS = \"app/search/SET_CONDITIONS\";\nvar SET_GENDER = \"app/search/SET_GENDER\";\nvar SET_PARAM = \"app/search/SET_PARAM\";\nvar SET_QUERY_STRING = \"app/search/SET_QUERY_STRING\";\nvar SET_QUERY_TYPE = \"app/search/SET_QUERY_TYPE\";\nvar SET_SORT = \"app/search/SET_SORT\";\nvar SET_TAGS = \"app/search/SET_TAGS\";\nvar SET_LIMIT = \"app/search/SET_LIMIT\";\n\n// Create (and export) the redux actions ---------------------------------------\nvar setLoading = exports.setLoading = (0, _reduxActions.createAction)(SET_LOADING);\nvar setError = exports.setError = (0, _reduxActions.createAction)(SET_ERROR);\nvar setData = exports.setData = (0, _reduxActions.createAction)(SET_DATA);\nvar setMinAge = exports.setMinAge = (0, _reduxActions.createAction)(SET_MIN_AGE);\nvar setMaxAge = exports.setMaxAge = (0, _reduxActions.createAction)(SET_MAX_AGE);\nvar setAgeGroup = exports.setAgeGroup = (0, _reduxActions.createAction)(SET_AGE_GROUP);\nvar addCondition = exports.addCondition = (0, _reduxActions.createAction)(ADD_CONDITION);\nvar delCondition = exports.delCondition = (0, _reduxActions.createAction)(DEL_CONDITION);\nvar setConditions = exports.setConditions = (0, _reduxActions.createAction)(SET_CONDITIONS);\nvar setGender = exports.setGender = (0, _reduxActions.createAction)(SET_GENDER);\nvar setParam = exports.setParam = (0, _reduxActions.createAction)(SET_PARAM);\nvar setQueryString = exports.setQueryString = (0, _reduxActions.createAction)(SET_QUERY_STRING);\nvar setQueryType = exports.setQueryType = (0, _reduxActions.createAction)(SET_QUERY_TYPE);\nvar setSort = exports.setSort = (0, _reduxActions.createAction)(SET_SORT);\nvar addTag = exports.addTag = (0, _reduxActions.createAction)(ADD_TAG);\nvar delTag = exports.delTag = (0, _reduxActions.createAction)(DEL_TAG);\nvar setTags = exports.setTags = (0, _reduxActions.createAction)(SET_TAGS);\nvar setLimit = exports.setLimit = (0, _reduxActions.createAction)(SET_LIMIT);\n\nvar fetch = exports.fetch = function fetch() {\n    return function (dispatch, getState) {\n        dispatch(setLoading(true));\n        dispatch(setError(null));\n\n        var _getState = getState(),\n            settings = _getState.settings;\n\n        queryBuilder.fetch(settings.server).then(function (bundle) {\n            dispatch(setData(bundle));\n            dispatch(setLoading(false));\n        }, function (error) {\n            dispatch(setError(error));\n            dispatch(setLoading(false));\n        });\n    };\n};\n\nvar goNext = exports.goNext = function goNext() {\n    return function (dispatch, getState) {\n        var bundle = getState().query.bundle;\n\n        var url = (0, _lib.getBundleURL)(bundle, \"next\");\n        if (url) {\n            url = (0, _lib.parseQueryString)(url);\n            queryBuilder.setOffset(url._getpages, +url._getpagesoffset);\n            dispatch(fetch());\n        }\n    };\n};\n\nvar goPrev = exports.goPrev = function goPrev() {\n    return function (dispatch, getState) {\n        var bundle = getState().query.bundle;\n\n        var url = (0, _lib.getBundleURL)(bundle, \"previous\");\n        if (url) {\n            url = (0, _lib.parseQueryString)(url);\n            queryBuilder.setOffset(url._getpages, +url._getpagesoffset);\n            dispatch(fetch());\n        }\n    };\n};\n\n// Export the reducer as default\nexports.default = (0, _reduxActions.handleActions)((_handleActions = {}, _defineProperty(_handleActions, SET_SORT, function (state, action) {\n    queryBuilder.setSort(action.payload);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, SET_QUERY_STRING, function (state, action) {\n    queryBuilder.setQueryString(action.payload);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, SET_QUERY_TYPE, function (state, action) {\n    queryBuilder.setQueryType(action.payload);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, SET_PARAM, function (state, action) {\n    queryBuilder.setParam(action.payload.name, action.payload.value);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, SET_MIN_AGE, function (state, action) {\n    queryBuilder.setMinAge(action.payload);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, SET_MAX_AGE, function (state, action) {\n    queryBuilder.setMaxAge(action.payload);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, SET_AGE_GROUP, function (state, action) {\n    queryBuilder.setAgeGroup(action.payload);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, ADD_CONDITION, function (state, action) {\n    queryBuilder.addCondition(action.payload.key, action.payload.value);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, SET_CONDITIONS, function (state, action) {\n    queryBuilder.setConditions(action.payload);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, DEL_CONDITION, function (state, action) {\n    queryBuilder.removeCondition(action.payload);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, ADD_TAG, function (state, action) {\n    queryBuilder.addTag(action.payload);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, DEL_TAG, function (state, action) {\n    queryBuilder.removeTag(action.payload);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, SET_TAGS, function (state, action) {\n    queryBuilder.setTags(action.payload);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, SET_GENDER, function (state, action) {\n    queryBuilder.setGender(action.payload);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, SET_LIMIT, function (state, action) {\n    queryBuilder.setLimit(action.payload);\n    return _extends({}, state, queryBuilder.getState());\n}), _defineProperty(_handleActions, SET_LOADING, function (state, action) {\n    return _extends({}, state, queryBuilder.getState(), {\n        loading: !!action.payload\n    });\n}), _defineProperty(_handleActions, SET_ERROR, function (state, action) {\n    return _extends({}, state, queryBuilder.getState(), {\n        error: action.payload\n    });\n}), _defineProperty(_handleActions, SET_DATA, function (state, action) {\n    return _extends({}, state, queryBuilder.getState(), {\n        bundle: action.payload\n    });\n}), _handleActions), INITIAL_STATE);\n\n/***/ }),\n\n/***/ 260:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.element = exports.modifier = void 0;\n\nvar element = function element(el, base) {\n  return \"\".concat(base, \"__\").concat(el);\n};\n\nexports.element = element;\n\nvar modifier = function modifier(modifiers, base) {\n  if (!modifiers) {\n    return null;\n  }\n\n  var finalClass = [];\n  var classNames = modifiers.split(' ');\n  classNames.forEach(function (singleClass) {\n    finalClass.push(\"\".concat(base, \"--\").concat(singleClass));\n  });\n  return finalClass.join(' ');\n};\n\nexports.modifier = modifier;\n\n/***/ }),\n\n/***/ 261:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  SHOW: 'SHOW',\n  CLOSE: 'CLOSE',\n  REFRESH: 'REFRESH'\n};\nexports.default = _default;\n\n/***/ }),\n\n/***/ 306:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(95);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _App = __webpack_require__(308);\n\nvar _App2 = _interopRequireDefault(_App);\n\nvar _reactRedux = __webpack_require__(19);\n\nvar _redux = __webpack_require__(46);\n\nvar _redux2 = _interopRequireDefault(_redux);\n\nvar _PatientDetail = __webpack_require__(321);\n\nvar _PatientDetail2 = _interopRequireDefault(_PatientDetail);\n\nvar _PatientList = __webpack_require__(322);\n\nvar _PatientList2 = _interopRequireDefault(_PatientList);\n\nvar _reactRouter = __webpack_require__(96);\n\nvar _createHashHistory = __webpack_require__(108);\n\nvar _createHashHistory2 = _interopRequireDefault(_createHashHistory);\n\nvar _jquery = __webpack_require__(25);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _reactPopup = __webpack_require__(449);\n\nvar _reactPopup2 = _interopRequireDefault(_reactPopup);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.$ = window.jQuery = _jquery2.default;\n\nvar history = (0, _createHashHistory2.default)();\n\n_reactDom2.default.render(_react2.default.createElement(_reactPopup2.default, null), document.getElementById('popupContainer'), _react2.default.createElement(\n    _reactRedux.Provider,\n    { store: _redux2.default },\n    _react2.default.createElement(\n        _reactRouter.Router,\n        { history: history },\n        _react2.default.createElement(\n            _reactRouter.Switch,\n            null,\n            _react2.default.createElement(\n                _App2.default,\n                null,\n                _react2.default.createElement(_reactRouter.Route, { path: \"/\", component: _PatientList2.default, exact: true }),\n                _react2.default.createElement(_reactRouter.Route, { path: \"/patient/:index\", component: _PatientDetail2.default })\n            )\n        )\n    )\n), document.getElementById(\"main\"));\n\n$(function () {\n    $(\"body\").tooltip({\n        selector: \".patient-detail-page [title]\"\n    });\n});\n\n/***/ }),\n\n/***/ 307:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\n__webpack_require__(538);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar AgeSelector = function (_React$Component) {\n    _inherits(AgeSelector, _React$Component);\n\n    function AgeSelector() {\n        var _ref;\n\n        _classCallCheck(this, AgeSelector);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        var _this = _possibleConstructorReturn(this, (_ref = AgeSelector.__proto__ || Object.getPrototypeOf(AgeSelector)).call.apply(_ref, [this].concat(args)));\n\n        _this.onChangeMinValue = _this.onChangeMinValue.bind(_this);\n        _this.onChangeMinUnits = _this.onChangeMinUnits.bind(_this);\n        _this.onChangeMaxValue = _this.onChangeMaxValue.bind(_this);\n        _this.onChangeMaxUnits = _this.onChangeMaxUnits.bind(_this);\n        _this.onGroupChange = _this.onGroupChange.bind(_this);\n        _this.state = _this._propsToState(_this.props);\n        return _this;\n    }\n\n    _createClass(AgeSelector, [{\n        key: \"_propsToState\",\n        value: function _propsToState(props) {\n            var state = {};\n            if (props.min && _typeof(props.min) == \"object\") {\n                if (props.min.hasOwnProperty(\"value\")) {\n                    state.minValue = isNaN(props.min.value) ? \"\" : props.min.value;\n                }\n                if (props.min.hasOwnProperty(\"units\")) {\n                    state.minUnits = props.min.units;\n                }\n            }\n            if (props.max && _typeof(props.max) == \"object\") {\n                if (props.max.hasOwnProperty(\"value\")) {\n                    state.maxValue = isNaN(props.max.value) ? \"\" : props.max.value;\n                }\n                if (props.max.hasOwnProperty(\"units\")) {\n                    state.maxUnits = props.max.units;\n                }\n            }\n\n            return state;\n        }\n    }, {\n        key: \"componentWillReceiveProps\",\n        value: function componentWillReceiveProps(newProps) {\n            var newState = this._propsToState(newProps);\n            if (Object.keys(newState).length) {\n                this.setState(newState);\n            }\n        }\n\n        // Event handlers ----------------------------------------------------------\n\n        /**\n         * When the numeric value of the min-age changes\n         * @param {Event} e\n         */\n\n    }, {\n        key: \"onChangeMinValue\",\n        value: function onChangeMinValue(e) {\n            if (this.props.onMinChange) {\n                var min = {\n                    value: e.target.valueAsNumber || parseFloat(e.target.value || \"0\"),\n                    units: this.props.min.units\n                };\n\n                if (this.canSet(min, this.props.max)) {\n                    this.props.onMinChange(min);\n                } else {\n                    this.setState(this._propsToState({ min: min }));\n                }\n            }\n        }\n\n        /**\n         * When the units of the min-age change\n         * @param {Event} e\n         */\n\n    }, {\n        key: \"onChangeMinUnits\",\n        value: function onChangeMinUnits(e) {\n            if (this.props.onMinChange) {\n                var min = {\n                    value: this.props.min.value,\n                    units: e.target.value\n                };\n                if (this.canSet(min, this.props.max)) {\n                    this.props.onMinChange(min);\n                } else {\n                    this.setState(this._propsToState({ min: min }));\n                }\n            }\n        }\n\n        /**\n         * When the numeric value of the max-age changes\n         * @param {Event} e\n         */\n\n    }, {\n        key: \"onChangeMaxValue\",\n        value: function onChangeMaxValue(e) {\n            if (this.props.onMaxChange) {\n                var max = {\n                    value: e.target.valueAsNumber || parseFloat(e.target.value || \"0\"),\n                    units: this.props.max.units\n                };\n                if (this.canSet(this.props.min, max)) {\n                    this.props.onMaxChange(max);\n                } else {\n                    this.setState(this._propsToState({ max: max }));\n                }\n            }\n        }\n\n        /**\n         * When the units of the max-age change\n         * @param {Event} e\n         */\n\n    }, {\n        key: \"onChangeMaxUnits\",\n        value: function onChangeMaxUnits(e) {\n            if (this.props.onMaxChange) {\n                var max = {\n                    value: this.props.max.value,\n                    units: e.target.value\n                };\n                if (this.canSet(this.props.min, max)) {\n                    this.props.onMaxChange(max);\n                } else {\n                    this.setState(this._propsToState({ max: max }));\n                }\n            }\n        }\n\n        /**\n         * When the selected age group changes\n         * @param {Event} e\n         */\n\n    }, {\n        key: \"onGroupChange\",\n        value: function onGroupChange(e) {\n            if (this.props.onGroupChange) {\n                this.props.onGroupChange(e.target.value);\n            }\n        }\n\n        // Validators and helper methods -------------------------------------------\n\n        /**\n         * Given two dates (as value and units) returns true if min is before max.\n         * This is used to validate inputs and prevent the user from entering\n         * invalid ranges\n         * @param {Object} min The min date as { value: number, units: string }\n         * @param {Object} max The max date as { value: number, units: string }\n         * @returns {Boolean}\n         */\n\n    }, {\n        key: \"canSet\",\n        value: function canSet(min, max) {\n            var maxDuration = _moment2.default.duration(max.value, max.units);\n            var minDuration = _moment2.default.duration(min.value, min.units);\n            return minDuration < maxDuration;\n        }\n\n        // Rendering methods -------------------------------------------------------\n\n    }, {\n        key: \"render\",\n        value: function render() {\n            var valid = this.canSet({\n                value: this.state.minValue,\n                units: this.state.minUnits\n            }, {\n                value: this.state.maxValue,\n                units: this.state.maxUnits\n            });\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"age-widget-wrap form-control input-sm\" + (this.props.group == \"**custom**\" ? \" custom\" : \"\") },\n                _react2.default.createElement(\n                    \"select\",\n                    {\n                        onChange: this.onGroupChange,\n                        value: this.props.group || \"\"\n                    },\n                    _react2.default.createElement(\n                        \"option\",\n                        { value: \"\" },\n                        \"Any Age\"\n                    ),\n                    _react2.default.createElement(\n                        \"option\",\n                        { value: \"infant\" },\n                        \"Infants (0 - 12 months, Alive only)\"\n                    ),\n                    _react2.default.createElement(\n                        \"option\",\n                        { value: \"child\" },\n                        \"Children (1 - 18 years, Alive only)\"\n                    ),\n                    _react2.default.createElement(\n                        \"option\",\n                        { value: \"adult\" },\n                        \"Adults (18 - 65 years, Alive only)\"\n                    ),\n                    _react2.default.createElement(\n                        \"option\",\n                        { value: \"elderly\" },\n                        \"Elderly (65+ years, Alive only)\"\n                    ),\n                    _react2.default.createElement(\n                        \"option\",\n                        { value: \"**custom**\" },\n                        this.props.group == \"**custom**\" ? \"Custom Age, Alive only:\" : \"Custom Age, Alive only\"\n                    )\n                ),\n                this.props.group == \"**custom**\" ? _react2.default.createElement(\n                    \"div\",\n                    { className: \"age-widget\" + (valid ? \"\" : \" invalid\") },\n                    _react2.default.createElement(\n                        \"span\",\n                        null,\n                        \"Min:\"\n                    ),\n                    _react2.default.createElement(\"input\", {\n                        type: \"number\",\n                        value: this.state.minValue,\n                        onChange: this.onChangeMinValue,\n                        min: 0,\n                        step: 1\n                    }),\n                    _react2.default.createElement(\n                        \"select\",\n                        {\n                            value: this.state.minUnits,\n                            onChange: this.onChangeMinUnits\n                        },\n                        _react2.default.createElement(\n                            \"option\",\n                            { value: \"years\" },\n                            \"Years\"\n                        ),\n                        _react2.default.createElement(\n                            \"option\",\n                            { value: \"months\" },\n                            \"Months\"\n                        ),\n                        _react2.default.createElement(\n                            \"option\",\n                            { value: \"days\" },\n                            \"Days\"\n                        )\n                    )\n                ) : null,\n                this.props.group == \"**custom**\" ? _react2.default.createElement(\n                    \"div\",\n                    { className: \"age-widget\" + (valid ? \"\" : \" invalid\") },\n                    _react2.default.createElement(\n                        \"span\",\n                        null,\n                        \"Max:\"\n                    ),\n                    _react2.default.createElement(\"input\", {\n                        type: \"number\",\n                        value: this.state.maxValue,\n                        onChange: this.onChangeMaxValue,\n                        min: 0,\n                        step: 1\n                    }),\n                    _react2.default.createElement(\n                        \"select\",\n                        {\n                            value: this.state.maxUnits,\n                            onChange: this.onChangeMaxUnits\n                        },\n                        _react2.default.createElement(\n                            \"option\",\n                            { value: \"years\" },\n                            \"Years\"\n                        ),\n                        _react2.default.createElement(\n                            \"option\",\n                            { value: \"months\" },\n                            \"Months\"\n                        ),\n                        _react2.default.createElement(\n                            \"option\",\n                            { value: \"days\" },\n                            \"Days\"\n                        )\n                    )\n                ) : null\n            );\n        }\n    }]);\n\n    return AgeSelector;\n}(_react2.default.Component);\n\nAgeSelector.propTypes = {\n    min: _propTypes2.default.shape({\n        value: _propTypes2.default.number,\n        units: _propTypes2.default.oneOf([\"years\", \"months\", \"days\"])\n    }),\n    max: _propTypes2.default.shape({\n        value: _propTypes2.default.number,\n        units: _propTypes2.default.oneOf([\"years\", \"months\", \"days\"])\n    }),\n    group: _propTypes2.default.string,\n    onMinChange: _propTypes2.default.func,\n    onMaxChange: _propTypes2.default.func,\n    onGroupChange: _propTypes2.default.func,\n    update: _propTypes2.default.func\n};\nAgeSelector.defaultProps = {\n    min: {\n        value: 0,\n        units: \"years\"\n    },\n    max: {\n        value: 100,\n        units: \"years\"\n    },\n    group: \"\",\n    update: function update() {\n        return alert(\"No update function provided!\");\n    }\n};\nexports.default = AgeSelector;\n\n/***/ }),\n\n/***/ 308:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.App = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _jquery = __webpack_require__(25);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _json = __webpack_require__(362);\n\nvar _json2 = _interopRequireDefault(_json);\n\nvar _reactRedux = __webpack_require__(19);\n\nvar _Loader = __webpack_require__(101);\n\nvar _Loader2 = _interopRequireDefault(_Loader);\n\nvar _ErrorMessage = __webpack_require__(100);\n\nvar _ErrorMessage2 = _interopRequireDefault(_ErrorMessage);\n\nvar _query = __webpack_require__(21);\n\nvar _settings = __webpack_require__(48);\n\nvar _lib = __webpack_require__(7);\n\n__webpack_require__(539);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar OWNER = window.opener || (window.parent === self ? null : window.parent);\nvar DEFAULT_CONFIG = \"default\";\n\nvar App = exports.App = function (_React$Component) {\n    _inherits(App, _React$Component);\n\n    function App() {\n        var _ref;\n\n        _classCallCheck(this, App);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        var _this = _possibleConstructorReturn(this, (_ref = App.__proto__ || Object.getPrototypeOf(App)).call.apply(_ref, [this].concat(args)));\n\n        _this.state = {\n            error: null\n        };\n        return _this;\n    }\n\n    _createClass(App, [{\n        key: \"handleUiBlocking\",\n        value: function handleUiBlocking() {\n            var runningRequests = 0,\n                hideDelay = void 0;\n\n            var handle = function handle() {\n                if (hideDelay) {\n                    clearTimeout(hideDelay);\n                }\n                if (runningRequests > 0) {\n                    (0, _jquery2.default)(\"#overlay\").show();\n                } else {\n                    hideDelay = setTimeout(function () {\n                        (0, _jquery2.default)(\"#overlay\").hide();\n                    }, 200);\n                }\n            };\n\n            (0, _jquery2.default)(document).ajaxStart(function () {\n                runningRequests++;\n                handle();\n            });\n\n            (0, _jquery2.default)(document).ajaxComplete(function () {\n                runningRequests = Math.max(--runningRequests, 0);\n                handle();\n            });\n        }\n    }, {\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            this.handleUiBlocking();\n\n            var _parseQueryString = (0, _lib.parseQueryString)(window.location.search),\n                config = _parseQueryString.config,\n                params = _objectWithoutProperties(_parseQueryString, [\"config\"]);\n\n            var settings = {};\n            _jquery2.default.ajax({\n                url: \"./config/\" + (config || DEFAULT_CONFIG) + \".json5\",\n                dataType: \"text\",\n                cache: false\n            }).then(function (json) {\n                json = _json2.default.parse(json);\n                _jquery2.default.ajaxSetup({ timeout: json.timeout || 20000 });\n                settings = _extends({}, json, params);\n            }, function (errorXHR) {\n                console.warn(\"Loading custom config: \" + errorXHR.statusText);\n            }).always(function () {\n                var settingReceived = false;\n\n                var onMessage = function onMessage(e) {\n                    if (e.data.type == 'config' && e.data.data && _typeof(e.data.data) == \"object\") {\n                        settingReceived = true;\n                        _this2.props.dispatch((0, _settings.merge)(e.data.data));\n                        _this2.props.dispatch((0, _query.fetch)());\n                    }\n                };\n\n                _this2.props.dispatch((0, _settings.merge)(settings));\n                _this2.props.dispatch((0, _query.setLimit)(settings.patientsPerPage));\n\n                if (OWNER) {\n\n                    window.addEventListener(\"unload\", function () {\n                        OWNER.postMessage({ type: \"close\" }, \"*\");\n                    });\n\n                    window.addEventListener(\"message\", onMessage);\n\n                    setTimeout(function () {\n                        window.removeEventListener(\"message\", onMessage);\n                        if (!settingReceived) {\n                            _this2.props.dispatch((0, _query.fetch)());\n                        }\n                    }, 1000);\n\n                    OWNER.postMessage({ type: \"ready\" }, \"*\");\n                } else {\n                    _this2.props.dispatch((0, _query.fetch)());\n                }\n            });\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            if (this.state.error) {\n                return _react2.default.createElement(_ErrorMessage2.default, { error: this.state.error });\n            }\n            if (!this.props.settings || !this.props.settings.loaded) {\n                return _react2.default.createElement(\n                    \"div\",\n                    { className: \"app\" },\n                    _react2.default.createElement(_Loader2.default, null)\n                );\n            }\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"app\" },\n                this.props.children\n            );\n        }\n    }]);\n\n    return App;\n}(_react2.default.Component);\n\nApp.propTypes = {\n    children: _propTypes2.default.any,\n    settings: _propTypes2.default.object.isRequired,\n    dispatch: _propTypes2.default.func.isRequired\n};\nexports.default = (0, _reactRedux.connect)(function (state) {\n    return _extends({}, state);\n})(App);\n\n/***/ }),\n\n/***/ 309:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _Grid = __webpack_require__(20);\n\nvar _Grid2 = _interopRequireDefault(_Grid);\n\nvar _lib = __webpack_require__(7);\n\nvar _Period = __webpack_require__(45);\n\nvar _Period2 = _interopRequireDefault(_Period);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CarePlan = function (_React$Component) {\n    _inherits(CarePlan, _React$Component);\n\n    function CarePlan() {\n        _classCallCheck(this, CarePlan);\n\n        return _possibleConstructorReturn(this, (CarePlan.__proto__ || Object.getPrototypeOf(CarePlan)).apply(this, arguments));\n    }\n\n    _createClass(CarePlan, [{\n        key: \"render\",\n        value: function render() {\n            return _react2.default.createElement(_Grid2.default, {\n                rows: (this.props.resources || []).map(function (o) {\n                    return o.resource;\n                }),\n                title: \"CarePlan\",\n                groupBy: \"Category\",\n                comparator: function comparator(a, b) {\n                    var dA = (0, _lib.getPath)(a, \"period.start\");\n                    var dB = (0, _lib.getPath)(b, \"period.start\");\n                    dA = dA ? +(0, _moment2.default)(dA) : 0;\n                    dB = dB ? +(0, _moment2.default)(dB) : 0;\n                    return dB - dA;\n                },\n                cols: [{\n                    label: \"Category\",\n                    path: \"category.0.coding.0.display\",\n                    render: function render(rec) {\n                        return _react2.default.createElement(\n                            \"b\",\n                            null,\n                            (0, _lib.getPath)(rec, \"category.0.coding.0.display\")\n                        );\n                    }\n                }, {\n                    label: \"Reason\",\n                    render: function render(rec) {\n                        return (rec.activity || []).map(function (a, i) {\n                            var reason = (0, _lib.getPath)(a, \"detail.code.coding.0.display\") || \"\";\n                            return reason ? _react2.default.createElement(\n                                \"div\",\n                                { key: i },\n                                reason,\n                                _react2.default.createElement(\n                                    \"span\",\n                                    null,\n                                    \" - \"\n                                ),\n                                _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"text-muted\" },\n                                    (0, _lib.getPath)(a, \"detail.status\") || \"no data\"\n                                )\n                            ) : \"\";\n                        });\n                    }\n                }, {\n                    label: \"Period\",\n                    render: function render(o) {\n                        return (0, _Period2.default)(o.period);\n                    }\n                }, {\n                    label: \"Status\",\n                    path: \"status\"\n                }]\n            });\n        }\n    }]);\n\n    return CarePlan;\n}(_react2.default.Component);\n\nCarePlan.propTypes = {\n    resources: _propTypes2.default.arrayOf(_propTypes2.default.object)\n};\nexports.default = CarePlan;\n\n/***/ }),\n\n/***/ 310:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _constants = __webpack_require__(103);\n\nvar _Grid = __webpack_require__(20);\n\nvar _Grid2 = _interopRequireDefault(_Grid);\n\nvar _Date = __webpack_require__(33);\n\nvar _Date2 = _interopRequireDefault(_Date);\n\nvar _lib = __webpack_require__(7);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ConditionList = function (_React$Component) {\n    _inherits(ConditionList, _React$Component);\n\n    // https://reactjs.org/docs/handling-events.html\n    function ConditionList(props) {\n        _classCallCheck(this, ConditionList);\n\n        var _this = _possibleConstructorReturn(this, (ConditionList.__proto__ || Object.getPrototypeOf(ConditionList)).call(this, props));\n\n        _this.state = { doHighlight: false };\n        _this.toggleHighlight = _this.toggleHighlight.bind(_this);\n        return _this;\n    }\n\n    _createClass(ConditionList, [{\n        key: \"toggleHighlight\",\n        value: function toggleHighlight() {\n            this.setState(function (prevState) {\n                return {\n                    doHighlight: !prevState.doHighlight\n                };\n            });\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _this2 = this;\n\n            var recs = this.props.resources || [];\n            var length = recs.length;\n\n            return _react2.default.createElement(_Grid2.default, {\n                rows: (recs || []).map(function (o) {\n                    return o.resource;\n                }),\n                title: length + \" Condition\" + (length === 1 ? \"\" : \"s\"),\n                comparator: function comparator(a, b) {\n                    var dA = (0, _lib.getPath)(a, \"onsetDateTime\");\n                    var dB = (0, _lib.getPath)(b, \"onsetDateTime\");\n                    dA = dA ? +(0, _moment2.default)(dA) : 0;\n                    dB = dB ? +(0, _moment2.default)(dB) : 0;\n                    return dB - dA;\n                },\n                cols: [{\n                    label: \"Condition\",\n                    render: function render(o) {\n                        var name = \"-\";\n                        var code = \"-\";\n                        var system = \"\";\n\n                        var highlight = \"\";\n                        if (_this2.state.doHighlight && (0, _lib.codeIsNLPInsight)(o.code)) {\n                            highlight = \"mark\";\n                        }\n\n                        if (o.code) {\n                            if (o.code.text) {\n                                name = o.code.text;\n                            }\n                            if (Array.isArray(o.code.coding) && o.code.coding.length) {\n                                var c = o.code.coding[0];\n\n                                system = c.system;\n                                for (var key in _constants.CODE_SYSTEMS) {\n                                    if (_constants.CODE_SYSTEMS[key].url === c.system) {\n                                        system = \"(\" + key + \")\";\n                                        break;\n                                    }\n                                }\n\n                                if (c.display) {\n                                    name = c.display;\n                                }\n                                if (c.code) {\n                                    code = c.code;\n                                }\n                            }\n                        }\n                        return _react2.default.createElement(\n                            \"div\",\n                            null,\n                            _react2.default.createElement(\n                                \"b\",\n                                null,\n                                name\n                            ),\n                            _react2.default.createElement(\n                                \"small\",\n                                { className: highlight + \" text-muted pull-right\" },\n                                code,\n                                \" \",\n                                system\n                            )\n                        );\n                    }\n                }, {\n                    label: _react2.default.createElement(\n                        \"div\",\n                        { className: \"text-center\" },\n                        \"Clinical Status\"\n                    ),\n                    render: function render(o) {\n                        return _react2.default.createElement(\n                            \"div\",\n                            { className: \"text-center\" },\n                            o.clinicalStatus ? (0, _lib.getCodeOrConcept)(o.clinicalStatus) : \"-\"\n                        );\n                    }\n                }, {\n                    label: _react2.default.createElement(\n                        \"div\",\n                        { className: \"text-center\" },\n                        \"Verification Status\"\n                    ),\n                    render: function render(o) {\n                        return _react2.default.createElement(\n                            \"div\",\n                            { className: \"text-center\" },\n                            o.verificationStatus ? (0, _lib.getCodeOrConcept)(o.verificationStatus) : \"-\"\n                        );\n                    }\n                }, {\n                    label: _react2.default.createElement(\n                        \"div\",\n                        { className: \"text-center\" },\n                        \"Onset Date\"\n                    ),\n                    render: function render(o) {\n                        var onset = o.onsetDateTime || \"\";\n                        return _react2.default.createElement(\n                            \"div\",\n                            { className: \"text-center\" },\n                            onset ? _react2.default.createElement(_Date2.default, { moment: o.onsetDateTime }) : \"-\"\n                        );\n                    }\n                }, {\n                    label: _react2.default.createElement(\n                        \"div\",\n                        { style: { textAlign: 'center' } },\n                        _react2.default.createElement(\n                            \"button\",\n                            {\n                                onMouseUp: this.toggleHighlight,\n                                style: {\n                                    backgroundColor: this.state.doHighlight ? '#337ab7' : 'white',\n                                    color: this.state.doHighlight ? 'white' : '#337ab7',\n                                    textAlign: 'center'\n                                }\n                            },\n                            _react2.default.createElement(\"i\", { className: \"fa fa-lightbulb-o fas fa-bold\" })\n                        )\n                    ),\n                    render: function render(o) {\n                        if ((0, _lib.getInsightSource)(o) != _lib.InsightSource.NONE) {\n                            return _react2.default.createElement(\n                                \"div\",\n                                { style: { color: '#337ab7', textAlign: 'center' } },\n                                _react2.default.createElement(\n                                    \"button\",\n                                    null,\n                                    _react2.default.createElement(\"i\", { className: \"fa fa-lightbulb-o fas fa-bold\" })\n                                )\n                            );\n                        } else {\n                            return _react2.default.createElement(\"div\", null);\n                        }\n                    }\n                }]\n            });\n        }\n    }]);\n\n    return ConditionList;\n}(_react2.default.Component);\n\nConditionList.propTypes = {\n    resources: _propTypes2.default.arrayOf(_propTypes2.default.object)\n};\nexports.default = ConditionList;\n\n/***/ }),\n\n/***/ 311:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _Grid = __webpack_require__(20);\n\nvar _Grid2 = _interopRequireDefault(_Grid);\n\nvar _lib = __webpack_require__(7);\n\nvar _Period = __webpack_require__(45);\n\nvar _Period2 = _interopRequireDefault(_Period);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction getEncounterClass(encounter) {\n    return encounter.class && _typeof(encounter.class) == \"object\" ? (0, _lib.getPath)(encounter, \"class.type.0.text\") : encounter.class;\n}\n\nfunction getEncounterLabel(encounter) {\n    var result = (0, _lib.getPath)(encounter, \"type.0.text\");\n    if (result) {\n        return result;\n    }\n    var _class = getEncounterClass(encounter);\n    if (_class) {\n        return _class + \" encounter\";\n    }\n    return \"\";\n}\n\nvar Encounter = function (_React$Component) {\n    _inherits(Encounter, _React$Component);\n\n    function Encounter() {\n        _classCallCheck(this, Encounter);\n\n        return _possibleConstructorReturn(this, (Encounter.__proto__ || Object.getPrototypeOf(Encounter)).apply(this, arguments));\n    }\n\n    _createClass(Encounter, [{\n        key: \"render\",\n        value: function render() {\n            return _react2.default.createElement(_Grid2.default, {\n                rows: (this.props.resources || []).map(function (o) {\n                    return o.resource;\n                }),\n                title: \"Encounter\" + (this.props.resources.length === 1 ? \"\" : \"s\"),\n                groupBy: \"Type\",\n                comparator: function comparator(a, b) {\n                    var dA = (0, _lib.getPath)(a, \"period.start\");\n                    var dB = (0, _lib.getPath)(b, \"period.start\");\n                    dA = dA ? +(0, _moment2.default)(dA) : 0;\n                    dB = dB ? +(0, _moment2.default)(dB) : 0;\n                    return dB - dA;\n                },\n                cols: [{\n                    label: \"Type\",\n                    path: function path(rec) {\n                        return getEncounterLabel(rec);\n                    },\n                    render: function render(rec) {\n                        var result = (0, _lib.getPath)(rec, \"type.0.text\");\n                        if (result) {\n                            return _react2.default.createElement(\n                                \"b\",\n                                null,\n                                result\n                            );\n                        }\n                        var _class = getEncounterClass(rec);\n                        if (_class) {\n                            return _react2.default.createElement(\n                                \"span\",\n                                { className: \"text-muted\" },\n                                _class + \" encounter\"\n                            );\n                        }\n                        return _react2.default.createElement(\n                            \"small\",\n                            { className: \"text-muted\" },\n                            \"N/A\"\n                        );\n                    }\n                }, {\n                    label: \"Reason\",\n                    path: \"reason.0.coding.0.display\",\n                    defaultValue: \"N/A\"\n                }, {\n                    label: \"Class\",\n                    render: function render(rec) {\n                        var result = getEncounterClass(rec);\n                        return result ? _react2.default.createElement(\n                            \"b\",\n                            null,\n                            result\n                        ) : _react2.default.createElement(\n                            \"small\",\n                            { className: \"text-muted\" },\n                            \"N/A\"\n                        );\n                    }\n                }, {\n                    label: \"Status\",\n                    path: \"status\",\n                    defaultValue: \"N/A\"\n                }, {\n                    label: \"Time\",\n                    path: \"period\",\n                    render: function render(o) {\n                        return (0, _Period2.default)(o.period || {});\n                    }\n                }]\n            });\n        }\n    }]);\n\n    return Encounter;\n}(_react2.default.Component);\n\nEncounter.propTypes = {\n    resources: _propTypes2.default.arrayOf(_propTypes2.default.object)\n};\nexports.default = Encounter;\n\n/***/ }),\n\n/***/ 312:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _Grid = __webpack_require__(20);\n\nvar _Grid2 = _interopRequireDefault(_Grid);\n\nvar _Date = __webpack_require__(33);\n\nvar _Date2 = _interopRequireDefault(_Date);\n\nvar _lib = __webpack_require__(7);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ImmunizationList = function (_React$Component) {\n    _inherits(ImmunizationList, _React$Component);\n\n    // https://reactjs.org/docs/handling-events.html\n    function ImmunizationList(props) {\n        _classCallCheck(this, ImmunizationList);\n\n        var _this = _possibleConstructorReturn(this, (ImmunizationList.__proto__ || Object.getPrototypeOf(ImmunizationList)).call(this, props));\n\n        _this.state = { doHighlight: false };\n        _this.toggleHighlight = _this.toggleHighlight.bind(_this);\n        return _this;\n    }\n\n    _createClass(ImmunizationList, [{\n        key: \"toggleHighlight\",\n        value: function toggleHighlight() {\n            this.setState(function (prevState) {\n                return {\n                    doHighlight: !prevState.doHighlight\n                };\n            });\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            return _react2.default.createElement(_Grid2.default, {\n                rows: (this.props.resources || []).map(function (o) {\n                    return o.resource;\n                }),\n                title: \"Immunizations\",\n                groupBy: \"Type\",\n                comparator: function comparator(a, b) {\n                    var dA = (0, _lib.getPath)(a, \"date\");\n                    var dB = (0, _lib.getPath)(b, \"date\");\n                    dA = dA ? +(0, _moment2.default)(dA) : 0;\n                    dB = dB ? +(0, _moment2.default)(dB) : 0;\n                    return dB - dA;\n                },\n                cols: [{\n                    label: \"Type\",\n                    render: function render(o) {\n                        return _react2.default.createElement(\n                            \"div\",\n                            { className: (0, _lib.codeIsNLPInsight)((0, _lib.getPath)(o, \"vaccineCode\")) ? \"mark\" : \"\" },\n                            (0, _lib.getPath)(o, \"vaccineCode.coding.0.display\")\n                        );\n                    }\n                }, {\n                    label: \"Status\",\n                    render: function render(o) {\n                        return o.status || \"-\";\n                    }\n                }, {\n                    label: \"Date\",\n                    render: function render(o) {\n                        return o.date ? _react2.default.createElement(_Date2.default, { moment: o.date }) : o.occurrenceDateTime ? _react2.default.createElement(_Date2.default, { moment: o.occurrenceDateTime }) : o.occurrenceString || \"-\";\n                    }\n                }, {\n                    label: _react2.default.createElement(\n                        \"div\",\n                        { style: { textAlign: 'center' } },\n                        _react2.default.createElement(\n                            \"button\",\n                            {\n                                onMouseUp: this.toggleHighlight,\n                                style: {\n                                    backgroundColor: this.state.doHighlight ? '#337ab7' : 'white',\n                                    color: this.state.doHighlight ? 'white' : '#337ab7',\n                                    textAlign: 'center'\n                                }\n                            },\n                            _react2.default.createElement(\"i\", { className: \"fa fa-lightbulb-o fas fa-bold\" })\n                        )\n                    ),\n                    render: function render(o) {\n                        if ((0, _lib.getInsightSource)(o) != _lib.InsightSource.NONE) {\n                            return _react2.default.createElement(\n                                \"div\",\n                                { style: { color: '#337ab7', textAlign: 'center' } },\n                                _react2.default.createElement(\n                                    \"button\",\n                                    null,\n                                    _react2.default.createElement(\"i\", { className: \"fa fa-lightbulb-o fas fa-bold\" })\n                                )\n                            );\n                        } else {\n                            return _react2.default.createElement(\"div\", null);\n                        }\n                    }\n                }]\n            });\n        }\n    }]);\n\n    return ImmunizationList;\n}(_react2.default.Component);\n\nImmunizationList.propTypes = {\n    resources: _propTypes2.default.arrayOf(_propTypes2.default.object)\n};\nexports.default = ImmunizationList;\n\n/***/ }),\n\n/***/ 313:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _lib = __webpack_require__(7);\n\nvar _Grid = __webpack_require__(20);\n\nvar _Grid2 = _interopRequireDefault(_Grid);\n\nvar _ValueRange = __webpack_require__(317);\n\nvar _ValueRange2 = _interopRequireDefault(_ValueRange);\n\nvar _Time = __webpack_require__(316);\n\nvar _Time2 = _interopRequireDefault(_Time);\n\nvar _Period = __webpack_require__(45);\n\nvar _Period2 = _interopRequireDefault(_Period);\n\nvar _Date = __webpack_require__(33);\n\nvar _Date2 = _interopRequireDefault(_Date);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Observations = function (_React$Component) {\n    _inherits(Observations, _React$Component);\n\n    function Observations() {\n        _classCallCheck(this, Observations);\n\n        return _possibleConstructorReturn(this, (Observations.__proto__ || Object.getPrototypeOf(Observations)).apply(this, arguments));\n    }\n\n    _createClass(Observations, [{\n        key: \"getObservationLabel\",\n        value: function getObservationLabel(o) {\n            return (0, _lib.getPath)(o, \"code.coding.0.display\") || (0, _lib.getPath)(o, \"code.text\") || (0, _lib.getPath)(o, \"valueQuantity.code\");\n        }\n    }, {\n        key: \"renderObservation\",\n        value: function renderObservation(o) {\n            var _this2 = this;\n\n            var includeLabel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n            if (Array.isArray(o.component)) {\n                return o.component.map(function (c, i) {\n                    var result = _this2.renderObservation(c, true);\n                    return _react2.default.createElement(\n                        \"span\",\n                        { key: i },\n                        i > 0 && _react2.default.createElement(\n                            \"span\",\n                            null,\n                            \",\\xA0\"\n                        ),\n                        result\n                    );\n                });\n            }\n\n            var returnResult = function returnResult(result) {\n                return _react2.default.createElement(\n                    \"span\",\n                    null,\n                    includeLabel && _react2.default.createElement(\n                        \"label\",\n                        { className: \"text-muted\" },\n                        _this2.getObservationLabel(o).replace(/^\\s*(Systolic|Diastolic)\\s+blood\\s+pressure\\s*$/gi, \"$1\"),\n                        \":\\xA0\"\n                    ),\n                    result\n                );\n            };\n\n            // valueBoolean\n            if (o.hasOwnProperty(\"valueBoolean\")) {\n                return returnResult(!o.valueBoolean || o.valueBoolean == \"false\" ? \"Negative\" : \"Positive\");\n            }\n\n            // valueString\n            if (o.hasOwnProperty(\"valueString\")) {\n                return returnResult(String(o.valueString));\n            }\n\n            // valueRange\n            if (o.hasOwnProperty(\"valueRange\")) {\n                return returnResult(_react2.default.createElement(_ValueRange2.default, { range: o.valueRange }));\n            }\n\n            // valueTime\n            if (o.hasOwnProperty(\"valueTime\")) {\n                return returnResult(_react2.default.createElement(_Time2.default, { moment: o.valueTime }));\n            }\n\n            // valueDateTime\n            if (o.hasOwnProperty(\"valueDateTime\")) {\n                return returnResult(_react2.default.createElement(_Date2.default, { moment: o.valueDateTime }));\n            }\n\n            // valuePeriod\n            if (o.hasOwnProperty(\"valuePeriod\")) {\n                return returnResult((0, _Period2.default)(o.valuePeriod));\n            }\n\n            // valueCodeableConcept\n            if (o.hasOwnProperty(\"valueCodeableConcept\")) {\n                return returnResult((0, _lib.getPath)(o, \"valueCodeableConcept.coding.0.display\"));\n            }\n\n            // valueQuantity\n            if (o.hasOwnProperty(\"valueQuantity\")) {\n                var value = (0, _lib.getPath)(o, \"valueQuantity.value\");\n                var units = (0, _lib.getPath)(o, \"valueQuantity.unit\");\n\n                if (!isNaN(parseFloat(value))) {\n                    value = Math.round(value * 100) / 100;\n                }\n\n                return returnResult(_react2.default.createElement(\n                    \"span\",\n                    null,\n                    value,\n                    \" \",\n                    _react2.default.createElement(\n                        \"span\",\n                        { className: \"text-muted\" },\n                        units\n                    )\n                ));\n            }\n\n            /* TODO:\n            valueRatio      : Ratio\n            valueSampledData: SampledData\n            valueAttachment : Attachment\n            */\n\n            return returnResult(_react2.default.createElement(\n                \"span\",\n                { className: \"text-muted\" },\n                \"N/A\"\n            ));\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _this3 = this;\n\n            return _react2.default.createElement(_Grid2.default, {\n                rows: (this.props.resources || []).map(function (o) {\n                    return o.resource;\n                }),\n                title: \"Observations\",\n                groupBy: \"Name\",\n                comparator: function comparator(a, b) {\n                    var dA = (0, _lib.getPath)(a, \"effectiveDateTime\") || (0, _lib.getPath)(a, \"meta.lastUpdated\");\n                    var dB = (0, _lib.getPath)(b, \"effectiveDateTime\") || (0, _lib.getPath)(b, \"meta.lastUpdated\");\n                    dA = dA ? +(0, _moment2.default)(dA) : 0;\n                    dB = dB ? +(0, _moment2.default)(dB) : 0;\n                    return dB - dA;\n                },\n                cols: [{\n                    label: \"Name\",\n                    path: function path(o) {\n                        return _this3.getObservationLabel(o);\n                    },\n                    render: function render(o) {\n                        return _react2.default.createElement(\n                            \"b\",\n                            null,\n                            _this3.getObservationLabel(o)\n                        );\n                    }\n                }, {\n                    label: \"Value\",\n                    render: function render(o) {\n                        return _this3.renderObservation(o);\n                    }\n                }, {\n                    label: \"Date\",\n                    render: function render(o) {\n                        var date = (0, _lib.getPath)(o, \"effectiveDateTime\") || (0, _lib.getPath)(o, \"meta.lastUpdated\");\n                        if (date) date = (0, _moment2.default)(date).format(\"MM/DD/YYYY\");\n                        return _react2.default.createElement(\n                            \"div\",\n                            { className: \"text-muted\" },\n                            date || \"-\"\n                        );\n                    }\n                }]\n            });\n        }\n    }]);\n\n    return Observations;\n}(_react2.default.Component);\n\nObservations.propTypes = {\n    resources: _propTypes2.default.arrayOf(_propTypes2.default.object)\n};\nexports.default = Observations;\n\n/***/ }),\n\n/***/ 314:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _Grid = __webpack_require__(20);\n\nvar _Grid2 = _interopRequireDefault(_Grid);\n\nvar _Date = __webpack_require__(33);\n\nvar _Date2 = _interopRequireDefault(_Date);\n\nvar _lib = __webpack_require__(7);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Person = function (_React$Component) {\n    _inherits(Person, _React$Component);\n\n    function Person() {\n        _classCallCheck(this, Person);\n\n        return _possibleConstructorReturn(this, (Person.__proto__ || Object.getPrototypeOf(Person)).apply(this, arguments));\n    }\n\n    _createClass(Person, [{\n        key: \"render\",\n        value: function render() {\n            return _react2.default.createElement(_Grid2.default, {\n                rows: (this.props.resources || []).map(function (o) {\n                    return o.resource;\n                }),\n                title: this.props.title,\n                comparator: function comparator(a, b) {\n                    var dA = (0, _lib.getPath)(a, \"birthDate\");\n                    var dB = (0, _lib.getPath)(b, \"birthDate\");\n                    dA = dA ? +(0, _moment2.default)(dA) : 0;\n                    dB = dB ? +(0, _moment2.default)(dB) : 0;\n                    return dB - dA;\n                },\n                cols: [{\n                    label: \"Identifier\",\n                    render: function render(rec) {\n                        var rows = [_react2.default.createElement(\n                            \"tr\",\n                            { key: \"id\" },\n                            _react2.default.createElement(\n                                \"td\",\n                                { className: \"label-cell\" },\n                                \"ID\"\n                            ),\n                            _react2.default.createElement(\n                                \"td\",\n                                null,\n                                rec.id\n                            )\n                        )];\n\n                        if (Array.isArray(rec.identifier)) {\n                            rows = rows.concat(rec.identifier.map(function (o) {\n                                var code = (0, _lib.getPath)(o, \"type.coding.0.display\") || (0, _lib.getPath)(o, \"type.text\") || (0, _lib.getPath)(o, \"type.coding.0.code\") || String((0, _lib.getPath)(o, \"system\") || \"\").split(/\\b/).pop();\n                                if (!code) return null;\n                                return _react2.default.createElement(\n                                    \"tr\",\n                                    { key: code },\n                                    _react2.default.createElement(\n                                        \"td\",\n                                        { className: \"label-cell\" },\n                                        code\n                                    ),\n                                    _react2.default.createElement(\n                                        \"td\",\n                                        null,\n                                        o.value\n                                    )\n                                );\n                            }).filter(Boolean));\n                        }\n\n                        return _react2.default.createElement(\n                            \"table\",\n                            null,\n                            _react2.default.createElement(\n                                \"tbody\",\n                                null,\n                                rows\n                            )\n                        );\n                    }\n                }, {\n                    label: \"Name\",\n                    render: _lib.getPatientName,\n                    defaultValue: \"N/A\"\n                }, {\n                    label: \"Gender\",\n                    path: \"gender\",\n                    defaultValue: \"N/A\"\n                }, {\n                    label: \"Birth Date\",\n                    path: \"birthDate\",\n                    defaultValue: \"N/A\",\n                    render: function render(o) {\n                        return _react2.default.createElement(_Date2.default, { moment: o.birthDate });\n                    }\n                }]\n            });\n        }\n    }]);\n\n    return Person;\n}(_react2.default.Component);\n\nPerson.propTypes = {\n    resources: _propTypes2.default.arrayOf(_propTypes2.default.object),\n    title: _propTypes2.default.string\n};\nPerson.defaultProps = {\n    title: \"Person\"\n};\nexports.default = Person;\n\n/***/ }),\n\n/***/ 315:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _Grid = __webpack_require__(20);\n\nvar _Grid2 = _interopRequireDefault(_Grid);\n\nvar _lib = __webpack_require__(7);\n\nvar _Period = __webpack_require__(45);\n\nvar _Period2 = _interopRequireDefault(_Period);\n\nvar _Date = __webpack_require__(33);\n\nvar _Date2 = _interopRequireDefault(_Date);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _InsightsPopup = __webpack_require__(320);\n\nvar _InsightsPopup2 = _interopRequireDefault(_InsightsPopup);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction renderCell(record, doHighlight, allOf, oneOf) {\n\n    var entries = [];\n\n    var visit = function visit(meta) {\n        var propValue = (0, _lib.getPath)(record, meta.path);\n        if (propValue !== undefined) {\n            var value = meta.render ? meta.render(record) : propValue;\n            var isNLP = doHighlight && Boolean(meta.nlpCodePath) && (0, _lib.codeIsNLPInsight)((0, _lib.getPath)(record, meta.nlpCodePath));\n            var raw = meta.raw ? meta.raw(record) : value;\n            var label = typeof meta.label == \"function\" ? meta.label(record) : meta.label;\n            var existing = entries.find(function (o) {\n                return o.value === raw;\n            });\n            if (existing) {\n                existing.label += \", \" + label;\n                if (isNLP) {\n                    existing.isNLP = true;\n                }\n            } else {\n                entries.push({ label: label, value: value, isNLP: isNLP });\n            }\n            return true;\n        }\n        return false;\n    };\n\n    allOf.forEach(visit);\n\n    if (!entries.length) {\n        oneOf.some(visit);\n    }\n\n    if (entries.length) {\n        return _react2.default.createElement(\n            \"table\",\n            null,\n            _react2.default.createElement(\n                \"tbody\",\n                null,\n                entries.map(function (o, i) {\n                    return _react2.default.createElement(\n                        \"tr\",\n                        { key: i, className: o.isNLP ? \"mark\" : \"\" },\n                        _react2.default.createElement(\n                            \"td\",\n                            { className: \"label-cell\" },\n                            o.label\n                        ),\n                        _react2.default.createElement(\n                            \"td\",\n                            null,\n                            o.value\n                        )\n                    );\n                })\n            )\n        );\n    }\n\n    return \"-\";\n}\n\nfunction getSortValue(rec) {\n    var paths = [\"authoredOn\", \"dateWritten\", \"performedDateTime\", \"recorded\", \"performedPeriod.start\", \"availableTime.0.availableStartTime\", \"whenHandedOver\", \"issued\", \"effectiveDateTime\", \"assertedDate\", \"meta.lastUpdated\"];\n\n    for (var i = 0, l = paths.length; i < l; i++) {\n        var v = (0, _lib.getPath)(rec, paths[i]);\n        if (v !== undefined) {\n            return v;\n        }\n    }\n\n    return 0;\n}\n\nfunction DataLink(_ref) {\n    var settings = _ref.settings,\n        path = _ref.path,\n        children = _ref.children;\n\n    var url = settings.server.url + \"/\" + path;\n    if (settings.fhirViewer.enabled) {\n        url = settings.fhirViewer.url + (settings.fhirViewer.url.indexOf(\"?\") > -1 ? \"&\" : \"?\") + settings.fhirViewer.param + \"=\" + encodeURIComponent(url);\n    }\n    return _react2.default.createElement(\n        \"a\",\n        { onClick: function onClick() {\n                window.open(url, \"_blank\");\n                return false;\n            } },\n        children\n    );\n}\n\nDataLink.propTypes = {\n    settings: _propTypes2.default.object.isRequired,\n    path: _propTypes2.default.string.isRequired,\n    children: _propTypes2.default.any\n};\n\nvar ResourceList = function (_React$Component) {\n    _inherits(ResourceList, _React$Component);\n\n    // https://reactjs.org/docs/handling-events.html\n    function ResourceList(props) {\n        _classCallCheck(this, ResourceList);\n\n        var _this = _possibleConstructorReturn(this, (ResourceList.__proto__ || Object.getPrototypeOf(ResourceList)).call(this, props));\n\n        _this.state = {\n            doHighlight: false,\n            showPopup: false\n        };\n        _this.toggleHighlight = _this.toggleHighlight.bind(_this);\n        _this.closePopup = _this.closePopup.bind(_this);\n        _this.openPopup = _this.openPopup.bind(_this);\n        return _this;\n    }\n\n    _createClass(ResourceList, [{\n        key: \"toggleHighlight\",\n        value: function toggleHighlight() {\n            this.setState(function (prevState) {\n                return {\n                    doHighlight: !prevState.doHighlight\n                };\n            });\n        }\n    }, {\n        key: \"closePopup\",\n        value: function closePopup() {\n            this.setState({ showPopup: null });\n        }\n    }, {\n        key: \"openPopup\",\n        value: function openPopup(resource) {\n            this.setState({ showPopup: resource });\n            console.log('button clicked');\n            console.log(JSON.stringify(resource));\n        }\n\n        /**\n         * The idea is to have 3 columns by default:\n         * 1. Identifier - something like a name, type, id etc.\n         * 2. Details - the important part that will describe the resource\n         * 3. Timing - time period, time, age etc.\n         * @returns {Array} The generated schema\n         */\n\n    }, {\n        key: \"determineSchema\",\n        value: function determineSchema(sampleResource) {\n            var _this2 = this;\n\n            var out = [];\n\n            if (!sampleResource) {\n                return out;\n            }\n\n            // 1. Identifier -------------------------------------------------------\n            out.push({\n                label: \"Identifier\",\n                render: function render(o) {\n                    return renderCell(o, _this2.state.doHighlight, [{\n                        path: \"id\",\n                        label: \"ID\",\n                        ellipsis: 15\n                    }, {\n                        path: \"name\",\n                        label: \"Name\"\n                    }, {\n                        path: \"identifier.0.type.coding.0.code\",\n                        label: \"Identifiers\",\n                        render: function render(rec) {\n                            if (Array.isArray(rec.identifier)) {\n                                return rec.identifier.map(function (id) {\n                                    var code = (0, _lib.getPath)(id, \"type.coding.0.code\");\n                                    if (!code) return null;\n                                    return code + \": \" + id.value;\n                                }).filter(Boolean).join(\", \");\n                            }\n                            return \"-\";\n                        }\n                    }]);\n                }\n            });\n\n            // 2. Details ----------------------------------------------------------\n            out.push({\n                label: \"Details\",\n                render: function render(o) {\n                    return renderCell(o, _this2.state.doHighlight, [{\n                        path: \"description.text\",\n                        label: \"Description\"\n                    }, {\n                        path: \"code.text\",\n                        label: \"Code\"\n                    }, {\n                        path: \"code.coding.0.display\",\n                        nlpCodePath: \"code\",\n                        label: \"Display\"\n                    }, {\n                        path: \"medicationCodeableConcept.coding.0.display\",\n                        nlpCodePath: \"medicationCodeableConcept\",\n                        label: \"Medication\"\n                    }, {\n                        path: \"medicationCodeableConcept.coding.0.code\",\n                        nlpCodePath: \"medicationCodeableConcept\",\n                        label: function label(rec) {\n                            return ((0, _lib.getPath)(rec, \"medicationCodeableConcept.coding.0.system\") || \"\").split(/\\b/).pop();\n                        }\n                    }, {\n                        path: \"code.coding.0.code\",\n                        nlpCodePath: \"code\",\n                        label: function label(rec) {\n                            return ((0, _lib.getPath)(rec, \"code.coding.0.system\") || \"\").replace(/\\/$/, \"\").split(/\\//).pop() + \" code\";\n                        }\n                    }, {\n                        path: \"result.0.display\",\n                        label: \"Result\",\n                        render: function render(rec) {\n                            return rec.result.map(function (r) {\n                                return r.display || 0;\n                            }).filter(Boolean).join(\", \");\n                        }\n                    }, {\n                        label: \"Status\",\n                        render: function render(rec) {\n                            return (0, _lib.getCodeOrConcept)(rec.status);\n                        }\n                    }, {\n                        label: \"Clinical Status\",\n                        render: function render(rec) {\n                            return (0, _lib.getCodeOrConcept)(rec.clinicalStatus);\n                        }\n                    }, {\n                        label: \"Verification Status\",\n                        render: function render(rec) {\n                            return (0, _lib.getCodeOrConcept)(rec.verificationStatus);\n                        }\n                    }, {\n                        label: \"Value as String\",\n                        path: \"valueString\"\n                    }, {\n                        label: \"Comment\",\n                        path: \"comment\"\n                    }, {\n                        label: \"Extra Details\",\n                        path: \"extraDetails\"\n                    }, {\n                        label: \"Type\",\n                        path: \"type\",\n                        render: function render(rec) {\n                            if (Array.isArray(rec.type)) {\n                                return rec.type.map(function (t) {\n                                    return t.text || (0, _lib.getPath)(t, \"coding.0.display\") || \"\";\n                                }).filter(Boolean).join(\", \");\n                            }\n                            return String((0, _lib.getPath)(rec, \"type.coding.0.display\") || (0, _lib.getPath)(rec, \"type.text\") || rec.type);\n                        }\n                    }, {\n                        label: \"Criticality\",\n                        path: \"criticality\"\n                    }, {\n                        label: \"Category\",\n                        path: \"category\",\n                        render: function render(rec) {\n                            function renderCategory(c) {\n                                if (!c) {\n                                    return \"N/A\";\n                                }\n\n                                if (typeof c == \"string\") {\n                                    return c;\n                                }\n\n                                if (Array.isArray(c)) {\n                                    return c.map(renderCategory).join(\", \");\n                                }\n\n                                if ((typeof c === \"undefined\" ? \"undefined\" : _typeof(c)) != \"object\") {\n                                    return \"N/A\";\n                                }\n\n                                return c.text || c.display || c.code || renderCategory(c.coding);\n                            }\n\n                            return renderCategory(rec.category);\n                        }\n                    }, {\n                        label: \"Quantity\",\n                        path: \"quantity.value\",\n                        render: function render(rec) {\n                            return _react2.default.createElement(\n                                \"span\",\n                                null,\n                                rec.quantity.value,\n                                _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"text-muted\" },\n                                    \" \",\n                                    rec.quantity.unit || rec.quantity.units || \"\"\n                                )\n                            );\n                        }\n                    }, {\n                        label: \"Days Supply\",\n                        path: \"daysSupply.value\",\n                        render: function render(rec) {\n                            return _react2.default.createElement(\n                                \"span\",\n                                null,\n                                rec.daysSupply.value,\n                                _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"text-muted\" },\n                                    \"\\xA0\",\n                                    rec.daysSupply.unit || rec.daysSupply.units || \"\"\n                                )\n                            );\n                        }\n                    }, {\n                        label: \"Medication\",\n                        path: \"medicationReference.reference\",\n                        render: function render(rec) {\n                            return _react2.default.createElement(\n                                DataLink,\n                                {\n                                    settings: _this2.props.settings,\n                                    path: rec.medicationReference.reference\n                                },\n                                rec.medicationReference.reference\n                            );\n                        }\n                    }], [{\n                        path: \"text.div\",\n                        label: \"Text\",\n                        render: function render(rec) {\n                            return _react2.default.createElement(\"span\", { dangerouslySetInnerHTML: { __html: rec.text.div } });\n                        }\n                    }]);\n                }\n            });\n\n            // 3. Timings ----------------------------------------------------------\n            out.push({\n                label: \"Date\",\n                render: function render(o) {\n                    return renderCell(o, [{\n                        path: \"authoredOn\",\n                        label: \"Authored On\",\n                        render: function render(rec) {\n                            return _react2.default.createElement(_Date2.default, { moment: rec.authoredOn });\n                        }\n                    }, {\n                        path: \"dateWritten\",\n                        label: \"Date Written\",\n                        render: function render(rec) {\n                            return _react2.default.createElement(_Date2.default, { moment: rec.dateWritten });\n                        }\n                    }, {\n                        path: \"performedDateTime\",\n                        label: \"Performed At\",\n                        render: function render(rec) {\n                            return _react2.default.createElement(_Date2.default, { moment: rec.performedDateTime });\n                        }\n                    }, {\n                        path: \"recorded\",\n                        label: \"Recorded\",\n                        render: function render(rec) {\n                            return _react2.default.createElement(_Date2.default, { moment: rec.recorded });\n                        }\n                    }, {\n                        path: \"performedPeriod\",\n                        label: \"Performed\",\n                        render: function render(rec) {\n                            return (0, _Period2.default)(rec.performedPeriod);\n                        }\n                    }, {\n                        path: \"availableTime\",\n                        label: \"Available Time\",\n                        render: function render(rec) {\n                            if (Array.isArray(rec.availableTime)) {\n                                return rec.availableTime.map(function (t, i) {\n                                    return _react2.default.createElement(\n                                        \"div\",\n                                        { key: i },\n                                        t.availableStartTime && _react2.default.createElement(\n                                            \"span\",\n                                            null,\n                                            _react2.default.createElement(\n                                                \"label\",\n                                                null,\n                                                \"from:\\xA0\"\n                                            ),\n                                            _react2.default.createElement(\n                                                \"span\",\n                                                null,\n                                                t.availableStartTime,\n                                                \"\\xA0\"\n                                            )\n                                        ),\n                                        t.availableEndTime && _react2.default.createElement(\n                                            \"span\",\n                                            null,\n                                            _react2.default.createElement(\n                                                \"label\",\n                                                null,\n                                                \"to:\\xA0\"\n                                            ),\n                                            _react2.default.createElement(\n                                                \"span\",\n                                                null,\n                                                t.availableEndTime\n                                            )\n                                        )\n                                    );\n                                });\n                            }\n                        }\n                    }, {\n                        path: \"whenHandedOver\",\n                        label: \"Handed Over\",\n                        render: function render(rec) {\n                            return _react2.default.createElement(_Date2.default, { moment: rec.whenHandedOver });\n                        }\n                    }, {\n                        path: \"issued\",\n                        label: \"Issued\",\n                        raw: function raw(rec) {\n                            return (0, _moment2.default)(rec.issued).format(\"MM/DD/YYYY\");\n                        },\n                        render: function render(rec) {\n                            return _react2.default.createElement(_Date2.default, { moment: rec.issued });\n                        }\n                    }, {\n                        path: \"effectiveDateTime\",\n                        label: \"Effective\",\n                        raw: function raw(rec) {\n                            return (0, _moment2.default)(rec.effectiveDateTime).format(\"MM/DD/YYYY\");\n                        },\n                        render: function render(rec) {\n                            return _react2.default.createElement(_Date2.default, { moment: rec.effectiveDateTime });\n                        }\n                    }, {\n                        path: \"assertedDate\",\n                        label: \"Asserted\",\n                        raw: function raw(rec) {\n                            return rec.assertedDate;\n                        },\n                        render: function render(rec) {\n                            return _react2.default.createElement(_Date2.default, { moment: rec.assertedDate });\n                        }\n                    }], [{\n                        path: \"meta.lastUpdated\",\n                        label: \"Last Updated\",\n                        raw: function raw(rec) {\n                            return rec.meta.lastUpdated;\n                        },\n                        render: function render(rec) {\n                            return _react2.default.createElement(_Date2.default, { moment: rec.meta.lastUpdated });\n                        }\n                    }]);\n                }\n            });\n\n            // 4. Insights ---------------------------------------------------------\n            out.push({\n                label: _react2.default.createElement(\n                    \"div\",\n                    { style: { textAlign: 'center' } },\n                    _react2.default.createElement(\n                        \"button\",\n                        {\n                            onMouseUp: this.toggleHighlight,\n                            style: {\n                                backgroundColor: this.state.doHighlight ? '#337ab7' : 'white',\n                                color: this.state.doHighlight ? 'white' : '#337ab7',\n                                textAlign: 'center'\n                            }\n                        },\n                        _react2.default.createElement(\"i\", { className: \"fa fa-lightbulb-o fas fa-bold\" })\n                    )\n                ),\n                render: function render(o) {\n                    if ((0, _lib.getInsightSource)(o) != _lib.InsightSource.NONE) {\n                        return _react2.default.createElement(\n                            \"div\",\n                            { style: { color: '#337ab7', textAlign: 'center' } },\n                            _react2.default.createElement(\n                                \"button\",\n                                { onMouseUp: _this2.openPopup(o) },\n                                _react2.default.createElement(\"i\", { className: \"fa fa-lightbulb-o fas fa-bold\" })\n                            )\n                        );\n                    } else {\n                        return _react2.default.createElement(\"div\", null);\n                    }\n                }\n            });\n\n            return out;\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var recs = this.props.resources || [];\n            var length = recs.length;\n            return _react2.default.createElement(\n                \"div\",\n                null,\n                _react2.default.createElement(_Grid2.default, {\n                    rows: recs.map(function (o) {\n                        return o.resource;\n                    }),\n                    title: length + \" resource\" + (length === 1 ? \"\" : \"s\") + \" of type \" + this.props.type,\n                    cols: this.determineSchema(recs[0].resource),\n                    comparator: function comparator(a, b) {\n                        var dA = getSortValue(a);\n                        var dB = getSortValue(b);\n                        dA = dA ? +(0, _moment2.default)(dA) : 0;\n                        dB = dB ? +(0, _moment2.default)(dB) : 0;\n                        return dB - dA;\n                    }\n                }),\n                _react2.default.createElement(\n                    \"p\",\n                    null,\n                    \"Please can I get Something to display\"\n                ),\n                _react2.default.createElement(\n                    \"div\",\n                    { style: { display: 'none', position: 'fixed', zIndex: 1 } },\n                    _react2.default.createElement(\n                        \"div\",\n                        { style: { backgroundColor: 'white', position: 'absolute' } },\n                        _react2.default.createElement(\n                            \"p\",\n                            null,\n                            \"I'm A Pop Up!!!\"\n                        )\n                    )\n                ),\n                _react2.default.createElement(_InsightsPopup2.default, { resource: this.state.showPopup, closeWindow: this.closePopup }),\n                this.state.showPopup ? _react2.default.createElement(_InsightsPopup2.default, { resource: this.state.showPopup, closeWindow: this.closePopup }) : null\n            );\n        }\n    }]);\n\n    return ResourceList;\n}(_react2.default.Component);\n\nResourceList.propTypes = {\n    type: _propTypes2.default.string,\n    resources: _propTypes2.default.arrayOf(_propTypes2.default.object).isRequired,\n    settings: _propTypes2.default.object.isRequired\n};\nexports.default = ResourceList;\n\n/***/ }),\n\n/***/ 316:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = Time;\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction Time(_ref) {\n    var moment = _ref.moment,\n        _ref$format = _ref.format,\n        format = _ref$format === undefined ? \"HH:mm\" : _ref$format,\n        rest = _objectWithoutProperties(_ref, [\"moment\", \"format\"]);\n\n    return _react2.default.createElement(\n        \"span\",\n        rest,\n        (0, _moment2.default)(moment).format(format)\n    );\n}\n\nTime.propTypes = {\n    format: _propTypes2.default.string,\n    moment: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.instanceOf(Date), _propTypes2.default.object // moment\n    ]).isRequired\n};\n\n/***/ }),\n\n/***/ 317:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = ValueRange;\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ValueRange(_ref) {\n    var range = _ref.range;\n\n    var low = range.low;\n    var high = range.high;\n    return _react2.default.createElement(\n        \"span\",\n        null,\n        low !== undefined && _react2.default.createElement(\n            \"span\",\n            null,\n            _react2.default.createElement(\n                \"span\",\n                { className: \"text-muted\" },\n                \"low: \"\n            ),\n            _react2.default.createElement(\n                \"span\",\n                null,\n                low\n            )\n        ),\n        high !== undefined && _react2.default.createElement(\n            \"span\",\n            null,\n            low !== undefined && _react2.default.createElement(\n                \"span\",\n                null,\n                \"\\xA0\"\n            ),\n            _react2.default.createElement(\n                \"span\",\n                { className: \"text-muted\" },\n                \"high: \"\n            ),\n            _react2.default.createElement(\n                \"span\",\n                null,\n                high\n            )\n        ),\n        high === undefined && low === undefined && _react2.default.createElement(\n            \"small\",\n            { className: \"text-muted\" },\n            \"N/A\"\n        )\n    );\n}\n\nValueRange.propTypes = {\n    range: _propTypes2.default.object.isRequired\n};\n\n/***/ }),\n\n/***/ 318:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _query = __webpack_require__(21);\n\nvar _lib = __webpack_require__(7);\n\nvar _DialogFooter = __webpack_require__(99);\n\nvar _DialogFooter2 = _interopRequireDefault(_DialogFooter);\n\n__webpack_require__(541);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Footer = function (_React$Component) {\n    _inherits(Footer, _React$Component);\n\n    function Footer() {\n        _classCallCheck(this, Footer);\n\n        return _possibleConstructorReturn(this, (Footer.__proto__ || Object.getPrototypeOf(Footer)).apply(this, arguments));\n    }\n\n    _createClass(Footer, [{\n        key: \"render\",\n        value: function render() {\n            var _this2 = this;\n\n            var msg = this.props.query.error ? \" Error! \" : \" Loading... \";\n            var bundle = this.props.bundle;\n            var hasPrev = bundle && (0, _lib.getBundleURL)(bundle, \"previous\");\n            var hasNext = bundle && (0, _lib.getBundleURL)(bundle, \"next\");\n\n            if (bundle && !this.props.query.error) {\n                if (this.props.query.params._id) {\n                    msg = \"Showing the selected patients only\";\n                } else {\n                    var len = bundle && bundle.entry ? bundle.entry.length : 0;\n                    if (len) {\n                        var startRec = +(this.props.query.offset || 0) + 1;\n                        var endRec = startRec + len - 1;\n\n                        msg = \" patient \" + startRec + \" to \" + endRec + \" \";\n\n                        if (\"total\" in bundle) {\n                            msg += \" of \" + bundle.total + \" \";\n                        }\n                    } else {\n                        msg = \" No Records! \";\n                    }\n                }\n            }\n\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"app-footer\" },\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"container-fluid\", style: { width: \"100%\" } },\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"row\" },\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"col-xs-3 col-sm-4 text-right\" },\n                            _react2.default.createElement(\n                                \"a\",\n                                {\n                                    href: \"#prev\",\n                                    onClick: function onClick(e) {\n                                        e.preventDefault();_this2.props.dispatch((0, _query.goPrev)());\n                                    },\n                                    disabled: !hasPrev\n                                },\n                                _react2.default.createElement(\"i\", { className: \"fa fa-arrow-left\" }),\n                                \" Prev\"\n                            )\n                        ),\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"col-xs-6 col-sm-4 text-center\" },\n                            msg\n                        ),\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"col-xs-3 col-sm-4 text-left\" },\n                            _react2.default.createElement(\n                                \"a\",\n                                {\n                                    href: \"#next\",\n                                    onClick: function onClick(e) {\n                                        e.preventDefault();_this2.props.dispatch((0, _query.goNext)());\n                                    },\n                                    disabled: !hasNext\n                                },\n                                \"Next \",\n                                _react2.default.createElement(\"i\", { className: \"fa fa-arrow-right\" })\n                            )\n                        )\n                    ),\n                    _react2.default.createElement(_DialogFooter2.default, { canShowSelected: this.props.canShowSelected })\n                )\n            );\n        }\n    }]);\n\n    return Footer;\n}(_react2.default.Component);\n\nFooter.propTypes = {\n    bundle: _propTypes2.default.object,\n    query: _propTypes2.default.object.isRequired,\n    dispatch: _propTypes2.default.func.isRequired,\n    selection: _propTypes2.default.object.isRequired,\n    canShowSelected: _propTypes2.default.bool\n};\nexports.default = Footer;\n\n/***/ }),\n\n/***/ 319:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\n__webpack_require__(542);\n\nvar _query2 = __webpack_require__(21);\n\nvar _redux = __webpack_require__(46);\n\nvar _redux2 = _interopRequireDefault(_redux);\n\nvar _TagSelector = __webpack_require__(325);\n\nvar _TagSelector2 = _interopRequireDefault(_TagSelector);\n\nvar _AgeSelector = __webpack_require__(307);\n\nvar _AgeSelector2 = _interopRequireDefault(_AgeSelector);\n\nvar _SortWidget = __webpack_require__(324);\n\nvar _SortWidget2 = _interopRequireDefault(_SortWidget);\n\nvar _lib = __webpack_require__(7);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Header = function (_React$Component) {\n    _inherits(Header, _React$Component);\n\n    function Header() {\n        _classCallCheck(this, Header);\n\n        return _possibleConstructorReturn(this, (Header.__proto__ || Object.getPrototypeOf(Header)).apply(this, arguments));\n    }\n\n    _createClass(Header, [{\n        key: \"fetch\",\n        value: function fetch() {\n            var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 500;\n\n            if (this.props.settings.submitStrategy == \"automatic\") {\n                if (this.fetchDelay) {\n                    clearTimeout(this.fetchDelay);\n                }\n                this.fetchDelay = setTimeout(function () {\n                    _redux2.default.dispatch((0, _query2.fetch)());\n                }, delay);\n            }\n            // else {\n            //     store.dispatch(fetch())\n            // }\n        }\n    }, {\n        key: \"renderAdvancedTabContents\",\n        value: function renderAdvancedTabContents() {\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"form-group\" },\n                _react2.default.createElement(\n                    \"p\",\n                    { className: \"text-warning\", style: { padding: \"0 5px 5px\", margin: 0 } },\n                    _react2.default.createElement(\"i\", { className: \"fa fa-info-circle\" }),\n                    \" In advanced mode, provide a query string to browse and select from a list of matching patients. \",\n                    _react2.default.createElement(\n                        \"a\",\n                        { target: \"_blank\", href: \"http://hl7.org/fhir/patient.html#search\" },\n                        \"More Info...\"\n                    )\n                ),\n                _react2.default.createElement(\n                    \"form\",\n                    { onSubmit: function onSubmit(e) {\n                            e.preventDefault();\n                            _redux2.default.dispatch((0, _query2.fetch)());\n                        } },\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"input-group input-group-sm\" },\n                        _react2.default.createElement(\n                            \"span\",\n                            { className: \"input-group-addon\" },\n                            \"/Patient?\"\n                        ),\n                        _react2.default.createElement(\"input\", {\n                            type: \"text\",\n                            className: \"form-control\",\n                            placeholder: \"Patient Search Query String\",\n                            name: \"query\",\n                            onChange: function onChange(e) {\n                                return _redux2.default.dispatch((0, _query2.setQueryString)(e.target.value));\n                            },\n                            value: this.props.query.queryString\n                        }),\n                        _react2.default.createElement(\n                            \"span\",\n                            { className: \"input-group-btn\" },\n                            _react2.default.createElement(\n                                \"button\",\n                                { className: \"btn btn-warning\", type: \"submit\" },\n                                \"Go\"\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }, {\n        key: \"renderDemographicsTabContents\",\n        value: function renderDemographicsTabContents() {\n            var _this2 = this;\n\n            return _react2.default.createElement(\n                \"form\",\n                { onSubmit: function onSubmit(e) {\n                        e.preventDefault();\n                        _redux2.default.dispatch((0, _query2.fetch)());\n                    } },\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"row\" },\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"**custom**\" === this.props.query.ageGroup ? \"col-sm-6\" : \"col-sm-12\" },\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"form-group\" },\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"input-group\" },\n                                _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"input-group-addon\" },\n                                    _react2.default.createElement(\n                                        \"small\",\n                                        null,\n                                        \"Name:\"\n                                    )\n                                ),\n                                _react2.default.createElement(\"input\", {\n                                    type: \"text\",\n                                    className: \"form-control input-sm\",\n                                    placeholder: \"Search by name...\",\n                                    value: this.props.query.params.name || \"\",\n                                    onChange: function onChange(e) {\n                                        _redux2.default.dispatch((0, _query2.setParam)({\n                                            name: \"name\",\n                                            value: e.target.value\n                                        }));\n                                        _this2.fetch();\n                                    }\n                                })\n                            )\n                        )\n                    ),\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"col-sm-6\" },\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"form-group\" },\n                            _react2.default.createElement(\n                                \"select\",\n                                {\n                                    className: \"form-control input-sm\",\n                                    onChange: function onChange(e) {\n                                        _redux2.default.dispatch((0, _query2.setGender)(e.target.value));\n                                        _this2.fetch();\n                                    },\n                                    value: this.props.query.gender || \"\"\n                                },\n                                _react2.default.createElement(\n                                    \"option\",\n                                    { value: \"male\" },\n                                    \"Males\"\n                                ),\n                                _react2.default.createElement(\n                                    \"option\",\n                                    { value: \"female\" },\n                                    \"Females\"\n                                ),\n                                _react2.default.createElement(\n                                    \"option\",\n                                    { value: \"\" },\n                                    \"Any Gender\"\n                                )\n                            )\n                        )\n                    ),\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"**custom**\" === this.props.query.ageGroup ? \"col-sm-12\" : \"col-sm-6\" },\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"form-group\" },\n                            _react2.default.createElement(_AgeSelector2.default, {\n                                min: this.props.query.minAge || { value: 0, units: \"years\" },\n                                max: this.props.query.maxAge || { value: 100, units: \"years\" },\n                                onMinChange: function onMinChange(age) {\n                                    _redux2.default.dispatch((0, _query2.setMinAge)(age));\n                                    //if (\"**custom**\" != this.props.query.ageGroup) {\n                                    _this2.fetch();\n                                    //}\n                                },\n                                onMaxChange: function onMaxChange(age) {\n                                    _redux2.default.dispatch((0, _query2.setMaxAge)(age));\n                                    //if (\"**custom**\" != this.props.query.ageGroup) {\n                                    _this2.fetch();\n                                    //}\n                                },\n                                onGroupChange: function onGroupChange(group) {\n                                    _redux2.default.dispatch((0, _query2.setAgeGroup)(group));\n                                    //if (\"**custom**\" != this.props.query.ageGroup) {\n                                    _this2.fetch();\n                                    //}\n                                }\n                                //update={ () => this.fetch() }\n                                , group: this.props.query.ageGroup\n                            })\n                        )\n                    )\n                )\n            );\n        }\n    }, {\n        key: \"renderConditionsTabContents\",\n        value: function renderConditionsTabContents() {\n            var _this3 = this;\n\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"row\" },\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"col-sm-12\" },\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"form-group\" },\n                        _react2.default.createElement(_TagSelector2.default, {\n                            tags: Object.keys(this.props.settings.server.conditions).map(function (key) {\n                                var condition = _this3.props.settings.server.conditions[key];\n                                return {\n                                    key: key,\n                                    label: condition.description,\n                                    data: condition\n                                };\n                            }),\n                            onChange: function onChange(selection) {\n                                var conditions = {};\n                                selection.forEach(function (tag) {\n                                    conditions[tag.key] = tag.data;\n                                });\n                                _redux2.default.dispatch((0, _query2.setConditions)(conditions));\n                                _this3.fetch();\n                            },\n                            label: \"condition code\",\n                            selected: Object.keys(this.props.query.conditions)\n                        })\n                    )\n                )\n            );\n        }\n    }, {\n        key: \"renderTagsTabContents\",\n        value: function renderTagsTabContents() {\n            var _this4 = this;\n\n            var selected = this.props.query.tags || this.props.settings.server.tags.filter(function (tag) {\n                return !!tag.selected;\n            }).map(function (tag) {\n                return !!tag.key;\n            });\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"row\" },\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"col-sm-12\" },\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"form-group\" },\n                        _react2.default.createElement(_TagSelector2.default, {\n                            tags: this.props.settings.server.tags,\n                            selected: selected,\n                            onChange: function onChange(sel) {\n                                var tags = Object.keys(sel).map(function (k) {\n                                    return sel[k].key;\n                                });\n                                _redux2.default.dispatch((0, _query2.setTags)(tags));\n                                _this4.fetch();\n                            },\n                            label: \"tag\"\n                        })\n                    )\n                )\n            );\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _query = (0, _lib.parseQueryString)(this.props.location.search);\n            var _advanced = this.props.query.queryType == \"advanced\";\n            var conditionsCount = Object.keys(this.props.query.conditions).length;\n            var demographicsCount = 0;\n            var tagsCount = Object.keys(this.props.query.tags).length;\n\n            // Compute which the active tab should be\n            var tabs = [\"demographics\", \"conditions\"];\n            if (!this.props.settings.hideTagSelector) {\n                tabs.push(\"tags\");\n            }\n            var _tab = _query._tab || \"\";\n            if (tabs.indexOf(_tab) == -1) {\n                _tab = \"demographics\";\n            }\n\n            // Manually increment the value for the demographics badge depending on\n            // the state of the app\n\n            if (this.props.query.gender) {\n                demographicsCount += 1;\n            }\n\n            if (this.props.query.params.name) {\n                demographicsCount += 1;\n            }\n\n            if (this.props.query.maxAge !== null || this.props.query.minAge !== null) {\n                demographicsCount += 1;\n            }\n\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"app-header\" },\n                _react2.default.createElement(\n                    \"div\",\n                    { style: { flexDirection: \"row\" } },\n                    _react2.default.createElement(\n                        \"label\",\n                        { className: \"pull-right advanced-label text-warning\" },\n                        \"Advanced \",\n                        _react2.default.createElement(\n                            \"span\",\n                            { className: \"hidden-xs\" },\n                            \"Mode \"\n                        ),\n                        \" \",\n                        _react2.default.createElement(\"input\", {\n                            type: \"checkbox\",\n                            checked: _advanced,\n                            onChange: function onChange(e) {\n                                _redux2.default.dispatch((0, _query2.setQueryType)(e.target.checked ? \"advanced\" : \"basic\"));\n                            }\n                        })\n                    ),\n                    _advanced ? _react2.default.createElement(\"ul\", { className: \"nav nav-tabs\" }) : _react2.default.createElement(\n                        \"ul\",\n                        { className: \"nav nav-tabs\" },\n                        _react2.default.createElement(\n                            \"li\",\n                            { className: !_advanced && _tab == \"demographics\" ? \"active\" : null },\n                            _react2.default.createElement(\n                                \"a\",\n                                { href: \"\", onClick: function onClick(e) {\n                                        e.preventDefault();(0, _lib.setHashParam)(\"_tab\", \"demographics\");\n                                    } },\n                                _react2.default.createElement(\n                                    \"b\",\n                                    null,\n                                    \"Demographics\"\n                                ),\n                                demographicsCount ? _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"hidden-xs\" },\n                                    \" \",\n                                    _react2.default.createElement(\n                                        \"small\",\n                                        { className: \"badge\" },\n                                        demographicsCount\n                                    )\n                                ) : null\n                            )\n                        ),\n                        _react2.default.createElement(\n                            \"li\",\n                            { className: !_advanced && _tab == \"conditions\" ? \"active\" : null },\n                            _react2.default.createElement(\n                                \"a\",\n                                { href: \"\", onClick: function onClick(e) {\n                                        e.preventDefault();(0, _lib.setHashParam)(\"_tab\", \"conditions\");\n                                    } },\n                                _react2.default.createElement(\n                                    \"b\",\n                                    null,\n                                    \"Conditions\"\n                                ),\n                                conditionsCount ? _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"hidden-xs\" },\n                                    \" \",\n                                    _react2.default.createElement(\n                                        \"small\",\n                                        { className: \"badge\" },\n                                        conditionsCount\n                                    )\n                                ) : null\n                            )\n                        ),\n                        this.props.settings.hideTagSelector || this.props.query.params._id ? null : _react2.default.createElement(\n                            \"li\",\n                            { className: !_advanced && _tab == \"tags\" ? \"active\" : null },\n                            _react2.default.createElement(\n                                \"a\",\n                                { href: \"\", onClick: function onClick(e) {\n                                        e.preventDefault();(0, _lib.setHashParam)(\"_tab\", \"tags\");\n                                    } },\n                                _react2.default.createElement(\n                                    \"b\",\n                                    null,\n                                    \"Tags\"\n                                ),\n                                tagsCount ? _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"hidden-xs\" },\n                                    \" \",\n                                    _react2.default.createElement(\n                                        \"small\",\n                                        { className: \"badge\" },\n                                        tagsCount\n                                    )\n                                ) : null\n                            )\n                        )\n                    )\n                ),\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"tab-content\" },\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"tab-pane \" + (_advanced ? \"active\" : \"\") },\n                        this.renderAdvancedTabContents()\n                    ),\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"tab-pane \" + (!_advanced && _tab == \"demographics\" ? \"active\" : \"\") },\n                        this.renderDemographicsTabContents()\n                    ),\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"tab-pane \" + (!_advanced && _tab == \"conditions\" ? \"active\" : \"\") },\n                        this.renderConditionsTabContents()\n                    ),\n                    this.props.settings.hideTagSelector || this.props.query.params._id ? null : _react2.default.createElement(\n                        \"div\",\n                        { className: \"tab-pane \" + (!_advanced && _tab == \"tags\" ? \"active\" : \"\") },\n                        this.renderTagsTabContents()\n                    ),\n                    !_advanced && this.props.settings.submitStrategy == \"manual\" ? _react2.default.createElement(\n                        \"div\",\n                        { className: \"text-right\", style: { height: 0 } },\n                        _react2.default.createElement(\n                            \"button\",\n                            {\n                                type: \"button\",\n                                onClick: function onClick() {\n                                    return _redux2.default.dispatch((0, _query2.fetch)());\n                                },\n                                className: \"btn btn-primary btn-submit\"\n                            },\n                            _react2.default.createElement(\"i\", { className: \"fa fa-search\" }),\n                            \" Search\"\n                        )\n                    ) : null\n                ),\n                _advanced ? null : _react2.default.createElement(_SortWidget2.default, {\n                    sort: this.props.query.sort,\n                    onChange: function onChange(sort) {\n                        _redux2.default.dispatch((0, _query2.setSort)(sort));\n                        _redux2.default.dispatch((0, _query2.fetch)());\n                    }\n                })\n            );\n        }\n    }]);\n\n    return Header;\n}(_react2.default.Component);\n\nHeader.propTypes = {\n    settings: _propTypes2.default.object.isRequired,\n    query: _propTypes2.default.object.isRequired,\n    location: _propTypes2.default.object.isRequired,\n    urlParams: _propTypes2.default.object.isRequired\n};\nexports.default = Header;\n\n/***/ }),\n\n/***/ 320:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _lib = __webpack_require__(7);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar InsightsPopup = function (_React$Component) {\n    _inherits(InsightsPopup, _React$Component);\n\n    function InsightsPopup() {\n        _classCallCheck(this, InsightsPopup);\n\n        return _possibleConstructorReturn(this, (InsightsPopup.__proto__ || Object.getPrototypeOf(InsightsPopup)).apply(this, arguments));\n    }\n\n    _createClass(InsightsPopup, [{\n        key: \"handleClick\",\n        value: function handleClick() {\n            this.props.closeWindow();\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var rec = this.props.resource;\n            return _react2.default.createElement(\n                \"div\",\n                { style: { display: 'none', position: 'fixed', zIndex: '99' } },\n                _react2.default.createElement(\n                    \"div\",\n                    { style: { backgroundColor: 'white', position: 'absolute' } },\n                    _react2.default.createElement(\n                        \"p\",\n                        null,\n                        \"I'm A Pop Up!!!\"\n                    )\n                )\n            );\n        }\n    }]);\n\n    return InsightsPopup;\n}(_react2.default.Component);\n\nInsightsPopup.PropTypes = {\n    resource: _propTypes2.default.object,\n    closeWindow: _propTypes2.default.func\n};\nexports.default = InsightsPopup;\n\n/***/ }),\n\n/***/ 321:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.PatientDetail = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _PatientImage = __webpack_require__(102);\n\nvar _PatientImage2 = _interopRequireDefault(_PatientImage);\n\nvar _Loader = __webpack_require__(101);\n\nvar _Loader2 = _interopRequireDefault(_Loader);\n\nvar _reactRedux = __webpack_require__(19);\n\nvar _jquery = __webpack_require__(25);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _reactRouterDom = __webpack_require__(61);\n\nvar _DialogFooter = __webpack_require__(99);\n\nvar _DialogFooter2 = _interopRequireDefault(_DialogFooter);\n\nvar _selection = __webpack_require__(47);\n\nvar _redux = __webpack_require__(46);\n\nvar _redux2 = _interopRequireDefault(_redux);\n\nvar _query = __webpack_require__(21);\n\nvar _Observation = __webpack_require__(313);\n\nvar _Observation2 = _interopRequireDefault(_Observation);\n\nvar _ImmunizationList = __webpack_require__(312);\n\nvar _ImmunizationList2 = _interopRequireDefault(_ImmunizationList);\n\nvar _ConditionList = __webpack_require__(310);\n\nvar _ConditionList2 = _interopRequireDefault(_ConditionList);\n\nvar _Encounter = __webpack_require__(311);\n\nvar _Encounter2 = _interopRequireDefault(_Encounter);\n\nvar _CarePlan = __webpack_require__(309);\n\nvar _CarePlan2 = _interopRequireDefault(_CarePlan);\n\nvar _Person = __webpack_require__(314);\n\nvar _Person2 = _interopRequireDefault(_Person);\n\nvar _ResourceList = __webpack_require__(315);\n\nvar _ResourceList2 = _interopRequireDefault(_ResourceList);\n\nvar _lib = __webpack_require__(7);\n\n__webpack_require__(544);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Renders the detail page.\n */\nvar PatientDetail = exports.PatientDetail = function (_React$Component) {\n    _inherits(PatientDetail, _React$Component);\n\n    function PatientDetail() {\n        var _ref;\n\n        _classCallCheck(this, PatientDetail);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        var _this = _possibleConstructorReturn(this, (_ref = PatientDetail.__proto__ || Object.getPrototypeOf(PatientDetail)).call.apply(_ref, [this].concat(args)));\n\n        _this.query = _query.queryBuilder.clone();\n        _this.state = {\n            loading: false,\n            error: null,\n            conditions: [],\n            patient: {},\n            index: 0,\n            hasNext: false,\n            groups: {},\n            selectedSubCat: \"\",\n            bundle: _jquery2.default.isEmptyObject(_this.props.query.bundle) ? null : _extends({}, _this.props.query.bundle)\n        };\n        return _this;\n    }\n\n    _createClass(PatientDetail, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n            this.fetch(this.props.match.params.index);\n        }\n    }, {\n        key: \"componentWillReceiveProps\",\n        value: function componentWillReceiveProps(newProps) {\n            if (newProps.match.params.index !== this.props.match.params.index) {\n                this.fetch(newProps.match.params.index);\n            }\n        }\n    }, {\n        key: \"fetch\",\n        value: function fetch(index) {\n            var _this2 = this;\n\n            index = (0, _lib.intVal)(index, -1);\n            if (index < 0) {\n                return this.setState({ error: new Error(\"Invalid patient index\") });\n            }\n\n            this.setState({ loading: true, index: index }, function () {\n                _this2.fetchPatient(_this2.props.settings.server, index).then(function (state) {\n                    // console.log(state);\n                    _this2.setState(_extends({}, state, {\n                        error: null,\n                        loading: false\n                    }));\n                }).catch(function (error) {\n                    _this2.setState({\n                        loading: false,\n                        error: error\n                    });\n                });\n            });\n        }\n\n        /**\n         * This page receives an \"index\" url parameter. It will repeat the same\n         * query from the search page but with limit=1 and offset=index so that the\n         * search returns only one page. The reason for this is that we also have\n         * these \"Prev Patient\" and \"Next Patient\" buttons that allow the user to\n         * walk through the result one patient at a time.\n         * @param {Object} server\n         * @param {Object} server.url\n         * @param {Object} server.type\n         * @param {Number} index\n         */\n\n    }, {\n        key: \"fetchPatient\",\n        value: function fetchPatient(server, index) {\n            var _this3 = this;\n\n            // =====================================================================\n            // Warning! The following are some ugly workarounds for the ugly API\n            // that does not support normal pagination!\n            // =====================================================================\n\n            return Promise.resolve(_extends({}, this.state))\n\n            // Run the main query to fetch the first page\n            .then(function (state) {\n                _this3.query.cacheId = null;\n                _this3.query.offset = null;\n                return _this3.query.fetch(server).then(function (bundle) {\n                    state.bundle = bundle;\n                    return state;\n                });\n            })\n\n            // Try to find the patient by index\n            .then(function (state) {\n                index = (0, _lib.intVal)(index, -1);\n                if (index < 0) {\n                    return Promise.reject(\"Invalid patient index\");\n                }\n\n                state.patient = (0, _lib.getPath)(state, \"bundle.entry.\" + index + \".resource\");\n                state.nextURL = (0, _lib.getBundleURL)(state.bundle, \"next\");\n                state.hasNext = !!state.nextURL || (state.patient ? index < state.bundle.entry.length - 1 : false);\n                return Promise.resolve(state);\n            })\n\n            // if no patient - jump to it's index\n            .then(function (state) {\n                if (!state.patient) {\n                    var params = (0, _lib.parseQueryString)(state.nextURL);\n                    _this3.query.setOffset(params._getpages, index);\n                    return _this3.query.fetch(server).then(function (bundle) {\n                        state.bundle = bundle;\n                        state.patient = (0, _lib.getPath)(state, \"bundle.entry.0.resource\");\n                        state.hasNext = state.patient ? _this3.query.limit && _this3.query.limit > 1 ? state.bundle.entry.length > 1 : (0, _lib.getBundleURL)(state.bundle, \"next\") : false;\n                        return state;\n                    });\n                }\n                return state;\n            }).then(function (state) {\n                return new Promise(function (resolve) {\n                    _this3.setState(state, function () {\n                        return resolve(state);\n                    });\n                });\n            })\n\n            // Find $everything\n            .then(function (state) {\n                return (0, _lib.getAllPages)({ url: server.url + \"/Patient/\" + state.patient.id + \"/$everything?_count=500\" }).then(function (data) {\n                    var groups = {};\n                    data.forEach(function (entry) {\n                        var resourceType = (0, _lib.getPath)(entry, \"resource.resourceType\") || \"Other\";\n                        var type = resourceType;\n\n                        if (type == \"Observation\") {\n                            var subCat = String((0, _lib.getPath)(entry, \"resource.category.0.text\") || (0, _lib.getPath)(entry, \"resource.category.coding.0.code\") || (0, _lib.getPath)(entry, \"resource.category.0.coding.0.code\") || \"Other\").toLowerCase();\n\n                            subCat = subCat.split(/\\-+/).map(function (token) {\n                                return token.charAt(0).toUpperCase() + token.substr(1);\n                            }).join(\" \");\n                            type += \" - \" + subCat;\n                        }\n\n                        if (!Array.isArray(groups[type])) {\n                            groups[type] = [];\n                        }\n                        groups[type].push(entry);\n                    });\n                    state.groups = groups;\n                    return state;\n                });\n            })\n\n            // Feed the results to the app\n            .then(function (state) {\n                return Promise.resolve(state);\n            }, function (error) {\n                return Promise.reject(new Error((0, _lib.getErrorMessage)(error)));\n            });\n        }\n\n        // Rendering methods -------------------------------------------------------\n\n    }, {\n        key: \"renderPatient\",\n        value: function renderPatient() {\n            var _this4 = this;\n\n            if (this.state.error) {\n                return this.state.error + \"\";\n            }\n\n            var idLower = (this.state.patient.id || \"\").toLowerCase();\n            var key = idLower && Object.keys(this.props.selection).find(function (k) {\n                return k.toLowerCase() == idLower;\n            });\n            var selected = key && this.props.selection[key] !== false;\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"panel panel-default patient col-xs-12\" },\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"row\" },\n                    this.state.loading ? _react2.default.createElement(_Loader2.default, null) : null,\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"col-xs-2 col-sm-2 col-md-1\" },\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"embed-responsive\" },\n                            _react2.default.createElement(_PatientImage2.default, {\n                                patient: this.state.patient,\n                                className: \"embed-responsive-item\",\n                                base: this.props.settings.server.url\n                            })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"col-xs-10 col-md-11\" },\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"patient-row\" },\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-7 patient-name\" },\n                                _react2.default.createElement(\n                                    \"h3\",\n                                    { className: \"pull-left text-primary\" },\n                                    (0, _lib.getPatientName)(this.state.patient) || (this.state.loading ? \"loading...\" : \"Unknown\")\n                                ),\n                                selected ? _react2.default.createElement(\n                                    \"i\",\n                                    { className: \"label label-success pull-left\" },\n                                    \"Selected\"\n                                ) : null\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-5 text-right\", style: { paddingRight: 0 } },\n                                _react2.default.createElement(\n                                    \"button\",\n                                    {\n                                        type: \"button\",\n                                        className: \"btn btn-sm btn-\" + (selected ? \"danger\" : \"primary\"),\n                                        onClick: function onClick() {\n                                            return _redux2.default.dispatch((0, _selection.toggle)({ id: _this4.state.patient.id }));\n                                        }\n                                    },\n                                    selected ? \"Unselect\" : \"Select\"\n                                ),\n                                _react2.default.createElement(\n                                    \"button\",\n                                    {\n                                        type: \"button\",\n                                        className: \"btn btn-default btn-sm\",\n                                        onClick: function onClick() {\n                                            return _this4.fetch(_this4.props.match.params.index);\n                                        }\n                                    },\n                                    _react2.default.createElement(\"i\", { className: \"fa fa-refresh\" }),\n                                    \" Reload\"\n                                )\n                            )\n                        ),\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"row\" },\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\" },\n                                \"Gender:\"\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-8 col-sm-3 col-lg-3 text-left\" },\n                                this.state.patient.gender || (this.state.loading ? \"loading...\" : \"Unknown\")\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\" },\n                                \"DOB:\"\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-8 col-sm-5 col-lg-3 text-left\" },\n                                this.state.patient.birthDate || (this.state.loading ? \"loading...\" : \"Unknown\")\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\" },\n                                \"Age:\"\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-8 col-sm-3 col-lg-3 text-left\" },\n                                (0, _lib.getPatientAge)(this.state.patient) || (this.state.loading ? \"loading...\" : \"Unknown\")\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\" },\n                                \"Email\"\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-8 col-sm-5 col-lg-3 text-left\" },\n                                (0, _lib.getPatientEmail)(this.state.patient) || (this.state.loading ? \"loading...\" : \"Unknown\")\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\" },\n                                \"Phone:\"\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-8 col-sm-3 col-lg-3 text-left\" },\n                                (0, _lib.getPatientPhone)(this.state.patient) || (this.state.loading ? \"loading...\" : \"Unknown\")\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\" },\n                                \"Address:\"\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-8 col-sm-5 col-lg-3 text-left\" },\n                                (0, _lib.getPatientHomeAddress)(this.state.patient) || (this.state.loading ? \"loading...\" : \"Unknown\")\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\" },\n                                \"ID:\"\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-8 col-sm-3 col-lg-3 text-left\" },\n                                this.state.patient.id || (this.state.loading ? \"loading...\" : \"Unknown\")\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\" },\n                                \"MRN:\"\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-8 col-sm-5 col-lg-3 text-left\" },\n                                (0, _lib.getPatientMRN)(this.state.patient) || (this.state.loading ? \"loading...\" : \"Unknown\")\n                            ),\n                            this.state.patient.deceasedBoolean || this.state.patient.deceasedDateTime ? _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\" },\n                                _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"deceased-label\" },\n                                    \"Deceased:\"\n                                )\n                            ) : null,\n                            this.state.patient.deceasedBoolean || this.state.patient.deceasedDateTime ? _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-8 col-sm-5 col-lg-3 text-left\" },\n                                this.state.patient.deceasedDateTime ? _react2.default.createElement(\n                                    \"span\",\n                                    null,\n                                    this.state.patient.deceasedDateTime\n                                ) : _react2.default.createElement(\n                                    \"span\",\n                                    null,\n                                    this.state.patient.deceasedBoolean ? \"Yes\" : \"No\"\n                                )\n                            ) : null\n                        )\n                    )\n                )\n            );\n        }\n    }, {\n        key: \"renderResources\",\n        value: function renderResources(type) {\n            var items = this.state.groups[type] || [];\n            if (!items.length) {\n                return _react2.default.createElement(\n                    \"p\",\n                    { className: \"text-center text-muted\" },\n                    \"No items of type \\\"\",\n                    type,\n                    \"\\\" found\"\n                );\n            }\n\n            if (type.indexOf(\"Observation\") === 0) {\n                return _react2.default.createElement(_Observation2.default, { resources: items });\n            }\n\n            switch (type) {\n                case \"Immunization\":\n                    return _react2.default.createElement(_ImmunizationList2.default, { resources: items });\n                case \"Condition\":\n                    return _react2.default.createElement(_ConditionList2.default, { resources: items });\n                case \"Encounter\":\n                    return _react2.default.createElement(_Encounter2.default, { resources: items });\n                case \"CarePlan\":\n                    return _react2.default.createElement(_CarePlan2.default, { resources: items });\n                case \"Patient\":\n                case \"Practitioner\":\n                case \"RelatedPerson\":\n                    return _react2.default.createElement(_Person2.default, { resources: items, title: type });\n                default:\n                    return _react2.default.createElement(_ResourceList2.default, { resources: items, type: type, settings: this.props.settings });\n            }\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _this5 = this;\n\n            var groups = Object.keys(this.state.groups).sort();\n            var selectedSubCat = this.state.selectedSubCat;\n            if (!selectedSubCat || !this.state.groups[selectedSubCat]) {\n                selectedSubCat = Object.keys(this.state.groups)[0] || \"\";\n            }\n\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"page patient-detail-page\" },\n                _react2.default.createElement(\n                    \"nav\",\n                    { className: \"navbar bg-primary navbar-fixed-top\" },\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"container-fluid\" },\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"row navigator\" },\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-4 col-sm-4 col-md-3 col-lg-2\" },\n                                _react2.default.createElement(\n                                    _reactRouterDom.Link,\n                                    {\n                                        to: \"/patient/\" + (this.state.index - 1),\n                                        className: \"btn btn-primary btn-block\",\n                                        disabled: this.state.index < 1\n                                    },\n                                    _react2.default.createElement(\"i\", { className: \"fa fa-chevron-left\" }),\n                                    _react2.default.createElement(\n                                        \"b\",\n                                        null,\n                                        \"Prev\",\n                                        _react2.default.createElement(\n                                            \"span\",\n                                            { className: \"hidden-xs\" },\n                                            \"ious Patient\"\n                                        )\n                                    )\n                                )\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-4 col-sm-4 col-md-6 col-lg-8 text-center\" },\n                                _react2.default.createElement(\n                                    _reactRouterDom.Link,\n                                    { className: \"btn btn-block text-center\", to: \"/\" },\n                                    _react2.default.createElement(\n                                        \"span\",\n                                        { className: \"hidden-xs\" },\n                                        \"Browse Patients\"\n                                    ),\n                                    _react2.default.createElement(\n                                        \"span\",\n                                        { className: \"visible-xs\" },\n                                        \"Browse\"\n                                    )\n                                )\n                            ),\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-4 col-sm-4 col-md-3 col-lg-2 text-right\" },\n                                _react2.default.createElement(\n                                    _reactRouterDom.Link,\n                                    {\n                                        to: \"/patient/\" + (this.state.index + 1),\n                                        className: \"btn btn-primary btn-block\",\n                                        disabled: !this.state.hasNext\n                                    },\n                                    _react2.default.createElement(\n                                        \"b\",\n                                        null,\n                                        \"Next\",\n                                        _react2.default.createElement(\n                                            \"span\",\n                                            { className: \"hidden-xs\" },\n                                            \" Patient\"\n                                        )\n                                    ),\n                                    _react2.default.createElement(\"i\", { className: \"fa fa-chevron-right\" })\n                                )\n                            )\n                        )\n                    )\n                ),\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"container\" },\n                    this.renderPatient(),\n                    groups.length ? _react2.default.createElement(\n                        \"div\",\n                        { className: \"row patient-details\" },\n                        _react2.default.createElement(\"br\", null),\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"col-xs-12 col-sm-3\" },\n                            _react2.default.createElement(\n                                \"ul\",\n                                { className: \"list-group\" },\n                                groups.map(function (k, i) {\n                                    return _react2.default.createElement(\n                                        \"a\",\n                                        {\n                                            href: \"#\",\n                                            key: i,\n                                            className: \"list-group-item\" + (k === selectedSubCat ? \" active\" : \"\"),\n                                            onClick: function onClick(e) {\n                                                e.preventDefault();\n                                                _this5.setState({\n                                                    selectedSubCat: k\n                                                });\n                                            }\n                                        },\n                                        _react2.default.createElement(\n                                            \"b\",\n                                            { className: \"badge pull-right\" },\n                                            _this5.state.groups[k].length\n                                        ),\n                                        _react2.default.createElement(\n                                            \"b\",\n                                            null,\n                                            k\n                                        )\n                                    );\n                                })\n                            )\n                        ),\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"col-xs-12 col-sm-9\" },\n                            this.renderResources(selectedSubCat)\n                        )\n                    ) : this.state.loading ? null : _react2.default.createElement(\n                        \"div\",\n                        { className: \"row\" },\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"col-xs-12 text-muted text-center\" },\n                            \"No additional details for this patient\"\n                        )\n                    )\n                ),\n                window.opener || window.parent && window.parent !== window ? _react2.default.createElement(\n                    \"nav\",\n                    { className: \"navbar navbar-default navbar-fixed-bottom\" },\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"container-fluid\", style: { width: \"100%\" } },\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"row\" },\n                            _react2.default.createElement(\n                                \"div\",\n                                { className: \"col-xs-12\", style: { paddingTop: 8 } },\n                                _react2.default.createElement(_DialogFooter2.default, null)\n                            )\n                        )\n                    )\n                ) : null\n            );\n        }\n    }]);\n\n    return PatientDetail;\n}(_react2.default.Component);\n\nPatientDetail.propTypes = {\n    match: _propTypes2.default.object,\n    settings: _propTypes2.default.object,\n    selection: _propTypes2.default.object,\n    query: _propTypes2.default.object\n};\nexports.default = (0, _reactRedux.connect)(function (state) {\n    return state;\n})(PatientDetail);\n\n/***/ }),\n\n/***/ 322:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.PatientList = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _PatientListItem = __webpack_require__(323);\n\nvar _PatientListItem2 = _interopRequireDefault(_PatientListItem);\n\nvar _selection = __webpack_require__(47);\n\nvar _settings = __webpack_require__(48);\n\nvar _query = __webpack_require__(21);\n\nvar _redux = __webpack_require__(46);\n\nvar _redux2 = _interopRequireDefault(_redux);\n\nvar _reactRedux = __webpack_require__(19);\n\nvar _Footer = __webpack_require__(318);\n\nvar _Footer2 = _interopRequireDefault(_Footer);\n\nvar _Header = __webpack_require__(319);\n\nvar _Header2 = _interopRequireDefault(_Header);\n\nvar _ErrorMessage = __webpack_require__(100);\n\nvar _ErrorMessage2 = _interopRequireDefault(_ErrorMessage);\n\nvar _Alert = __webpack_require__(98);\n\nvar _Alert2 = _interopRequireDefault(_Alert);\n\n__webpack_require__(546);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PatientList = exports.PatientList = function (_React$Component) {\n    _inherits(PatientList, _React$Component);\n\n    function PatientList() {\n        _classCallCheck(this, PatientList);\n\n        return _possibleConstructorReturn(this, (PatientList.__proto__ || Object.getPrototypeOf(PatientList)).apply(this, arguments));\n    }\n\n    _createClass(PatientList, [{\n        key: \"render\",\n        value: function render() {\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"page\" },\n                _react2.default.createElement(_Header2.default, {\n                    query: this.props.query,\n                    settings: this.props.settings,\n                    location: this.props.location,\n                    urlParams: this.props.urlParams\n                }),\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"patient-search-results\" },\n                    this.renderContents()\n                ),\n                _react2.default.createElement(_Footer2.default, {\n                    query: this.props.query,\n                    bundle: this.props.query.bundle,\n                    dispatch: this.props.dispatch,\n                    selection: this.props.selection,\n                    canShowSelected: true\n                })\n            );\n        }\n    }, {\n        key: \"renderContents\",\n        value: function renderContents() {\n            if (this.props.query.error) {\n                return _react2.default.createElement(_ErrorMessage2.default, { error: this.props.query.error });\n            }\n\n            if (!this.props.query.bundle || this.props.query.loading) {\n                return _react2.default.createElement(\n                    \"div\",\n                    { className: \"patient-search-loading\" },\n                    _react2.default.createElement(\"i\", { className: \"fa fa-spinner spin\" }),\n                    \" Loading. Please wait...\"\n                );\n            }\n\n            if (!this.props.query.bundle.entry || !this.props.query.bundle.entry.length) {\n                return _react2.default.createElement(\n                    _Alert2.default,\n                    null,\n                    \"No patients found to match this search criteria\"\n                );\n            }\n\n            return this.renderPatientItems();\n        }\n    }, {\n        key: \"renderPatientItems\",\n        value: function renderPatientItems() {\n            var _this2 = this;\n\n            var isSelected = function isSelected(item) {\n                var idLower = (item.resource.id || \"\").toLowerCase();\n                var key = Object.keys(_this2.props.selection).find(function (k) {\n                    return k.toLowerCase() == idLower;\n                });\n                return key && _this2.props.selection[key] !== false;\n            };\n\n            var offset = this.props.query.offset || 0;\n            var items = this.props.query.bundle.entry || [];\n            if (this.props.settings.renderSelectedOnly) {\n                items = items.filter(isSelected);\n            }\n            return items.map(function (o, i) {\n                return _react2.default.createElement(_PatientListItem2.default, _extends({}, o.resource, {\n                    patient: o.resource,\n                    key: o.resource.id,\n                    index: offset + i,\n                    selected: isSelected(o),\n                    onSelectionChange: function onSelectionChange(patient) {\n                        if (_this2.props.settings.renderSelectedOnly && Object.keys(_this2.props.selection).filter(function (k) {\n                            return !!_this2.props.selection[k];\n                        }).length === 1) {\n                            _redux2.default.dispatch((0, _selection.setAll)({}));\n                            _redux2.default.dispatch((0, _settings.showSelectedOnly)(false));\n                            _redux2.default.dispatch((0, _query.setParam)({ name: \"_id\", value: undefined }));\n                            _redux2.default.dispatch((0, _query.fetch)());\n                        } else {\n                            _redux2.default.dispatch((0, _selection.toggle)(patient));\n                        }\n                    },\n                    query: _this2.props.query,\n                    settings: _this2.props.settings\n                }));\n            });\n        }\n    }]);\n\n    return PatientList;\n}(_react2.default.Component);\n\nPatientList.propTypes = {\n    query: _propTypes2.default.object,\n    selection: _propTypes2.default.object,\n    location: _propTypes2.default.object,\n    settings: _propTypes2.default.object,\n    urlParams: _propTypes2.default.object,\n    dispatch: _propTypes2.default.func\n};\nexports.default = (0, _reactRedux.connect)(function (state) {\n    return state;\n})(PatientList);\n\n/***/ }),\n\n/***/ 323:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRouterDom = __webpack_require__(61);\n\nvar _PatientImage = __webpack_require__(102);\n\nvar _PatientImage2 = _interopRequireDefault(_PatientImage);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _lib = __webpack_require__(7);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PatientListItem = function (_React$Component) {\n    _inherits(PatientListItem, _React$Component);\n\n    function PatientListItem() {\n        _classCallCheck(this, PatientListItem);\n\n        return _possibleConstructorReturn(this, (PatientListItem.__proto__ || Object.getPrototypeOf(PatientListItem)).apply(this, arguments));\n    }\n\n    _createClass(PatientListItem, [{\n        key: \"render\",\n\n        /**\n         * This component expects a Fhir Bundle\n         */\n        value: function render() {\n            var _this2 = this;\n\n            var age = (0, _lib.getPatientAge)(this.props.patient);\n            var name = (0, _lib.getPatientName)(this.props);\n            if (this.props.query.params.name) {\n                name = (0, _lib.renderSearchHighlight)(name, this.props.query.params.name);\n            }\n\n            return _react2.default.createElement(\n                _reactRouterDom.Link,\n                {\n                    to: \"/patient/\" + this.props.index,\n                    className: \"patient\" + (this.props.selected ? \" selected\" : \"\")\n                },\n                _react2.default.createElement(\n                    \"div\",\n                    {\n                        className: \"patient-select-zone\",\n                        onClick: function onClick(e) {\n                            e.stopPropagation();\n                            e.preventDefault();\n                            _this2.props.onSelectionChange(_this2.props.patient);\n                        }\n                    },\n                    _react2.default.createElement(\"i\", { className: this.props.selected ? \"fa fa-check-square-o\" : \"fa fa-square-o\" })\n                ),\n                _react2.default.createElement(_PatientImage2.default, { patient: this.props.patient, base: this.props.settings.server.url }),\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"patient-info\" },\n                    _react2.default.createElement(\n                        \"b\",\n                        null,\n                        name,\n                        \" \",\n                        this.props.patient.deceasedBoolean || this.props.patient.deceasedDateTime ? _react2.default.createElement(\n                            \"span\",\n                            { className: \"deceased-label\" },\n                            \"Deceased\"\n                        ) : null\n                    ),\n                    _react2.default.createElement(\n                        \"small\",\n                        null,\n                        _react2.default.createElement(\n                            \"b\",\n                            null,\n                            age\n                        ),\n                        \" old \",\n                        this.renderGender()\n                    ),\n                    _react2.default.createElement(\n                        \"footer\",\n                        { className: \"small\" },\n                        _react2.default.createElement(\n                            \"span\",\n                            null,\n                            \"DOB: \",\n                            this.props.patient.birthDate || \"Unknown\",\n                            this.props.patient.deceasedDateTime ? ' / DOD: ' + (0, _moment2.default)(this.props.patient.deceasedDateTime).format(\"YYYY-MM-DD\") : null\n                        ),\n                        _react2.default.createElement(\n                            \"span\",\n                            null,\n                            \"ID: \",\n                            this.props.patient.id || \"Unknown\"\n                        ),\n                        _react2.default.createElement(\n                            \"span\",\n                            null,\n                            \"MRN: \",\n                            (0, _lib.getPatientMRN)(this.props.patient) || \"Unknown\"\n                        )\n                    )\n                ),\n                _react2.default.createElement(\"i\", { className: \"fa fa-angle-right\" })\n            );\n        }\n    }, {\n        key: \"renderGender\",\n        value: function renderGender() {\n            var gender = this.props.patient.gender;\n            if (!gender) {\n                return null;\n            }\n\n            return _react2.default.createElement(\n                \"span\",\n                { className: gender },\n                gender\n            );\n        }\n    }]);\n\n    return PatientListItem;\n}(_react2.default.Component);\n\nPatientListItem.propTypes = {\n    patient: _propTypes2.default.object,\n    query: _propTypes2.default.object,\n    settings: _propTypes2.default.object,\n    selected: _propTypes2.default.bool,\n    onSelectionChange: _propTypes2.default.func,\n    index: _propTypes2.default.number\n};\nPatientListItem.defaultProps = {\n    onSelectionChange: function onSelectionChange() {\n        return 1;\n    }\n};\nexports.default = PatientListItem;\n\n/***/ }),\n\n/***/ 324:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\n__webpack_require__(547);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SortWidget = function (_React$Component) {\n    _inherits(SortWidget, _React$Component);\n\n    function SortWidget() {\n        _classCallCheck(this, SortWidget);\n\n        return _possibleConstructorReturn(this, (SortWidget.__proto__ || Object.getPrototypeOf(SortWidget)).apply(this, arguments));\n    }\n\n    _createClass(SortWidget, [{\n        key: \"change\",\n        value: function change(name, value) {\n            // console.log(name, value)\n            if (typeof this.props.onChange == \"function\") {\n                var sort = this.parseSort(this.props.sort);\n                if (!value) {\n                    if (sort.hasOwnProperty(name)) {\n                        delete sort[name];\n                    }\n                } else {\n                    sort[name] = value;\n                }\n                // console.log(sort, this.compileSort(sort))\n                this.props.onChange(this.compileSort(sort));\n            }\n        }\n    }, {\n        key: \"parseSort\",\n        value: function parseSort(input) {\n            var sort = {};\n            String(input || \"\").split(\",\").filter(Boolean).forEach(function (s) {\n                var name = s.replace(/^\\-/, \"\");\n                sort[name] = s.indexOf(\"-\") === 0 ? \"desc\" : \"asc\";\n            });\n            return sort;\n        }\n    }, {\n        key: \"compileSort\",\n        value: function compileSort(sort) {\n            return Object.keys(sort).map(function (k) {\n                return sort[k] == \"desc\" ? \"-\" + k : k;\n            }).join(\",\");\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _this2 = this;\n\n            var sort = this.parseSort(this.props.sort);\n\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"sort-widget small\" },\n                _react2.default.createElement(\n                    \"span\",\n                    { className: \"pull-left\" },\n                    \"Sort\",\n                    _react2.default.createElement(\n                        \"span\",\n                        { className: \"hidden-xs\" },\n                        \" by\"\n                    ),\n                    \":\"\n                ),\n                _react2.default.createElement(\n                    \"ul\",\n                    { className: \"nav nav-pills\" },\n                    this.props.options.map(function (o, i) {\n                        return _react2.default.createElement(\n                            \"li\",\n                            {\n                                key: i,\n                                role: \"presentation\",\n                                className: o.value in sort ? \"active\" : null\n                            },\n                            _react2.default.createElement(\n                                \"a\",\n                                { href: \"#\", onClick: function onClick(e) {\n                                        e.preventDefault();\n                                        var _sort = _this2.parseSort(_this2.props.sort);\n                                        switch (_sort[o.value]) {\n                                            case \"asc\":\n                                                return _this2.change(o.value, \"desc\");\n                                            case \"desc\":\n                                                return _this2.change(o.value, \"\");\n                                            default:\n                                                return _this2.change(o.value, \"asc\");\n                                        }\n                                    } },\n                                o.label || o.name,\n                                sort[o.value] == \"asc\" ? _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"sort\" },\n                                    _react2.default.createElement(\n                                        \"span\",\n                                        { className: \"hidden-xs\" },\n                                        \" Asc\"\n                                    ),\n                                    \" \",\n                                    _react2.default.createElement(\"i\", { className: \"fa fa-sort-amount-asc\" })\n                                ) : sort[o.value] == \"desc\" ? _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"sort\" },\n                                    _react2.default.createElement(\n                                        \"span\",\n                                        { className: \"hidden-xs\" },\n                                        \" Desc\"\n                                    ),\n                                    \" \",\n                                    _react2.default.createElement(\"i\", { className: \"fa fa-sort-amount-desc\" })\n                                ) : null\n                            )\n                        );\n                    })\n                )\n            );\n        }\n    }]);\n\n    return SortWidget;\n}(_react2.default.Component);\n\nSortWidget.propTypes = {\n    /**\n     * Fhir sort string like \"status,-date,category\"\n     */\n    sort: _propTypes2.default.string,\n\n    options: _propTypes2.default.arrayOf(_propTypes2.default.shape({\n        name: _propTypes2.default.string,\n        value: _propTypes2.default.string\n    })),\n\n    onChange: _propTypes2.default.func\n};\nSortWidget.defaultProps = {\n    sort: \"name,-birthdate\",\n    options: [{\n        label: _react2.default.createElement(\n            \"span\",\n            null,\n            _react2.default.createElement(\n                \"span\",\n                { className: \"hidden-xs\" },\n                \"Patient \"\n            ),\n            \"ID\"\n        ),\n        name: \"Patient ID\",\n        value: \"_id\"\n    }, {\n        name: \"Name\",\n        value: \"given\"\n    }, {\n        name: \"Gender\",\n        value: \"gender\"\n    }, {\n        name: \"DOB\",\n        value: \"birthdate\"\n    }]\n};\nexports.default = SortWidget;\n\n/***/ }),\n\n/***/ 325:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _jquery = __webpack_require__(25);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _lib = __webpack_require__(7);\n\n__webpack_require__(548);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TagSelector = function (_React$Component) {\n    _inherits(TagSelector, _React$Component);\n\n    function TagSelector() {\n        var _ref;\n\n        _classCallCheck(this, TagSelector);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        var _this = _possibleConstructorReturn(this, (_ref = TagSelector.__proto__ || Object.getPrototypeOf(TagSelector)).call.apply(_ref, [this].concat(args)));\n\n        _this.state = {\n            // the selected items as a map of unique keys and tag objects\n            selected: [],\n\n            // is the menu currently visible?\n            open: false,\n\n            // the index of the currently selected option (-1 means no\n            // selection).\n            selectedIndex: -1,\n\n            // The search therm (the value of the input field)\n            search: \"\"\n        };\n\n        _this.stateFromProps(_this.state, _this.props);\n\n        // bind the event handlers to preserve the \"this\" context\n        _this.addTag = _this.addTag.bind(_this);\n        _this.removeTag = _this.removeTag.bind(_this);\n        _this.onFocus = _this.onFocus.bind(_this);\n        _this.onBlur = _this.onBlur.bind(_this);\n        _this.onKeyDown = _this.onKeyDown.bind(_this);\n        _this.onInput = _this.onInput.bind(_this);\n        return _this;\n    }\n\n    _createClass(TagSelector, [{\n        key: \"stateFromProps\",\n        value: function stateFromProps(state, nextProps) {\n            var _this2 = this;\n\n            var hasChanged = false;\n            if (nextProps.search) {\n                state.search = nextProps.search;\n                hasChanged = true;\n            }\n\n            if (nextProps.selected) {\n                state.selected = [].concat(_toConsumableArray(nextProps.selected.map(function (t) {\n                    return _this2.props.tags.find(function (tag) {\n                        return tag.key === t;\n                    }) || {\n                        key: t,\n                        label: t,\n                        custom: true,\n                        data: {\n                            description: t,\n                            codes: {\n                                \"\": [t]\n                            }\n                        }\n                    };\n                })));\n                hasChanged = true;\n            }\n\n            return hasChanged;\n        }\n    }, {\n        key: \"componentWillReceiveProps\",\n        value: function componentWillReceiveProps(nextProps) {\n            var nextState = {};\n            if (this.stateFromProps(nextState, nextProps)) {\n                this.setState(nextState);\n            }\n        }\n\n        /**\n         * Updates the scroll position of the menu if it is opened and if some of\n         * it's options is selected so that the selected option is always in view.\n         */\n\n    }, {\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate() {\n            var _this3 = this;\n\n            var menu = this.refs.menu;\n            if (menu) {\n                var menuHeight = menu.clientHeight;\n                var menuScrollTop = menu.scrollTop;\n                var paddingTop = parseInt((0, _jquery2.default)(menu).css(\"paddingTop\"), 10);\n                var paddingBottom = parseInt((0, _jquery2.default)(menu).css(\"paddingBottom\"), 10);\n                var selected = (0, _jquery2.default)(\".selected\", this.refs.menu);\n\n                if (selected.length) {\n                    var selectedTop = selected[0].offsetTop;\n                    var selectedHeight = selected[0].offsetHeight;\n                    if (selectedTop < menuScrollTop) {\n                        requestAnimationFrame(function () {\n                            return _this3.refs.menu.scrollTop = selectedTop - paddingTop;\n                        });\n                    } else if (selectedTop + selectedHeight - menuScrollTop > menuHeight) {\n                        requestAnimationFrame(function () {\n                            return _this3.refs.menu.scrollTop = selectedTop + selectedHeight + paddingBottom - menuHeight;\n                        });\n                    }\n                }\n            }\n        }\n\n        // Event handlers ----------------------------------------------------------\n\n    }, {\n        key: \"onFocus\",\n        value: function onFocus() {\n            this.setState({ open: true });\n        }\n    }, {\n        key: \"onBlur\",\n        value: function onBlur() {\n            this.setState({ open: false });\n        }\n    }, {\n        key: \"onInput\",\n        value: function onInput(e) {\n            var listed = this.filterTags(e.target.value);\n            this.setState({\n                search: e.target.value,\n                open: true,\n                selectedIndex: listed.length && this.state.selectedIndex == -1 ? 0 : this.state.selectedIndex\n            });\n        }\n\n        /**\n         * This will handle special keys like Enter, Escape and arrows for scrolling\n         */\n\n    }, {\n        key: \"onKeyDown\",\n        value: function onKeyDown(e) {\n            var _this4 = this;\n\n            var listed = this.filterTags(this.state.search);\n            switch (e.keyCode) {\n\n                case 27:\n                    // Esc\n                    this.setState({ open: false });\n                    break;\n\n                case 13:\n                    {\n                        // Enter\n                        // make sure we don't submit the form (if in any)\n                        e.preventDefault();\n\n                        if (listed.length < 2) {\n                            this.setState({ open: false });\n                        }\n\n                        var index = this.state.selectedIndex;\n                        if (index === listed.length - 1) {\n                            this.setState({ selectedIndex: index - 1 }, function () {\n                                _this4.addTag(listed[index]);\n                            });\n                        } else {\n                            this.addTag(listed[index]);\n                        }\n\n                        break;\n                    }\n\n                case 40:\n                    {\n                        // Down arrow\n                        e.preventDefault();\n                        var maxIndex = listed.length - 1;\n                        this.setState({\n                            open: true,\n                            selectedIndex: Math.min(this.state.selectedIndex + 1, maxIndex)\n                        });\n                        break;\n                    }\n\n                case 38:\n                    // Up arrow\n                    e.preventDefault();\n                    if (this.state.selectedIndex > 0) {\n                        this.setState({\n                            selectedIndex: this.state.selectedIndex - 1\n                        });\n                    } else if (this.state.open) {\n                        this.setState({\n                            open: false,\n                            selectedIndex: -1\n                        });\n                    }\n                    break;\n            }\n        }\n\n        /**\n         * Happens when the user clicks on an option (or hits the enter key on\n         * selected option)\n         * @param {*} tag\n         * @returns {void}\n         */\n\n    }, {\n        key: \"addTag\",\n        value: function addTag(tag) {\n            var _this5 = this;\n\n            if (!tag || !tag.key) {\n                return;\n            }\n\n            // this.shouldn't happen but just in case, check if somebody is trying\n            // to select something that is already selected\n            if (this.state.selected.find(function (t) {\n                return t.key === tag.key;\n            })) {\n                return;\n            }\n\n            this.setState(_extends({}, this.state, {\n                selected: [].concat(_toConsumableArray(this.state.selected), [tag]),\n                search: \"\",\n                open: false,\n                selectedIndex: -1\n            }), function () {\n                return _this5.props.onChange(_this5.state.selected);\n            });\n        }\n\n        /**\n         * Happens when the user clicks a close button on a selected tag\n         * @param {*} key\n         */\n\n    }, {\n        key: \"removeTag\",\n        value: function removeTag(key) {\n            var _this6 = this;\n\n            if (!key) return;\n            var idx = this.state.selected.findIndex(function (t) {\n                return t.key === key;\n            });\n            if (idx > -1) {\n                this.state.selected.splice(idx, 1);\n                this.setState({}, function () {\n                    return _this6.props.onChange(_this6.state.selected);\n                });\n            }\n        }\n\n        // Private helper methods --------------------------------------------------\n\n    }, {\n        key: \"filterTags\",\n        value: function filterTags(search) {\n            var _this7 = this;\n\n            var tags = this.props.tags.filter(function (t) {\n\n                // skip the already selected options\n                if (_this7.state.selected.find(function (tag) {\n                    return t.key === tag.key;\n                })) {\n                    return false;\n                }\n\n                // search for matches\n                if (search) {\n\n                    // first search by name\n                    var index = t.label.toLowerCase().indexOf(search.toLowerCase());\n                    if (index > -1) {\n                        return true;\n                    }\n\n                    // then search by code\n                    if (t.data && t.data.codes && _typeof(t.data.codes) == \"object\") {\n                        for (var system in t.data.codes) {\n                            return t.data.codes[system].some(function (c) {\n                                return c.toLowerCase().indexOf(search.toLowerCase()) > -1;\n                            });\n                        }\n                    }\n\n                    return false;\n                }\n                return true;\n            }).sort(function (a, b) {\n                if (a.label > b.label) return 1;\n                if (a.label < b.label) return -1;\n                return 0;\n            }).map(function (t) {\n                return _extends({}, t);\n            });\n\n            if (this.state.search) {\n                tags.unshift({\n                    key: this.state.search,\n                    label: this.state.search,\n                    custom: true,\n                    data: {\n                        description: this.state.search,\n                        codes: {\n                            \"\": [this.state.search]\n                        }\n                    }\n                });\n            }\n\n            return tags;\n        }\n\n        // Rendering methods -------------------------------------------------------\n\n    }, {\n        key: \"renderTagCode\",\n        value: function renderTagCode(tag) {\n            if (!tag || !tag.data || !tag.data.codes) {\n                return null;\n            }\n\n            var code = \"\",\n                codes = tag.data.codes;\n            if (codes[\"SNOMED-CT\"]) {\n                code = codes[\"SNOMED-CT\"].join(\"|\");\n            } else {\n                for (var system in codes) {\n                    code = codes[system].join(\",\") + \" (\" + system + \")\";\n                    break;\n                }\n            }\n\n            if (this.state.search) {\n                code = (0, _lib.renderSearchHighlight)(code, this.state.search);\n            }\n\n            return code ? _react2.default.createElement(\n                \"small\",\n                { key: tag.key, className: \"text-muted code\" },\n                code,\n                \":\"\n            ) : null;\n        }\n    }, {\n        key: \"renderTag\",\n        value: function renderTag(tag, index) {\n            var _this8 = this;\n\n            return _react2.default.createElement(\n                \"div\",\n                {\n                    className: \"menu-item\" + (this.state.selectedIndex === index ? \" selected\" : \"\") + (tag.custom ? \" custom text-primary\" : \"\"),\n                    key: tag.key,\n                    onMouseDown: function onMouseDown(e) {\n                        e.preventDefault();_this8.addTag(tag);\n                    },\n                    title: tag.label\n                },\n                tag.custom ? _react2.default.createElement(\n                    \"span\",\n                    null,\n                    \"Search for \",\n                    _react2.default.createElement(\n                        \"b\",\n                        { className: \"tag custom\" },\n                        this.state.search\n                    ),\n                    this.props.label ? \" \" + this.props.label : \"\"\n                ) : null,\n                tag.custom ? null : this.renderTagCode(tag),\n                tag.custom ? null : (0, _lib.renderSearchHighlight)(tag.label, this.state.search)\n            );\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _this9 = this;\n\n            var menuItems = this.filterTags(this.state.search).map(this.renderTag, this);\n            var emptyMenu = menuItems.length === 0;\n            var tags = this.state.selected.map(function (tag) {\n                return _react2.default.createElement(\n                    \"div\",\n                    { className: \"tag\" + (tag.custom ? \" custom\" : \"\"), key: tag.key },\n                    tag.label,\n                    _react2.default.createElement(\"i\", {\n                        className: \"tag-remove fa fa-times-circle\",\n                        title: \"Remove\",\n                        onMouseDown: function onMouseDown(e) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            _this9.removeTag(tag.key);\n                        }\n                    })\n                );\n            });\n\n            var placeholder = \"Type to search\";\n            if (this.props.label) {\n                placeholder += \" for \" + this.props.label + \"s\";\n            }\n            placeholder += ' ...';\n\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"tag-selector\" + (this.state.open ? \" open\" : \"\") },\n                tags.length ? _react2.default.createElement(\n                    \"div\",\n                    { className: \"tags\" },\n                    tags\n                ) : null,\n                _react2.default.createElement(\"input\", {\n                    className: \"input form-control input-sm\",\n                    placeholder: placeholder,\n                    onFocus: this.onFocus,\n                    onClick: this.onFocus,\n                    onBlur: this.onBlur,\n                    onKeyDown: this.onKeyDown,\n                    onInput: this.onInput,\n                    onChange: function onChange() {\n                        return 1;\n                    },\n                    value: this.state.search\n                }),\n                _react2.default.createElement(\"i\", { className: \"fa fa-caret-down\" }),\n                emptyMenu && !this.state.search ? null : _react2.default.createElement(\n                    \"div\",\n                    { className: \"menu dropdown-menu\", ref: \"menu\" },\n                    menuItems\n                )\n            );\n        }\n    }]);\n\n    return TagSelector;\n}(_react2.default.Component);\n\nTagSelector.propTypes = {\n    tags: _propTypes2.default.arrayOf(_propTypes2.default.object),\n    selected: _propTypes2.default.arrayOf(_propTypes2.default.string),\n    onChange: _propTypes2.default.func,\n    search: _propTypes2.default.string,\n    label: _propTypes2.default.string\n};\nTagSelector.defaultProps = {\n    onChange: function onChange() {\n        return 1;\n    },\n    tags: [],\n    selected: [],\n    search: \"\"\n};\nexports.default = TagSelector;\n\n/***/ }),\n\n/***/ 326:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    server: {\n        type: \"STU-3\", // \"DSTU-2\" or \"STU-3\" or \"R4\"\n\n        url: \"https://r3.smarthealthit.org\",\n\n        conditions: {},\n\n        tags: []\n    },\n\n    hideTagSelector: false,\n\n    patientsPerPage: 25,\n\n    // AJAX requests timeout\n    timeout: 20000,\n\n    // Only the selected patients are rendered. Should be false or the\n    // preselected patient IDs should be passed to the window. Otherwise\n    // It will result in rendering no patients at all.\n    renderSelectedOnly: false,\n\n    // If enabled is true (then url and param MUST be set) then clicking on the\n    // patient-related resources in detail view will open their source in that\n    // external viewer. Otherwise they will just be opened in new browser tab.\n    fhirViewer: {\n        enabled: true,\n        url: \"http://docs.smarthealthit.org/fhir-viewer/index.html\",\n        param: \"url\"\n    },\n\n    // What to send when the OK dialog button is clicked. Possible values:\n    // \"id-list\"  - comma-separated list of patient IDs (default)\n    // \"id-array\" - array of patient IDs\n    // \"patients\" - array of patient JSON objects\n    outputMode: \"id-list\",\n\n    // \"automatic\" -> onChange plus defer in some cases\n    // \"manual\" -> render a submit button\n    submitStrategy: \"manual\"\n};\n\n/***/ }),\n\n/***/ 327:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _constants = __webpack_require__(103);\n\nvar _ = __webpack_require__(7);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * This is just a helper class that is used as a query builder. It has some\n * dedicated setter methods for various query parameters and knows how to\n * compile those into a query string that can be passed to the Patient endpoint\n * of a fhir api server.\n */\nvar PatientSearch = function () {\n    /**\n     * The constructor just creates an empty instance. Use the setter methods\n     * to set query params and then call compile to build the query string.\n     */\n    function PatientSearch() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, PatientSearch);\n\n        this.__cache__ = {};\n\n        this.__scheduled__ = {};\n\n        /**\n         * The list of conditions that should be included in the query.\n         * @type {Object} A map of unique keys and condition objects\n         * @private\n         */\n        this.conditions = _extends({}, options.conditions || {});\n\n        /**\n         * The desired minimal age of the patients as an object like\n         * { value: 5, units: \"years\" }\n         * @type {Object}\n         * @private\n         */\n        this.minAge = null;\n\n        /**\n         * The desired maximal age of the patients as an object like\n         * { value: 5, units: \"years\" }\n         * @type {Object}\n         * @private\n         */\n        this.maxAge = null;\n\n        /**\n         * The patient gender to search for (male|female)\n         * @type {String}\n         * @private\n         */\n        this.gender = options.gender || null;\n\n        /**\n         * How many patients to fetch per page. Defaults to null meaning that\n         * this param will not be included in the query and we are leaving it\n         * for the server to decide.\n         * @type {Number}\n         * @private\n         */\n        this.limit = options.limit || null;\n\n        /**\n         * How many patients to skip. Defaults to null meaning that\n         * this param will not be included in the query and we are leaving it\n         * for the server to decide.\n         * @type {Number}\n         * @private\n         */\n        this.offset = null;\n\n        /**\n         * A collection of additional parameters\n         * @type {Object}\n         * @private\n         */\n        this.params = {};\n\n        /**\n         * This is like a flag that toggle the instance to different modes\n         * (currently only advanced and default are supported)\n         * @type {String} \"advanced\" or \"default\"\n         * @private\n         */\n        this.queryType = options.queryType || \"default\";\n\n        /**\n         * The query string to use if in advanced mode\n         * @type {String}\n         * @private\n         */\n        this.queryString = options.queryString || \"\";\n\n        /**\n         * The sort parameters list\n         * @type {String}\n         * @private\n         */\n        this.sort = options.sort || \"\";\n\n        /**\n         * All the tags that the patients should be filtered by\n         * @type {Array<String>}\n         * @private\n         */\n        this.tags = String(options.tags || \"\").split(/\\s*,\\s*/).filter(Boolean);\n    }\n\n    /**\n     * Schedule a prop change to be made before the next compile\n     * @param {Object} props\n     */\n\n\n    _createClass(PatientSearch, [{\n        key: \"schedule\",\n        value: function schedule(props) {\n            this.__scheduled__ = _extends({}, this.__scheduled__, props);\n        }\n    }, {\n        key: \"hasParam\",\n        value: function hasParam(name) {\n            return this.params.hasOwnProperty(name);\n        }\n\n        /**\n         * Sets a param by name. Note that this is a lower level interface. It does\n         * not know anything about the parameter thus it will not handle UI\n         * dependencies (eg. it won't reset the offset for you)\n         * @param {Name} name The name of the parameter to set\n         * @param {*} value The value to set. Use undefined to remove a parameter\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"setParam\",\n        value: function setParam(name, value) {\n            var has = this.hasParam(name);\n            if (value === undefined) {\n                if (has) {\n                    delete this.params[name];\n                }\n            } else {\n                this.params[name] = value;\n            }\n            this.offset = null;\n            this.cacheId = null;\n            return this;\n        }\n\n        /**\n         * Sets the query type. In advanced mode a query string is provided and\n         * parsed and all the other parameters are ignored. In default mode the\n         * query string is ignored and only the other params are used.\n         * @param {String} type \"advanced\" or anything else for \"default\"\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"setQueryType\",\n        value: function setQueryType(type) {\n            this.queryType = type == \"advanced\" ? \"advanced\" : \"default\";\n            return this;\n        }\n\n        /**\n         * Sets the query string to be used while in advanced mode. Note that this\n         * will not be used if not in advanced mode but the query string will still\n         * be persisted so that if the user switches the UI to advanced the last\n         * query can be displayed...\n         * @param {String} query The query string to use if in advanced mode\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"setQueryString\",\n        value: function setQueryString(query) {\n            this.queryString = String(query || \"\");\n            return this;\n        }\n\n        /**\n         * Adds a condition to the list of patient conditions\n         * @param {String} key Unique string identifier for that condition\n         * @param {Object} condition The condition to add\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"addCondition\",\n        value: function addCondition(key, condition) {\n            this.conditions[key] = condition;\n            this.__cache__.patientIDs = null;\n            return this;\n        }\n\n        /**\n         * Removes the condition identified by it's key. If that condition is not\n         * currently included it does nothing\n         * @param {*} key Unique string identifier for that condition\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"removeCondition\",\n        value: function removeCondition(key) {\n            if (this.conditions.hasOwnProperty(key)) {\n                delete this.conditions[key];\n                this.__cache__.patientIDs = null;\n            }\n            return this;\n        }\n\n        /**\n         * Replaces the entire set of conditions at once\n         * @param {Object} conditions The new conditions to set\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"setConditions\",\n        value: function setConditions(conditions) {\n            this.conditions = _extends({}, conditions);\n            this.schedule({\n                offset: null,\n                cacheId: null\n            });\n            this.__cache__.patientIDs = null;\n            return this;\n        }\n    }, {\n        key: \"addTag\",\n        value: function addTag(tag) {\n            if (this.tags.findIndex(tag) == -1) {\n                this.tags.push(tag);\n            }\n            return this;\n        }\n    }, {\n        key: \"removeTag\",\n        value: function removeTag(tag) {\n            var index = this.tags.findIndex(tag);\n            if (index > -1) {\n                this.tags.splice(index, 1);\n            }\n            return this;\n        }\n    }, {\n        key: \"setTags\",\n        value: function setTags(tags) {\n            this.tags = [].concat(_toConsumableArray(tags));\n            this.schedule({\n                offset: null,\n                cacheId: null\n            });\n            return this;\n        }\n\n        /**\n         * Sets the desired min age af the patients. This can also be set to null\n         * (or other falsy value) to exclude the minAge restrictions from the query.\n         * @param {object} age The age\n         * @param {number} age.value The age as number of units\n         * @param {string} age.units The units for the value (years|months|days)\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"setMinAge\",\n        value: function setMinAge(age) {\n            this.minAge = age;\n            this.schedule({\n                offset: null,\n                cacheId: null\n            });\n            return this;\n        }\n\n        /**\n         * Sets the desired max age af the patients. This can also be set to null\n         * (or other falsy value) to exclude the maxAge restrictions from the query.\n         * @param {object} age The age\n         * @param {number} age.value The age as number of units\n         * @param {string} age.units The units for the value (years|months|days)\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"setMaxAge\",\n        value: function setMaxAge(age) {\n            this.maxAge = age;\n            this.schedule({\n                offset: null,\n                cacheId: null\n            });\n            return this;\n        }\n\n        /**\n         * Sets the min and max ages depending on the specified age group keyword\n         * @param {*} group Can be one of infant, child, adult, elderly.\n         *                  Anything else will clear the age constraints!\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"setAgeGroup\",\n        value: function setAgeGroup(group) {\n            this.ageGroup = group;\n            this.schedule({\n                offset: null,\n                cacheId: null\n            });\n\n            switch (group) {\n\n                // infant - 0 to 12 months\n                case \"infant\":\n                    this.setMinAge(null);\n                    this.setMaxAge({ value: 1, units: \"years\" });\n                    break;\n\n                // child - 1 to 18 years\n                case \"child\":\n                    this.setMinAge({ value: 1, units: \"years\" });\n                    this.setMaxAge({ value: 18, units: \"years\" });\n                    break;\n\n                // adult - 18 to 65 years\n                case \"adult\":\n                    this.setMinAge({ value: 18, units: \"years\" });\n                    this.setMaxAge({ value: 65, units: \"years\" });\n                    break;\n\n                // Elderly - 65+\n                case \"elderly\":\n                    this.setMinAge({ value: 65, units: \"years\" });\n                    this.setMaxAge(null);\n                    break;\n\n                // Anything else clears the birthdate param\n                default:\n                    this.setMinAge(null);\n                    this.setMaxAge(null);\n                    // this.ageGroup = null;\n                    break;\n            }\n            return this;\n        }\n\n        /**\n         * Sets the gender to search for. Can be \"male\" or \"female\". Any falsy value\n         * will clear the gender param\n         * @param {String} gender \"male\" or \"female\"\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"setGender\",\n        value: function setGender(gender) {\n            if (gender !== this.gender) {\n                this.gender = gender;\n                this.schedule({\n                    offset: null,\n                    cacheId: null\n                });\n            }\n            return this;\n        }\n\n        /**\n         * Sets how many patients will be fetched per page\n         * @param {number|string} limit The number of records to fetch\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"setLimit\",\n        value: function setLimit(limit) {\n            this.limit = (0, _.intVal)(limit);\n            if (this.limit < 1) {\n                this.limit = null;\n            }\n            return this;\n        }\n\n        /**\n         * Sets how many patients will be skipped\n         * @param {string} cacheId The id generated by the server (_getpages)\n         * @param {number|string} offset The number of records to skip\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"setOffset\",\n        value: function setOffset(cacheId, offset) {\n            this.offset = (0, _.intVal)(offset);\n            this.cacheId = cacheId;\n            if (this.offset < 1) {\n                this.offset = null;\n                this.cacheId = null;\n            }\n            return this;\n        }\n\n        /**\n         * Sets the sorting to use\n         * @param {string} sort A fhir sort string like \"status,-date,category\"\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"setSort\",\n        value: function setSort(sort) {\n            this.sort = sort;\n            this.offset = null;\n            this.cacheId = null;\n            return this;\n        }\n\n        /**\n         * Returns another PatientSearch instance with the exact same state as this.\n         * @returns {PatientSearch} Returns the new copy\n         */\n\n    }, {\n        key: \"clone\",\n        value: function clone() {\n            var inst = new PatientSearch();\n\n            inst.conditions = _extends({}, this.conditions);\n            inst.params = _extends({}, this.params);\n            inst.tags = [].concat(_toConsumableArray(this.tags));\n\n            inst.setSort(this.sort).setAgeGroup(this.ageGroup).setMinAge(this.minAge).setMaxAge(this.maxAge).setGender(this.gender).setLimit(this.limit).setOffset(this.cacheId, this.offset).setQueryType(this.queryType).setQueryString(this.queryString);\n\n            return inst;\n        }\n\n        /**\n         * Clear all params. If you call compile after clear only the \"_format=json\"\n         * part should be returned\n         * @returns {PatientSearch} Returns the instance\n         */\n\n    }, {\n        key: \"reset\",\n        value: function reset() {\n            this.conditions = {};\n            this.minAge = null;\n            this.maxAge = null;\n            this.gender = null;\n            this.limit = null;\n            this.offset = null;\n            this.cacheId = null;\n            this.ageGroup = null;\n            this.params = {};\n            this.queryString = \"\";\n            this.queryType = \"default\";\n            this.sort = \"\";\n            this.tags = [];\n            return this;\n        }\n\n        /**\n         * Returns an object representing the current state of the instance.\n         * The object contains COPIES of the current param values.\n         * @returns {Object}\n         */\n\n    }, {\n        key: \"getState\",\n        value: function getState() {\n            return {\n                conditions: this.conditions,\n                minAge: this.minAge,\n                maxAge: this.maxAge,\n                gender: this.gender,\n                limit: this.limit,\n                offset: this.offset,\n                cacheId: this.cacheId,\n                ageGroup: this.ageGroup,\n                params: _extends({}, this.params),\n                queryString: this.queryString,\n                queryType: this.queryType,\n                sort: this.sort,\n                tags: [].concat(_toConsumableArray(this.tags))\n            };\n        }\n\n        /**\n         * Compiles and returns the query string that can be send to the Patient\n         * endpoint.\n         * @return {String} The compiled query string (without the \"?\" in front)\n         */\n\n    }, {\n        key: \"compile\",\n        value: function compile() {\n            var _this = this;\n\n            var encode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n            var params = [];\n\n            [\n            // conditions\n            \"minAge\", \"maxAge\", \"gender\", \"limit\", \"offset\",\n            // \"params\",\n            \"queryType\", \"queryString\", \"sort\" //,\n            // tags\n            ].forEach(function (prop) {\n                if (_this.__scheduled__.hasOwnProperty(prop)) {\n                    _this[prop] = _this.__scheduled__[prop];\n                    delete _this.__scheduled__[prop];\n                }\n            });\n\n            // Tags ----------------------------------------------------------------\n            if (this.tags.length && !this.params._id) {\n                params.push({ name: \"_tag\", value: this.tags.join(\",\") });\n            }\n\n            // Advanced query ------------------------------------------------------\n            if (this.queryType == \"advanced\") {\n                var str = this.queryString.trim();\n                if (str) {\n                    var _query = (0, _.parseQueryString)(str);\n                    for (var name in _query) {\n                        params.push({ name: name, value: _query[name] });\n                    }\n                }\n            }\n\n            // Default query -------------------------------------------------------\n            else {\n\n                    // Custom params ---------------------------------------------------\n                    Object.keys(this.params).forEach(function (k) {\n                        if (String(_this.params[k]).trim()) {\n                            params.push({\n                                name: k,\n                                value: _this.params[k]\n                            });\n                        }\n                    });\n\n                    // sort ------------------------------------------------------------\n                    if (this.sort) {\n                        String(this.sort).split(\",\").forEach(function (token) {\n                            if (token.indexOf(\"-\") === 0) {\n                                params.push({\n                                    name: \"_sort:desc\",\n                                    value: token.substring(1)\n                                });\n                            } else {\n                                params.push({\n                                    name: \"_sort:asc\",\n                                    value: token\n                                });\n                            }\n                        });\n                        // params.push({\n                        //     name : \"_sort\",\n                        //     value: this.sort\n                        // })\n                    }\n\n                    if (!this.params._id) {\n\n                        // Min age -----------------------------------------------------\n                        if (this.minAge) {\n                            var d = (0, _moment2.default)().subtract(this.minAge.value, this.minAge.units);\n                            params.push({\n                                name: \"birthdate\",\n                                value: \"le\" + d.format('YYYY-MM-DD')\n                            });\n                        }\n\n                        // Max age -----------------------------------------------------\n                        if (this.maxAge) {\n                            var _d = (0, _moment2.default)().subtract(this.maxAge.value, this.maxAge.units);\n                            params.push({\n                                name: \"birthdate\",\n                                value: \"ge\" + _d.format('YYYY-MM-DD')\n                            });\n                        }\n\n                        // exclude deceased patients if age is specified ---------------\n                        if (this.maxAge || this.minAge) {\n                            var existing = params.find(function (p) {\n                                return p.name === \"deceased\";\n                            });\n                            if (existing) {\n                                existing.value = false;\n                            } else {\n                                params.push({\n                                    name: \"deceased\",\n                                    value: false\n                                });\n                            }\n                        }\n\n                        // Gender ------------------------------------------------------\n                        if (this.gender) {\n                            params.push({\n                                name: \"gender\",\n                                value: this.gender\n                            });\n                        }\n                    }\n                }\n\n            // limit ---------------------------------------------------------------\n            if (this.limit) {\n                params.push({\n                    name: \"_count\",\n                    value: this.limit\n                });\n            }\n\n            // offset --------------------------------------------------------------\n            if (this.offset && this.cacheId) {\n                params.push({\n                    name: \"_getpages\",\n                    value: this.cacheId\n                }, {\n                    name: \"_getpagesoffset\",\n                    value: this.offset\n                });\n            }\n\n            // Compile and return --------------------------------------------------\n            return params.map(function (p) {\n                return encode ? encodeURIComponent(p.name) + \"=\" + encodeURIComponent(p.value) : p.name + \"=\" + p.value;\n            }).join(\"&\");\n        }\n\n        /**\n         * Checks if there are any conditions chosen at the moment\n         * @returns {Boolean}\n         */\n\n    }, {\n        key: \"hasConditions\",\n        value: function hasConditions() {\n            for (var key in this.conditions) {\n                if (this.conditions.hasOwnProperty(key)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        /**\n         * Compiles the current conditions into URL-encoded parameter list\n         * @returns {String}\n         */\n\n    }, {\n        key: \"compileConditions\",\n        value: function compileConditions() {\n            var _this2 = this;\n\n            // let params = [];\n\n            // for (let key in this.conditions) {\n            //     let condition = this.conditions[key]\n\n            //     // system\n            //     let value = [];\n            //     for (let system in condition.codes) {\n            //         let systemUrl = (CODE_SYSTEMS[system] || {}).url;\n\n            //         // system.code[n] - OR\n            //         condition.codes[system].forEach(c => {\n            //             value.push( systemUrl ? systemUrl + \"|\" + c : c );\n            //         })\n            //     }\n\n            //     if (value.length) {\n            //         params.push({\n            //             name : \"code\",\n            //             value: value.join(\",\")\n            //         })\n            //     }\n            // }\n\n            // return params.map(p => (\n            //     encodeURIComponent(p.name) + \"=\" + encodeURIComponent(p.value)\n            // )).join(\"&\");\n            var out = [];\n\n            var _loop = function _loop(key) {\n                var condition = _this2.conditions[key];\n\n                // system\n                var value = [];\n\n                var _loop2 = function _loop2(system) {\n                    var systemUrl = (_constants.CODE_SYSTEMS[system] || {}).url || \"http://snomed.info/sct\";\n\n                    // system.code[n] - OR\n                    condition.codes[system].forEach(function (c) {\n                        value.push(systemUrl + \"|\" + c);\n                    });\n                };\n\n                for (var system in condition.codes) {\n                    _loop2(system);\n                }\n\n                if (value.length) {\n                    out.push(value.join(\",\"));\n                }\n            };\n\n            for (var key in this.conditions) {\n                _loop(key);\n            }\n            return out.length ? \"code=\" + encodeURIComponent(out.join(\",\")) : \"\";\n        }\n    }, {\n        key: \"getConditionKeys\",\n        value: function getConditionKeys() {\n            var _this3 = this;\n\n            var out = [];\n\n            var _loop3 = function _loop3(key) {\n                var condition = _this3.conditions[key];\n\n                // system\n                var value = [];\n\n                var _loop4 = function _loop4(system) {\n                    var systemUrl = (_constants.CODE_SYSTEMS[system] || {}).url || \"http://snomed.info/sct\";\n\n                    // system.code[n] - OR\n                    condition.codes[system].forEach(function (c) {\n                        value.push(systemUrl + \"|\" + c);\n                    });\n                };\n\n                for (var system in condition.codes) {\n                    _loop4(system);\n                }\n\n                if (value.length) {\n                    out.push(value.join(\",\"));\n                }\n            };\n\n            for (var key in this.conditions) {\n                _loop3(key);\n            }\n            return out;\n        }\n\n        /**\n         * Returns a promise resolved with a list of patient IDs that have the\n         * specified condition(s)\n         * @param {String} baseURL\n         * @returns {Promise<String[]>}\n         */\n\n    }, {\n        key: \"getPatientIDs\",\n        value: function getPatientIDs(server) {\n            var _this4 = this;\n\n            if (this.__cache__.patientIDs) {\n                return Promise.resolve(this.__cache__.patientIDs);\n            }\n\n            var conditions = this.compileConditions();\n\n            if (!conditions) {\n                return Promise.resolve([]);\n            }\n\n            /**\n             * The keys (eg: \"http://snomed.info/sct|44054006\") that were set by the\n             * user.\n             * @type {Array<String>}\n             * @private\n             */\n            var conditionKeys = this.getConditionKeys();\n\n            /**\n             * Map of patient IDs as keys and array of condition keys as values.\n             * @private\n             */\n            var patientIDs = {};\n\n            /**\n             * Handles the JSON response (single page) of the conditions query.\n             * Collects the patient IDs and their condition codes into the\n             * patientIDs local variable. When all the pages are fetched, cleans up\n             * the IDs to only contain those that have all the conditions specified\n             * by the user.\n             * @param {Object} response The JSON Conditions bundle response\n             * @returns {Promise<any>} Array of patient ID strings (can be empty)\n             */\n            var handleConditionsResponse = function handleConditionsResponse(response) {\n\n                // Collect the data\n                if (response.entry) {\n                    response.entry.forEach(function (condition) {\n                        var patientID = server.type == \"DSTU-2\" ? condition.resource.patient.reference.split(\"/\").pop() : condition.resource.subject.reference.split(\"/\").pop();\n                        if (!patientIDs[patientID]) {\n                            patientIDs[patientID] = [];\n                        }\n                        patientIDs[patientID].push(((0, _.getPath)(condition, \"resource.code.coding.0.system\") || \"http://snomed.info/sct\") + \"|\" + (0, _.getPath)(condition, \"resource.code.coding.0.code\"));\n                    });\n\n                    var nextLink = (response.link || []).find(function (l) {\n                        return l.relation == \"next\";\n                    });\n                    if (nextLink) {\n                        return (0, _.request)({ url: nextLink.url }).then(handleConditionsResponse);\n                    }\n                }\n                // console.log(conditionKeys, patientIDs)\n                // Clean up and only leave patients having all the conditions\n                patientIDs = Object.keys(patientIDs).filter(function (key) {\n                    return conditionKeys.every(function (conditionKey) {\n                        return patientIDs[key].indexOf(conditionKey) > -1;\n                    });\n                });\n                // console.log(patientIDs)\n\n                // finally return a promise resolved with the compiled ID array\n                return Promise.resolve(patientIDs);\n            };\n\n            // The conditions to search for\n            var params = [conditions];\n\n            // only need the patient - skip the rest to reduce the response\n            params.push(server.type == \"DSTU-2\" ? \"_elements=patient,code\" : \"_elements=subject,code\");\n\n            // Set bigger limit here to reduce the chance of having to\n            // make other queries to fetch subsequent pages\n            params.push(\"_count=500\");\n\n            // Tags (not currently available in STU2)\n            if (this.tags.length) {\n                params.push(\"_tag=\" + encodeURIComponent(this.tags.join(\",\")));\n            }\n\n            return (0, _.request)({\n                url: server.url + \"/Condition?\" + params.join(\"&\")\n            }).then(handleConditionsResponse).then(function (ids) {\n                _this4.__cache__.patientIDs = ids;\n                return ids;\n            });\n        }\n\n        /**\n         * Fetches the patients matching the user-defined conditions. The actual\n         * strategy may vary but regardless of the implementation, a promise is\n         * returned that should eventually be resolved with the result bundle.\n         * @param {String} baseURL\n         * @returns {Promise<Bundle>}\n         */\n\n    }, {\n        key: \"fetch\",\n        value: function fetch(server) {\n            var _this5 = this;\n\n            var data = this.compile();\n\n            // STU2 does not work with the deceased param\n            if (server.type == \"DSTU-2\") {\n                data = data.replace(/\\bdeceased=(true|false)\\b/gi, \"\");\n            }\n\n            // prepare the base options for the patient ajax request\n            var options = {\n                url: this.offset && this.cacheId ? server.url : server.url + \"/Patient/_search\",\n                method: this.offset && this.cacheId ? \"GET\" : \"POST\",\n                processData: false,\n                data: data,\n                headers: {\n                    accept: \"application/fhir+json\",\n                    \"content-type\": \"application/x-www-form-urlencoded\"\n                }\n            };\n\n            return this.getPatientIDs(server).then(function (ids) {\n                if (ids.length) {\n                    // if IDs were found - add them to the patient query\n                    options.data = [options.data, \"_id=\" + encodeURIComponent(ids.join(\",\"))].filter(Boolean).join(\"&\");\n                } else {\n                    // If conditions were specified but no patients were found to\n                    // have those conditions, then we should exit early.\n                    if (_this5.hasConditions()) {\n                        return Promise.reject(\"No patients found with the specified conditions!\");\n                    }\n                }\n                return options;\n            }).then(_.request);\n        }\n    }]);\n\n    return PatientSearch;\n}();\n\nexports.default = PatientSearch;\n\n/***/ }),\n\n/***/ 328:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = function () {\n    return _extends({}, INITIAL_STATE);\n};\n\nvar _lib = __webpack_require__(7);\n\n/**\n * The initial state is just an empty object that will be filled\n * with patient IDs as keys and booleans as values to indicate if\n * that patient is selected.\n */\nvar INITIAL_STATE = (0, _lib.parseQueryString)(location.hash.replace(/^.*\\?/, \"\"));\n\n// Export the reducer as default\n\n/***/ }),\n\n/***/ 33:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = Date;\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction Date(_ref) {\n    var moment = _ref.moment,\n        _ref$format = _ref.format,\n        format = _ref$format === undefined ? \"MM/DD/YYYY\" : _ref$format,\n        rest = _objectWithoutProperties(_ref, [\"moment\", \"format\"]);\n\n    return _react2.default.createElement(\n        \"span\",\n        rest,\n        (0, _moment2.default)(moment).format(format)\n    );\n}\n\nDate.propTypes = {\n    format: _propTypes2.default.string,\n    moment: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.instanceOf(Date), _propTypes2.default.object // moment\n    ]).isRequired\n};\n\n/***/ }),\n\n/***/ 330:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".age-widget-wrap {\\n  display: flex;\\n  flex-direction: row;\\n  flex-wrap: nowrap;\\n  white-space: nowrap;\\n  padding: 0;\\n  position: relative;\\n  font-size: 12px;\\n}\\n.age-widget-wrap > * {\\n  display: flex;\\n  flex-grow: 1;\\n  flex-shrink: 1;\\n  margin: 0;\\n  height: 100%;\\n  font-size: 13px;\\n}\\n.age-widget-wrap select {\\n  border: 1px solid transparent;\\n  border-radius: 4px;\\n  height: 100%;\\n}\\n.age-widget-wrap.custom > select {\\n  flex-grow: 0;\\n  min-width: 0;\\n  flex-basis: 180px;\\n}\\n.age-widget-wrap input {\\n  height: 100%;\\n  border: 1px solid transparent;\\n}\\n.age-widget {\\n  display: flex;\\n  flex-basis: 30%;\\n  min-width: 0;\\n  overflow: hidden;\\n  align-items: center;\\n  box-shadow: 2px 1px 2px -2px #BBB inset;\\n}\\n.age-widget:last-of-type {\\n  border-radius: 0 3px 3px 0;\\n}\\n.age-widget span {\\n  display: flex;\\n  white-space: nowrap;\\n  flex-basis: 7ex;\\n  flex-shrink: 0;\\n  flex-grow: 0;\\n  margin: 0 1ex 0 0;\\n  flex-direction: column;\\n  align-content: flex-end;\\n  background: rgba(0, 0, 0, 0.06);\\n  box-shadow: 1px 0 0 0 rgba(0, 0, 0, 0.1), 1px 0 2px 0px rgba(0, 0, 0, 0.1);\\n  line-height: 2.1em;\\n  padding: 0 1ex;\\n  text-align: right;\\n  height: 100%;\\n  font-weight: 500;\\n}\\n.age-widget input {\\n  flex-shrink: 1;\\n  flex-grow: 2;\\n  flex-basis: 30px;\\n  display: flex;\\n  margin: 0;\\n  background: transparent;\\n  min-width: 32px;\\n  border-right: 1px dotted rgba(0, 0, 0, 0.2);\\n}\\n.age-widget select {\\n  display: flex;\\n  flex-shrink: 1;\\n  flex-grow: 1;\\n  flex-basis: 6em;\\n  min-width: 6em;\\n}\\n.age-widget:hover {\\n  box-shadow: 0 0 0 1px #369;\\n  background: #ebf0f5;\\n}\\n.age-widget.invalid {\\n  background: rgba(255, 0, 0, 0.1);\\n  background: rgba(255, 0, 0, 0.03) repeating-linear-gradient(-45deg, rgba(255, 50, 0, 0), rgba(255, 50, 0, 0) 2.5px, rgba(255, 0, 0, 0.2) 3px, rgba(255, 50, 0, 0) 3.5px);\\n  background-size: 40px 40px;\\n}\\n@media (max-width: 600px) {\\n  .age-widget-wrap.custom {\\n    flex-wrap: wrap;\\n    white-space: normal;\\n    height: auto;\\n  }\\n  .age-widget-wrap.custom > select {\\n    flex-basis: 600px;\\n    flex-grow: 1;\\n    flex-shrink: 1;\\n    width: 100%;\\n    line-height: 2.1em;\\n    height: 2.1em;\\n  }\\n  .age-widget-wrap.custom .age-widget {\\n    flex-basis: 50%;\\n    flex-grow: 1;\\n    min-width: none;\\n    box-shadow: 0px 3px 0px -2px #DDD inset;\\n  }\\n  .age-widget-wrap.custom .age-widget:hover {\\n    box-shadow: 0 0 0 1px #369;\\n    background: #ebf0f5;\\n  }\\n  .age-widget-wrap.custom .age-widget:last-of-type {\\n    border-radius: 0 0 3px 0;\\n  }\\n  .age-widget-wrap.custom .age-widget ~ .age-widget span {\\n    box-shadow: 1px 0 0 0 rgba(0, 0, 0, 0.1), 1px 0 0 0 rgba(0, 0, 0, 0.1) inset, 1px 0 2px 0px rgba(0, 0, 0, 0.1);\\n  }\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 331:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"* {\\n  box-sizing: border-box;\\n}\\nhtml {\\n  height: 100%;\\n  display: block;\\n}\\nbody {\\n  background: linear-gradient(#F6F6F6, #FFF);\\n  color: #444;\\n  margin: 0;\\n  padding: 0;\\n  overflow: hidden;\\n  height: 100%;\\n  font-family: \\\"Helvetica Neue\\\", Arial, sans-serif;\\n  font-size: 14px;\\n  line-height: normal;\\n}\\na {\\n  text-decoration: none;\\n  color: #369;\\n}\\na:disabled,\\na[disabled] {\\n  pointer-events: none;\\n  opacity: 0.4 !important;\\n}\\nhr {\\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\\n  border-bottom: 1px solid rgba(255, 255, 255, 0.9);\\n}\\n*:focus {\\n  outline: none !important;\\n}\\n.tab-content {\\n  background: linear-gradient(#FFF, transparent);\\n  border: 1px solid #DDD;\\n  border-top: 0;\\n  padding: 15px 15px 0;\\n  border-radius: 0 0 5px 5px;\\n}\\n#overlay {\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: rgba(150, 150, 150, 0.1);\\n  z-index: 1000000000;\\n}\\n#main {\\n  height: 100%;\\n}\\n.app {\\n  display: flex;\\n  flex-direction: column;\\n  flex-shrink: 0;\\n  height: 100%;\\n}\\n.page {\\n  display: flex;\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n}\\n.page {\\n  display: flex;\\n}\\n.patient-search-loading {\\n  display: flex;\\n  flex-grow: 1;\\n  align-content: center;\\n  align-items: center;\\n  align-self: center;\\n}\\n.patient-search-loading .fa {\\n  margin: 1ex;\\n}\\n.spin {\\n  animation: spin 2s linear infinite;\\n}\\n@keyframes spin {\\n  0% {\\n    transform: rotate(0deg);\\n  }\\n  100% {\\n    transform: rotate(359deg);\\n  }\\n}\\n.page {\\n  display: flex;\\n  flex-grow: 1;\\n  flex-direction: column;\\n  height: 100%;\\n}\\n.pre {\\n  white-space: pre;\\n  font-family: monospace;\\n  font-size: 12px;\\n  display: block;\\n}\\n.search-match {\\n  background: #FFCF39;\\n  box-shadow: 0 0 1px rgba(255, 255, 255, 0.8) inset, 0 0 1px rgba(0, 0, 0, 0.99) !important;\\n  border-radius: 2px;\\n  text-shadow: 0 0 1px #FFF !important;\\n  color: #000 !important;\\n}\\n.small.pull-left,\\n.small.pull-right,\\nsmall.pull-left,\\nsmall.pull-right {\\n  margin-top: 0.5ex;\\n}\\nlabel[disabled] {\\n  color: rgba(0, 0, 0, 0.4);\\n  cursor: not-allowed;\\n  user-select: none;\\n}\\n.deceased-label {\\n  vertical-align: baseline;\\n  color: #e45f00;\\n  font-size: 11px;\\n  padding: 0px 4px 1px;\\n  border-radius: 3px;\\n  border: 1px solid #ff6a00;\\n  box-shadow: 0 1px 4px 0px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(255, 255, 255, 0.31) inset;\\n}\\nselect,\\nselect.form-control {\\n  padding: 0 10px;\\n  line-height: 30px;\\n  font: inherit;\\n  background-color: transparent;\\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwMCIgaGVpZ2h0PSI1MTIiIHZpZXdCb3g9IjAgMCAxMDAwIDUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTSA5Ni4wMCw5Ni4wMGwtOTYuMDAsOTYuMDBsIDI1Ni4wMCwyNTYuMDBsIDI1Ni4wMC0yNTYuMDBsLTk2LjAwLTk2LjAwTCAyNTYuMDAsMjU2LjAwTCA5Ni4wMCw5Ni4wMHoiID48L3BhdGg+PC9zdmc+');\\n  background-position: 100% 50%;\\n  background-repeat: no-repeat;\\n  background-size: 15px;\\n  position: relative;\\n  padding-right: 20px;\\n  -webkit-appearance: none;\\n  -moz-appearance: none;\\n  -ms-appearance: none;\\n}\\nselect::-ms-expand,\\nselect.form-control::-ms-expand {\\n  display: none;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 332:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".dialog-buttons button {\\n  min-width: 10em;\\n  margin: 0 0 0 1em;\\n}\\n.dialog-buttons label {\\n  margin: 2px 0;\\n  display: flex;\\n  align-items: center;\\n  min-height: 30px;\\n}\\n.dialog-buttons .btn-group {\\n  display: inline-flex;\\n  flex: 0 1 18em;\\n  line-height: 1;\\n  flex-direction: row;\\n  box-shadow: 0 1px 1px #FFF;\\n  margin: 0 6px;\\n}\\n.dialog-buttons .btn-group > .btn {\\n  display: flex;\\n  flex: 1 1 120px;\\n  align-items: center;\\n  align-content: center;\\n  align-self: center;\\n  flex-direction: column;\\n  min-width: 4em;\\n  margin: 0;\\n  border: 1px solid #BBB;\\n  padding: 4px 2ex;\\n  background: linear-gradient(#F9F9F9, #E9E9E9);\\n  font-weight: normal;\\n  color: #666;\\n  text-shadow: 0 1px 0 #FFF;\\n  box-shadow: 0 1px 1px #FFF inset;\\n  overflow: hidden;\\n}\\n.dialog-buttons .btn-group > .btn:hover {\\n  background: linear-gradient(#FFF, #EEE);\\n}\\n.dialog-buttons .btn-group > .btn:active,\\n.dialog-buttons .btn-group > .btn.active {\\n  background: linear-gradient(#CCC, #DDD);\\n  box-shadow: 0 1px 1px #BBB inset;\\n  border-color: #999 #AAA #BBB;\\n}\\n.dialog-buttons .btn-group > .btn + .btn {\\n  margin-left: -1px;\\n}\\n.dialog-buttons .btn-group > .btn:first-child {\\n  border-radius: 4px 0 0 4px;\\n}\\n.dialog-buttons .btn-group > .btn:last-child {\\n  border-radius: 0 4px 4px 0;\\n}\\n.dialog-buttons :disabled .btn-group,\\n.dialog-buttons [disabled] .btn-group,\\n.dialog-buttons .disabled .btn-group {\\n  opacity: 0.5;\\n  pointer-events: none;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 333:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".app-footer {\\n  position: relative;\\n  z-index: 3;\\n  display: flex;\\n  flex-grow: 0;\\n  flex-shrink: 0;\\n  justify-content: center;\\n  align-items: center;\\n  box-shadow: 0 -1px 0 rgba(0, 0, 0, 0.2), 0 0 5px 0 rgba(0, 0, 0, 0.25);\\n  text-shadow: 0 1px 0 #FFF;\\n  background: #F0F0F0;\\n  white-space: nowrap;\\n}\\n.app-footer .row {\\n  padding: 4px 0;\\n  box-shadow: 0 -1px 0 0 rgba(0, 0, 0, 0.1) inset;\\n}\\n.app-footer .row + .row {\\n  box-shadow: 0 -1px 0 0 rgba(0, 0, 0, 0.1) inset, 0 1px 0 0 rgba(255, 255, 255, 0.9) inset;\\n}\\n.app-footer .row:first-child .col-xs-6 {\\n  padding: 6px 0px;\\n}\\n.app-footer a {\\n  display: block;\\n  padding: 5px 0px;\\n  text-align: center;\\n  border-radius: 4px;\\n  border: 1px solid transparent;\\n}\\n.app-footer a:hover {\\n  background: rgba(51, 122, 183, 0.15);\\n  border: 1px solid rgba(51, 122, 183, 0.29);\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 334:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".app-header {\\n  color: #1f3d5c;\\n  padding: 5px 0 0;\\n  background: linear-gradient(#DFDFDF, #EEE 5px, #e2e2e2);\\n  position: relative;\\n  z-index: 3;\\n  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 5px 0 rgba(0, 0, 0, 0.5);\\n  text-shadow: 0 1px 0 #FFF;\\n  display: flex;\\n  flex-shrink: 0;\\n  flex-direction: column;\\n}\\n.app-header .nav.nav-tabs {\\n  padding-left: 5px;\\n}\\n.app-header .nav.nav-tabs a {\\n  padding: 5px 10px;\\n}\\n.app-header .tab-content {\\n  background: linear-gradient(#FFF, #F6F6F6);\\n  border: 0;\\n  border-bottom: 1px solid #BBB;\\n  padding: 5px 5px 0;\\n  border-radius: 0;\\n  font-size: small;\\n  box-shadow: 0 2px 1px -1px rgba(0, 0, 0, 0.1);\\n}\\n.app-header .badge {\\n  text-shadow: 0 0 1px #FFF;\\n  background: rgba(0, 0, 0, 0.08);\\n  color: #444;\\n  font-weight: 400;\\n  box-shadow: 0 0 0.5px 0 rgba(0, 0, 0, 0.2) inset;\\n}\\n.app-header .advanced-label {\\n  margin: 7px 6px 0 0;\\n}\\n.app-header .advanced-label input[type=\\\"checkbox\\\"] {\\n  margin: 0;\\n  vertical-align: middle;\\n}\\n.app-header .form-group {\\n  margin-bottom: 5px;\\n}\\n.app-header label,\\n.app-header .alert {\\n  margin-bottom: 3px;\\n}\\n.app-header .alert {\\n  padding: 5px 10px;\\n}\\n.app-header .btn-submit {\\n  margin: 4px 5px 0 auto;\\n  padding: 3px 8px;\\n  box-shadow: -13px 3px 0px -6px #e3e3e3, 13px 3px 0px -6px #e3e3e3, 0px 1px 0px 2px #e3e3e3, 0 2px 0 2px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.4), 0px 1px 1px -1px #FFF inset, 0px -17px 0px -5px rgba(0, 0, 0, 0.05) inset;\\n  border-radius: 30px;\\n  text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25), 0 0 1px rgba(0, 0, 0, 0.5);\\n  border-color: rgba(0, 0, 0, 0.5);\\n  position: relative;\\n  z-index: 100000000;\\n  min-width: 10%;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 335:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".loader {\\n  background: rgba(255, 255, 255, 0.5);\\n  text-align: center;\\n  position: absolute;\\n  z-index: 2;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  border-radius: inherit;\\n}\\n.loader div {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  font-size: 18px;\\n  transform: translate(-50%, -50%);\\n  background: #FFF;\\n  border-radius: 5px;\\n  padding: 1ex 2em;\\n  box-shadow: 0 0 1px 0px rgba(0, 0, 0, 0.5), 0 0 15px 1px rgba(0, 0, 0, 0.15);\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 336:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".patient-detail-page {\\n  overflow: auto;\\n  padding: 65px 0 50px;\\n  display: block;\\n  -webkit-overflow-scrolling: touch;\\n}\\n.patient-detail-page > .container {\\n  width: 100%;\\n}\\n.patient-detail-page .navigator {\\n  color: #FFF;\\n}\\n.patient-detail-page .navigator a {\\n  white-space: nowrap;\\n  padding: 8px 15px;\\n  margin: 5px 0;\\n  color: #FFF;\\n}\\n.patient-detail-page .navigator a:hover {\\n  background: rgba(0, 0, 0, 0.05);\\n}\\n.patient-detail-page .navigator .fa {\\n  margin: 0 5px;\\n}\\n.patient-detail-page .embed-responsive {\\n  padding-bottom: 100%;\\n}\\n.patient-detail-page .page-header {\\n  margin: 0;\\n  padding-bottom: 1.5ex;\\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\\n}\\n.patient-detail-page .patient {\\n  background: transparent;\\n  padding: 0;\\n  border: 0;\\n  box-shadow: none;\\n  position: relative;\\n}\\n.patient-detail-page .patient .text-left {\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.1);\\n}\\n.patient-detail-page .patient-row {\\n  background: rgba(0, 0, 0, 0.05);\\n  border-radius: 3px;\\n  margin-bottom: 5px;\\n  padding: 5px;\\n}\\n.patient-detail-page .patient-row:after {\\n  content: \\\"\\\";\\n  display: table;\\n  clear: both;\\n}\\n.patient-detail-page .patient-row ~ .row > div {\\n  padding: 3px 5px;\\n}\\n.patient-detail-page .patient-row h3 {\\n  margin: 0;\\n  line-height: 1.45em;\\n}\\n.patient-detail-page .patient-row .label {\\n  margin: 8px 0 0 12px;\\n  font-size: 13px;\\n}\\n.patient-detail-page .patient-row .btn {\\n  min-width: 7em;\\n  margin: 2px;\\n}\\n.patient-detail-page .patient-image-wrap {\\n  margin-right: 1ex;\\n}\\n.patient-detail-page .patient-name {\\n  font-size: 24px;\\n}\\n.patient-detail-page td,\\n.patient-detail-page th {\\n  font-size: 13px;\\n  line-height: 16px;\\n}\\n.patient-detail-page td .text-muted,\\n.patient-detail-page th .text-muted {\\n  font-weight: 400;\\n}\\n.patient-detail-page td b,\\n.patient-detail-page th b {\\n  font-weight: 500;\\n}\\n.patient-detail-page td label,\\n.patient-detail-page th label {\\n  margin-bottom: 0;\\n}\\n.patient-detail-page td td,\\n.patient-detail-page th td {\\n  vertical-align: top;\\n  font-size: 12px;\\n  line-height: 16px;\\n}\\n.patient-detail-page td .label-cell,\\n.patient-detail-page th .label-cell {\\n  color: #888;\\n  white-space: nowrap;\\n  text-align: right;\\n  font-weight: 400;\\n  padding-right: 1ex;\\n}\\n.patient-detail-page td .label-cell:after,\\n.patient-detail-page th .label-cell:after {\\n  content: \\\": \\\";\\n}\\n.patient-detail-page td {\\n  font-weight: 500;\\n}\\n.patient-detail-page th {\\n  font-weight: 700;\\n}\\n.patient-detail-page thead th .glyphicon,\\n.patient-detail-page thead th .fa {\\n  text-shadow: 0 1px 2px #FFF, 0 0 0px #214b6f;\\n  color: rgba(51, 122, 183, 0.3);\\n}\\n.patient-detail-page .patient-details {\\n  white-space: normal;\\n  word-wrap: break-word;\\n}\\n.patient-detail-page .patient-details .badge {\\n  opacity: 0.75;\\n  margin: 0 0 0 2px;\\n}\\n.patient-detail-page .patient-details table a {\\n  white-space: normal;\\n  word-break: break-all;\\n  word-wrap: break-word;\\n}\\n.patient-detail-page .patient-details .panel-heading {\\n  text-shadow: 0 1px 0 #FFF;\\n}\\n.patient-detail-page .list-group-item {\\n  padding-top: 7px;\\n  padding-bottom: 7px;\\n}\\n.patient-detail-page .group-header {\\n  cursor: pointer;\\n  background: linear-gradient(90deg, #ebf2f8, #f5f8fb);\\n  text-indent: 0;\\n}\\n.patient-detail-page .group-header .glyphicon-triangle-bottom {\\n  position: relative;\\n  top: 2px;\\n}\\n.patient-detail-page .group-header ~ tr > td:first-child {\\n  text-indent: 17px;\\n}\\n.patient-detail-page .group-clear + tr > td:first-child {\\n  text-indent: 0;\\n}\\n.patient-detail-page .group-clear + tr > td:first-child:before {\\n  content: \\\"\\\\E250\\\";\\n  position: relative;\\n  top: 1px;\\n  display: inline-block;\\n  font-family: 'Glyphicons Halflings';\\n  font-style: normal;\\n  font-weight: 400;\\n  line-height: 1;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n  margin-right: 3px;\\n  opacity: 0.3;\\n}\\n.patient-detail-page .table-responsive {\\n  border: none !important;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 337:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".patient-image-wrap {\\n  height: 80px;\\n  width: 80px;\\n  background: #F6F6F6;\\n  border-radius: 3px;\\n  text-align: center;\\n  position: relative;\\n  box-shadow: 0 0 0.5px 0 rgba(0, 0, 0, 0.5) inset, 0 0 1px 1px #FFF;\\n  background-size: cover;\\n  background-position: center;\\n  flex-shrink: 0;\\n  flex-grow: 0;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 338:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".patient-search-results {\\n  display: flex;\\n  flex-grow: 1;\\n  flex-direction: column;\\n  background: #FFF;\\n  overflow: auto;\\n  -webkit-overflow-scrolling: touch;\\n}\\n.patient-search-results .male {\\n  color: #369;\\n}\\n.patient-search-results .female {\\n  color: #936;\\n}\\n.patient-search-results .patient {\\n  position: relative;\\n  padding: 1ex;\\n  cursor: pointer;\\n  flex-flow: 0;\\n  flex-shrink: 0;\\n  align-items: center;\\n  display: flex;\\n  transition: background 0.1s;\\n  color: #444;\\n  text-decoration: none;\\n  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.85) inset, 0 -1px 0 rgba(0, 0, 0, 0.15) inset;\\n}\\n.patient-search-results .patient:hover {\\n  background: rgba(0, 0, 0, 0.05);\\n}\\n.patient-search-results .patient .patient-select-zone {\\n  display: inline-block;\\n  vertical-align: middle;\\n  height: 54px;\\n  line-height: 54px;\\n  width: 30px;\\n  border-radius: 3px;\\n  text-align: center;\\n  color: #369;\\n  min-width: 30px;\\n}\\n.patient-search-results .patient .patient-select-zone:hover {\\n  background: rgba(51, 102, 153, 0.1);\\n}\\n.patient-search-results .patient .fa-angle-right {\\n  opacity: 0.5;\\n  font-size: 20px;\\n  display: flex;\\n  flex-basis: 1em;\\n}\\n.patient-search-results .patient .patient-image-wrap {\\n  height: 54px;\\n  width: 54px;\\n  margin: 0 1ex;\\n}\\n.patient-search-results .patient .patient-info {\\n  flex-grow: 1;\\n}\\n.patient-search-results .patient .patient-info > b {\\n  font-size: 16px;\\n  line-height: 1;\\n  display: block;\\n  margin-bottom: 2px;\\n}\\n.patient-search-results .patient .patient-info small {\\n  opacity: 0.7;\\n  display: block;\\n}\\n.patient-search-results .patient .patient-info footer {\\n  opacity: 0.7;\\n  display: flex;\\n  flex-direction: row;\\n  margin-top: 5px;\\n}\\n.patient-search-results .patient .patient-info footer > span {\\n  display: flex;\\n  flex-basis: 14em;\\n  flex-grow: 1;\\n}\\n.patient-search-results .patient .patient-info footer > span + span {\\n  margin-left: 2em;\\n}\\n.patient-search-results .patient.selected {\\n  background: #369;\\n  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.05) inset, 0 -1px 0 rgba(0, 0, 0, 0.15) inset;\\n  text-shadow: 0 0 1px #000;\\n}\\n.patient-search-results .patient.selected,\\n.patient-search-results .patient.selected * {\\n  color: #FFF;\\n}\\n.patient-search-results .patient.selected .patient-image-wrap {\\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.3), 0 0 0 0.5px rgba(255, 255, 255, 0.5) inset;\\n}\\n.patient-search-results .patient.selected .patient-select-zone:hover {\\n  background: rgba(255, 255, 255, 0.07);\\n}\\n.patient-search-results .patient.selected:hover {\\n  background: #2f5e8e;\\n}\\n@media (max-width: 480px) {\\n  .patient-search-results .patient .patient-info footer span + span {\\n    display: none;\\n  }\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 339:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".sort-widget {\\n  padding: 0 5px;\\n  float: left;\\n  width: 100%;\\n}\\n.sort-widget > span {\\n  padding: 6px 1ex 0 0;\\n  font-weight: bold;\\n}\\n.sort-widget .nav.nav-pills li {\\n  margin: 3px 3px 3px 0;\\n}\\n.sort-widget .nav.nav-pills li a {\\n  padding: 4px 8px;\\n}\\n.sort-widget .nav.nav-pills li a .sort {\\n  opacity: 0.6;\\n}\\n.sort-widget .nav.nav-pills li.active a,\\n.sort-widget .nav.nav-pills li:hover a,\\n.sort-widget .nav.nav-pills li:active a,\\n.sort-widget .nav.nav-pills li a:focus {\\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.2) inset;\\n}\\n.sort-widget .nav.nav-pills li.active a {\\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.3);\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 340:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".tag-selector {\\n  position: relative;\\n  display: block;\\n  width: 100%;\\n  color: #000;\\n  min-width: 200px;\\n  font-size: small;\\n}\\n.tag-selector .tags {\\n  margin-bottom: 4px;\\n}\\n.tag-selector input {\\n  padding-right: 24px;\\n}\\n.tag-selector .tag {\\n  margin: 1px 6px 1px 0px;\\n  padding: 3px 26px 3px 6px;\\n  background: #DC9;\\n  box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.5) inset;\\n  border-radius: 3px;\\n  color: #520;\\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.3);\\n  display: inline-block;\\n  position: relative;\\n  font-weight: 500;\\n  line-height: 1.2;\\n  font-size: 12px;\\n  cursor: default;\\n}\\n.tag-selector .tag:last-of-type {\\n  margin-right: 0;\\n}\\n.tag-selector .tag .tag-remove {\\n  position: absolute;\\n  top: 4px;\\n  right: 5px;\\n  color: rgba(0, 0, 0, 0.4);\\n  text-shadow: none;\\n  opacity: 0.6;\\n}\\n.tag-selector .tag:hover {\\n  background-color: #d7c286;\\n}\\n.tag-selector .tag:hover .tag-remove {\\n  opacity: 0.5;\\n}\\n.tag-selector .tag:hover .tag-remove:hover {\\n  opacity: 1;\\n  color: #900;\\n}\\n.tag-selector .tag.custom {\\n  background: #adc2d6;\\n  color: #19334d;\\n}\\n.tag-selector .tag.custom:hover {\\n  background-color: #9cb5ce;\\n}\\n.tag-selector .menu {\\n  padding: 4px;\\n  top: 100%;\\n  width: 100%;\\n  text-align: left;\\n  max-height: 50vh;\\n  overflow: auto;\\n  z-index: 10000000000;\\n}\\n.tag-selector .menu-item {\\n  padding: 5px 10px;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  cursor: default;\\n}\\n.tag-selector .menu-item small {\\n  line-height: 1.4;\\n  font-weight: 400;\\n}\\n.tag-selector .menu-item .code {\\n  width: 110px;\\n  display: inline-block;\\n  text-align: right;\\n  padding-right: 1ex;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  float: left;\\n  margin: 1px 0 -1px;\\n}\\n.tag-selector .menu-item:hover {\\n  background: rgba(0, 0, 0, 0.1);\\n}\\n.tag-selector .menu-item.selected {\\n  color: #FFF;\\n  background: #369;\\n  text-shadow: 0 0 1px #000000;\\n}\\n.tag-selector .menu-item.selected small {\\n  color: rgba(255, 255, 255, 0.6);\\n  text-shadow: none;\\n}\\n.tag-selector .menu-item.selected .tag.custom {\\n  box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.5);\\n}\\n.tag-selector .menu-item.custom {\\n  font-weight: bold;\\n  cursor: pointer;\\n  padding: 3px 10px;\\n}\\n.tag-selector .menu-item.custom + .menu-item {\\n  position: relative;\\n  overflow: visible;\\n  margin-top: 9px;\\n}\\n.tag-selector .menu-item.custom + .menu-item:before {\\n  content: \\\"\\\";\\n  display: block;\\n  height: 1px;\\n  background: #CCC;\\n  position: absolute;\\n  top: -5px;\\n  left: 0;\\n  right: 0;\\n}\\n.tag-selector .menu-item.custom .tag {\\n  margin: 0 1px;\\n  padding: 3px 6px;\\n  line-height: 1;\\n}\\n.tag-selector.open {\\n  outline: none;\\n}\\n.tag-selector .fa.fa-caret-down {\\n  position: absolute;\\n  right: 10px;\\n  bottom: 10px;\\n  pointer-events: none;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 341:\n/***/ (function(module, exports) {\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n/***/ }),\n\n/***/ 354:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*!\n * for-in <https://github.com/jonschlinkert/for-in>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n\n\nmodule.exports = function forIn(obj, fn, thisArg) {\n  for (var key in obj) {\n    if (fn.call(thisArg, obj[key], key, obj) === false) {\n      break;\n    }\n  }\n};\n\n\n/***/ }),\n\n/***/ 360:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n\n\nvar isObject = __webpack_require__(361);\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n\n\n/***/ }),\n\n/***/ 361:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n\n\n/***/ }),\n\n/***/ 362:\n/***/ (function(module, exports, __webpack_require__) {\n\n// json5.js\n// Modern JSON. See README.md for details.\n//\n// This file is based directly off of Douglas Crockford's json_parse.js:\n// https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\n\nvar JSON5 = ( true ? exports : {});\n\nJSON5.parse = (function () {\n    \"use strict\";\n\n// This is a function that can parse a JSON5 text, producing a JavaScript\n// data structure. It is a simple, recursive descent parser. It does not use\n// eval or regular expressions, so it can be used as a model for implementing\n// a JSON5 parser in other languages.\n\n// We are defining the function inside of another function to avoid creating\n// global variables.\n\n    var at,           // The index of the current character\n        lineNumber,   // The current line number\n        columnNumber, // The current column number\n        ch,           // The current character\n        escapee = {\n            \"'\":  \"'\",\n            '\"':  '\"',\n            '\\\\': '\\\\',\n            '/':  '/',\n            '\\n': '',       // Replace escaped newlines in strings w/ empty string\n            b:    '\\b',\n            f:    '\\f',\n            n:    '\\n',\n            r:    '\\r',\n            t:    '\\t'\n        },\n        ws = [\n            ' ',\n            '\\t',\n            '\\r',\n            '\\n',\n            '\\v',\n            '\\f',\n            '\\xA0',\n            '\\uFEFF'\n        ],\n        text,\n\n        renderChar = function (chr) {\n            return chr === '' ? 'EOF' : \"'\" + chr + \"'\";\n        },\n\n        error = function (m) {\n\n// Call error when something is wrong.\n\n            var error = new SyntaxError();\n            // beginning of message suffix to agree with that provided by Gecko - see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse\n            error.message = m + \" at line \" + lineNumber + \" column \" + columnNumber + \" of the JSON5 data. Still to read: \" + JSON.stringify(text.substring(at - 1, at + 19));\n            error.at = at;\n            // These two property names have been chosen to agree with the ones in Gecko, the only popular\n            // environment which seems to supply this info on JSON.parse\n            error.lineNumber = lineNumber;\n            error.columnNumber = columnNumber;\n            throw error;\n        },\n\n        next = function (c) {\n\n// If a c parameter is provided, verify that it matches the current character.\n\n            if (c && c !== ch) {\n                error(\"Expected \" + renderChar(c) + \" instead of \" + renderChar(ch));\n            }\n\n// Get the next character. When there are no more characters,\n// return the empty string.\n\n            ch = text.charAt(at);\n            at++;\n            columnNumber++;\n            if (ch === '\\n' || ch === '\\r' && peek() !== '\\n') {\n                lineNumber++;\n                columnNumber = 0;\n            }\n            return ch;\n        },\n\n        peek = function () {\n\n// Get the next character without consuming it or\n// assigning it to the ch varaible.\n\n            return text.charAt(at);\n        },\n\n        identifier = function () {\n\n// Parse an identifier. Normally, reserved words are disallowed here, but we\n// only use this for unquoted object keys, where reserved words are allowed,\n// so we don't check for those here. References:\n// - http://es5.github.com/#x7.6\n// - https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Variables\n// - http://docstore.mik.ua/orelly/webprog/jscript/ch02_07.htm\n// TODO Identifiers can have Unicode \"letters\" in them; add support for those.\n\n            var key = ch;\n\n            // Identifiers must start with a letter, _ or $.\n            if ((ch !== '_' && ch !== '$') &&\n                    (ch < 'a' || ch > 'z') &&\n                    (ch < 'A' || ch > 'Z')) {\n                error(\"Bad identifier as unquoted key\");\n            }\n\n            // Subsequent characters can contain digits.\n            while (next() && (\n                    ch === '_' || ch === '$' ||\n                    (ch >= 'a' && ch <= 'z') ||\n                    (ch >= 'A' && ch <= 'Z') ||\n                    (ch >= '0' && ch <= '9'))) {\n                key += ch;\n            }\n\n            return key;\n        },\n\n        number = function () {\n\n// Parse a number value.\n\n            var number,\n                sign = '',\n                string = '',\n                base = 10;\n\n            if (ch === '-' || ch === '+') {\n                sign = ch;\n                next(ch);\n            }\n\n            // support for Infinity (could tweak to allow other words):\n            if (ch === 'I') {\n                number = word();\n                if (typeof number !== 'number' || isNaN(number)) {\n                    error('Unexpected word for number');\n                }\n                return (sign === '-') ? -number : number;\n            }\n\n            // support for NaN\n            if (ch === 'N' ) {\n              number = word();\n              if (!isNaN(number)) {\n                error('expected word to be NaN');\n              }\n              // ignore sign as -NaN also is NaN\n              return number;\n            }\n\n            if (ch === '0') {\n                string += ch;\n                next();\n                if (ch === 'x' || ch === 'X') {\n                    string += ch;\n                    next();\n                    base = 16;\n                } else if (ch >= '0' && ch <= '9') {\n                    error('Octal literal');\n                }\n            }\n\n            switch (base) {\n            case 10:\n                while (ch >= '0' && ch <= '9' ) {\n                    string += ch;\n                    next();\n                }\n                if (ch === '.') {\n                    string += '.';\n                    while (next() && ch >= '0' && ch <= '9') {\n                        string += ch;\n                    }\n                }\n                if (ch === 'e' || ch === 'E') {\n                    string += ch;\n                    next();\n                    if (ch === '-' || ch === '+') {\n                        string += ch;\n                        next();\n                    }\n                    while (ch >= '0' && ch <= '9') {\n                        string += ch;\n                        next();\n                    }\n                }\n                break;\n            case 16:\n                while (ch >= '0' && ch <= '9' || ch >= 'A' && ch <= 'F' || ch >= 'a' && ch <= 'f') {\n                    string += ch;\n                    next();\n                }\n                break;\n            }\n\n            if(sign === '-') {\n                number = -string;\n            } else {\n                number = +string;\n            }\n\n            if (!isFinite(number)) {\n                error(\"Bad number\");\n            } else {\n                return number;\n            }\n        },\n\n        string = function () {\n\n// Parse a string value.\n\n            var hex,\n                i,\n                string = '',\n                delim,      // double quote or single quote\n                uffff;\n\n// When parsing for string values, we must look for ' or \" and \\ characters.\n\n            if (ch === '\"' || ch === \"'\") {\n                delim = ch;\n                while (next()) {\n                    if (ch === delim) {\n                        next();\n                        return string;\n                    } else if (ch === '\\\\') {\n                        next();\n                        if (ch === 'u') {\n                            uffff = 0;\n                            for (i = 0; i < 4; i += 1) {\n                                hex = parseInt(next(), 16);\n                                if (!isFinite(hex)) {\n                                    break;\n                                }\n                                uffff = uffff * 16 + hex;\n                            }\n                            string += String.fromCharCode(uffff);\n                        } else if (ch === '\\r') {\n                            if (peek() === '\\n') {\n                                next();\n                            }\n                        } else if (typeof escapee[ch] === 'string') {\n                            string += escapee[ch];\n                        } else {\n                            break;\n                        }\n                    } else if (ch === '\\n') {\n                        // unescaped newlines are invalid; see:\n                        // https://github.com/aseemk/json5/issues/24\n                        // TODO this feels special-cased; are there other\n                        // invalid unescaped chars?\n                        break;\n                    } else {\n                        string += ch;\n                    }\n                }\n            }\n            error(\"Bad string\");\n        },\n\n        inlineComment = function () {\n\n// Skip an inline comment, assuming this is one. The current character should\n// be the second / character in the // pair that begins this inline comment.\n// To finish the inline comment, we look for a newline or the end of the text.\n\n            if (ch !== '/') {\n                error(\"Not an inline comment\");\n            }\n\n            do {\n                next();\n                if (ch === '\\n' || ch === '\\r') {\n                    next();\n                    return;\n                }\n            } while (ch);\n        },\n\n        blockComment = function () {\n\n// Skip a block comment, assuming this is one. The current character should be\n// the * character in the /* pair that begins this block comment.\n// To finish the block comment, we look for an ending */ pair of characters,\n// but we also watch for the end of text before the comment is terminated.\n\n            if (ch !== '*') {\n                error(\"Not a block comment\");\n            }\n\n            do {\n                next();\n                while (ch === '*') {\n                    next('*');\n                    if (ch === '/') {\n                        next('/');\n                        return;\n                    }\n                }\n            } while (ch);\n\n            error(\"Unterminated block comment\");\n        },\n\n        comment = function () {\n\n// Skip a comment, whether inline or block-level, assuming this is one.\n// Comments always begin with a / character.\n\n            if (ch !== '/') {\n                error(\"Not a comment\");\n            }\n\n            next('/');\n\n            if (ch === '/') {\n                inlineComment();\n            } else if (ch === '*') {\n                blockComment();\n            } else {\n                error(\"Unrecognized comment\");\n            }\n        },\n\n        white = function () {\n\n// Skip whitespace and comments.\n// Note that we're detecting comments by only a single / character.\n// This works since regular expressions are not valid JSON(5), but this will\n// break if there are other valid values that begin with a / character!\n\n            while (ch) {\n                if (ch === '/') {\n                    comment();\n                } else if (ws.indexOf(ch) >= 0) {\n                    next();\n                } else {\n                    return;\n                }\n            }\n        },\n\n        word = function () {\n\n// true, false, or null.\n\n            switch (ch) {\n            case 't':\n                next('t');\n                next('r');\n                next('u');\n                next('e');\n                return true;\n            case 'f':\n                next('f');\n                next('a');\n                next('l');\n                next('s');\n                next('e');\n                return false;\n            case 'n':\n                next('n');\n                next('u');\n                next('l');\n                next('l');\n                return null;\n            case 'I':\n                next('I');\n                next('n');\n                next('f');\n                next('i');\n                next('n');\n                next('i');\n                next('t');\n                next('y');\n                return Infinity;\n            case 'N':\n              next( 'N' );\n              next( 'a' );\n              next( 'N' );\n              return NaN;\n            }\n            error(\"Unexpected \" + renderChar(ch));\n        },\n\n        value,  // Place holder for the value function.\n\n        array = function () {\n\n// Parse an array value.\n\n            var array = [];\n\n            if (ch === '[') {\n                next('[');\n                white();\n                while (ch) {\n                    if (ch === ']') {\n                        next(']');\n                        return array;   // Potentially empty array\n                    }\n                    // ES5 allows omitting elements in arrays, e.g. [,] and\n                    // [,null]. We don't allow this in JSON5.\n                    if (ch === ',') {\n                        error(\"Missing array element\");\n                    } else {\n                        array.push(value());\n                    }\n                    white();\n                    // If there's no comma after this value, this needs to\n                    // be the end of the array.\n                    if (ch !== ',') {\n                        next(']');\n                        return array;\n                    }\n                    next(',');\n                    white();\n                }\n            }\n            error(\"Bad array\");\n        },\n\n        object = function () {\n\n// Parse an object value.\n\n            var key,\n                object = {};\n\n            if (ch === '{') {\n                next('{');\n                white();\n                while (ch) {\n                    if (ch === '}') {\n                        next('}');\n                        return object;   // Potentially empty object\n                    }\n\n                    // Keys can be unquoted. If they are, they need to be\n                    // valid JS identifiers.\n                    if (ch === '\"' || ch === \"'\") {\n                        key = string();\n                    } else {\n                        key = identifier();\n                    }\n\n                    white();\n                    next(':');\n                    object[key] = value();\n                    white();\n                    // If there's no comma after this pair, this needs to be\n                    // the end of the object.\n                    if (ch !== ',') {\n                        next('}');\n                        return object;\n                    }\n                    next(',');\n                    white();\n                }\n            }\n            error(\"Bad object\");\n        };\n\n    value = function () {\n\n// Parse a JSON value. It could be an object, an array, a string, a number,\n// or a word.\n\n        white();\n        switch (ch) {\n        case '{':\n            return object();\n        case '[':\n            return array();\n        case '\"':\n        case \"'\":\n            return string();\n        case '-':\n        case '+':\n        case '.':\n            return number();\n        default:\n            return ch >= '0' && ch <= '9' ? number() : word();\n        }\n    };\n\n// Return the json_parse function. It will have access to all of the above\n// functions and variables.\n\n    return function (source, reviver) {\n        var result;\n\n        text = String(source);\n        at = 0;\n        lineNumber = 1;\n        columnNumber = 1;\n        ch = ' ';\n        result = value();\n        white();\n        if (ch) {\n            error(\"Syntax error\");\n        }\n\n// If there is a reviver function, we recursively walk the new structure,\n// passing each name/value pair to the reviver function for possible\n// transformation, starting with a temporary root object that holds the result\n// in an empty key. If there is not a reviver function, we simply return the\n// result.\n\n        return typeof reviver === 'function' ? (function walk(holder, key) {\n            var k, v, value = holder[key];\n            if (value && typeof value === 'object') {\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = walk(value, k);\n                        if (v !== undefined) {\n                            value[k] = v;\n                        } else {\n                            delete value[k];\n                        }\n                    }\n                }\n            }\n            return reviver.call(holder, key, value);\n        }({'': result}, '')) : result;\n    };\n}());\n\n// JSON5 stringify will not quote keys where appropriate\nJSON5.stringify = function (obj, replacer, space) {\n    if (replacer && (typeof(replacer) !== \"function\" && !isArray(replacer))) {\n        throw new Error('Replacer must be a function or an array');\n    }\n    var getReplacedValueOrUndefined = function(holder, key, isTopLevel) {\n        var value = holder[key];\n\n        // Replace the value with its toJSON value first, if possible\n        if (value && value.toJSON && typeof value.toJSON === \"function\") {\n            value = value.toJSON();\n        }\n\n        // If the user-supplied replacer if a function, call it. If it's an array, check objects' string keys for\n        // presence in the array (removing the key/value pair from the resulting JSON if the key is missing).\n        if (typeof(replacer) === \"function\") {\n            return replacer.call(holder, key, value);\n        } else if(replacer) {\n            if (isTopLevel || isArray(holder) || replacer.indexOf(key) >= 0) {\n                return value;\n            } else {\n                return undefined;\n            }\n        } else {\n            return value;\n        }\n    };\n\n    function isWordChar(c) {\n        return (c >= 'a' && c <= 'z') ||\n            (c >= 'A' && c <= 'Z') ||\n            (c >= '0' && c <= '9') ||\n            c === '_' || c === '$';\n    }\n\n    function isWordStart(c) {\n        return (c >= 'a' && c <= 'z') ||\n            (c >= 'A' && c <= 'Z') ||\n            c === '_' || c === '$';\n    }\n\n    function isWord(key) {\n        if (typeof key !== 'string') {\n            return false;\n        }\n        if (!isWordStart(key[0])) {\n            return false;\n        }\n        var i = 1, length = key.length;\n        while (i < length) {\n            if (!isWordChar(key[i])) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    }\n\n    // export for use in tests\n    JSON5.isWord = isWord;\n\n    // polyfills\n    function isArray(obj) {\n        if (Array.isArray) {\n            return Array.isArray(obj);\n        } else {\n            return Object.prototype.toString.call(obj) === '[object Array]';\n        }\n    }\n\n    function isDate(obj) {\n        return Object.prototype.toString.call(obj) === '[object Date]';\n    }\n\n    var objStack = [];\n    function checkForCircular(obj) {\n        for (var i = 0; i < objStack.length; i++) {\n            if (objStack[i] === obj) {\n                throw new TypeError(\"Converting circular structure to JSON\");\n            }\n        }\n    }\n\n    function makeIndent(str, num, noNewLine) {\n        if (!str) {\n            return \"\";\n        }\n        // indentation no more than 10 chars\n        if (str.length > 10) {\n            str = str.substring(0, 10);\n        }\n\n        var indent = noNewLine ? \"\" : \"\\n\";\n        for (var i = 0; i < num; i++) {\n            indent += str;\n        }\n\n        return indent;\n    }\n\n    var indentStr;\n    if (space) {\n        if (typeof space === \"string\") {\n            indentStr = space;\n        } else if (typeof space === \"number\" && space >= 0) {\n            indentStr = makeIndent(\" \", space, true);\n        } else {\n            // ignore space parameter\n        }\n    }\n\n    // Copied from Crokford's implementation of JSON\n    // See https://github.com/douglascrockford/JSON-js/blob/e39db4b7e6249f04a195e7dd0840e610cc9e941e/json2.js#L195\n    // Begin\n    var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        meta = { // table of character substitutions\n        '\\b': '\\\\b',\n        '\\t': '\\\\t',\n        '\\n': '\\\\n',\n        '\\f': '\\\\f',\n        '\\r': '\\\\r',\n        '\"' : '\\\\\"',\n        '\\\\': '\\\\\\\\'\n    };\n    function escapeString(string) {\n\n// If the string contains no control characters, no quote characters, and no\n// backslash characters, then we can safely slap some quotes around it.\n// Otherwise we must also replace the offending characters with safe escape\n// sequences.\n        escapable.lastIndex = 0;\n        return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n            var c = meta[a];\n            return typeof c === 'string' ?\n                c :\n                '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n        }) + '\"' : '\"' + string + '\"';\n    }\n    // End\n\n    function internalStringify(holder, key, isTopLevel) {\n        var buffer, res;\n\n        // Replace the value, if necessary\n        var obj_part = getReplacedValueOrUndefined(holder, key, isTopLevel);\n\n        if (obj_part && !isDate(obj_part)) {\n            // unbox objects\n            // don't unbox dates, since will turn it into number\n            obj_part = obj_part.valueOf();\n        }\n        switch(typeof obj_part) {\n            case \"boolean\":\n                return obj_part.toString();\n\n            case \"number\":\n                if (isNaN(obj_part) || !isFinite(obj_part)) {\n                    return \"null\";\n                }\n                return obj_part.toString();\n\n            case \"string\":\n                return escapeString(obj_part.toString());\n\n            case \"object\":\n                if (obj_part === null) {\n                    return \"null\";\n                } else if (isArray(obj_part)) {\n                    checkForCircular(obj_part);\n                    buffer = \"[\";\n                    objStack.push(obj_part);\n\n                    for (var i = 0; i < obj_part.length; i++) {\n                        res = internalStringify(obj_part, i, false);\n                        buffer += makeIndent(indentStr, objStack.length);\n                        if (res === null || typeof res === \"undefined\") {\n                            buffer += \"null\";\n                        } else {\n                            buffer += res;\n                        }\n                        if (i < obj_part.length-1) {\n                            buffer += \",\";\n                        } else if (indentStr) {\n                            buffer += \"\\n\";\n                        }\n                    }\n                    objStack.pop();\n                    if (obj_part.length) {\n                        buffer += makeIndent(indentStr, objStack.length, true)\n                    }\n                    buffer += \"]\";\n                } else {\n                    checkForCircular(obj_part);\n                    buffer = \"{\";\n                    var nonEmpty = false;\n                    objStack.push(obj_part);\n                    for (var prop in obj_part) {\n                        if (obj_part.hasOwnProperty(prop)) {\n                            var value = internalStringify(obj_part, prop, false);\n                            isTopLevel = false;\n                            if (typeof value !== \"undefined\" && value !== null) {\n                                buffer += makeIndent(indentStr, objStack.length);\n                                nonEmpty = true;\n                                key = isWord(prop) ? prop : escapeString(prop);\n                                buffer += key + \":\" + (indentStr ? ' ' : '') + value + \",\";\n                            }\n                        }\n                    }\n                    objStack.pop();\n                    if (nonEmpty) {\n                        buffer = buffer.substring(0, buffer.length-1) + makeIndent(indentStr, objStack.length) + \"}\";\n                    } else {\n                        buffer = '{}';\n                    }\n                }\n                return buffer;\n            default:\n                // functions and undefined should be ignored\n                return undefined;\n        }\n    }\n\n    // special case...when undefined is used inside of\n    // a compound object/array, return null.\n    // but when top-level, return undefined\n    var topLevelHolder = {\"\":obj};\n    if (obj === undefined) {\n        return getReplacedValueOrUndefined(topLevelHolder, '', true);\n    }\n    return internalStringify(topLevelHolder, '', true);\n};\n\n\n/***/ }),\n\n/***/ 363:\n/***/ (function(module, exports, __webpack_require__) {\n\n//     keymaster.js\n//     (c) 2011-2013 Thomas Fuchs\n//     keymaster.js may be freely distributed under the MIT license.\n\n;(function(global){\n  var k,\n    _handlers = {},\n    _mods = { 16: false, 18: false, 17: false, 91: false },\n    _scope = 'all',\n    // modifier keys\n    _MODIFIERS = {\n      '⇧': 16, shift: 16,\n      '⌥': 18, alt: 18, option: 18,\n      '⌃': 17, ctrl: 17, control: 17,\n      '⌘': 91, command: 91\n    },\n    // special keys\n    _MAP = {\n      backspace: 8, tab: 9, clear: 12,\n      enter: 13, 'return': 13,\n      esc: 27, escape: 27, space: 32,\n      left: 37, up: 38,\n      right: 39, down: 40,\n      del: 46, 'delete': 46,\n      home: 36, end: 35,\n      pageup: 33, pagedown: 34,\n      ',': 188, '.': 190, '/': 191,\n      '`': 192, '-': 189, '=': 187,\n      ';': 186, '\\'': 222,\n      '[': 219, ']': 221, '\\\\': 220\n    },\n    code = function(x){\n      return _MAP[x] || x.toUpperCase().charCodeAt(0);\n    },\n    _downKeys = [];\n\n  for(k=1;k<20;k++) _MAP['f'+k] = 111+k;\n\n  // IE doesn't support Array#indexOf, so have a simple replacement\n  function index(array, item){\n    var i = array.length;\n    while(i--) if(array[i]===item) return i;\n    return -1;\n  }\n\n  // for comparing mods before unassignment\n  function compareArray(a1, a2) {\n    if (a1.length != a2.length) return false;\n    for (var i = 0; i < a1.length; i++) {\n        if (a1[i] !== a2[i]) return false;\n    }\n    return true;\n  }\n\n  var modifierMap = {\n      16:'shiftKey',\n      18:'altKey',\n      17:'ctrlKey',\n      91:'metaKey'\n  };\n  function updateModifierKey(event) {\n      for(k in _mods) _mods[k] = event[modifierMap[k]];\n  };\n\n  // handle keydown event\n  function dispatch(event) {\n    var key, handler, k, i, modifiersMatch, scope;\n    key = event.keyCode;\n\n    if (index(_downKeys, key) == -1) {\n        _downKeys.push(key);\n    }\n\n    // if a modifier key, set the key.<modifierkeyname> property to true and return\n    if(key == 93 || key == 224) key = 91; // right command on webkit, command on Gecko\n    if(key in _mods) {\n      _mods[key] = true;\n      // 'assignKey' from inside this closure is exported to window.key\n      for(k in _MODIFIERS) if(_MODIFIERS[k] == key) assignKey[k] = true;\n      return;\n    }\n    updateModifierKey(event);\n\n    // see if we need to ignore the keypress (filter() can can be overridden)\n    // by default ignore key presses if a select, textarea, or input is focused\n    if(!assignKey.filter.call(this, event)) return;\n\n    // abort if no potentially matching shortcuts found\n    if (!(key in _handlers)) return;\n\n    scope = getScope();\n\n    // for each potential shortcut\n    for (i = 0; i < _handlers[key].length; i++) {\n      handler = _handlers[key][i];\n\n      // see if it's in the current scope\n      if(handler.scope == scope || handler.scope == 'all'){\n        // check if modifiers match if any\n        modifiersMatch = handler.mods.length > 0;\n        for(k in _mods)\n          if((!_mods[k] && index(handler.mods, +k) > -1) ||\n            (_mods[k] && index(handler.mods, +k) == -1)) modifiersMatch = false;\n        // call the handler and stop the event if neccessary\n        if((handler.mods.length == 0 && !_mods[16] && !_mods[18] && !_mods[17] && !_mods[91]) || modifiersMatch){\n          if(handler.method(event, handler)===false){\n            if(event.preventDefault) event.preventDefault();\n              else event.returnValue = false;\n            if(event.stopPropagation) event.stopPropagation();\n            if(event.cancelBubble) event.cancelBubble = true;\n          }\n        }\n      }\n    }\n  };\n\n  // unset modifier keys on keyup\n  function clearModifier(event){\n    var key = event.keyCode, k,\n        i = index(_downKeys, key);\n\n    // remove key from _downKeys\n    if (i >= 0) {\n        _downKeys.splice(i, 1);\n    }\n\n    if(key == 93 || key == 224) key = 91;\n    if(key in _mods) {\n      _mods[key] = false;\n      for(k in _MODIFIERS) if(_MODIFIERS[k] == key) assignKey[k] = false;\n    }\n  };\n\n  function resetModifiers() {\n    for(k in _mods) _mods[k] = false;\n    for(k in _MODIFIERS) assignKey[k] = false;\n  };\n\n  // parse and assign shortcut\n  function assignKey(key, scope, method){\n    var keys, mods;\n    keys = getKeys(key);\n    if (method === undefined) {\n      method = scope;\n      scope = 'all';\n    }\n\n    // for each shortcut\n    for (var i = 0; i < keys.length; i++) {\n      // set modifier keys if any\n      mods = [];\n      key = keys[i].split('+');\n      if (key.length > 1){\n        mods = getMods(key);\n        key = [key[key.length-1]];\n      }\n      // convert to keycode and...\n      key = key[0]\n      key = code(key);\n      // ...store handler\n      if (!(key in _handlers)) _handlers[key] = [];\n      _handlers[key].push({ shortcut: keys[i], scope: scope, method: method, key: keys[i], mods: mods });\n    }\n  };\n\n  // unbind all handlers for given key in current scope\n  function unbindKey(key, scope) {\n    var multipleKeys, keys,\n      mods = [],\n      i, j, obj;\n\n    multipleKeys = getKeys(key);\n\n    for (j = 0; j < multipleKeys.length; j++) {\n      keys = multipleKeys[j].split('+');\n\n      if (keys.length > 1) {\n        mods = getMods(keys);\n        key = keys[keys.length - 1];\n      }\n\n      key = code(key);\n\n      if (scope === undefined) {\n        scope = getScope();\n      }\n      if (!_handlers[key]) {\n        return;\n      }\n      for (i = 0; i < _handlers[key].length; i++) {\n        obj = _handlers[key][i];\n        // only clear handlers if correct scope and mods match\n        if (obj.scope === scope && compareArray(obj.mods, mods)) {\n          _handlers[key][i] = {};\n        }\n      }\n    }\n  };\n\n  // Returns true if the key with code 'keyCode' is currently down\n  // Converts strings into key codes.\n  function isPressed(keyCode) {\n      if (typeof(keyCode)=='string') {\n        keyCode = code(keyCode);\n      }\n      return index(_downKeys, keyCode) != -1;\n  }\n\n  function getPressedKeyCodes() {\n      return _downKeys.slice(0);\n  }\n\n  function filter(event){\n    var tagName = (event.target || event.srcElement).tagName;\n    // ignore keypressed in any elements that support keyboard data input\n    return !(tagName == 'INPUT' || tagName == 'SELECT' || tagName == 'TEXTAREA');\n  }\n\n  // initialize key.<modifier> to false\n  for(k in _MODIFIERS) assignKey[k] = false;\n\n  // set current scope (default 'all')\n  function setScope(scope){ _scope = scope || 'all' };\n  function getScope(){ return _scope || 'all' };\n\n  // delete all handlers for a given scope\n  function deleteScope(scope){\n    var key, handlers, i;\n\n    for (key in _handlers) {\n      handlers = _handlers[key];\n      for (i = 0; i < handlers.length; ) {\n        if (handlers[i].scope === scope) handlers.splice(i, 1);\n        else i++;\n      }\n    }\n  };\n\n  // abstract key logic for assign and unassign\n  function getKeys(key) {\n    var keys;\n    key = key.replace(/\\s/g, '');\n    keys = key.split(',');\n    if ((keys[keys.length - 1]) == '') {\n      keys[keys.length - 2] += ',';\n    }\n    return keys;\n  }\n\n  // abstract mods logic for assign and unassign\n  function getMods(key) {\n    var mods = key.slice(0, key.length - 1);\n    for (var mi = 0; mi < mods.length; mi++)\n    mods[mi] = _MODIFIERS[mods[mi]];\n    return mods;\n  }\n\n  // cross-browser events\n  function addEvent(object, event, method) {\n    if (object.addEventListener)\n      object.addEventListener(event, method, false);\n    else if(object.attachEvent)\n      object.attachEvent('on'+event, function(){ method(window.event) });\n  };\n\n  // set the handlers globally on document\n  addEvent(document, 'keydown', function(event) { dispatch(event) }); // Passing _scope to a callback to ensure it remains the same by execution. Fixes #48\n  addEvent(document, 'keyup', clearModifier);\n\n  // reset modifiers to false whenever the window is (re)focused.\n  addEvent(window, 'focus', resetModifiers);\n\n  // store previously defined key\n  var previousKey = global.key;\n\n  // restore previously defined key and return reference to our key object\n  function noConflict() {\n    var k = global.key;\n    global.key = previousKey;\n    return k;\n  }\n\n  // set window.key and window.key.set/get/deleteScope, and the default filter\n  global.key = assignKey;\n  global.key.setScope = setScope;\n  global.key.getScope = getScope;\n  global.key.deleteScope = deleteScope;\n  global.key.filter = filter;\n  global.key.isPressed = isPressed;\n  global.key.getPressedKeyCodes = getPressedKeyCodes;\n  global.key.noConflict = noConflict;\n  global.key.unbind = unbindKey;\n\n  if(true) module.exports = assignKey;\n\n})(this);\n\n\n/***/ }),\n\n/***/ 372:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar isExtendable = __webpack_require__(373);\nvar forIn = __webpack_require__(354);\n\nfunction mixinDeep(target, objects) {\n  var len = arguments.length, i = 0;\n  while (++i < len) {\n    var obj = arguments[i];\n    if (isObject(obj)) {\n      forIn(obj, copy, target);\n    }\n  }\n  return target;\n}\n\n/**\n * Copy properties from the source object to the\n * target object.\n *\n * @param  {*} `val`\n * @param  {String} `key`\n */\n\nfunction copy(val, key) {\n  if (key === '__proto__') {\n    return;\n  }\n\n  var obj = this[key];\n  if (isObject(val) && isObject(obj)) {\n    mixinDeep(obj, val);\n  } else {\n    this[key] = val;\n  }\n}\n\n/**\n * Returns true if `val` is an object or function.\n *\n * @param  {any} val\n * @return {Boolean}\n */\n\nfunction isObject(val) {\n  return isExtendable(val) && !Array.isArray(val);\n}\n\n/**\n * Expose `mixinDeep`\n */\n\nmodule.exports = mixinDeep;\n\n\n/***/ }),\n\n/***/ 373:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*!\n * is-extendable <https://github.com/jonschlinkert/is-extendable>\n *\n * Copyright (c) 2015-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n\n\nvar isPlainObject = __webpack_require__(360);\n\nmodule.exports = function isExtendable(val) {\n  return isPlainObject(val) || typeof val === 'function' || Array.isArray(val);\n};\n\n\n/***/ }),\n\n/***/ 443:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(__webpack_require__(1));\n\nvar _propTypes = _interopRequireDefault(__webpack_require__(2));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } _setPrototypeOf(subClass.prototype, superClass && superClass.prototype); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) { return o.__proto__; }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar PopupAction =\n/*#__PURE__*/\nfunction (_React$Component) {\n  function PopupAction() {\n    _classCallCheck(this, PopupAction);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(PopupAction).apply(this, arguments));\n  }\n\n  _createClass(PopupAction, [{\n    key: \"handleClick\",\n    value: function handleClick() {\n      return this.props.onClick();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var className = this.props.className;\n\n      if (this.props.url && this.props.url !== '#') {\n        return _react.default.createElement(\"a\", {\n          href: this.props.url,\n          target: \"_blank\",\n          className: className\n        }, this.props.children);\n      }\n\n      return _react.default.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this.handleClick();\n        },\n        className: className\n      }, this.props.children);\n    }\n  }]);\n\n  _inherits(PopupAction, _React$Component);\n\n  return PopupAction;\n}(_react.default.Component);\n\n_defineProperty(PopupAction, \"defaultProps\", {\n  onClick: function onClick() {},\n  className: 'btn',\n  url: null\n});\n\nPopupAction.propTypes = {\n  onClick: _propTypes.default.func,\n  className: _propTypes.default.string,\n  children: _propTypes.default.node.isRequired,\n  url: _propTypes.default.string\n};\nvar _default = PopupAction;\nexports.default = _default;\n\n/***/ }),\n\n/***/ 444:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(__webpack_require__(1));\n\nvar _propTypes = _interopRequireDefault(__webpack_require__(2));\n\nvar _ActionButton = _interopRequireDefault(__webpack_require__(443));\n\nvar _Bem = __webpack_require__(260);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } _setPrototypeOf(subClass.prototype, superClass && superClass.prototype); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) { return o.__proto__; }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar PopupFooterButtons =\n/*#__PURE__*/\nfunction (_React$Component) {\n  function PopupFooterButtons() {\n    _classCallCheck(this, PopupFooterButtons);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(PopupFooterButtons).apply(this, arguments));\n  }\n\n  _createClass(PopupFooterButtons, [{\n    key: \"onOk\",\n    value: function onOk() {\n      return this.props.onOk();\n    }\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      return this.props.onClose();\n    }\n  }, {\n    key: \"buttonClick\",\n    value: function buttonClick(action) {\n      return this.props.buttonClick(action);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      if (!this.props.buttons) {\n        return null;\n      }\n\n      var btns = [];\n      this.props.buttons.forEach(function (btn, i) {\n        var url = btn.url ? btn.url : null;\n        var key = i;\n\n        if (typeof btn === 'string') {\n          if (btn === 'ok') {\n            btns.push(_react.default.createElement(_ActionButton.default, {\n              className: \"\".concat(_this.props.btnClass, \" \").concat(_this.props.btnClass, \"--ok\"),\n              key: key,\n              onClick: function onClick() {\n                return _this.onOk();\n              }\n            }, _this.props.defaultOk));\n          } else if (btn === 'cancel') {\n            btns.push(_react.default.createElement(_ActionButton.default, {\n              className: \"\".concat(_this.props.btnClass, \" \").concat(_this.props.btnClass, \"--cancel\"),\n              key: key,\n              onClick: function onClick() {\n                return _this.onClose();\n              }\n            }, _this.props.defaultCancel));\n          }\n        } else if (_react.default.isValidElement(btn)) {\n          btns.push(btn);\n        } else {\n          var className = \"\".concat(_this.props.btnClass, \" \").concat((0, _Bem.modifier)(btn.className, _this.props.btnClass));\n\n          var btnComponent = _react.default.createElement(_ActionButton.default, {\n            className: className,\n            key: key,\n            url: url,\n            onClick: function onClick() {\n              return _this.buttonClick(btn.action);\n            }\n          }, btn.text);\n\n          btns.push(btnComponent);\n        }\n      });\n      return _react.default.createElement(\"div\", {\n        className: this.props.className\n      }, btns);\n    }\n  }]);\n\n  _inherits(PopupFooterButtons, _React$Component);\n\n  return PopupFooterButtons;\n}(_react.default.Component);\n\nexports.default = PopupFooterButtons;\n\n_defineProperty(PopupFooterButtons, \"defaultProps\", {\n  buttons: null,\n  className: null,\n  onOk: function onOk() {},\n  onClose: function onClose() {},\n  buttonClick: function buttonClick() {},\n  btnClass: null,\n  defaultOk: null,\n  defaultCancel: null\n});\n\nPopupFooterButtons.propTypes = {\n  buttons: _propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object])),\n  className: _propTypes.default.string,\n  onOk: _propTypes.default.func,\n  onClose: _propTypes.default.func,\n  buttonClick: _propTypes.default.func,\n  btnClass: _propTypes.default.string,\n  defaultOk: _propTypes.default.string,\n  defaultCancel: _propTypes.default.string\n};\n\n/***/ }),\n\n/***/ 445:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(__webpack_require__(1));\n\nvar _propTypes = _interopRequireDefault(__webpack_require__(2));\n\nvar _ButtonsSpace = _interopRequireDefault(__webpack_require__(444));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PopupFooter = function PopupFooter(props) {\n  if (!props.buttons) {\n    return null;\n  }\n\n  return _react.default.createElement(\"footer\", {\n    className: props.className\n  }, _react.default.createElement(_ButtonsSpace.default, {\n    buttonClick: props.buttonClick,\n    onOk: props.onOk,\n    onClose: props.onClose,\n    className: \"\".concat(props.className, \"__left-space\"),\n    btnClass: props.btnClass,\n    defaultOk: props.defaultOk,\n    defaultCancel: props.defaultCancel,\n    buttons: props.buttons.left\n  }), _react.default.createElement(_ButtonsSpace.default, {\n    buttonClick: props.buttonClick,\n    onOk: props.onOk,\n    onClose: props.onClose,\n    className: \"\".concat(props.className, \"__right-space\"),\n    btnClass: props.btnClass,\n    defaultOk: props.defaultOk,\n    defaultCancel: props.defaultCancel,\n    buttons: props.buttons.right\n  }));\n};\n\nPopupFooter.propTypes = {\n  buttons: _propTypes.default.shape({\n    left: _propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object])),\n    right: _propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object]))\n  }),\n  className: _propTypes.default.string,\n  btnClass: _propTypes.default.string,\n  onOk: _propTypes.default.func,\n  onClose: _propTypes.default.func,\n  buttonClick: _propTypes.default.func,\n  defaultOk: _propTypes.default.string,\n  defaultCancel: _propTypes.default.string\n};\nPopupFooter.defaultProps = {\n  buttons: null,\n  className: null,\n  btnClass: null,\n  defaultOk: null,\n  defaultCancel: null,\n  buttonClick: function buttonClick() {},\n  onOk: function onOk() {},\n  onClose: function onClose() {}\n};\nvar _default = PopupFooter;\nexports.default = _default;\n\n/***/ }),\n\n/***/ 446:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(__webpack_require__(1));\n\nvar _propTypes = _interopRequireDefault(__webpack_require__(2));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PopupHeader = function PopupHeader(props) {\n  if (!props.title) {\n    return null;\n  }\n\n  return _react.default.createElement(\"header\", {\n    className: props.className\n  }, _react.default.createElement(\"h1\", {\n    className: \"\".concat(props.className, \"__title\")\n  }, props.title));\n};\n\nPopupHeader.defaultProps = {\n  title: null,\n  className: null\n};\nPopupHeader.propTypes = {\n  title: _propTypes.default.string,\n  className: _propTypes.default.string\n};\nvar _default = PopupHeader;\nexports.default = _default;\n\n/***/ }),\n\n/***/ 447:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(__webpack_require__(1));\n\nvar _propTypes = _interopRequireDefault(__webpack_require__(2));\n\nvar _keymaster = _interopRequireDefault(__webpack_require__(363));\n\nvar _Store = _interopRequireDefault(__webpack_require__(448));\n\nvar _Header = _interopRequireDefault(__webpack_require__(446));\n\nvar _Footer = _interopRequireDefault(__webpack_require__(445));\n\nvar _Constants = _interopRequireDefault(__webpack_require__(261));\n\nvar _Bem = __webpack_require__(260);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } _setPrototypeOf(subClass.prototype, superClass && superClass.prototype); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) { return o.__proto__; }; return _getPrototypeOf(o); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar defaultKeyFilter = _keymaster.default.filter;\nvar Store = new _Store.default();\n\nvar handleClose = function handleClose() {\n  _keymaster.default.deleteScope('react-popup');\n\n  _keymaster.default.filter = defaultKeyFilter;\n  Store.close();\n};\n\nvar initialState = {\n  id: null,\n  title: null,\n  buttons: null,\n  content: null,\n  visible: false,\n  className: null,\n  noOverlay: false,\n  position: false,\n  closeOnOutsideClick: true,\n  onClose: function onClose() {},\n  onOpen: function onOpen() {}\n};\n\nvar Popup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _createClass(Popup, null, [{\n    key: \"addShowListener\",\n    value: function addShowListener(callback) {\n      Store.on(_Constants.default.SHOW, callback);\n    }\n  }, {\n    key: \"removeShowListener\",\n    value: function removeShowListener(callback) {\n      Store.removeListener(_Constants.default.SHOW, callback);\n    }\n  }, {\n    key: \"addCloseListener\",\n    value: function addCloseListener(callback) {\n      Store.on(_Constants.default.CLOSE, callback);\n    }\n  }, {\n    key: \"removeCloseListener\",\n    value: function removeCloseListener(callback) {\n      Store.removeListener(_Constants.default.CLOSE, callback);\n    }\n  }, {\n    key: \"register\",\n    value: function register(data) {\n      var id = Store.getId();\n      Store.popups[id] = Object.assign({}, initialState, data);\n      return id;\n    }\n  }, {\n    key: \"queue\",\n    value: function queue(id) {\n      if (!Object.prototype.hasOwnProperty.call(Store.popups, id)) {\n        return false;\n      }\n      /** Add popup to queue */\n\n\n      Store.queue.push(id);\n      /** Dispatch queue */\n\n      Store.dispatch();\n      return id;\n    }\n  }, {\n    key: \"create\",\n    value: function create(data, bringToFront) {\n      /** Register popup */\n      var id = this.register(data);\n      /** Queue popup */\n\n      if (bringToFront === true) {\n        var currentlyActive = Store.active;\n        Store.active = null;\n        this.queue(id);\n        this.queue(currentlyActive);\n        Store.dispatch();\n      } else {\n        this.queue(id);\n      }\n\n      return id;\n    }\n  }, {\n    key: \"alert\",\n    value: function alert(text, title, bringToFront) {\n      var data = {\n        title: title,\n        content: text,\n        buttons: {\n          right: ['ok']\n        }\n      };\n      return this.create(data, bringToFront);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      Store.close();\n    }\n  }, {\n    key: \"registerPlugin\",\n    value: function registerPlugin(name, callback) {\n      Store.plugins[name] = callback.bind(this);\n    }\n  }, {\n    key: \"plugins\",\n    value: function plugins() {\n      return Store.plugins;\n    }\n  }, {\n    key: \"refreshPosition\",\n    value: function refreshPosition(position) {\n      return Store.refreshPosition(position);\n    }\n  }, {\n    key: \"clearQueue\",\n    value: function clearQueue() {\n      return Store.clearQueue();\n    }\n  }]);\n\n  function Popup(props) {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Popup).call(this, props));\n    initialState.closeOnOutsideClick = _this.props.closeOnOutsideClick;\n    _this.state = initialState;\n    _this.bound = {\n      onShow: _this.onShow.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      onClose: _this.onClose.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      onRefresh: _this.onRefresh.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      containerClick: _this.containerClick.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      handleButtonClick: _this.handleButtonClick.bind(_assertThisInitialized(_assertThisInitialized(_this)))\n    };\n    _this.boxRef = null;\n    _this.defaultKeyBindings = {\n      ok: _this.props.defaultOkKey,\n      cancel: _this.props.defaultCancelKey\n    };\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      Store.on(_Constants.default.SHOW, this.bound.onShow);\n      Store.on(_Constants.default.CLOSE, this.bound.onClose);\n      Store.on(_Constants.default.REFRESH, this.bound.onRefresh);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.boxRef) {\n        this.boxRef.focus();\n      }\n\n      this.setPosition(this.state.position);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      Store.removeListener(_Constants.default.SHOW, this.bound.onShow);\n      Store.removeListener(_Constants.default.CLOSE, this.bound.onClose);\n      Store.removeListener(_Constants.default.REFRESH, this.bound.onRefresh);\n\n      _keymaster.default.deleteScope('react-popup');\n\n      _keymaster.default.filter = defaultKeyFilter;\n    }\n    /**\n     * Refresh popup position\n     * @param position\n     * @private\n     */\n\n  }, {\n    key: \"onRefresh\",\n    value: function onRefresh(position) {\n      this.setPosition(position);\n    }\n    /**\n     * On popup close\n     * @private\n     */\n\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      _keymaster.default.deleteScope('react-popup');\n\n      _keymaster.default.filter = defaultKeyFilter;\n      this.state.onClose(this.state.id, this.state.title);\n      this.setState(initialState);\n    }\n    /**\n     * On popup show\n     * @private\n     */\n\n  }, {\n    key: \"onShow\",\n    value: function onShow(id) {\n      var _this2 = this;\n\n      _keymaster.default.deleteScope('react-popup');\n\n      _keymaster.default.filter = function () {\n        return true;\n      };\n\n      var popup = Store.activePopup();\n\n      if (popup.buttons && !Object.prototype.hasOwnProperty.call(popup.buttons, 'left')) {\n        popup.buttons.left = [];\n      }\n\n      if (popup.buttons && !Object.prototype.hasOwnProperty.call(popup.buttons, 'right')) {\n        popup.buttons.right = [];\n      }\n\n      this.setState({\n        id: id,\n        title: popup.title,\n        content: popup.content,\n        buttons: popup.buttons,\n        visible: true,\n        className: popup.className,\n        noOverlay: popup.noOverlay,\n        position: popup.position,\n        closeOnOutsideClick: popup.closeOnOutsideClick,\n        onClose: popup.onClose,\n        onOpen: popup.onOpen\n      }, function () {\n        _keymaster.default.setScope('react-popup');\n\n        _this2.state.onOpen(_this2.state.id, _this2.state.title);\n\n        if (_this2.props.escToClose) {\n          (0, _keymaster.default)('esc', 'react-popup', _this2.handleKeyEvent.bind(_this2, 'cancel', _this2.state.id));\n        }\n\n        if (_this2.state.buttons) {\n          if (_this2.state.buttons.left.length) {\n            _this2.state.buttons.left.forEach(function (button) {\n              return _this2.bindKeyEvents(button);\n            });\n          }\n\n          if (_this2.state.buttons.right.length) {\n            _this2.state.buttons.right.forEach(function (button) {\n              return _this2.bindKeyEvents(button);\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(position) {\n      var box = this.boxRef;\n      var boxPosition = position;\n\n      if (!box) {\n        return;\n      }\n\n      if (!boxPosition) {\n        boxPosition = this.state.position;\n      }\n\n      if (!boxPosition) {\n        box.style.opacity = 1;\n        box.style.top = null;\n        box.style.left = null;\n        box.style.margin = null;\n        return;\n      }\n\n      if (typeof boxPosition === 'function') {\n        boxPosition.call(null, box);\n        return;\n      }\n\n      box.style.top = \"\".concat(parseInt(boxPosition.y, 10), \"px\");\n      box.style.left = \"\".concat(parseInt(boxPosition.x, 10), \"px\");\n      box.style.margin = 0;\n      box.style.opacity = 1;\n    }\n    /**\n     * Handle container click\n     * @param e\n     * @private\n     */\n\n  }, {\n    key: \"containerClick\",\n    value: function containerClick() {\n      if (this.state.closeOnOutsideClick) {\n        handleClose();\n      }\n    }\n  }, {\n    key: \"bindKeyEvents\",\n    value: function bindKeyEvents(button) {\n      var code = null;\n\n      if (typeof button === 'string') {\n        code = this.defaultKeyBindings[button];\n      } else if (Object.prototype.hasOwnProperty.call(button, 'key')) {\n        code = button.key;\n      }\n\n      if (this.props.escToClose && code === 'esc') {\n        return;\n      }\n\n      if (code) {\n        (0, _keymaster.default)(code, 'react-popup', this.handleKeyEvent.bind(this, button, this.state.id));\n      }\n    }\n  }, {\n    key: \"handleKeyEvent\",\n    value: function handleKeyEvent(button, id, e) {\n      var excludeTags = ['INPUT', 'TEXTAREA', 'BUTTON'];\n\n      if (this.state.id !== id || button.key === 'enter' && excludeTags.indexOf(e.target.tagName) >= 0) {\n        return true;\n      }\n\n      if (typeof button === 'string') {\n        handleClose();\n      } else if (Object.prototype.hasOwnProperty.call(button, 'action')) {\n        this.handleButtonClick(button.action);\n      }\n\n      return false;\n    }\n    /**\n     * Handle button clicks\n     * @param action\n     * @returns {*}\n     * @private\n     */\n\n  }, {\n    key: \"handleButtonClick\",\n    value: function handleButtonClick(action) {\n      if (typeof action === 'function') {\n        return action.call(this, Store);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"className\",\n    value: function className(_className) {\n      return (0, _Bem.element)(_className, this.props.className);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var className = this.props.className;\n      var box = null;\n      var overlayStyle = {};\n\n      if (this.state.visible) {\n        var closeBtn = null;\n        className += \" \".concat(this.props.className, \"--visible\");\n\n        if (this.props.closeBtn) {\n          closeBtn = _react.default.createElement(\"button\", {\n            onClick: handleClose,\n            className: \"\".concat(this.props.className, \"__close\")\n          }, this.props.closeHtml);\n        }\n\n        var boxClass = this.className('box');\n\n        if (this.state.className) {\n          boxClass += \" \".concat((0, _Bem.modifier)(this.state.className, boxClass));\n        }\n\n        box = _react.default.createElement(\"article\", {\n          role: \"dialog\",\n          tabIndex: \"-1\",\n          ref: function ref(el) {\n            _this3.boxRef = el;\n          },\n          style: {\n            opacity: 0,\n            outline: 'none'\n          },\n          className: boxClass\n        }, closeBtn, _react.default.createElement(_Header.default, {\n          title: this.state.title,\n          className: this.className('box__header')\n        }), _react.default.createElement(\"div\", {\n          className: this.className('box__body')\n        }, this.state.content), _react.default.createElement(_Footer.default, {\n          className: this.className('box__footer'),\n          btnClass: this.props.btnClass,\n          buttonClick: this.bound.handleButtonClick,\n          onClose: handleClose,\n          onOk: handleClose,\n          defaultOk: this.props.defaultOk,\n          defaultCancel: this.props.defaultCancel,\n          buttons: this.state.buttons\n        }));\n      }\n\n      if (this.state.noOverlay) {\n        overlayStyle.background = 'transparent';\n      }\n\n      return _react.default.createElement(\"div\", {\n        className: className\n      }, _react.default.createElement(\"div\", {\n        role: \"presentation\",\n        onClick: this.bound.containerClick,\n        className: this.className('overlay'),\n        style: overlayStyle\n      }), box);\n    }\n  }]);\n\n  _inherits(Popup, _React$Component);\n\n  return Popup;\n}(_react.default.Component);\n\n_defineProperty(Popup, \"defaultProps\", {\n  className: 'mm-popup',\n  btnClass: 'mm-popup__btn',\n  closeBtn: true,\n  closeHtml: null,\n  defaultOk: 'Ok',\n  defaultOkKey: 'enter',\n  defaultCancel: 'Cancel',\n  defaultCancelKey: 'esc',\n  closeOnOutsideClick: true,\n  escToClose: true,\n  onClose: function onClose() {},\n  onOpen: function onOpen() {}\n});\n\nPopup.propTypes = {\n  className: _propTypes.default.string,\n  btnClass: _propTypes.default.string,\n  closeBtn: _propTypes.default.bool,\n  closeHtml: _propTypes.default.node,\n  defaultOk: _propTypes.default.string,\n  defaultOkKey: _propTypes.default.string,\n  defaultCancel: _propTypes.default.string,\n  defaultCancelKey: _propTypes.default.string,\n  closeOnOutsideClick: _propTypes.default.bool,\n  escToClose: _propTypes.default.bool,\n  onClose: _propTypes.default.func,\n  onOpen: _propTypes.default.func\n};\nvar _default = Popup;\nexports.default = _default;\n\n/***/ }),\n\n/***/ 448:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _events = __webpack_require__(341);\n\nvar _Constants = _interopRequireDefault(__webpack_require__(261));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } _setPrototypeOf(subClass.prototype, superClass && superClass.prototype); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) { return o.__proto__; }; return _getPrototypeOf(o); }\n\nvar PopupStore =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  function PopupStore(props) {\n    var _this;\n\n    _classCallCheck(this, PopupStore);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PopupStore).call(this, props));\n    _this.id = 1;\n    _this.popups = {};\n    _this.queue = [];\n    _this.active = null;\n    _this.plugins = {};\n    return _this;\n  }\n  /**\n   * Get popup ID\n   */\n\n\n  _createClass(PopupStore, [{\n    key: \"getId\",\n    value: function getId() {\n      return \"id_\".concat(this.id++);\n    }\n    /**\n     * Get active popup\n     * @returns {*}\n     */\n\n  }, {\n    key: \"activePopup\",\n    value: function activePopup() {\n      return this.popups[this.active];\n    }\n    /**\n     * Close current popup\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      if (!this.active) {\n        return false;\n      }\n\n      var id = this.active;\n      this.active = null;\n      this.emit(_Constants.default.CLOSE, id);\n      this.dispatch();\n      this.value = null;\n      return id;\n    }\n    /**\n     * Dispatch next popup in queue\n     */\n\n  }, {\n    key: \"dispatch\",\n    value: function dispatch() {\n      if (this.active || this.queue.length < 1) {\n        return false;\n      }\n\n      var id = this.queue.shift();\n      /** Set active */\n\n      this.active = id;\n      this.emit(_Constants.default.SHOW, id);\n      return true;\n    }\n    /**\n     * Refresh popup position\n     * @param position\n     */\n\n  }, {\n    key: \"refreshPosition\",\n    value: function refreshPosition(position) {\n      this.emit(_Constants.default.REFRESH, position);\n    }\n    /**\n     * Clear queue\n     */\n\n  }, {\n    key: \"clearQueue\",\n    value: function clearQueue() {\n      this.queue = [];\n    }\n  }]);\n\n  _inherits(PopupStore, _EventEmitter);\n\n  return PopupStore;\n}(_events.EventEmitter);\n\nexports.default = PopupStore;\n\n/***/ }),\n\n/***/ 449:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _Popup.default;\n  }\n});\n\nvar _Popup = _interopRequireDefault(__webpack_require__(447));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n\n/***/ 45:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = Period;\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction Period(period) {\n    var from = period.start || \"\";\n    var to = period.end || \"\";\n\n    if (from && to) {\n        from = (0, _moment2.default)(from);\n        to = (0, _moment2.default)(to);\n\n        if (from.isSame(to, \"day\")) {\n            return _react2.default.createElement(\n                \"span\",\n                null,\n                from.format(\"MM/DD/YYYY\"),\n                from.isSame(to, \"hour\") ? null : _react2.default.createElement(\n                    \"span\",\n                    null,\n                    _react2.default.createElement(\n                        \"small\",\n                        { className: \"text-muted\" },\n                        \" from \"\n                    ),\n                    from.format(\"HH:mm\"),\n                    _react2.default.createElement(\n                        \"small\",\n                        { className: \"text-muted\" },\n                        \" to \"\n                    ),\n                    to.format(\"HH:mm\")\n                )\n            );\n        } else {\n            return _react2.default.createElement(\n                \"span\",\n                null,\n                _react2.default.createElement(\n                    \"small\",\n                    { className: \"text-muted\" },\n                    \" from \"\n                ),\n                from.format(\"MM/DD/YYYY\"),\n                _react2.default.createElement(\n                    \"small\",\n                    { className: \"text-muted\" },\n                    \" to \"\n                ),\n                to.format(\"MM/DD/YYYY\")\n            );\n        }\n    } else {\n        if (from) {\n            from = (0, _moment2.default)(from);\n            return _react2.default.createElement(\n                \"span\",\n                null,\n                _react2.default.createElement(\n                    \"small\",\n                    { className: \"text-muted\" },\n                    \" from \"\n                ),\n                from.format(\"MM/DD/YYYY\")\n            );\n        } else if (to) {\n            to = (0, _moment2.default)(to);\n            return _react2.default.createElement(\n                \"span\",\n                null,\n                _react2.default.createElement(\n                    \"small\",\n                    { className: \"text-muted\" },\n                    \" to \"\n                ),\n                to.format(\"MM/DD/YYYY\")\n            );\n        }\n    }\n    return _react2.default.createElement(\n        \"small\",\n        { className: \"text-muted\" },\n        \"N/A\"\n    );\n}\n\n/***/ }),\n\n/***/ 46:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _redux = __webpack_require__(62);\n\nvar _reduxThunk = __webpack_require__(97);\n\nvar _reduxThunk2 = _interopRequireDefault(_reduxThunk);\n\nvar _selection = __webpack_require__(47);\n\nvar _selection2 = _interopRequireDefault(_selection);\n\nvar _query = __webpack_require__(21);\n\nvar _query2 = _interopRequireDefault(_query);\n\nvar _settings = __webpack_require__(48);\n\nvar _settings2 = _interopRequireDefault(_settings);\n\nvar _urlParams = __webpack_require__(328);\n\nvar _urlParams2 = _interopRequireDefault(_urlParams);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The purpose of this file is to combine reducers and create the single store.\n * One should use it simply like so:\n *\n * ```import STORE from \"./redux\"```\n */\nvar middleWares = [_reduxThunk2.default];\n\n// Create logger middleware that will log all redux action but only\n// use that in development env.\nif (false) {\n    var logger = function logger(_store) {\n        return function (next) {\n            return function (action) {\n                var result = void 0;\n                if (!action.__no_log) {\n                    console.groupCollapsed(action.type);\n                    console.info(\"dispatching\", action);\n                    result = next(action);\n                    console.log(\"next state\", _store.getState());\n                    console.groupEnd(action.type);\n                } else {\n                    result = next(action);\n                }\n                return result;\n            };\n        };\n    };\n\n    middleWares.push(logger);\n}\n\nexports.default = (0, _redux.createStore)((0, _redux.combineReducers)({\n    selection: _selection2.default,\n    query: _query2.default,\n    settings: _settings2.default,\n    urlParams: _urlParams2.default\n}), _redux.applyMiddleware.apply(undefined, middleWares));\n\n/***/ }),\n\n/***/ 47:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.setSelectionCleared = exports.setAll = exports.toggle = undefined;\n\nvar _handleActions;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _reduxActions = __webpack_require__(44);\n\nvar _lib = __webpack_require__(7);\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar PARAMS = (0, _lib.parseQueryString)(location.hash);\nvar SINGLE = (0, _lib.boolVal)(PARAMS[\"single-selection\"]);\n\n/**\n * For the initial selection state parse the query portion of the URL hash (if\n * any). Note that this is not enough! The hash query can provide list of\n * patient IDs but we initialize them as true. Later they should be updated to\n * contain actual patient objects instead of true!\n */\nvar initialSelection = {};\n(PARAMS._selection || \"\").split(/\\s*,\\s*/).forEach(function (k) {\n    if (k) {\n\n        // In single mode the last id will become the selected one!\n        if (SINGLE) {\n            initialSelection = _defineProperty({}, k, true);\n        } else {\n            initialSelection[k] = true;\n        }\n    }\n});\n\n/**\n * The initial state is just an empty object that will be filled\n * with patient IDs as keys and booleans as values to indicate if\n * that patient is selected.\n */\nvar INITIAL_STATE = _extends({}, initialSelection, {\n    selectionCleared: false\n\n    // Private action constants\n});var TOGGLE = \"app/selection/TOGGLE\";\nvar SET_ALL = \"app/selection/SET_ALL\";\nvar SELECTION_CLEARED = \"app/selection/SELECTION_CLEARED\";\n\n// Create (and export) the redux actions\nvar toggle = exports.toggle = (0, _reduxActions.createAction)(TOGGLE);\nvar setAll = exports.setAll = (0, _reduxActions.createAction)(SET_ALL);\nvar setSelectionCleared = exports.setSelectionCleared = (0, _reduxActions.createAction)(SELECTION_CLEARED);\n\n/**\n * Update the \"_selection\" hash parameter whenever the selection changes\n * @param {Object} selection The selection to set\n */\nfunction setHashSelection(selection) {\n    (0, _lib.setHashParam)(\"_selection\", Object.keys(selection).filter(function (k) {\n        return selection.hasOwnProperty(k) && !!selection[k];\n    }).join(\",\"));\n}\n\n// Export the reducer as default\nexports.default = (0, _reduxActions.handleActions)((_handleActions = {}, _defineProperty(_handleActions, TOGGLE, function (state, action) {\n    var _newState;\n\n    var id = String(action.payload.id);\n    var newState = (_newState = {}, _defineProperty(_newState, id, state[id] ? false : action.payload), _defineProperty(_newState, \"selectionCleared\", false), _newState);\n\n    if (!SINGLE) {\n        newState = _extends({}, state, newState);\n    }\n    setHashSelection(newState);\n    return newState;\n}), _defineProperty(_handleActions, SELECTION_CLEARED, function (state, action) {\n    return _extends({}, state, { selectionCleared: true });\n}), _defineProperty(_handleActions, SET_ALL, function (_, action) {\n    var newState = _extends({}, action.payload, { selectionCleared: false });\n    setHashSelection(newState);\n    return newState;\n}), _handleActions), INITIAL_STATE);\n\n/***/ }),\n\n/***/ 48:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.showSelectedOnly = exports.replace = exports.merge = undefined;\n\nvar _handleActions;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _reduxActions = __webpack_require__(44);\n\nvar _configDefault = __webpack_require__(326);\n\nvar _configDefault2 = _interopRequireDefault(_configDefault);\n\nvar _mixinDeep = __webpack_require__(372);\n\nvar _mixinDeep2 = _interopRequireDefault(_mixinDeep);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// Private action constants\nvar MERGE = \"app/settings/MERGE\";\nvar REPLACE = \"app/settings/REPLACE\";\nvar RENDER_SELECTED_ONLY = \"app/settings/RENDER_SELECTED_ONLY\";\n\n// Create (and export) the redux actions\nvar merge = exports.merge = (0, _reduxActions.createAction)(MERGE);\nvar replace = exports.replace = (0, _reduxActions.createAction)(REPLACE);\nvar showSelectedOnly = exports.showSelectedOnly = (0, _reduxActions.createAction)(RENDER_SELECTED_ONLY);\n\n// Export the reducer as default\nexports.default = (0, _reduxActions.handleActions)((_handleActions = {}, _defineProperty(_handleActions, MERGE, function (state, action) {\n    return (0, _mixinDeep2.default)(state, action.payload, { loaded: true });\n}), _defineProperty(_handleActions, RENDER_SELECTED_ONLY, function (state, action) {\n    return _extends({}, state, {\n        renderSelectedOnly: !!action.payload\n    });\n}), _defineProperty(_handleActions, REPLACE, function (_, action) {\n    return _extends({}, action.payload);\n}), _handleActions), _configDefault2.default);\n\n/***/ }),\n\n/***/ 537:\n/***/ (function(module, exports) {\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n/***/ }),\n\n/***/ 538:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(330);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(14)(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./AgeSelector.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./AgeSelector.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 539:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(331);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(14)(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./App.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./App.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 540:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(332);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(14)(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./DialogFooter.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./DialogFooter.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 541:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(333);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(14)(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Footer.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Footer.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 542:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(334);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(14)(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Header.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Header.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 543:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(335);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(14)(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Loader.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Loader.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 544:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(336);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(14)(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientDetail.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientDetail.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 545:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(337);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(14)(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientImage.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientImage.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 546:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(338);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(14)(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientList.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientList.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 547:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(339);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(14)(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./SortWidget.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./SortWidget.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 548:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(340);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(14)(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./TagSelector.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./TagSelector.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 552:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(306);\n\n\n/***/ }),\n\n/***/ 7:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.InsightSource = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.intVal = intVal;\nexports.boolVal = boolVal;\nexports.getErrorMessage = getErrorMessage;\nexports.getPath = getPath;\nexports.compileQueryString = compileQueryString;\nexports.parseQueryString = parseQueryString;\nexports.setHashParam = setHashParam;\nexports.findMRNCoding = findMRNCoding;\nexports.findMRNIdentifier = findMRNIdentifier;\nexports.getPatientMRN = getPatientMRN;\nexports.getPatientName = getPatientName;\nexports.getPatientPhone = getPatientPhone;\nexports.getPatientEmail = getPatientEmail;\nexports.getPatientHomeAddress = getPatientHomeAddress;\nexports.getPatientAge = getPatientAge;\nexports.getPatientImageUri = getPatientImageUri;\nexports.getCodeableConcept = getCodeableConcept;\nexports.getCodeOrConcept = getCodeOrConcept;\nexports.codeIsNLPInsight = codeIsNLPInsight;\nexports.getInsightSource = getInsightSource;\nexports.searchHighlight = searchHighlight;\nexports.renderSearchHighlight = renderSearchHighlight;\nexports.getBundleURL = getBundleURL;\nexports.request = request;\nexports.getAllPages = getAllPages;\n\nvar _react = __webpack_require__(1);\n\nvar React = _interopRequireWildcard(_react);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _jquery = __webpack_require__(25);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * Returns the int representation of the first argument or the\n * \"defaultValue\" if the int conversion is not possible.\n * @param {number|string} x The argument to convert\n * @param {number} defaultValue The fall-back return value. This will be\n *                              converted to integer too.\n * @return {Number} The resulting integer.\n */\nfunction intVal(x) {\n    var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    var out = parseInt(x + \"\", 10);\n    if (isNaN(out) || !isFinite(out)) {\n        out = intVal(defaultValue);\n    }\n    return out;\n}\n\n/**\n * Converts the argument to boolean value. \"0\" and \"no\" are recognized as false.\n * \"1\" and \"yes\" are recognized as true. Everything else is just !!var\n * @param {*} x The argument to convert\n * @returns {Boolean} The argument converted to boolean\n */\nfunction boolVal(x) {\n    return (/^(false|0|no)$/i.test(String(x)) ? false : /^(true|1|yes)$/i.test(String(x)) ? true : !!x\n    );\n}\n\n/**\n * Given some input argument, this function tries to treat it like an error and\n * extract an error message out of it. Supported input types are:\n * - String\n * - Error\n * - AJAX JSON response\n * - FHIR JSON response\n * - Object map of error messages\n * @param {*} input The input to analyse\n * @param {String|JSX.Element} error(s)\n */\nfunction getErrorMessage(input) {\n    if (input && typeof input == \"string\") {\n        return input;\n    }\n\n    var out = \"Unknown error\";\n\n    if (input && input instanceof Error) {\n        out = String(input);\n    } else if (input && input.responseJSON) {\n        if (Array.isArray(input.responseJSON.issue) && input.responseJSON.issue.length) {\n            out = input.responseJSON.issue.map(function (o) {\n                return o.diagnostics || \"-\";\n            }).join(\"\\n\");\n        } else {\n            out = input.responseJSON.message || input.responseJSON.error || \"Unknown error\";\n        }\n    } else if (input && input.responseText) {\n        out = input.responseText + \" - \" + input.statusText || \"Unknown error\";\n    } else if (input && input.statusText) {\n        if (input.statusText == \"timeout\") {\n            out = \"The server failed to respond in the desired number of seconds\";\n        } else {\n            out = input.statusText || \"Unknown error\";\n        }\n    }\n\n    if (out && (typeof out === \"undefined\" ? \"undefined\" : _typeof(out)) == \"object\") {\n        var out2 = [];\n        for (var key in out) {\n            out2.push(React.createElement(\"li\", { key: key }, out[key]));\n        }\n        return React.createElement(\"div\", null, [\"Multiple errors\", React.createElement(\"ul\", null, out2)]);\n    }\n\n    return String(out).replace(/(Error\\:\\s)+/, \"Error: \");\n}\n\n/**\n * Walks thru an object (ar array) and returns the value found at the provided\n * path. This function is very simple so it intentionally does not support any\n * argument polymorphism, meaning that the path can only be a dot-separated\n * string. If the path is invalid returns undefined.\n * @param {Object} obj The object (or Array) to walk through\n * @param {String} path The path (eg. \"a.b.4.c\")\n * @returns {*} Whatever is found in the path or undefined\n */\nfunction getPath(obj) {\n    var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n\n    return path.split(\".\").reduce(function (out, key) {\n        return out ? out[key] : undefined;\n    }, obj);\n}\n\nfunction compileQueryString(params) {\n    var query = [];\n\n    var _loop = function _loop(key) {\n        var p = params[key];\n\n        // If the parameter value is falsy (and other than 0) just don't include\n        // it in the query\n        if (!p && p !== 0) {\n            return \"continue\";\n        }\n\n        // if the value is an array then include that parameter multiple times\n        // with different values\n        if (Array.isArray(p)) {\n            p.forEach(function (v) {\n\n                // skip falsy not 0 values same as above\n                if (v || v === 0) {\n                    query.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(v));\n                }\n            });\n        }\n\n        // Add normal param to the query string\n        else {\n                query.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(p));\n            }\n    };\n\n    for (var key in params) {\n        var _ret = _loop(key);\n\n        if (_ret === \"continue\") continue;\n    }\n\n    return query.join(\"&\");\n}\n\nfunction parseQueryString(str) {\n    var out = {};\n    str = String(str || \"\").trim().split(\"?\").pop();\n    str.split(/&/).forEach(function (pair) {\n        var tokens = pair.split(\"=\");\n        var key = decodeURIComponent(tokens[0]);\n        if (key) {\n            var value = decodeURIComponent(tokens[1] || \"true\");\n            if (out.hasOwnProperty(key)) {\n                if (!Array.isArray(out[key])) {\n                    out[key] = [out[key]];\n                }\n                out[key].push(value);\n            } else {\n                out[key] = value;\n            }\n        }\n    });\n    return out;\n}\n\nfunction setHashParam(name, value) {\n    var query = location.hash.split(\"?\")[1] || \"\";\n    var hash = location.hash.replace(/\\?.*/, \"\");\n    // console.warn(query)\n    query = parseQueryString(query || \"\");\n    if (value === undefined) {\n        if (query.hasOwnProperty(name)) {\n            delete query[name];\n        }\n    } else {\n        query[name] = value;\n    }\n\n    query = compileQueryString(query);\n    location.hash = hash + (query ? \"?\" + query : \"\");\n}\n\n// Fhir parsing helpers --------------------------------------------------------\n\n/**\n * Given an array of Coding objects finds and returns the one that contains\n * an MRN (using a code == \"MR\" check)\n * @export\n * @param {Object[]} codings Fhir.Coding[]\n * @returns {Object} Fhir.Coding | undefined\n */\nfunction findMRNCoding(codings) {\n    if (Array.isArray(codings)) {\n        return codings.find(function (coding) {\n            return coding.code == \"MR\";\n        });\n    }\n}\n\n/**\n * Given an array of identifier objects finds and returns the one that contains an MRN\n * @export\n * @param {Object[]} identifiers\n * @returns {Object}\n */\nfunction findMRNIdentifier(identifiers) {\n    return identifiers.find(function (identifier) {\n        return !!findMRNCoding(getPath(identifier, \"type.coding\"));\n    });\n}\n\n/**\n * Given a patient returns his MRN\n * @export\n * @param {Object} patient\n * @returns {string}\n */\nfunction getPatientMRN(patient) {\n    var mrn = null;\n\n    if (Array.isArray(patient.identifier) && patient.identifier.length) {\n        mrn = findMRNIdentifier(patient.identifier);\n        if (mrn) {\n            return mrn.value;\n        }\n    }\n\n    return mrn;\n}\n\n/**\n * Extracts and returns a human-readable name string from FHIR patient object.\n * @param {Object} patient FHIR patient object\n * @returns {String} Patient's name or an empty string\n */\nfunction getPatientName(patient) {\n    if (!patient) {\n        return \"\";\n    }\n\n    var name = patient.name;\n    if (!Array.isArray(name)) {\n        name = [name];\n    }\n    name = name[0];\n    if (!name) {\n        return \"\";\n    }\n\n    var family = Array.isArray(name.family) ? name.family : [name.family];\n    var given = Array.isArray(name.given) ? name.given : [name.given];\n    var prefix = Array.isArray(name.prefix) ? name.prefix : [name.prefix];\n    var suffix = Array.isArray(name.suffix) ? name.suffix : [name.suffix];\n\n    return [prefix.map(function (t) {\n        return String(t || \"\").trim();\n    }).join(\" \"), given.map(function (t) {\n        return String(t || \"\").trim();\n    }).join(\" \"), family.map(function (t) {\n        return String(t || \"\").trim();\n    }).join(\" \"), suffix.map(function (t) {\n        return String(t || \"\").trim();\n    }).join(\" \")].filter(Boolean).join(\" \");\n}\n\n/**\n * Given a FHIR patient object, returns the patient's phone number (or empty string).\n * Note that if the patient have multiple phones this will only return the first one.\n * @param {Object} patient FHIR patient object\n * @returns {String} Patient's phone or an empty string\n */\nfunction getPatientPhone() {\n    var patient = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var phone = (patient.telecom || []).find(function (c) {\n        return c.system == \"phone\";\n    });\n    return phone ? phone.value : \"\";\n}\n\n/**\n * Given a FHIR patient object, returns the patient's email (or an empty string).\n * Note that if the patient have multiple emails this will only return the first one.\n * @param {Object} patient FHIR patient object\n * @returns {String} Patient's email address or an empty string\n */\nfunction getPatientEmail() {\n    var patient = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var phone = (patient.telecom || []).find(function (c) {\n        return c.system == \"email\";\n    });\n    return phone ? phone.value || \"\" : \"\";\n}\n\n/**\n * Extracts and returns a human-readable address string from FHIR patient object.\n * @param {Object} patient FHIR patient object\n * @returns {String} Patient's address or an empty string\n */\nfunction getPatientHomeAddress() {\n    var patient = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var a = patient.address || [];\n    a = a.find(function (c) {\n        return c.use == \"home\";\n    }) || a[0] || {};\n    var l = [a.line, a.postalCode, a.city, a.country].map(function (x) {\n        return String(x || \"\").trim();\n    }).filter(Boolean).join(\" \");\n    return l ? l : a.text || \"\";\n}\n\n/**\n * Extracts and returns a human-readable age string from FHIR patient object.\n * @param {Object} patient FHIR patient object\n * @returns {String} Patient's age\n */\nfunction getPatientAge(patient) {\n    var from = (0, _moment2.default)(patient.birthDate);\n    var to = (0, _moment2.default)(patient.deceasedDateTime || undefined);\n    var age = to - from;\n\n    var seconds = Math.round(age / 1000);\n    if (seconds < 60) {\n        return seconds + \" second\";\n    }\n\n    var minutes = Math.round(seconds / 60);\n    if (minutes < 60) {\n        return minutes + \" minute\";\n    }\n\n    var hours = Math.round(minutes / 60);\n    if (hours < 24) {\n        return hours + \" hour\";\n    }\n\n    var days = Math.round(hours / 24);\n    if (days < 30) {\n        return days + \" day\";\n    }\n\n    var months = Math.round(days / 30);\n    if (months < 24) {\n        return months + \" month\";\n    }\n\n    var years = Math.round(days / 365);\n    return years + \" year\";\n}\n\n/**\n * Extracts and returns an URL pointing to the patient photo (or an empty string)\n * @param {Object} patient FHIR patient object\n * @returns {String} Patient's image URL\n */\nfunction getPatientImageUri(patient) {\n    var base = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n\n    var data = getPath(patient, \"photo.0.data\") || \"\";\n    var url = getPath(patient, \"photo.0.url\") || \"\";\n    var type = getPath(patient, \"photo.0.contentType\") || \"\";\n    if (url.indexOf(\"/\") === 0) {\n        url = base + \"\" + url;\n    }\n    var http = url && url.match(/^https?:\\/\\//);\n    if (!http && data) {\n        if (type && data.indexOf(\"data:\") !== 0) {\n            data = \"data:\" + type + \";base64,\" + data;\n        }\n        url = data;\n    } else if (type && !http) {\n        url = \"data:\" + type + \";base64,\" + url;\n    }\n    return url;\n}\n\n/**\n * Return the display text for the given CodeableConcept\n * @param {Object} concept CodeableConcept\n * @returns {String}\n */\nfunction getCodeableConcept(concept) {\n    var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"-\";\n\n    return String(getPath(concept, \"coding.0.display\") || getPath(concept, \"coding.0.code\") || concept.text || defaultValue);\n}\n\n/**\n * Some elements are of type `code` in older FHIR versions, but have been\n * converted to CodeableConcept in later versions\n * @param {String|Object} data Code or CodeableConcept\n * @returns {String}\n */\nfunction getCodeOrConcept(data) {\n    var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"-\";\n\n    if (typeof data == \"string\") return data || defaultValue;\n    return getCodeableConcept(data, defaultValue);\n}\n\n/**\n * Returns whether a codeOrConcept is the result of NLP insight\n * @param {Object} data Code or CodeableConcept\n * @returns {Boolean}\n */\nfunction codeIsNLPInsight(data) {\n    return getPath(data, \"coding.0.extension.0.url\") == \"http://ibm.com/fhir/cdm/insight/reference\";\n}\n\nvar InsightSource = exports.InsightSource = {\n    NONE: \"none\",\n    SELF: \"self\",\n    DOCUMENT: \"document\"\n\n    /**\n     * Gets the source type of an insight\n     * @param {Object} data FHIR Resource\n     * @returns {InsightSource}\n     */\n};function getInsightSource(data) {\n    // get data.meta.extension.*.extension.*\n    // this would be one big getPath() call but we need to check all array indices\n    var meta = getPath(data, \"meta\");\n    if (meta) {\n        var ext_outer = getPath(meta, \"extension\");\n        if (ext_outer && Array.isArray(ext_outer)) {\n            for (var item_outer in ext_outer) {\n                if (getPath(ext_outer[item_outer], \"url\") == \"http://ibm.com/fhir/cdm/insight/result\") {\n                    var ext_inner = getPath(ext_outer[item_outer], \"extension\");\n                    if (ext_inner && Array.isArray(ext_inner)) {\n                        for (var item_inner in ext_inner) {\n                            // check if at the process type\n                            if (getPath(ext_inner[item_inner], \"url\") == \"http://ibm.com/fhir/cdm/StructureDefinition/process-type\") {\n                                // NOW we can check the insight source\n                                var valueString = getPath(ext_inner[item_inner], \"valueString\");\n                                if (typeof valueString != 'string') {\n                                    return InsightSource.NONE;\n                                }\n                                var valueStringArr = valueString.toLowerCase().split(\" \");\n                                if (valueStringArr.includes(\"unstructured\")) {\n                                    return InsightSource.DOCUMENT;\n                                } else if (valueStringArr.includes(\"structured\")) {\n                                    return InsightSource.SELF;\n                                } else {\n                                    // It's not good if this happens\n                                    return InsightSource.NONE;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return InsightSource.NONE;\n}\n\n/**\n * Given some input string (@input) and a string to search for (@query), this\n * function will highlight all the occurrences by wrapping them in\n * \"<span class=\"search-match\"></span>\" tag.\n * @param {String} input The input string\n * @param {String} query The string to search for\n * @param {Boolean} caseSensitive Defaults to false\n * @returns {String} The input string with the matches highlighted\n */\nfunction searchHighlight(input, query) {\n    var caseSensitive = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    var s = String(input);\n    var q = String(query);\n    var x = s;\n\n    if (!caseSensitive) {\n        x = x.toLowerCase();\n        q = q.toLowerCase();\n    }\n\n    var i = x.indexOf(q);\n\n    if (i > -1) {\n        return s.substr(0, i) + \"<span class=\\\"search-match\\\">\" + s.substr(i, q.length) + \"</span>\" + s.substr(i + q.length);\n    }\n\n    return input;\n}\n\n/**\n * Uses searchHighlight() to generate and return a JSX.span element containing\n * the @html string with @search highlighted\n * @param {String} html The input string\n * @param {String} search The string to search for\n * @returns {JSX.span} SPAN element with the matches highlighted\n */\nfunction renderSearchHighlight(html, search) {\n    return React.createElement(\"span\", { dangerouslySetInnerHTML: {\n            __html: search ? searchHighlight(html, search) : html\n        } });\n}\n\n/**\n * Given a fhir bundle fins it's link having the given rel attribute.\n * @param {Object} bundle FHIR JSON Bundle object\n * @param {String} rel The rel attribute to look for: prev|next|self... (see\n * http://www.iana.org/assignments/link-relations/link-relations.xhtml#link-relations-1)\n * @returns {String|null} Returns the url of the link or null if the link was\n *                        not found.\n */\nfunction getBundleURL(bundle, rel) {\n    var nextLink = bundle.link;\n    if (nextLink) {\n        nextLink = nextLink.find(function (l) {\n            return l.relation === rel;\n        });\n        return nextLink && nextLink.url ? nextLink.url : null;\n    }\n    return null;\n}\n\nfunction request(options) {\n    options = typeof options == \"string\" ? { url: options } : options || {};\n    var cfg = _jquery2.default.extend(true, options, {\n        headers: {\n            Accept: \"application/fhir+json\"\n        }\n    });\n\n    return new Promise(function (resolve, reject) {\n        // console.info(\"Requesting \" + decodeURIComponent(cfg.url))\n        _jquery2.default.ajax(cfg).then(resolve, function (xhr) {\n            var message = getErrorMessage(xhr);\n            if (message && typeof message == \"string\") {\n                return reject(new Error(message));\n            } else {\n                return reject({ message: message });\n            }\n        });\n    });\n}\n\nfunction getAllPages(options) {\n    var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    return request(options).then(function (bundle) {\n        (bundle.entry || []).forEach(function (item) {\n            if (item.fullUrl && result.findIndex(function (o) {\n                return o.fullUrl === item.fullUrl;\n            }) == -1) {\n                result.push(item);\n            }\n        });\n        var nextUrl = getBundleURL(bundle, \"next\");\n        if (nextUrl) {\n            return getAllPages(_extends({}, options, { url: nextUrl }), result);\n        }\n        return result;\n    });\n}\n\n/***/ }),\n\n/***/ 98:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ICONS = {\n    info: \"fa fa-info-circle\",\n    warning: \"fa fa-exclamation-circle\",\n    danger: \"fa fa-exclamation-triangle\",\n    success: \"fa fa-thumbs-up\"\n};\n\nvar Alert = function (_React$Component) {\n    _inherits(Alert, _React$Component);\n\n    function Alert() {\n        _classCallCheck(this, Alert);\n\n        return _possibleConstructorReturn(this, (Alert.__proto__ || Object.getPrototypeOf(Alert)).apply(this, arguments));\n    }\n\n    _createClass(Alert, [{\n        key: \"render\",\n        value: function render() {\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"container-fluid\", style: { width: \"100%\" } },\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"row\" },\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"col-xs-12\" },\n                        _react2.default.createElement(\"br\", null),\n                        _react2.default.createElement(\n                            \"div\",\n                            { className: \"alert alert-\" + this.props.type },\n                            this.props.close ? _react2.default.createElement(\n                                \"span\",\n                                {\n                                    \"aria-hidden\": \"true\",\n                                    \"data-dismiss\": \"alert\",\n                                    className: \"close\",\n                                    style: { lineHeight: \"1.2rem\" }\n                                },\n                                \"\\xD7\"\n                            ) : null,\n                            this.props.icon ? _react2.default.createElement(\"i\", { className: ICONS[this.props.type], style: {\n                                    marginRight: \"1ex\"\n                                } }) : null,\n                            this.props.children\n                        ),\n                        _react2.default.createElement(\"br\", null)\n                    )\n                )\n            );\n        }\n    }]);\n\n    return Alert;\n}(_react2.default.Component);\n\nAlert.propTypes = {\n    type: _propTypes2.default.oneOf([\"info\", \"warning\", \"danger\", \"success\"]),\n    close: _propTypes2.default.bool,\n    icon: _propTypes2.default.bool,\n    children: _propTypes2.default.any\n};\nAlert.defaultProps = {\n    type: \"info\",\n    close: true,\n    icon: true\n};\nexports.default = Alert;\n\n/***/ }),\n\n/***/ 99:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.DialogFooter = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = __webpack_require__(19);\n\nvar _settings = __webpack_require__(48);\n\nvar _query = __webpack_require__(21);\n\nvar _selection = __webpack_require__(47);\n\n__webpack_require__(540);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar IS_POPUP = window.opener && window.name;\nvar IS_FRAME = parent !== self;\n\nvar SelectionUI = function (_React$Component) {\n    _inherits(SelectionUI, _React$Component);\n\n    function SelectionUI() {\n        _classCallCheck(this, SelectionUI);\n\n        return _possibleConstructorReturn(this, (SelectionUI.__proto__ || Object.getPrototypeOf(SelectionUI)).apply(this, arguments));\n    }\n\n    _createClass(SelectionUI, [{\n        key: \"render\",\n        value: function render() {\n            var _this2 = this;\n\n            var len = Object.keys(this.props.selection).filter(function (key) {\n                return !!_this2.props.selection[key] && key !== \"selectionCleared\";\n            }).length;\n            var viewClass = [\"btn\"];\n            var resetClass = [\"btn\"];\n\n            if (len === 0) {\n                viewClass.push(\"disabled\");\n                resetClass.push(\"disabled\");\n            }\n\n            if (this.props.settings.renderSelectedOnly) {\n                viewClass.push(\"active\");\n            }\n\n            var hasSelection = this.props.canShowSelected && len > 0;\n            return _react2.default.createElement(\n                \"label\",\n                { disabled: len === 0 },\n                _react2.default.createElement(\n                    \"span\",\n                    null,\n                    len + \" patient\" + (len === 1 ? \"\" : \"s\") + \" selected\" + (hasSelection ? ':' : '')\n                ),\n                hasSelection ? _react2.default.createElement(\n                    \"div\",\n                    { className: \"btn-group\" },\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: viewClass.join(\" \"), onClick: function onClick() {\n                                _this2.props.onToggleSelectionVisibility(!_this2.props.settings.renderSelectedOnly);\n                            } },\n                        \"View Selected\"\n                    ),\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: resetClass.join(\" \"), onClick: function onClick() {\n                                _this2.props.onResetSelection();\n                            } },\n                        \"Clear Selected\"\n                    )\n                ) : null\n            );\n        }\n    }]);\n\n    return SelectionUI;\n}(_react2.default.Component);\n\nSelectionUI.propTypes = {\n    settings: _propTypes2.default.object.isRequired,\n    selection: _propTypes2.default.object.isRequired,\n    onToggleSelectionVisibility: _propTypes2.default.func.isRequired,\n    onResetSelection: _propTypes2.default.func.isRequired,\n    canShowSelected: _propTypes2.default.bool\n};\n\nvar DialogFooter = exports.DialogFooter = function (_React$Component2) {\n    _inherits(DialogFooter, _React$Component2);\n\n    function DialogFooter() {\n        _classCallCheck(this, DialogFooter);\n\n        return _possibleConstructorReturn(this, (DialogFooter.__proto__ || Object.getPrototypeOf(DialogFooter)).apply(this, arguments));\n    }\n\n    _createClass(DialogFooter, [{\n        key: \"export\",\n\n\n        /**\n         * Generates and returns the object that will be sent back to the client\n         * when the OK button is clicked\n         */\n        value: function _export() {\n            var _this4 = this;\n\n            // debugger;\n            var selection = this.props.selection;\n\n            switch (this.props.settings.outputMode) {\n\n                case \"id-array\":\n                    // array of patient IDs\n                    return Object.keys(selection).filter(function (k) {\n                        return !!selection[k] && k !== \"selectionCleared\";\n                    });\n\n                case \"transactions\":\n                    // array of JSON transactions objects for each patient\n                    return Object.keys(selection).filter(function (k) {\n                        return !!selection[k] && k !== \"selectionCleared\";\n                    }).map(function (k) {\n                        return _this4.createPatientTransaction(selection[k]);\n                    });\n\n                case \"patients\":\n                    // array of patient JSON objects\n                    return Object.keys(selection).filter(function (k) {\n                        return !!selection[k] && k !== \"selectionCleared\";\n                    }).map(function (k) {\n                        return selection[k];\n                    });\n\n                case \"id-list\":\n                    // comma-separated list of patient IDs (default)\n                    return Object.keys(selection).filter(function (k) {\n                        return !!selection[k] && k !== \"selectionCleared\";\n                    }).join(\",\");\n            }\n        }\n    }, {\n        key: \"createPatientTransaction\",\n        value: function createPatientTransaction() {\n            throw new Error(\"No implemented\");\n        }\n    }, {\n        key: \"showSelectedOnly\",\n        value: function showSelectedOnly(bOn) {\n            if (bOn) {\n                var selection = this.props.selection;\n                this.props.setParam({\n                    name: \"_id\",\n                    value: Object.keys(selection).filter(function (k) {\n                        return !!selection[k];\n                    }).join(\",\")\n                });\n            } else {\n                this.props.setParam({\n                    name: \"_id\",\n                    value: undefined\n                });\n            }\n            this.props.showSelectedOnly(bOn);\n        }\n    }, {\n        key: \"renderDialogButtons\",\n        value: function renderDialogButtons() {\n            var _this5 = this;\n\n            if (!IS_POPUP && !IS_FRAME) {\n                return null;\n            }\n\n            var OWNER = window.opener || window.parent;\n            var selectionCount = Object.keys(this.props.selection).filter(function (key) {\n                return !!_this5.props.selection[key];\n            }).length;\n\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"col-xs-6 text-right\" },\n                _react2.default.createElement(\n                    \"button\",\n                    { className: \"btn btn-default\", onClick: function onClick() {\n                            OWNER.postMessage({ type: \"close\" }, \"*\");\n                        } },\n                    \"Cancel\"\n                ),\n                _react2.default.createElement(\n                    \"button\",\n                    { className: \"btn btn-primary\", onClick: function onClick() {\n                            var confirmClose = true;\n                            if (selectionCount <= 0 && !_this5.props.selection.selectionCleared) {\n                                confirmClose = window.confirm(\"No patients have been selected. Choose 'Cancel' to return to making a selection or 'OK' to close without selecting\");\n                            }\n                            if (confirmClose) {\n                                OWNER.postMessage({\n                                    type: \"result\",\n                                    data: _this5.export()\n                                }, \"*\");\n                            }\n                        } },\n                    \"OK\"\n                )\n            );\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var selection = this.props.selection;\n            selection = Object.keys(selection).filter(function (k) {\n                return !!selection[k];\n            });\n            return _react2.default.createElement(\n                \"div\",\n                { className: \"row dialog-buttons\" },\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"col-xs-6 text-left\" },\n                    _react2.default.createElement(SelectionUI, {\n                        selection: this.props.selection,\n                        settings: this.props.settings,\n                        onToggleSelectionVisibility: this.showSelectedOnly.bind(this),\n                        onResetSelection: this.props.resetSelection,\n                        canShowSelected: this.props.canShowSelected\n                    })\n                ),\n                this.renderDialogButtons()\n            );\n        }\n    }]);\n\n    return DialogFooter;\n}(_react2.default.Component);\n\nDialogFooter.propTypes = {\n    selection: _propTypes2.default.object.isRequired,\n    settings: _propTypes2.default.object.isRequired,\n    showSelectedOnly: _propTypes2.default.func.isRequired,\n    resetSelection: _propTypes2.default.func.isRequired,\n    setParam: _propTypes2.default.func.isRequired,\n    fetch: _propTypes2.default.func.isRequired,\n    canShowSelected: _propTypes2.default.bool\n};\nexports.default = (0, _reactRedux.connect)(function (state) {\n    return {\n        selection: state.selection,\n        settings: state.settings,\n        query: state.query\n    };\n}, function (dispatch) {\n    return {\n        showSelectedOnly: function showSelectedOnly(bValue) {\n            dispatch((0, _settings.showSelectedOnly)(bValue));\n            dispatch((0, _query.fetch)());\n        },\n        resetSelection: function resetSelection() {\n            dispatch((0, _selection.setAll)({}));\n            dispatch((0, _settings.showSelectedOnly)(false));\n            dispatch((0, _query.setParam)({ name: \"_id\", value: undefined }));\n            dispatch((0, _query.fetch)());\n            dispatch((0, _selection.setSelectionCleared)());\n        },\n        setParam: function setParam(name, value) {\n            return dispatch((0, _query.setParam)(name, value));\n        },\n        fetch: function fetch() {\n            return dispatch((0, _query.fetch)());\n        }\n    };\n})(DialogFooter);\n\n/***/ })\n\n},[552]);\n\n\n// WEBPACK FOOTER //\n// index.js","import React               from \"react\"\nimport PropTypes           from \"prop-types\"\nimport { getErrorMessage } from \"../../lib\"\nimport Alert               from \"../Alert\"\n\nexport default class ErrorMessage extends React.Component\n{\n    static propTypes = {\n        error: PropTypes.oneOfType([PropTypes.string, PropTypes.object])\n    };\n\n    static defaultProps = {\n        error: \"Unknown Error\"\n    };\n\n    render() {\n        return (\n            <Alert type=\"danger\">\n                { getErrorMessage(this.props.error) }\n            </Alert>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./components/ErrorMessage/index.js","import React from \"react\"\nimport \"./Loader.less\"\n\nexport default class Loader extends React.Component\n{\n    render() {\n        return (\n            <div className=\"loader\">\n                <div>\n                    <i className=\"fa fa-spinner spin\" /> Loading...\n                </div>\n            </div>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./components/Loader/index.js","/* global jdenticon */\nimport React     from \"react\"\nimport PropTypes from \"prop-types\"\nimport {\n    getPatientImageUri,\n    getPatientName\n} from \"../../lib\"\n\nimport \"./PatientImage.less\"\n\nfunction hash(input) {\n    let out = String(input).toLowerCase().trim().split(\"\")\n        .reduce((sum, c) => sum + c.charCodeAt(0).toString(16), \"\");\n    while (out.length < 11) {\n        out += out.length ? out : \"000000000000\"\n    }\n    return out;\n}\n\nexport default class PatientImage extends React.Component\n{\n    static propTypes = {\n        patient  : PropTypes.object.isRequired,\n        className: PropTypes.string,\n        style    : PropTypes.object,\n        base     : PropTypes.string\n    };\n\n    static defaultProps = {\n        base: \"\"\n    };\n\n    componentDidMount() {\n        this.renderCanvas()\n    }\n\n    componentDidUpdate() {\n        this.renderCanvas()\n    }\n\n    renderCanvas() {\n        let url = getPatientImageUri(this.props.patient, this.props.base)\n        if (!url) {\n            let hex = hash(getPatientName(this.props.patient));\n            jdenticon.update(\"#img-\" + this.props.patient.id, hex, 0.1)\n        }\n    }\n\n    render() {\n        let { className, style, patient, base, ...rest } = this.props;\n        let url = getPatientImageUri(patient, this.props.base);\n        className = \"patient-image-wrap \" + (className || \"\")\n\n        style = { ...(style || {}) }\n\n        if (url) {\n            style.backgroundImage = `url('${url}')`\n            style.backgroundColor = 'rgba(255, 255, 255, 0.6)'\n        }\n\n        return (\n            <div className={className} style={style} {...rest}>\n                {\n                    url ?\n                    null :\n                    <canvas\n                        width=\"480\"\n                        height=\"480\"\n                        style={{ width: \"100%\", height: \"100%\" }}\n                        id={\"img-\" + patient.id}\n                    />\n                }\n            </div>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./components/PatientImage/index.js","\nexport const CODE_SYSTEMS = {\n    'LOINC'     : { url: 'http://loinc.org'                            },\n    'SNOMED-CT' : { url: 'http://snomed.info/sct'                      },\n    'RxNorm'    : { url: 'http://www.nlm.nih.gov/research/umls/rxnorm' },\n    'CVX'       : { url: 'http://hl7.org/fhir/sid/cvx'                 },\n    'NUBC'      : { url: 'http://www.nubc.org/patient-discharge'       },\n    'UMLS'      : { url: 'http://uts.nlm.nih.gov/metathesaurus'        }\n};\n\n\n// WEBPACK FOOTER //\n// ./lib/constants.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader/lib/css-base.js\n// module id = 12\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\t// Test for IE <= 9 as proposed by Browserhacks\n\t\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t\t// Tests for existence of standard globals is to allow style-loader \n\t\t// to operate correctly into non-standard environments\n\t\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\t\treturn window && document && document.all && !window.atob;\n\t}),\n\tgetElement = (function(fn) {\n\t\tvar memo = {};\n\t\treturn function(selector) {\n\t\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t\t}\n\t\t\treturn memo[selector]\n\t\t};\n\t})(function (styleTarget) {\n\t\treturn document.querySelector(styleTarget)\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [],\n\tfixUrls = require(\"./fixUrls\");\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (typeof options.insertInto === \"undefined\") options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar styleTarget = getElement(options.insertInto)\n\tif (!styleTarget) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\tstyleTarget.insertBefore(styleElement, styleTarget.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\tstyleTarget.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\tstyleTarget.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\tstyleTarget.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\toptions.attrs.type = \"text/css\";\n\n\tattachTagAttrs(styleElement, options.attrs);\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\tattachTagAttrs(linkElement, options.attrs);\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction attachTagAttrs(element, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\telement.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement, options);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/* If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls){\n\t\tcss = fixUrls(css);\n\t}\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/style-loader/addStyles.js\n// module id = 14\n// module chunks = 0","import React       from \"react\"\nimport PropTypes   from \"prop-types\"\nimport { getPath } from \"../../../lib\"\nimport { connect } from \"react-redux\"\n\n/**\n * Renders group of resources in a grid (table) where each component represents\n * one row...\n */\nexport class Grid extends React.Component\n{\n    static propTypes = {\n        rows      : PropTypes.arrayOf(PropTypes.object).isRequired,\n        cols      : PropTypes.arrayOf(PropTypes.object).isRequired,\n        settings  : PropTypes.object.isRequired,\n        title     : PropTypes.string,\n        groupBy   : PropTypes.string,\n        comparator: PropTypes.func\n    };\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            __rows: this.sortRows(this.props.rows, this.props.comparator)\n        }\n    }\n\n    componentWillReceiveProps(newProps) {\n        if (Array.isArray(newProps.rows)) {\n            this.setState({\n                __rows: this.sortRows(newProps.rows, newProps.comparator)\n            });\n        }\n    }\n\n    sortRows(rows, comparator) {\n        if (!comparator) {\n            return rows\n        }\n        return rows.sort(comparator)\n    }\n\n    renderResource(res, i)\n    {\n        let url = `${this.props.settings.server.url}/${res.resourceType}/${res.id}`;\n        if (this.props.settings.fhirViewer.enabled) {\n            url = this.props.settings.fhirViewer.url +\n                (this.props.settings.fhirViewer.url.indexOf(\"?\") > -1 ? \"&\" : \"?\") +\n                this.props.settings.fhirViewer.param + \"=\" +\n                encodeURIComponent(url);\n        }\n\n        return (\n            <tr key={i}>\n                {\n                    this.props.cols.map((col, i) => {\n                        let { render, path, cellProps, defaultValue } = col\n                        cellProps = { ...cellProps, key: i }\n                        if (typeof render == \"function\") {\n                            return (\n                                <td {...cellProps}>\n                                    { render(res) }\n                                </td>\n                            )\n                        }\n                        return (\n                            <td {...cellProps}>\n                                {\n                                    getPath(res, path) ||\n                                    <small className=\"text-muted\">{ defaultValue || \"-\" }</small>\n                                }\n                            </td>\n                        )\n                    })\n                }\n            </tr>\n        )\n    }\n\n    renderRows() {\n        if (!this.state.__enableGrouping) {\n            return this.state.__rows.map(this.renderResource, this);\n        }\n\n        let groupColIndex = this.props.groupBy ?\n            this.props.cols.findIndex(c => c.name === this.props.groupBy || c.label === this.props.groupBy) :\n            -1;\n        let groupPath = groupColIndex > -1 ? this.props.cols[groupColIndex].path : null;\n\n        if (!groupPath) {\n            return this.state.__rows.map(this.renderResource, this);\n        }\n\n        const groups = {};\n        this.state.__rows.forEach((rec, i) => {\n            let groupValue = typeof groupPath == \"function\" ? groupPath(rec) : getPath(rec, groupPath);\n            groupValue = groupValue || \"Empty Group\";\n            if (!groups.hasOwnProperty(groupValue)) {\n                groups[groupValue] = []\n            }\n            groups[groupValue].push(this.renderResource(rec, i));\n        });\n\n        let out = [];\n        for (let group in groups) {\n            if (groups[group].length > 1) {\n                out.push(\n                    <tr className=\"group-header\" key={group}>\n                        <th colSpan={this.props.cols.length} onClick={() => this.setState({[group] : this.state[group] === false ? true : false })}>\n                        <i className={\"glyphicon glyphicon-triangle-\" + (\n                            this.state[group] !== false ? \"bottom\" : \"right\")\n                        }/> {group} <small className=\"badge\">{groups[group].length}</small>\n                        </th>\n                    </tr>\n                );\n                if (this.state[group] !== false) {\n                    out = out.concat(groups[group])\n                }\n            }\n            else {\n                out.push(<tr className=\"group-clear\" key={group}/>)\n                out = out.concat(groups[group])\n            }\n        }\n        return out;\n    }\n\n    render()\n    {\n        return (\n            <div className={\"panel panel-default\" + (this.state.__enableGrouping ? \" grouped\" : \"\")}>\n                {\n                    this.props.title ?\n                    <div className=\"panel-heading\">\n                        {\n                            this.props.groupBy && this.state.__rows.length > 1 &&\n                            <label className=\"pull-right\">\n                                Group by {this.props.groupBy\n                                } <input\n                                    type=\"checkbox\"\n                                    checked={!!this.state.__enableGrouping}\n                                    onChange={e => this.setState({\n                                        __enableGrouping: e.target.checked\n                                    })}\n                                />\n                            </label>\n                        }\n                        <b className=\"text-primary\">\n                            <i className=\"fa fa-address-card-o\"/> { this.props.title }\n                        </b>\n                    </div> :\n                    null\n                }\n                <div className=\"table-responsive\">\n                    <table className=\"table table-condensed table-hover table-striped table-bordered\" style={{\n                        minWidth: this.props.cols.length * 200\n                    }}>\n                        <thead>\n                            <tr>\n                                {\n                                    this.props.cols.map((col, i) => {\n                                        let { headerProps, label } = col\n                                        headerProps = { ...headerProps, key: i }\n                                        return (\n                                            <th {...headerProps}>\n                                                { label || \"\" }\n                                            </th>\n                                        )\n                                    })\n                                }\n                            </tr>\n                        </thead>\n                        <tbody>\n                            { this.renderRows() }\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default connect(state => ({\n    settings: state.settings\n}))(Grid);\n\n\n\n// WEBPACK FOOTER //\n// ./components/Fhir/Grid/index.js","import { createAction, handleActions } from \"redux-actions\"\nimport PatientSearch from \"../lib/PatientSearch\"\nimport {\n    parseQueryString,\n    getBundleURL\n} from \"../lib\"\n\nexport const queryBuilder = new PatientSearch(\n    parseQueryString(window.location.hash.split(\"?\")[1] || \"\")\n);\n\n/**\n * The initial state is just an empty object that will be filled\n * with query parameters.\n */\nconst INITIAL_STATE = {\n    ...queryBuilder.getState(),\n    loading: false,\n    error  : null,\n    bundle : null\n}\n\n// Private action constants\nconst SET_LOADING      = \"app/search/SET_LOADING\"\nconst SET_ERROR        = \"app/search/SET_ERROR\"\nconst SET_DATA         = \"app/search/SET_DATA\"\nconst SET_MIN_AGE      = \"app/search/SET_MIN_AGE\"\nconst SET_MAX_AGE      = \"app/search/SET_MAX_AGE\"\nconst SET_AGE_GROUP    = \"app/search/SET_AGE_GROUP\"\nconst ADD_CONDITION    = \"app/search/ADD_CONDITION\"\nconst DEL_CONDITION    = \"app/search/DEL_CONDITION\"\nconst ADD_TAG          = \"app/search/ADD_TAG\"\nconst DEL_TAG          = \"app/search/DEL_TAG\"\nconst SET_CONDITIONS   = \"app/search/SET_CONDITIONS\"\nconst SET_GENDER       = \"app/search/SET_GENDER\"\nconst SET_PARAM        = \"app/search/SET_PARAM\"\nconst SET_QUERY_STRING = \"app/search/SET_QUERY_STRING\"\nconst SET_QUERY_TYPE   = \"app/search/SET_QUERY_TYPE\"\nconst SET_SORT         = \"app/search/SET_SORT\"\nconst SET_TAGS         = \"app/search/SET_TAGS\"\nconst SET_LIMIT        = \"app/search/SET_LIMIT\"\n\n\n// Create (and export) the redux actions ---------------------------------------\nexport const setLoading     = createAction(SET_LOADING)\nexport const setError       = createAction(SET_ERROR)\nexport const setData        = createAction(SET_DATA)\nexport const setMinAge      = createAction(SET_MIN_AGE)\nexport const setMaxAge      = createAction(SET_MAX_AGE)\nexport const setAgeGroup    = createAction(SET_AGE_GROUP)\nexport const addCondition   = createAction(ADD_CONDITION)\nexport const delCondition   = createAction(DEL_CONDITION)\nexport const setConditions  = createAction(SET_CONDITIONS)\nexport const setGender      = createAction(SET_GENDER)\nexport const setParam       = createAction(SET_PARAM)\nexport const setQueryString = createAction(SET_QUERY_STRING)\nexport const setQueryType   = createAction(SET_QUERY_TYPE)\nexport const setSort        = createAction(SET_SORT)\nexport const addTag         = createAction(ADD_TAG)\nexport const delTag         = createAction(DEL_TAG)\nexport const setTags        = createAction(SET_TAGS)\nexport const setLimit       = createAction(SET_LIMIT)\n\n\nexport const fetch = function() {\n    return (dispatch, getState) => {\n        dispatch(setLoading(true))\n        dispatch(setError(null))\n        const { settings } = getState()\n        queryBuilder.fetch(settings.server).then(\n            bundle => {\n                dispatch(setData(bundle))\n                dispatch(setLoading(false))\n            },\n            function(error) {\n                dispatch(setError(error))\n                dispatch(setLoading(false))\n            }\n        )\n    }\n}\n\nexport const goNext = function() {\n    return (dispatch, getState) => {\n        const { bundle } = getState().query;\n        let url = getBundleURL(bundle, \"next\");\n        if (url) {\n            url = parseQueryString(url);\n            queryBuilder.setOffset(url._getpages, +url._getpagesoffset);\n            dispatch(fetch());\n        }\n    }\n}\n\nexport const goPrev = function() {\n    return (dispatch, getState) => {\n        const { bundle } = getState().query;\n        let url = getBundleURL(bundle, \"previous\");\n        if (url) {\n            url = parseQueryString(url);\n            queryBuilder.setOffset(url._getpages, +url._getpagesoffset);\n            dispatch(fetch());\n        }\n    }\n}\n\n\n\n\n// Export the reducer as default\nexport default handleActions({\n\n    [SET_SORT]: (state, action) => {\n        queryBuilder.setSort(action.payload)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [SET_QUERY_STRING]: (state, action) => {\n        queryBuilder.setQueryString(action.payload)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [SET_QUERY_TYPE]: (state, action) => {\n        queryBuilder.setQueryType(action.payload)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [SET_PARAM]: (state, action) => {\n        queryBuilder.setParam(action.payload.name, action.payload.value)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [SET_MIN_AGE]: (state, action) => {\n        queryBuilder.setMinAge(action.payload)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [SET_MAX_AGE]: (state, action) => {\n        queryBuilder.setMaxAge(action.payload)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [SET_AGE_GROUP]: (state, action) => {\n        queryBuilder.setAgeGroup(action.payload)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [ADD_CONDITION]: (state, action) => {\n        queryBuilder.addCondition(action.payload.key, action.payload.value)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [SET_CONDITIONS]: (state, action) => {\n        queryBuilder.setConditions(action.payload)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [DEL_CONDITION]: (state, action) => {\n        queryBuilder.removeCondition(action.payload)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [ADD_TAG]: (state, action) => {\n        queryBuilder.addTag(action.payload)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [DEL_TAG]: (state, action) => {\n        queryBuilder.removeTag(action.payload)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [SET_TAGS]: (state, action) => {\n        queryBuilder.setTags(action.payload)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [SET_GENDER]: (state, action) => {\n        queryBuilder.setGender(action.payload)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    [SET_LIMIT]: (state, action) => {\n        queryBuilder.setLimit(action.payload)\n        return { ...state, ...queryBuilder.getState() }\n    },\n\n    /**\n     * Sets the loading state of the query\n     */\n    [SET_LOADING]: (state, action) => ({\n        ...state,\n        ...queryBuilder.getState(),\n        loading: !!action.payload\n    }),\n\n    /**\n     * Sets the error state of the query\n     */\n    [SET_ERROR]: (state, action) => ({\n        ...state,\n        ...queryBuilder.getState(),\n        error: action.payload\n    }),\n\n    /**\n     * Sets the data fetched by the query\n     */\n    [SET_DATA]: (state, action) => ({\n        ...state,\n        ...queryBuilder.getState(),\n        bundle: action.payload\n    })\n\n}, INITIAL_STATE)\n\n\n\n// WEBPACK FOOTER //\n// ./redux/query.js","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.element = exports.modifier = void 0;\n\nvar element = function element(el, base) {\n  return \"\".concat(base, \"__\").concat(el);\n};\n\nexports.element = element;\n\nvar modifier = function modifier(modifiers, base) {\n  if (!modifiers) {\n    return null;\n  }\n\n  var finalClass = [];\n  var classNames = modifiers.split(' ');\n  classNames.forEach(function (singleClass) {\n    finalClass.push(\"\".concat(base, \"--\").concat(singleClass));\n  });\n  return finalClass.join(' ');\n};\n\nexports.modifier = modifier;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/react-popup/dist/Bem.js\n// module id = 260\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  SHOW: 'SHOW',\n  CLOSE: 'CLOSE',\n  REFRESH: 'REFRESH'\n};\nexports.default = _default;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/react-popup/dist/Constants.js\n// module id = 261\n// module chunks = 0","import React         from \"react\"\nimport ReactDOM      from \"react-dom\"\nimport App           from \"./components/App\"\nimport { Provider }  from \"react-redux\"\nimport STORE         from \"./redux\"\nimport PatientDetail from \"./components/PatientDetail\"\nimport PatientList   from \"./components/PatientList\"\nimport { Router, Route, Switch } from \"react-router\"\nimport createHistory from \"history/createHashHistory\"\nimport jQuery    from \"jquery\"\nimport Popup         from \"react-popup\"\n\nwindow.$ = window.jQuery = jQuery\n\nconst history = createHistory()\n\nReactDOM.render(\n    <Popup />,\n    document.getElementById('popupContainer'),\n    <Provider store={STORE}>\n        <Router history={history}>\n            <Switch>\n                <App>\n                    <Route path=\"/\"               component={PatientList} exact/>\n                    <Route path=\"/patient/:index\" component={PatientDetail}/>\n                </App>\n            </Switch>\n        </Router>\n    </Provider>,\n    document.getElementById(\"main\")\n)\n\n$(function () {\n    $(\"body\").tooltip({\n        selector : \".patient-detail-page [title]\"\n    })\n})\n\n\n// WEBPACK FOOTER //\n// ./index.js","import React  from \"react\"\nimport moment from \"moment\"\nimport PropTypes from \"prop-types\"\nimport \"./AgeSelector.less\"\n\nexport default class AgeSelector extends React.Component\n{\n    static propTypes = {\n        min: PropTypes.shape({\n            value: PropTypes.number,\n            units: PropTypes.oneOf([\"years\", \"months\", \"days\"])\n        }),\n        max: PropTypes.shape({\n            value: PropTypes.number,\n            units: PropTypes.oneOf([\"years\", \"months\", \"days\"])\n        }),\n        group: PropTypes.string,\n        onMinChange  : PropTypes.func,\n        onMaxChange  : PropTypes.func,\n        onGroupChange: PropTypes.func,\n        update       : PropTypes.func\n    };\n\n    static defaultProps = {\n        min: {\n            value: 0,\n            units: \"years\"\n        },\n        max: {\n            value: 100,\n            units: \"years\"\n        },\n        group: \"\",\n        update: () => alert(\"No update function provided!\")\n    };\n\n    constructor(...args) {\n        super(...args)\n        this.onChangeMinValue = this.onChangeMinValue.bind(this)\n        this.onChangeMinUnits = this.onChangeMinUnits.bind(this)\n        this.onChangeMaxValue = this.onChangeMaxValue.bind(this)\n        this.onChangeMaxUnits = this.onChangeMaxUnits.bind(this)\n        this.onGroupChange    = this.onGroupChange   .bind(this)\n        this.state = this._propsToState(this.props);\n    }\n\n    _propsToState(props) {\n        let state = {}\n        if (props.min && typeof props.min == \"object\") {\n            if (props.min.hasOwnProperty(\"value\")) {\n                state.minValue = isNaN(props.min.value) ? \"\" : props.min.value;\n            }\n            if (props.min.hasOwnProperty(\"units\")) {\n                state.minUnits = props.min.units;\n            }\n        }\n        if (props.max && typeof props.max == \"object\") {\n            if (props.max.hasOwnProperty(\"value\")) {\n                state.maxValue = isNaN(props.max.value) ? \"\" : props.max.value;\n            }\n            if (props.max.hasOwnProperty(\"units\")) {\n                state.maxUnits = props.max.units;\n            }\n        }\n\n        return state;\n    }\n\n    componentWillReceiveProps(newProps) {\n        let newState = this._propsToState(newProps);\n        if (Object.keys(newState).length) {\n            this.setState(newState);\n        }\n    }\n\n    // Event handlers ----------------------------------------------------------\n\n    /**\n     * When the numeric value of the min-age changes\n     * @param {Event} e\n     */\n    onChangeMinValue(e) {\n        if (this.props.onMinChange) {\n            let min = {\n                value: e.target.valueAsNumber || parseFloat(e.target.value || \"0\"),\n                units: this.props.min.units\n            }\n\n            if (this.canSet(min, this.props.max)) {\n                this.props.onMinChange(min)\n            }\n            else {\n                this.setState(this._propsToState({ min }));\n            }\n        }\n    }\n\n    /**\n     * When the units of the min-age change\n     * @param {Event} e\n     */\n    onChangeMinUnits(e) {\n        if (this.props.onMinChange) {\n            let min = {\n                value: this.props.min.value,\n                units: e.target.value\n            };\n            if (this.canSet(min, this.props.max)) {\n                this.props.onMinChange(min)\n            }\n            else {\n                this.setState(this._propsToState({ min }));\n            }\n        }\n    }\n\n    /**\n     * When the numeric value of the max-age changes\n     * @param {Event} e\n     */\n    onChangeMaxValue(e) {\n        if (this.props.onMaxChange) {\n            let max = {\n                value: e.target.valueAsNumber || parseFloat(e.target.value || \"0\"),\n                units: this.props.max.units\n            };\n            if (this.canSet(this.props.min, max)) {\n                this.props.onMaxChange(max)\n            }\n            else {\n                this.setState(this._propsToState({ max }));\n            }\n        }\n    }\n\n    /**\n     * When the units of the max-age change\n     * @param {Event} e\n     */\n    onChangeMaxUnits(e) {\n        if (this.props.onMaxChange) {\n            let max = {\n                value: this.props.max.value,\n                units: e.target.value\n            };\n            if (this.canSet(this.props.min, max)) {\n                this.props.onMaxChange(max)\n            }\n            else {\n                this.setState(this._propsToState({ max }));\n            }\n        }\n    }\n\n    /**\n     * When the selected age group changes\n     * @param {Event} e\n     */\n    onGroupChange(e) {\n        if (this.props.onGroupChange) {\n            this.props.onGroupChange(e.target.value)\n        }\n    }\n\n    // Validators and helper methods -------------------------------------------\n\n    /**\n     * Given two dates (as value and units) returns true if min is before max.\n     * This is used to validate inputs and prevent the user from entering\n     * invalid ranges\n     * @param {Object} min The min date as { value: number, units: string }\n     * @param {Object} max The max date as { value: number, units: string }\n     * @returns {Boolean}\n     */\n    canSet(min, max) {\n        let maxDuration = moment.duration(max.value, max.units);\n        let minDuration = moment.duration(min.value, min.units);\n        return minDuration < maxDuration;\n    }\n\n    // Rendering methods -------------------------------------------------------\n\n    render() {\n        let valid = this.canSet({\n            value: this.state.minValue,\n            units: this.state.minUnits\n        }, {\n            value: this.state.maxValue,\n            units: this.state.maxUnits\n        });\n        return (\n            <div className={ \"age-widget-wrap form-control input-sm\" + (this.props.group == \"**custom**\" ? \" custom\" : \"\")}>\n                <select\n                    onChange={ this.onGroupChange }\n                    value={ this.props.group || \"\" }\n                >\n                    <option value=\"\">Any Age</option>\n                    <option value=\"infant\">Infants (0 - 12 months, Alive only)</option>\n                    <option value=\"child\">Children (1 - 18 years, Alive only)</option>\n                    <option value=\"adult\">Adults (18 - 65 years, Alive only)</option>\n                    <option value=\"elderly\">Elderly (65+ years, Alive only)</option>\n                    <option value=\"**custom**\">\n                        {\n                            this.props.group == \"**custom**\" ?\n                            \"Custom Age, Alive only:\" :\n                            \"Custom Age, Alive only\"\n                        }\n                    </option>\n                </select>\n                {\n                    this.props.group == \"**custom**\" ?\n                    <div className={ \"age-widget\" + (valid ? \"\" : \" invalid\") }>\n                        <span>Min:</span>\n                        <input\n                            type=\"number\"\n                            value={ this.state.minValue }\n                            onChange={ this.onChangeMinValue }\n                            min={0}\n                            step={1}\n                        /><select\n                            value={ this.state.minUnits }\n                            onChange={ this.onChangeMinUnits }\n                        >\n                            <option value=\"years\">Years</option>\n                            <option value=\"months\">Months</option>\n                            <option value=\"days\">Days</option>\n                        </select>\n                    </div> : null\n                }\n                {\n                    this.props.group == \"**custom**\" ?\n                    <div className={ \"age-widget\" + (valid ? \"\" : \" invalid\") }>\n                        <span>Max:</span>\n                        <input\n                            type=\"number\"\n                            value={ this.state.maxValue }\n                            onChange={ this.onChangeMaxValue }\n                            min={0}\n                            step={1}\n                        /><select\n                            value={ this.state.maxUnits }\n                            onChange={ this.onChangeMaxUnits }\n                        >\n                            <option value=\"years\">Years</option>\n                            <option value=\"months\">Months</option>\n                            <option value=\"days\">Days</option>\n                        </select>\n                    </div> : null\n                }\n            </div>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./components/AgeSelector/index.js","import React         from \"react\"\nimport PropTypes     from \"prop-types\";\nimport $             from \"jquery\"\nimport JSON5         from \"json5\"\nimport { connect }   from \"react-redux\"\nimport Loader        from \"../Loader\"\nimport ErrorMessage  from \"../ErrorMessage\"\nimport { fetch, setLimit } from \"../../redux/query\"\nimport { merge }     from \"../../redux/settings\"\nimport { parseQueryString } from \"../../lib\"\nimport                    \"./App.less\"\n\nconst OWNER = window.opener || (window.parent === self ? null : window.parent);\nconst DEFAULT_CONFIG = \"default\";\n\n\n\nexport class App extends React.Component\n{\n    static propTypes = {\n        children : PropTypes.any,\n        settings : PropTypes.object.isRequired,\n        dispatch : PropTypes.func.isRequired\n    };\n\n    constructor(...args) {\n        super(...args)\n        this.state = {\n            error: null\n        };\n    }\n\n    handleUiBlocking() {\n        let runningRequests = 0, hideDelay;\n\n        const handle = () => {\n            if (hideDelay) {\n                clearTimeout(hideDelay)\n            }\n            if (runningRequests > 0) {\n                $(\"#overlay\").show();\n            }\n            else {\n                hideDelay = setTimeout(() => {\n                    $(\"#overlay\").hide();\n                }, 200)\n            }\n        };\n\n        $(document).ajaxStart(() => {\n            runningRequests++;\n            handle();\n        });\n\n        $(document).ajaxComplete(() => {\n            runningRequests = Math.max(--runningRequests, 0);\n            handle();\n        })\n    }\n\n    componentDidMount() {\n\n        this.handleUiBlocking();\n\n        let { config, ...params } = parseQueryString(window.location.search);\n\n        let settings = {};\n        $.ajax({\n            url     : `./config/${config || DEFAULT_CONFIG}.json5`,\n            dataType: \"text\",\n            cache   : false\n        }).then(\n            json => {\n                json = JSON5.parse(json);\n                $.ajaxSetup({ timeout: json.timeout || 20000 });\n                settings = { ...json, ...params }\n            },\n            errorXHR => {\n                console.warn(\"Loading custom config: \" + errorXHR.statusText);\n            }\n        ).always(() => {\n            let settingReceived = false;\n\n            const onMessage = e => {\n                if (e.data.type == 'config' &&\n                    e.data.data &&\n                    typeof e.data.data == \"object\")\n                {\n                    settingReceived = true;\n                    this.props.dispatch(merge(e.data.data));\n                    this.props.dispatch(fetch());\n                }\n            };\n\n            this.props.dispatch(merge(settings));\n            this.props.dispatch(setLimit(settings.patientsPerPage));\n\n            if (OWNER) {\n\n                window.addEventListener(\"unload\", function() {\n                    OWNER.postMessage({ type: \"close\" }, \"*\")\n                });\n\n                window.addEventListener(\"message\", onMessage);\n\n                setTimeout(() => {\n                    window.removeEventListener(\"message\", onMessage);\n                    if (!settingReceived) {\n                        this.props.dispatch(fetch());\n                    }\n                }, 1000);\n\n                OWNER.postMessage({ type: \"ready\" }, \"*\");\n            }\n            else {\n                this.props.dispatch(fetch());\n            }\n        })\n    }\n\n    render() {\n        if (this.state.error) {\n            return <ErrorMessage error={this.state.error}/>\n        }\n        if (!this.props.settings || !this.props.settings.loaded) {\n            return <div className=\"app\"><Loader/></div>\n        }\n        return <div className=\"app\">{this.props.children}</div>\n    }\n}\n\nexport default connect(state => ({...state}))(App)\n\n\n\n// WEBPACK FOOTER //\n// ./components/App/index.js","import React       from \"react\"\nimport PropTypes   from \"prop-types\"\nimport Grid        from \"./Grid\"\nimport { getPath } from \"../../lib\"\nimport Period      from \"./Period\"\nimport moment      from \"moment\"\n\nexport default class CarePlan extends React.Component\n{\n    static propTypes = {\n        resources: PropTypes.arrayOf(PropTypes.object)\n    };\n\n    render()\n    {\n        return (\n            <Grid\n                rows={ (this.props.resources || []).map(o => o.resource) }\n                title=\"CarePlan\"\n                groupBy=\"Category\"\n                comparator={(a,b) => {\n                    let dA = getPath(a, \"period.start\");\n                    let dB = getPath(b, \"period.start\");\n                    dA = dA ? +moment(dA) : 0;\n                    dB = dB ? +moment(dB) : 0;\n                    return dB - dA;\n                }}\n                cols={[\n                    {\n                        label: \"Category\",\n                        path: \"category.0.coding.0.display\",\n                        render: rec => (\n                            <b>\n                                { getPath(rec, \"category.0.coding.0.display\") }\n                            </b>\n                        )\n                    },\n                    {\n                        label: \"Reason\",\n                        render: rec => (rec.activity || []).map((a, i) => {\n                            let reason = getPath(a, \"detail.code.coding.0.display\") || \"\"\n                            return reason ? (\n                                <div key={i}>\n                                    { reason }\n                                    <span> - </span>\n                                    <span className=\"text-muted\">{\n                                        getPath(a, \"detail.status\") || \"no data\"\n                                    }</span>\n                                </div>\n                            ) : \"\"\n                        })\n                    },\n                    {\n                        label: \"Period\",\n                        render: o => Period(o.period)\n                    },\n                    {\n                        label: \"Status\",\n                        path : \"status\"\n                    }\n                ]}\n            />\n        )\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./components/Fhir/CarePlan.js","import React            from \"react\"\nimport PropTypes        from \"prop-types\"\nimport { CODE_SYSTEMS } from \"../../lib/constants\"\nimport Grid             from \"./Grid\"\nimport Date             from \"./Date\"\nimport { \n    getPath, \n    getCodeOrConcept, \n    codeIsNLPInsight, \n    getInsightSource, \n    InsightSource \n} from \"../../lib\"\nimport moment           from \"moment\"\n\nexport default class ConditionList extends React.Component\n{\n    static propTypes = {\n        resources: PropTypes.arrayOf(PropTypes.object)\n    };\n\n    // https://reactjs.org/docs/handling-events.html\n    constructor(props) {\n        super(props);\n        this.state = { doHighlight: false }\n        this.toggleHighlight = this.toggleHighlight.bind(this);\n    }\n\n    toggleHighlight() {\n        this.setState(prevState => ({ \n            doHighlight: !prevState.doHighlight \n        }) );\n    }\n\n    render()\n    {\n        let recs   = this.props.resources || []\n        let length = recs.length;\n\n        return (\n            <Grid\n                rows={(recs || []).map(o => o.resource)}\n                title={`${length} Condition${length === 1 ? \"\" : \"s\"}`}\n                comparator={(a,b) => {\n                    let dA = getPath(a, \"onsetDateTime\");\n                    let dB = getPath(b, \"onsetDateTime\");\n                    dA = dA ? +moment(dA) : 0;\n                    dB = dB ? +moment(dB) : 0;\n                    return dB - dA;\n                }}\n                cols={[\n                    {\n                        label: \"Condition\",\n                        render: o => {\n                            let name   = \"-\";\n                            let code   = \"-\";\n                            let system = \"\";\n\n                            let highlight = \"\";\n                            if ( this.state.doHighlight && codeIsNLPInsight(o.code) ) {\n                                highlight = \"mark\";\n                            }\n\n                            if (o.code) {\n                                if (o.code.text) {\n                                    name = o.code.text;\n                                }\n                                if (Array.isArray(o.code.coding) && o.code.coding.length) {\n                                    let c = o.code.coding[0]\n\n                                    system = c.system\n                                    for (let key in CODE_SYSTEMS) {\n                                        if (CODE_SYSTEMS[key].url === c.system) {\n                                            system = `(${key})`;\n                                            break;\n                                        }\n                                    }\n\n                                    if (c.display) {\n                                        name = c.display\n                                    }\n                                    if (c.code) {\n                                        code = c.code\n                                    }\n                                }\n                            }\n                            return (\n                                <div>\n                                    <b>{ name }</b>\n                                    <small className={highlight+\" text-muted pull-right\"}>\n                                        { code } {system}\n                                    </small>\n                                </div>\n                            )\n                        }\n                    },\n                    {\n                        label: <div className=\"text-center\">Clinical Status</div>,\n                        render: o => <div className=\"text-center\">{ o.clinicalStatus ? getCodeOrConcept(o.clinicalStatus) : \"-\" }</div>\n                    },\n                    {\n                        label : <div className=\"text-center\">Verification Status</div>,\n                        render: o => <div className=\"text-center\">{ o.verificationStatus ? getCodeOrConcept(o.verificationStatus) : \"-\" }</div>\n                    },\n                    {\n                        label: <div className=\"text-center\">Onset Date</div>,\n                        render : o => {\n                            let onset = o.onsetDateTime || \"\";\n                            return (\n                                <div className=\"text-center\">\n                                    {\n                                        onset ?\n                                        <Date moment={o.onsetDateTime}/> :\n                                        \"-\"\n                                    }\n                                </div>\n                            );\n                        }\n                    },\n                    {\n                        label: <div style={{textAlign: 'center'}}>\n                            <button\n                                onMouseUp={ this.toggleHighlight }\n                                style={{ \n                                    backgroundColor: this.state.doHighlight ? '#337ab7' : 'white',\n                                    color: this.state.doHighlight ? 'white' : '#337ab7',\n                                    textAlign: 'center'\n                                }}\n                            >\n                                <i className=\"fa fa-lightbulb-o fas fa-bold\"/>\n                            </button>\n                        </div>,\n                        render: o => {\n                            if ( getInsightSource(o) != InsightSource.NONE ) {\n                                return (\n                                    <div style={{ color: '#337ab7', textAlign: 'center' }}>\n                                        <button>\n                                            <i className=\"fa fa-lightbulb-o fas fa-bold\"/>\n                                        </button>\n                                    </div>\n                                )\n                            } else {\n                                return ( <div/> )\n                            }\n                        }\n                    }\n                ]}\n            />\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./components/Fhir/ConditionList.js","import React       from \"react\"\nimport PropTypes   from \"prop-types\"\nimport moment      from \"moment\"\nimport Grid        from \"./Grid\"\nimport { getPath } from \"../../lib\"\nimport Period      from \"./Period\"\n\nfunction getEncounterClass(encounter) {\n    return encounter.class && typeof encounter.class == \"object\" ?\n        getPath(encounter, \"class.type.0.text\") :\n        encounter.class;\n}\n\nfunction getEncounterLabel(encounter) {\n    let result = getPath(encounter, \"type.0.text\");\n    if (result) {\n        return result;\n    }\n    let _class = getEncounterClass(encounter);\n    if (_class) {\n        return _class + \" encounter\";\n    }\n    return \"\";\n}\n\nexport default class Encounter extends React.Component\n{\n    static propTypes = {\n        resources: PropTypes.arrayOf(PropTypes.object)\n    };\n\n    render()\n    {\n        return (\n            <Grid\n                rows={ (this.props.resources || []).map(o => o.resource) }\n                title={ `Encounter${this.props.resources.length === 1 ? \"\" : \"s\"}` }\n                groupBy=\"Type\"\n                comparator={(a,b) => {\n                    let dA = getPath(a, \"period.start\");\n                    let dB = getPath(b, \"period.start\");\n                    dA = dA ? +moment(dA) : 0;\n                    dB = dB ? +moment(dB) : 0;\n                    return dB - dA;\n                }}\n                cols={[\n                    {\n                        label: \"Type\",\n                        path: rec => getEncounterLabel(rec),\n                        render: rec => {\n                            let result = getPath(rec, \"type.0.text\");\n                            if (result) {\n                                return <b>{ result }</b>;\n                            }\n                            let _class = getEncounterClass(rec);\n                            if (_class) {\n                                return (\n                                    <span className=\"text-muted\">{_class + \" encounter\"}</span>\n                                );\n                            }\n                            return <small className=\"text-muted\">N/A</small>;\n                        }\n                    },\n                    {\n                        label: \"Reason\",\n                        path : \"reason.0.coding.0.display\",\n                        defaultValue: \"N/A\"\n                    },\n                    {\n                        label: \"Class\",\n                        render: rec => {\n                            let result = getEncounterClass(rec);\n                            return result ?\n                                <b>{ result }</b> :\n                                <small className=\"text-muted\">N/A</small>;\n                        }\n                    },\n                    {\n                        label: \"Status\",\n                        path : \"status\",\n                        defaultValue: \"N/A\"\n                    },\n                    {\n                        label: \"Time\",\n                        path : \"period\",\n                        render: o => Period(o.period || {})\n                    }\n                ]}\n            />\n        )\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./components/Fhir/Encounter.js","import React       from \"react\"\nimport PropTypes   from \"prop-types\"\nimport moment      from \"moment\"\nimport Grid        from \"./Grid\"\nimport Date        from \"./Date\"\nimport { \n    getPath, \n    codeIsNLPInsight, \n    getInsightSource, \n    InsightSource \n} from \"../../lib\"\n\nexport default class ImmunizationList extends React.Component\n{\n    static propTypes = {\n        resources: PropTypes.arrayOf(PropTypes.object)\n    };\n\n    // https://reactjs.org/docs/handling-events.html\n    constructor(props) {\n        super(props);\n        this.state = { doHighlight: false }\n        this.toggleHighlight = this.toggleHighlight.bind(this);\n    }\n\n    toggleHighlight() {\n        this.setState(prevState => ({ \n            doHighlight: !prevState.doHighlight \n        }) );\n    }\n\n    render()\n    {\n        return (\n            <Grid\n                rows={ (this.props.resources || []).map(o => o.resource) }\n                title=\"Immunizations\"\n                groupBy=\"Type\"\n                comparator={(a,b) => {\n                    let dA = getPath(a, \"date\");\n                    let dB = getPath(b, \"date\");\n                    dA = dA ? +moment(dA) : 0;\n                    dB = dB ? +moment(dB) : 0;\n                    return dB - dA;\n                }}\n                cols={[\n                    {\n                        label: \"Type\",\n                        render: o => (\n                            <div className={codeIsNLPInsight(getPath(o, \"vaccineCode\")) ? \"mark\" : \"\"}>\n                                { getPath(o, \"vaccineCode.coding.0.display\") }\n                            </div>\n                        )\n                    },\n                    {\n                        label: \"Status\",\n                        render: o => o.status || \"-\"\n                    },\n                    {\n                        label: \"Date\",\n                        render: o => (\n                            o.date ?\n                                <Date moment={o.date}/> :\n                                o.occurrenceDateTime ?\n                                    <Date moment={o.occurrenceDateTime}/> :\n                                    o.occurrenceString || \"-\"\n                        )\n                    },\n                    {\n                        label: <div style={{textAlign: 'center'}}>\n                            <button\n                                onMouseUp={ this.toggleHighlight }\n                                style={{ \n                                    backgroundColor: this.state.doHighlight ? '#337ab7' : 'white',\n                                    color: this.state.doHighlight ? 'white' : '#337ab7',\n                                    textAlign: 'center'\n                                }}\n                            >\n                                <i className=\"fa fa-lightbulb-o fas fa-bold\"/>\n                            </button>\n                        </div>,\n                        render: o => {\n                            if ( getInsightSource(o) != InsightSource.NONE ) {\n                                return (\n                                    <div style={{ color: '#337ab7', textAlign: 'center' }}>\n                                        <button>\n                                            <i className=\"fa fa-lightbulb-o fas fa-bold\"/>\n                                        </button>\n                                    </div>\n                                )\n                            } else {\n                                return ( <div/> )\n                            }\n                        }\n                    }\n                ]}\n            />\n        );\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./components/Fhir/ImmunizationList.js","import React       from \"react\"\nimport PropTypes   from \"prop-types\"\nimport moment      from \"moment\"\nimport { getPath } from \"../../lib\"\nimport Grid        from \"./Grid\"\nimport ValueRange  from \"./ValueRange\"\nimport Time        from \"./Time\"\nimport Period      from \"./Period\"\nimport Date        from \"./Date\"\n\nexport default class Observations extends React.Component\n{\n    static propTypes = {\n        resources: PropTypes.arrayOf(PropTypes.object)\n    };\n\n    getObservationLabel(o) {\n        return (\n            getPath(o, \"code.coding.0.display\") ||\n            getPath(o, \"code.text\") ||\n            getPath(o, \"valueQuantity.code\")\n        );\n    }\n\n    renderObservation(o, includeLabel = false) {\n        if (Array.isArray(o.component)) {\n            return o.component.map((c, i) => {\n                let result = this.renderObservation(c, true);\n                return (\n                    <span key={i}>\n                        { i > 0 && <span>,&nbsp;</span> }\n                        {result}\n                    </span>\n                );\n            });\n        }\n\n        const returnResult = result => {\n            return (\n                <span>\n                    {includeLabel && <label className=\"text-muted\">{\n                        this.getObservationLabel(o)\n                        .replace(/^\\s*(Systolic|Diastolic)\\s+blood\\s+pressure\\s*$/gi, \"$1\")\n                    }:&nbsp;</label>}\n                    {result}\n                </span>\n            );\n        };\n\n        // valueBoolean\n        if (o.hasOwnProperty(\"valueBoolean\")) {\n            return returnResult(\n                !o.valueBoolean || o.valueBoolean == \"false\" ?\n                \"Negative\" :\n                \"Positive\"\n            );\n        }\n\n        // valueString\n        if (o.hasOwnProperty(\"valueString\")) {\n            return returnResult(String(o.valueString));\n        }\n\n        // valueRange\n        if (o.hasOwnProperty(\"valueRange\")) {\n            return returnResult(<ValueRange range={o.valueRange}/>)\n        }\n\n        // valueTime\n        if (o.hasOwnProperty(\"valueTime\")) {\n            return returnResult(<Time moment={o.valueTime}/>)\n        }\n\n        // valueDateTime\n        if (o.hasOwnProperty(\"valueDateTime\")) {\n            return returnResult(<Date moment={o.valueDateTime}/>)\n        }\n\n        // valuePeriod\n        if (o.hasOwnProperty(\"valuePeriod\")) {\n            return returnResult(Period(o.valuePeriod));\n        }\n\n        // valueCodeableConcept\n        if (o.hasOwnProperty(\"valueCodeableConcept\")) {\n            return returnResult(getPath(o, \"valueCodeableConcept.coding.0.display\"));\n        }\n\n        // valueQuantity\n        if (o.hasOwnProperty(\"valueQuantity\")) {\n            let value = getPath(o, \"valueQuantity.value\");\n            let units = getPath(o, \"valueQuantity.unit\");\n\n            if (!isNaN(parseFloat(value))) {\n                value = Math.round(value * 100) / 100;\n            }\n\n            return returnResult(\n                <span>{value} <span className=\"text-muted\">{units}</span></span>\n            );\n        }\n\n        /* TODO:\n        valueRatio      : Ratio\n        valueSampledData: SampledData\n        valueAttachment : Attachment\n        */\n\n        return returnResult(<span className=\"text-muted\">N/A</span>)\n    }\n\n    render()\n    {\n        return (\n            <Grid\n                rows={ (this.props.resources || []).map(o => o.resource) }\n                title=\"Observations\"\n                groupBy=\"Name\"\n                comparator={(a,b) => {\n                    let dA = getPath(a, \"effectiveDateTime\") || getPath(a, \"meta.lastUpdated\");\n                    let dB = getPath(b, \"effectiveDateTime\") || getPath(b, \"meta.lastUpdated\");\n                    dA = dA ? +moment(dA) : 0;\n                    dB = dB ? +moment(dB) : 0;\n                    return dB - dA;\n                }}\n                cols={[\n                    {\n                        label : \"Name\",\n                        path  : o => this.getObservationLabel(o),\n                        render: o => <b>{this.getObservationLabel(o)}</b>\n                    },\n                    {\n                        label : \"Value\",\n                        render: o => this.renderObservation(o)\n                    },\n                    {\n                        label: \"Date\",\n                        render: o => {\n                            let date = getPath(o, \"effectiveDateTime\") || getPath(o, \"meta.lastUpdated\");\n                            if (date) date = moment(date).format(\"MM/DD/YYYY\");\n                            return <div className=\"text-muted\">{ date || \"-\" }</div>\n                        }\n                    }\n                ]}\n            />\n        )\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/Fhir/Observation.js","import React     from \"react\"\nimport PropTypes from \"prop-types\"\nimport moment    from \"moment\"\nimport Grid      from \"./Grid\"\nimport Date      from \"./Date\"\nimport {\n    getPath,\n    getPatientName\n} from \"../../lib\"\n\nexport default class Person extends React.Component\n{\n    static propTypes = {\n        resources: PropTypes.arrayOf(PropTypes.object),\n        title    : PropTypes.string\n    };\n\n    static defaultProps = {\n        title: \"Person\"\n    };\n\n    render()\n    {\n        return (\n            <Grid\n                rows={ (this.props.resources || []).map(o => o.resource) }\n                title={ this.props.title }\n                comparator={(a,b) => {\n                    let dA = getPath(a, \"birthDate\");\n                    let dB = getPath(b, \"birthDate\");\n                    dA = dA ? +moment(dA) : 0;\n                    dB = dB ? +moment(dB) : 0;\n                    return dB - dA;\n                }}\n                cols={[\n                    {\n                        label: \"Identifier\",\n                        render: rec => {\n                            let rows = [\n                                <tr key=\"id\">\n                                    <td className=\"label-cell\">ID</td>\n                                    <td>{rec.id}</td>\n                                </tr>\n                            ]\n\n                            if (Array.isArray(rec.identifier)) {\n                                rows = rows.concat(rec.identifier.map(o => {\n                                    let code = getPath(o, \"type.coding.0.display\") ||\n                                               getPath(o, \"type.text\") ||\n                                               getPath(o, \"type.coding.0.code\") ||\n                                               String(getPath(o, \"system\") || \"\").split(/\\b/).pop();\n                                    if (!code) return null;\n                                    return (\n                                        <tr key={code}>\n                                            <td className=\"label-cell\">{code}</td>\n                                            <td>{o.value}</td>\n                                        </tr>\n                                    )\n                                }).filter(Boolean))\n                            }\n\n                            return (\n                                <table>\n                                    <tbody>{ rows }</tbody>\n                                </table>\n                            );\n                        }\n                    },\n                    {\n                        label: \"Name\",\n                        render: getPatientName,\n                        defaultValue: \"N/A\"\n                    },\n                    {\n                        label: \"Gender\",\n                        path: \"gender\",\n                        defaultValue: \"N/A\"\n                    },\n                    {\n                        label: \"Birth Date\",\n                        path: \"birthDate\",\n                        defaultValue: \"N/A\",\n                        render: o => <Date moment={o.birthDate}/>\n                    }\n                ]}\n            />\n        );\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./components/Fhir/Person.js","import React       from \"react\"\nimport PropTypes   from \"prop-types\"\nimport Grid        from \"./Grid\"\nimport { \n    getPath, \n    getCodeOrConcept, \n    codeIsNLPInsight, \n    getInsightSource, \n    InsightSource \n} from \"../../lib\"\nimport Period      from \"./Period\"\nimport Date        from \"./Date\"\nimport moment      from \"moment\"\nimport InsightsPopup from \"../InsightsPopup\"\n\nfunction renderCell(record, doHighlight, allOf, oneOf) {\n\n    const entries = [];\n\n    const visit = meta => {\n        let propValue = getPath(record, meta.path);\n        if (propValue !== undefined) {\n            let value = meta.render ? meta.render(record) : propValue;\n            let isNLP = doHighlight && Boolean(meta.nlpCodePath) && codeIsNLPInsight(getPath(record, meta.nlpCodePath));\n            let raw   = meta.raw ? meta.raw(record) : value;\n            let label = typeof meta.label == \"function\" ? meta.label(record) : meta.label;\n            let existing = entries.find(o => o.value === raw);\n            if (existing) {\n                existing.label += \", \" + label\n                if (isNLP) {\n                    existing.isNLP = true;\n                }\n            }\n            else {\n                entries.push({ label, value, isNLP });\n            }\n            return true;\n        }\n        return false;\n    };\n\n    allOf.forEach(visit);\n\n    if (!entries.length) {\n        oneOf.some(visit);\n    }\n\n    if (entries.length) {\n        return (\n            <table>\n                <tbody>\n                    {\n                        entries.map((o, i) => (\n                            <tr key={i} className={o.isNLP ? \"mark\" : \"\"}>\n                                <td className=\"label-cell\">{ o.label }</td>\n                                <td>{ o.value }</td>\n                            </tr>\n                        ))\n                    }\n                </tbody>\n            </table>\n        );\n    }\n\n    return \"-\"\n}\n\nfunction getSortValue(rec) {\n    const paths = [\n        \"authoredOn\",\n        \"dateWritten\",\n        \"performedDateTime\",\n        \"recorded\",\n        \"performedPeriod.start\",\n        \"availableTime.0.availableStartTime\",\n        \"whenHandedOver\",\n        \"issued\",\n        \"effectiveDateTime\",\n        \"assertedDate\",\n        \"meta.lastUpdated\"\n    ];\n\n    for (let i = 0, l = paths.length; i < l; i++) {\n        let v = getPath(rec, paths[i]);\n        if (v !== undefined) {\n            return v\n        }\n    }\n\n    return 0;\n}\n\nfunction DataLink({settings, path, children}) {\n    let url = `${settings.server.url}/${path}`;\n    if (settings.fhirViewer.enabled) {\n        url = settings.fhirViewer.url +\n            (settings.fhirViewer.url.indexOf(\"?\") > -1 ? \"&\" : \"?\") +\n            settings.fhirViewer.param + \"=\" +\n            encodeURIComponent(url);\n    }\n    return <a onClick={ () => {\n        window.open(url, \"_blank\");\n        return false;\n    }}>{ children }</a>\n}\n\nDataLink.propTypes = {\n    settings: PropTypes.object.isRequired,\n    path    : PropTypes.string.isRequired,\n    children: PropTypes.any\n}\n\nexport default class ResourceList extends React.Component\n{\n    static propTypes = {\n        type     : PropTypes.string,\n        resources: PropTypes.arrayOf(PropTypes.object).isRequired,\n        settings : PropTypes.object.isRequired\n    };\n\n    // https://reactjs.org/docs/handling-events.html\n    constructor(props) {\n        super(props);\n        this.state = {\n            doHighlight: false,\n            showPopup: false\n        }\n        this.toggleHighlight = this.toggleHighlight.bind(this);\n        this.closePopup = this.closePopup.bind(this);\n        this.openPopup = this.openPopup.bind(this);\n    }\n\n    toggleHighlight() {\n        this.setState(prevState => ({ \n            doHighlight: !prevState.doHighlight \n        }) );\n    }\n\n    closePopup() {\n        this.setState({showPopup: null});\n    }\n\n    openPopup(resource) {\n        this.setState({showPopup: resource});\n        console.log('button clicked')\n        console.log(JSON.stringify(resource))\n    }\n\n    /**\n     * The idea is to have 3 columns by default:\n     * 1. Identifier - something like a name, type, id etc.\n     * 2. Details - the important part that will describe the resource\n     * 3. Timing - time period, time, age etc.\n     * @returns {Array} The generated schema\n     */\n    determineSchema(sampleResource) {\n        const out = [];\n\n        if (!sampleResource) {\n            return out;\n        }\n\n        // 1. Identifier -------------------------------------------------------\n        out.push({\n            label: \"Identifier\",\n            render: o => renderCell(o, this.state.doHighlight, [\n                {\n                    path: \"id\",\n                    label: \"ID\",\n                    ellipsis: 15\n                },\n                {\n                    path: \"name\",\n                    label: \"Name\"\n                },\n                {\n                    path: \"identifier.0.type.coding.0.code\",\n                    label: \"Identifiers\",\n                    render: rec => {\n                        if (Array.isArray(rec.identifier)) {\n                            return rec.identifier.map(id => {\n                                let code = getPath(id, \"type.coding.0.code\");\n                                if (!code) return null;\n                                return code + \": \" + id.value;\n                            }).filter(Boolean).join(\", \")\n                        }\n                        return \"-\"\n                    }\n                }\n            ])\n        });\n\n        // 2. Details ----------------------------------------------------------\n        out.push({\n            label: \"Details\",\n            render: o => renderCell(o, this.state.doHighlight, [\n                {\n                    path: \"description.text\",\n                    label: \"Description\"\n                },\n                {\n                    path: \"code.text\",\n                    label: \"Code\"\n                },\n                {\n                    path: \"code.coding.0.display\",\n                    nlpCodePath: \"code\",\n                    label: \"Display\"\n                },\n                {\n                    path: \"medicationCodeableConcept.coding.0.display\",\n                    nlpCodePath: \"medicationCodeableConcept\",\n                    label: \"Medication\"\n                },\n                {\n                    path: \"medicationCodeableConcept.coding.0.code\",\n                    nlpCodePath: \"medicationCodeableConcept\",\n                    label: rec => (getPath(rec, \"medicationCodeableConcept.coding.0.system\") || \"\").split(/\\b/).pop()\n                },\n                {\n                    path: \"code.coding.0.code\",\n                    nlpCodePath: \"code\",\n                    label: rec => ((getPath(rec, \"code.coding.0.system\") || \"\")\n                        .replace(/\\/$/, \"\").split(/\\//).pop() + \" code\")\n                },\n                {\n                    path: \"result.0.display\",\n                    label: \"Result\",\n                    render: rec => rec.result.map(r => r.display || 0).filter(Boolean).join(\", \")\n                },\n                {\n                    label: \"Status\",\n                    render: rec => getCodeOrConcept(rec.status)\n                },\n                {\n                    label: \"Clinical Status\",\n                    render: rec => getCodeOrConcept(rec.clinicalStatus)\n                },\n                {\n                    label: \"Verification Status\",\n                    render: rec => getCodeOrConcept(rec.verificationStatus)\n                },\n                {\n                    label: \"Value as String\",\n                    path: \"valueString\"\n                },\n                {\n                    label: \"Comment\",\n                    path: \"comment\"\n                },\n                {\n                    label: \"Extra Details\",\n                    path: \"extraDetails\"\n                },\n                {\n                    label: \"Type\",\n                    path: \"type\",\n                    render: rec => {\n                        if (Array.isArray(rec.type)) {\n                            return rec.type.map(t => {\n                                return t.text || getPath(t, \"coding.0.display\") || \"\";\n                            }).filter(Boolean).join(\", \")\n                        }\n                        return String(getPath(rec, \"type.coding.0.display\") || getPath(rec, \"type.text\") || rec.type);\n                    }\n                },\n                {\n                    label: \"Criticality\",\n                    path: \"criticality\"\n                },\n                {\n                    label: \"Category\",\n                    path: \"category\",\n                    render: rec => {\n                        function renderCategory(c) {\n                            if (!c) {\n                                return \"N/A\";\n                            }\n\n                            if (typeof c == \"string\") {\n                                return c;\n                            }\n\n                            if (Array.isArray(c)) {\n                                return c.map(renderCategory).join(\", \");\n                            }\n\n                            if (typeof c != \"object\") {\n                                return \"N/A\";\n                            }\n\n                            return c.text || c.display || c.code || renderCategory(c.coding);\n                        }\n\n                        return renderCategory(rec.category);\n                    }\n                },\n                {\n                    label: \"Quantity\",\n                    path: \"quantity.value\",\n                    render: rec => (\n                        <span>\n                            {rec.quantity.value}\n                            <span className=\"text-muted\"> {\n                                rec.quantity.unit || rec.quantity.units || \"\"\n                            }</span>\n                        </span>\n                    )\n                },\n                {\n                    label: \"Days Supply\",\n                    path: \"daysSupply.value\",\n                    render: rec => (\n                        <span>\n                            {rec.daysSupply.value}\n                            <span className=\"text-muted\">&nbsp;{\n                                rec.daysSupply.unit || rec.daysSupply.units || \"\"\n                            }</span>\n                        </span>\n                    )\n                },\n                {\n                    label: \"Medication\",\n                    path: \"medicationReference.reference\",\n                    render: rec => (\n                        <DataLink\n                            settings={this.props.settings}\n                            path={rec.medicationReference.reference}\n                        >{ rec.medicationReference.reference }</DataLink>\n                    )\n                }\n            ], [\n                {\n                    path: \"text.div\",\n                    label: \"Text\",\n                    render: rec => <span dangerouslySetInnerHTML={{ __html: rec.text.div }}/>\n                }\n            ])\n        });\n\n        // 3. Timings ----------------------------------------------------------\n        out.push({\n            label: \"Date\",\n            render: o => renderCell(o, [\n                {\n                    path: \"authoredOn\",\n                    label: \"Authored On\",\n                    render: rec => <Date moment={rec.authoredOn}/>\n                },\n                {\n                    path: \"dateWritten\",\n                    label: \"Date Written\",\n                    render: rec => <Date moment={rec.dateWritten}/>\n                },\n                {\n                    path: \"performedDateTime\",\n                    label: \"Performed At\",\n                    render: rec => <Date moment={rec.performedDateTime}/>\n                },\n                {\n                    path: \"recorded\",\n                    label: \"Recorded\",\n                    render: rec => <Date moment={rec.recorded}/>\n                },\n                {\n                    path: \"performedPeriod\",\n                    label: \"Performed\",\n                    render: rec => Period(rec.performedPeriod)\n                },\n                {\n                    path: \"availableTime\",\n                    label: \"Available Time\",\n                    render: rec => {\n                        if (Array.isArray(rec.availableTime)) {\n                            return rec.availableTime.map((t, i) => (\n                                <div key={i}>\n                                    { t.availableStartTime && (<span>\n                                        <label>from:&nbsp;</label>\n                                        <span>{ t.availableStartTime }&nbsp;</span>\n                                    </span>) }\n                                    { t.availableEndTime && (<span>\n                                        <label>to:&nbsp;</label>\n                                        <span>{ t.availableEndTime }</span>\n                                    </span>) }\n                                </div>\n                            ));\n                        }\n                    }\n                },\n                {\n                    path: \"whenHandedOver\",\n                    label: \"Handed Over\",\n                    render: rec => <Date moment={rec.whenHandedOver}/>\n                },\n                {\n                    path: \"issued\",\n                    label: \"Issued\",\n                    raw   : rec => moment(rec.issued).format(\"MM/DD/YYYY\"),\n                    render: rec =><Date moment={rec.issued}/>\n                },\n                {\n                    path: \"effectiveDateTime\",\n                    label: \"Effective\",\n                    raw   : rec => moment(rec.effectiveDateTime).format(\"MM/DD/YYYY\"),\n                    render: rec => <Date moment={rec.effectiveDateTime}/>\n                },\n                {\n                    path: \"assertedDate\",\n                    label: \"Asserted\",\n                    raw   : rec => rec.assertedDate,\n                    render: rec => <Date moment={rec.assertedDate}/>\n                }\n            ], [\n                {\n                    path: \"meta.lastUpdated\",\n                    label: \"Last Updated\",\n                    raw   : rec => rec.meta.lastUpdated,\n                    render: rec => <Date moment={rec.meta.lastUpdated}/>\n                }\n            ])\n        });\n\n        // 4. Insights ---------------------------------------------------------\n        out.push ({\n            label: <div style={{textAlign: 'center'}}>\n                <button\n                    onMouseUp={ this.toggleHighlight }\n                    style={{ \n                        backgroundColor: this.state.doHighlight ? '#337ab7' : 'white',\n                        color: this.state.doHighlight ? 'white' : '#337ab7',\n                        textAlign: 'center'\n                    }}\n                >\n                    <i className=\"fa fa-lightbulb-o fas fa-bold\"/>\n                </button>\n            </div>,\n            render: o => {\n                if ( getInsightSource(o) != InsightSource.NONE ) {\n                    return (\n                        <div style={{ color: '#337ab7', textAlign: 'center' }}>\n                            <button onMouseUp={ this.openPopup(o) }>\n                                <i className=\"fa fa-lightbulb-o fas fa-bold\"/>\n                            </button>\n                        </div>\n                    )\n                } else {\n                    return ( <div/> )\n                }\n            }\n        })\n\n        return out;\n    }\n\n    render()\n    {\n        let recs   = this.props.resources || []\n        let length = recs.length;\n        return (\n            <div>\n                <Grid\n                    rows={recs.map(o => o.resource)}\n                    title={`${length} resource${length === 1 ? \"\" : \"s\"} of type ${this.props.type}`}\n                    cols={this.determineSchema(recs[0].resource)}\n                    comparator={(a,b) => {\n                        let dA = getSortValue(a);\n                        let dB = getSortValue(b);\n                        dA = dA ? +moment(dA) : 0;\n                        dB = dB ? +moment(dB) : 0;\n                        return dB - dA;\n                    }}\n                />\n                <p>Please can I get Something to display</p>\n                <div style={{display: 'none', position: 'fixed', zIndex: 1}}>\n                    <div style={{backgroundColor: 'white', position: 'absolute'}}>\n                        <p>I'm A Pop Up!!!</p>\n                    </div>\n                </div>\n                <InsightsPopup resource={this.state.showPopup} closeWindow={this.closePopup} />\n                {this.state.showPopup ? <InsightsPopup resource={this.state.showPopup} closeWindow={this.closePopup} /> : null}\n            </div>\n        )\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./components/Fhir/ResourceList.js","import React     from \"react\"\nimport PropTypes from \"prop-types\"\nimport Moment    from \"moment\"\n\nexport default function Time({ moment, format=\"HH:mm\", ...rest }) {\n    return <span {...rest}>{ Moment(moment).format(format) }</span>;\n}\n\nTime.propTypes = {\n    format: PropTypes.string,\n    moment: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.instanceOf(Date),\n        PropTypes.object // moment\n    ]).isRequired\n};\n\n\n// WEBPACK FOOTER //\n// ./components/Fhir/Time.js","import React     from \"react\"\nimport PropTypes from \"prop-types\"\n\nexport default function ValueRange({ range }) {\n    let low = range.low;\n    let high = range.high;\n    return (\n        <span>\n            {\n                low !== undefined &&\n                <span>\n                    <span className=\"text-muted\">low: </span>\n                    <span>{ low }</span>\n                </span>\n            }\n            {\n                high !== undefined &&\n                <span>\n                    { low !== undefined && <span>&nbsp;</span> }\n                    <span className=\"text-muted\">high: </span>\n                    <span>{ high }</span>\n                </span>\n            }\n            {\n                high === undefined  && low === undefined &&\n                <small className=\"text-muted\">N/A</small>\n            }\n        </span>\n    );\n}\n\nValueRange.propTypes = {\n    range: PropTypes.object.isRequired\n};\n\n\n// WEBPACK FOOTER //\n// ./components/Fhir/ValueRange.js","import React               from \"react\"\nimport PropTypes           from \"prop-types\"\nimport { goNext, goPrev }  from \"../../redux/query\"\nimport { getBundleURL }    from \"../../lib\"\nimport DialogFooter        from \"../DialogFooter\"\nimport                          \"./Footer.less\"\n\n\nexport default class Footer extends React.Component\n{\n    static propTypes = {\n        bundle   : PropTypes.object,\n        query    : PropTypes.object.isRequired,\n        dispatch : PropTypes.func.isRequired,\n        selection: PropTypes.object.isRequired,\n        canShowSelected : PropTypes.bool\n    };\n\n    render() {\n        let msg     = this.props.query.error ? \" Error! \" : \" Loading... \";\n        let bundle  = this.props.bundle;\n        let hasPrev = bundle && getBundleURL(bundle, \"previous\");\n        let hasNext = bundle && getBundleURL(bundle, \"next\");\n\n        if (bundle && !this.props.query.error) {\n            if (this.props.query.params._id) {\n                msg = \"Showing the selected patients only\"\n            }\n            else {\n                let len = bundle && bundle.entry ? bundle.entry.length : 0\n                if (len) {\n                    let startRec = +(this.props.query.offset || 0) + 1\n                    let endRec   = startRec + len - 1;\n\n                    msg = ` patient ${startRec} to ${ endRec } `\n\n                    if (\"total\" in bundle) {\n                        msg += ` of ${bundle.total} `\n                    }\n                }\n                else {\n                    msg = ` No Records! `\n                }\n            }\n        }\n\n        return (\n            <div className=\"app-footer\">\n                <div className=\"container-fluid\" style={{ width: \"100%\" }}>\n                    <div className=\"row\">\n                        <div className=\"col-xs-3 col-sm-4 text-right\">\n                            <a\n                                href=\"#prev\"\n                                onClick={ e => { e.preventDefault(); this.props.dispatch(goPrev()) }}\n                                disabled={ !hasPrev }\n                            >\n                                <i className=\"fa fa-arrow-left\"/> Prev\n                            </a>\n                        </div>\n                        <div className=\"col-xs-6 col-sm-4 text-center\">\n                            { msg }\n                        </div>\n                        <div className=\"col-xs-3 col-sm-4 text-left\">\n                            <a\n                                href=\"#next\"\n                                onClick={ e => { e.preventDefault(); this.props.dispatch(goNext()) }}\n                                disabled={!hasNext}\n                            >\n                                Next <i className=\"fa fa-arrow-right\"/>\n                            </a>\n                        </div>\n                    </div>\n                    <DialogFooter canShowSelected={this.props.canShowSelected}/>\n                </div>\n            </div>\n        )\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/Footer/index.js","\nimport React     from \"react\"\nimport PropTypes from \"prop-types\"\nimport            \"./Header.less\"\nimport {\n    fetch,\n    setGender,\n    setAgeGroup,\n    setMinAge,\n    setMaxAge,\n    setConditions,\n    setTags,\n    setParam,\n    setQueryString,\n    setQueryType,\n    setSort\n} from \"../../redux/query\"\nimport store       from \"../../redux\"\nimport TagSelector from \"../TagSelector\"\nimport AgeSelector from \"../AgeSelector\"\nimport SortWidget  from \"../SortWidget\"\nimport {\n    parseQueryString,\n    setHashParam\n} from \"../../lib\"\n\nexport default class Header extends React.Component\n{\n    static propTypes = {\n        settings : PropTypes.object.isRequired,\n        query    : PropTypes.object.isRequired,\n        location : PropTypes.object.isRequired,\n        urlParams: PropTypes.object.isRequired\n    };\n\n    fetch(delay=500) {\n        if (this.props.settings.submitStrategy == \"automatic\") {\n            if (this.fetchDelay) {\n                clearTimeout(this.fetchDelay);\n            }\n            this.fetchDelay = setTimeout(() => {\n                store.dispatch(fetch())\n            }, delay)\n        }\n        // else {\n        //     store.dispatch(fetch())\n        // }\n    }\n\n    renderAdvancedTabContents() {\n        return (\n            <div className=\"form-group\">\n                <p className=\"text-warning\" style={{ padding: \"0 5px 5px\", margin: 0 }}>\n                    <i className=\"fa fa-info-circle\" /> In advanced mode, provide a\n                    query string to browse and select from a list of matching\n                    patients. <a target=\"_blank\" href=\"http://hl7.org/fhir/patient.html#search\">More Info...</a>\n                </p>\n                <form onSubmit={ e => {\n                    e.preventDefault()\n                    store.dispatch(fetch())\n                }}>\n                    <div className=\"input-group input-group-sm\">\n                        <span className=\"input-group-addon\">/Patient?</span>\n                        <input\n                            type=\"text\"\n                            className=\"form-control\"\n                            placeholder=\"Patient Search Query String\"\n                            name=\"query\"\n                            onChange={ e => store.dispatch(setQueryString(e.target.value)) }\n                            value={ this.props.query.queryString }\n                        />\n                        <span className=\"input-group-btn\">\n                            <button className=\"btn btn-warning\" type=\"submit\">Go</button>\n                        </span>\n                    </div>\n                </form>\n            </div>\n        )\n    }\n\n    renderDemographicsTabContents() {\n        return (\n            <form onSubmit={ e => {\n                e.preventDefault()\n                store.dispatch(fetch())\n            }}>\n                <div className=\"row\">\n                    <div className={ \"**custom**\" === this.props.query.ageGroup ? \"col-sm-6\" : \"col-sm-12\" }>\n                        <div className=\"form-group\">\n                            {/*<label>Name:</label>*/}\n                            <div className=\"input-group\">\n                                <span className=\"input-group-addon\"><small>Name:</small></span>\n                                <input\n                                    type=\"text\"\n                                    className=\"form-control input-sm\"\n                                    placeholder=\"Search by name...\"\n                                    value={ this.props.query.params.name || \"\" }\n                                    onChange={e => {\n                                        store.dispatch(setParam({\n                                            name : \"name\",\n                                            value: e.target.value\n                                        }))\n                                        this.fetch()\n                                    }}\n                                />\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"col-sm-6\">\n                        <div className=\"form-group\">\n                            {/*<label>Gender:</label>*/}\n                            <select\n                                className=\"form-control input-sm\"\n                                onChange={ e => {\n                                    store.dispatch(setGender(e.target.value))\n                                    this.fetch()\n                                }}\n                                value={ this.props.query.gender || \"\" }\n                            >\n                                <option value=\"male\">Males</option>\n                                <option value=\"female\">Females</option>\n                                <option value=\"\">Any Gender</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div className={ \"**custom**\" === this.props.query.ageGroup ? \"col-sm-12\" : \"col-sm-6\" }>\n                        <div className=\"form-group\">\n                            {/*<label>Age:</label>*/}\n                            <AgeSelector\n                                min={ this.props.query.minAge || { value: 0  , units: \"years\" } }\n                                max={ this.props.query.maxAge || { value: 100, units: \"years\" } }\n                                onMinChange={ age => {\n                                    store.dispatch(setMinAge(age))\n                                    //if (\"**custom**\" != this.props.query.ageGroup) {\n                                    this.fetch()\n                                    //}\n                                }}\n                                onMaxChange={ age => {\n                                    store.dispatch(setMaxAge(age))\n                                    //if (\"**custom**\" != this.props.query.ageGroup) {\n                                    this.fetch()\n                                    //}\n                                }}\n                                onGroupChange={ group => {\n                                    store.dispatch(setAgeGroup(group))\n                                    //if (\"**custom**\" != this.props.query.ageGroup) {\n                                    this.fetch()\n                                    //}\n                                }}\n                                //update={ () => this.fetch() }\n                                group={ this.props.query.ageGroup }\n                            />\n                        </div>\n                    </div>\n                </div>\n            </form>\n        )\n    }\n\n    renderConditionsTabContents() {\n        return (\n            <div className=\"row\">\n                <div className=\"col-sm-12\">\n                    <div className=\"form-group\">\n                        <TagSelector\n                            tags={\n                                Object.keys(this.props.settings.server.conditions).map(key => {\n                                    let condition = this.props.settings.server.conditions[key];\n                                    return {\n                                        key,\n                                        label: condition.description,\n                                        data : condition\n                                    }\n                                })\n                            }\n                            onChange={\n                                selection => {\n                                    let conditions = {}\n                                    selection.forEach(tag => {\n                                        conditions[tag.key] = tag.data\n                                    })\n                                    store.dispatch(setConditions(conditions))\n                                    this.fetch()\n                                }\n                            }\n                            label=\"condition code\"\n                            selected={ Object.keys(this.props.query.conditions) }\n                        />\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    renderTagsTabContents() {\n        let selected = this.props.query.tags || this.props.settings.server.tags.filter(\n            tag => !!tag.selected\n        ).map(tag => !!tag.key);\n        return (\n            <div className=\"row\">\n                <div className=\"col-sm-12\">\n                    <div className=\"form-group\">\n                        <TagSelector\n                            tags={ this.props.settings.server.tags }\n                            selected={ selected }\n                            onChange={\n                                sel => {\n                                    let tags = Object.keys(sel).map(k => sel[k].key)\n                                    store.dispatch(setTags(tags))\n                                    this.fetch()\n                                }\n                            }\n                            label=\"tag\"\n                        />\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    render() {\n        let _query    = parseQueryString(this.props.location.search);\n        let _advanced = this.props.query.queryType == \"advanced\";\n        let conditionsCount   = Object.keys(this.props.query.conditions).length;\n        let demographicsCount = 0;\n        let tagsCount         = Object.keys(this.props.query.tags).length;\n\n        // Compute which the active tab should be\n        let tabs = [\"demographics\", \"conditions\"];\n        if (!this.props.settings.hideTagSelector) {\n            tabs.push(\"tags\");\n        }\n        let _tab = _query._tab || \"\";\n        if (tabs.indexOf(_tab) == -1) {\n            _tab = \"demographics\";\n        }\n\n        // Manually increment the value for the demographics badge depending on\n        // the state of the app\n\n        if (this.props.query.gender) {\n            demographicsCount += 1;\n        }\n\n        if (this.props.query.params.name) {\n            demographicsCount += 1;\n        }\n\n        if (this.props.query.maxAge !== null || this.props.query.minAge !== null) {\n            demographicsCount += 1;\n        }\n\n        return (\n            <div className=\"app-header\">\n                <div style={{ flexDirection: \"row\" }}>\n                    <label className=\"pull-right advanced-label text-warning\">\n                        Advanced <span className=\"hidden-xs\">Mode </span> <input\n                            type=\"checkbox\"\n                            checked={ _advanced }\n                            onChange={ e => {\n                                store.dispatch(setQueryType(e.target.checked ? \"advanced\" : \"basic\"))\n                            }}\n                        />\n                    </label>\n                {\n                    _advanced ?\n                    <ul className=\"nav nav-tabs\"/> :\n                    <ul className=\"nav nav-tabs\">\n                        <li className={ !_advanced && _tab == \"demographics\" ? \"active\" : null }>\n                            <a href=\"\" onClick={ e => {e.preventDefault(); setHashParam(\"_tab\", \"demographics\")}}>\n                                <b>Demographics</b>\n                                {\n                                    demographicsCount ?\n                                    <span className=\"hidden-xs\"> <small className=\"badge\">{ demographicsCount }</small></span> :\n                                    null\n                                }\n                            </a>\n                        </li>\n                        <li className={ !_advanced && _tab == \"conditions\" ? \"active\" : null }>\n                            <a href=\"\" onClick={ e => {e.preventDefault(); setHashParam(\"_tab\", \"conditions\")}}>\n                                <b>Conditions</b>\n                                {\n                                    conditionsCount ?\n                                    <span className=\"hidden-xs\"> <small className=\"badge\">{ conditionsCount }</small></span> :\n                                    null\n                                }\n                            </a>\n                        </li>\n                        {\n                            (this.props.settings.hideTagSelector ||\n                            this.props.query.params._id) ?\n                            null :\n                            <li className={ !_advanced && _tab == \"tags\" ? \"active\" : null }>\n                                <a href=\"\" onClick={ e => {e.preventDefault(); setHashParam(\"_tab\", \"tags\")}}>\n                                    <b>Tags</b>\n                                    {\n                                        tagsCount ?\n                                        <span className=\"hidden-xs\"> <small className=\"badge\">{ tagsCount }</small></span> :\n                                        null\n                                    }\n                                </a>\n                            </li>\n                        }\n                    </ul>\n                }\n                </div>\n                <div className=\"tab-content\">\n                    <div className={ \"tab-pane \" + (_advanced ? \"active\" : \"\") }>\n                        { this.renderAdvancedTabContents() }\n                    </div>\n                    <div className={ \"tab-pane \" + (!_advanced && _tab == \"demographics\" ? \"active\" : \"\") }>\n                        { this.renderDemographicsTabContents() }\n                    </div>\n                    <div className={ \"tab-pane \" + (!_advanced && _tab == \"conditions\" ? \"active\" : \"\") }>\n                        { this.renderConditionsTabContents() }\n                    </div>\n                    {\n                        (this.props.settings.hideTagSelector ||\n                            this.props.query.params._id) ?\n                        null :\n                        <div className={ \"tab-pane \" + (!_advanced && _tab == \"tags\" ? \"active\" : \"\") }>\n                            { this.renderTagsTabContents() }\n                        </div>\n                    }\n                    {\n                        !_advanced && this.props.settings.submitStrategy == \"manual\" ?\n                        <div className=\"text-right\" style={{ height: 0 }}>\n                            <button\n                                type=\"button\"\n                                onClick={ () => store.dispatch(fetch()) }\n                                className=\"btn btn-primary btn-submit\"\n                            >\n                                <i className=\"fa fa-search\"/> Search\n                            </button>\n                        </div> :\n                        null\n                    }\n                </div>\n                {\n                    _advanced ?\n                    null :\n                    <SortWidget\n                        sort={ this.props.query.sort }\n                        onChange={ sort => {\n                            store.dispatch(setSort(sort))\n                            store.dispatch(fetch())\n                        }}\n                    />\n                }\n            </div>\n        )\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/Header/index.js","import React       from \"react\"\nimport PropTypes   from \"prop-types\"\nimport { \n    getPath, \n    getCodeOrConcept, \n    codeIsNLPInsight, \n    getInsightSource, \n    InsightSource \n} from \"../../lib\"\n\nexport default class InsightsPopup extends React.Component\n{\n    static PropTypes = {\n        resource:    PropTypes.object,\n        closeWindow: PropTypes.func\n    };\n\n    handleClick() {\n        this.props.closeWindow()\n    }\n\n    render()\n    {\n        let rec = this.props.resource\n        return (\n            <div style={{display: 'none', position: 'fixed', zIndex: '99'}}>\n                <div style={{backgroundColor: 'white', position: 'absolute'}}>\n                    <p>I'm A Pop Up!!!</p>\n                </div>\n            </div>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./components/InsightsPopup/index.js","import React                from \"react\"\nimport PropTypes            from \"prop-types\"\nimport PatientImage         from \"../PatientImage\"\nimport Loader               from \"../Loader\"\nimport { connect }          from \"react-redux\"\nimport $                    from \"jquery\"\nimport { Link }             from \"react-router-dom\"\nimport DialogFooter         from \"../DialogFooter\"\nimport { toggle }           from \"../../redux/selection\"\nimport store                from \"../../redux\"\nimport { queryBuilder }     from \"../../redux/query\"\nimport Observations         from \"../Fhir/Observation\"\nimport ImmunizationList     from \"../Fhir/ImmunizationList\"\nimport ConditionList        from \"../Fhir/ConditionList\"\nimport Encounter            from \"../Fhir/Encounter\"\nimport CarePlan             from \"../Fhir/CarePlan\"\nimport Person               from \"../Fhir/Person\"\nimport ResourceList         from \"../Fhir/ResourceList\"\nimport {\n    getErrorMessage,\n    getPatientName,\n    getPatientPhone,\n    getPatientEmail,\n    getPatientHomeAddress,\n    getPatientAge,\n    getPath,\n    intVal,\n    getBundleURL,\n    parseQueryString,\n    getPatientMRN,\n    getAllPages\n} from \"../../lib\"\nimport \"./PatientDetail.less\"\n\n/**\n * Renders the detail page.\n */\nexport class PatientDetail extends React.Component\n{\n    static propTypes = {\n        match    : PropTypes.object,\n        settings : PropTypes.object,\n        selection: PropTypes.object,\n        query    : PropTypes.object\n    };\n\n    constructor(...args)\n    {\n        super(...args)\n        this.query = queryBuilder.clone();\n        this.state = {\n            loading       : false,\n            error         : null,\n            conditions    : [],\n            patient       : {},\n            index         : 0,\n            hasNext       : false,\n            groups        : {},\n            selectedSubCat: \"\",\n            bundle        : $.isEmptyObject(this.props.query.bundle) ?\n                null :\n                { ...this.props.query.bundle }\n        };\n    }\n\n    componentDidMount()\n    {\n        this.fetch(this.props.match.params.index);\n    }\n\n    componentWillReceiveProps(newProps)\n    {\n        if (newProps.match.params.index !== this.props.match.params.index) {\n            this.fetch(newProps.match.params.index);\n        }\n    }\n\n    fetch(index)\n    {\n        index = intVal(index, -1);\n        if (index < 0) {\n            return this.setState({ error: new Error(\"Invalid patient index\") });\n        }\n\n        this.setState({ loading: true, index }, () => {\n            this.fetchPatient(this.props.settings.server, index)\n            .then(\n                state => {\n                    // console.log(state);\n                    this.setState({\n                        ...state,\n                        error: null,\n                        loading: false\n                    })\n                }\n            )\n            .catch(error => {\n                this.setState({\n                    loading   : false,\n                    error\n                })\n            })\n        })\n    }\n\n    /**\n     * This page receives an \"index\" url parameter. It will repeat the same\n     * query from the search page but with limit=1 and offset=index so that the\n     * search returns only one page. The reason for this is that we also have\n     * these \"Prev Patient\" and \"Next Patient\" buttons that allow the user to\n     * walk through the result one patient at a time.\n     * @param {Object} server\n     * @param {Object} server.url\n     * @param {Object} server.type\n     * @param {Number} index\n     */\n    fetchPatient(server, index)\n    {\n        // =====================================================================\n        // Warning! The following are some ugly workarounds for the ugly API\n        // that does not support normal pagination!\n        // =====================================================================\n\n        return Promise.resolve({ ...this.state })\n\n        // Run the main query to fetch the first page\n        .then(state => {\n            this.query.cacheId = null;\n            this.query.offset  = null;\n            return this.query.fetch(server).then(\n                bundle => {\n                    state.bundle = bundle;\n                    return state;\n                }\n            );\n        })\n\n        // Try to find the patient by index\n        .then(state => {\n            index = intVal(index, -1);\n            if (index < 0) {\n                return Promise.reject(\"Invalid patient index\");\n            }\n\n            state.patient = getPath(state, `bundle.entry.${index}.resource`);\n            state.nextURL = getBundleURL(state.bundle, \"next\");\n            state.hasNext = !!state.nextURL || (state.patient ? index < state.bundle.entry.length - 1 : false);\n            return Promise.resolve(state);\n        })\n\n        // if no patient - jump to it's index\n        .then(state => {\n            if (!state.patient) {\n                let params   = parseQueryString(state.nextURL);\n                this.query.setOffset(params._getpages, index);\n                return this.query.fetch(server).then(\n                    bundle => {\n                        state.bundle  = bundle;\n                        state.patient = getPath(state, `bundle.entry.0.resource`);\n                        state.hasNext = state.patient ?\n                            this.query.limit && this.query.limit > 1 ?\n                                state.bundle.entry.length > 1 :\n                                getBundleURL(state.bundle, \"next\") :\n                            false;\n                        return state;\n                    }\n                )\n            }\n            return state;\n        })\n\n        .then(state => new Promise(resolve => {\n            this.setState(state, () => resolve(state))\n        }))\n\n        // Find $everything\n        .then(state => {\n            return getAllPages({ url: `${server.url}/Patient/${state.patient.id}/$everything?_count=500` })\n            .then(data => {\n                let groups = {};\n                data.forEach(entry => {\n                    let resourceType = getPath(entry, \"resource.resourceType\") || \"Other\";\n                    let type = resourceType;\n\n                    if (type == \"Observation\") {\n                        let subCat = String(\n                            getPath(entry, \"resource.category.0.text\") ||\n                            getPath(entry, \"resource.category.coding.0.code\") ||\n                            getPath(entry, \"resource.category.0.coding.0.code\") ||\n                            \"Other\"\n                        ).toLowerCase();\n\n                        subCat = subCat.split(/\\-+/).map(token => {\n                            return token.charAt(0).toUpperCase() + token.substr(1)\n                        }).join(\" \");\n                        type += \" - \" + subCat;\n                    }\n\n                    if (!Array.isArray(groups[type])) {\n                        groups[type] = []\n                    }\n                    groups[type].push(entry)\n                })\n                state.groups = groups\n                return state\n            })\n        })\n\n        // Feed the results to the app\n        .then(\n            state => Promise.resolve(state),\n            error => Promise.reject(new Error(getErrorMessage(error)))\n        )\n    }\n\n    // Rendering methods -------------------------------------------------------\n\n    renderPatient()\n    {\n        if (this.state.error) {\n            return this.state.error + \"\"\n        }\n\n        let idLower = (this.state.patient.id || \"\").toLowerCase();\n        let key = idLower && Object.keys(this.props.selection).find(k => k.toLowerCase() == idLower);\n        let selected = key && this.props.selection[key] !== false;\n        return (\n            <div className=\"panel panel-default patient col-xs-12\">\n                <div className=\"row\">\n                    { this.state.loading ? <Loader/> : null }\n                    <div className=\"col-xs-2 col-sm-2 col-md-1\">\n                        <div className=\"embed-responsive\">\n                            <PatientImage\n                                patient={ this.state.patient }\n                                className=\"embed-responsive-item\"\n                                base={ this.props.settings.server.url }\n                            />\n                        </div>\n                    </div>\n                    <div className=\"col-xs-10 col-md-11\">\n                        <div className=\"patient-row\">\n                            <div className=\"col-xs-7 patient-name\">\n                                <h3 className=\"pull-left text-primary\">\n                                    { getPatientName(this.state.patient) || (this.state.loading ? \"loading...\" : \"Unknown\") }\n                                </h3>\n                                {\n                                    selected ?\n                                    <i className=\"label label-success pull-left\">Selected</i> :\n                                    null\n                                }\n                            </div>\n                            <div className=\"col-xs-5 text-right\" style={{ paddingRight: 0 }}>\n                                <button\n                                    type=\"button\"\n                                    className={`btn btn-sm btn-${selected ? \"danger\" : \"primary\"}`}\n                                    onClick={() => store.dispatch(toggle({ id: this.state.patient.id })) }\n                                >\n                                    {\n                                        selected ? \"Unselect\" : \"Select\"\n                                    }\n                                </button>\n                                <button\n                                    type=\"button\"\n                                    className=\"btn btn-default btn-sm\"\n                                    onClick={() => this.fetch(this.props.match.params.index)}\n                                >\n                                    <i className=\"fa fa-refresh\"/> Reload\n                                </button>\n                            </div>\n                        </div>\n                        <div className=\"row\">\n                            <div className=\"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\">Gender:</div>\n                            <div className=\"col-xs-8 col-sm-3 col-lg-3 text-left\">\n                                { this.state.patient.gender || (this.state.loading ? \"loading...\" : \"Unknown\") }\n                            </div>\n                            <div className=\"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\">DOB:</div>\n                            <div className=\"col-xs-8 col-sm-5 col-lg-3 text-left\">\n                                { this.state.patient.birthDate || (this.state.loading ? \"loading...\" : \"Unknown\") }\n                            </div>\n\n                            <div className=\"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\">Age:</div>\n                            <div className=\"col-xs-8 col-sm-3 col-lg-3 text-left\">\n                                { getPatientAge(this.state.patient) || (this.state.loading ? \"loading...\" : \"Unknown\") }\n                            </div>\n                            <div className=\"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\">Email</div>\n                            <div className=\"col-xs-8 col-sm-5 col-lg-3 text-left\">\n                                { getPatientEmail(this.state.patient) || (this.state.loading ? \"loading...\" : \"Unknown\") }\n                            </div>\n                            <div className=\"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\">Phone:</div>\n                            <div className=\"col-xs-8 col-sm-3 col-lg-3 text-left\">\n                                { getPatientPhone(this.state.patient) || (this.state.loading ? \"loading...\" : \"Unknown\") }\n                            </div>\n                            <div className=\"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\">Address:</div>\n                            <div className=\"col-xs-8 col-sm-5 col-lg-3 text-left\">\n                                { getPatientHomeAddress(this.state.patient) || (this.state.loading ? \"loading...\" : \"Unknown\") }\n                            </div>\n                            <div className=\"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\">ID:</div>\n                            <div className=\"col-xs-8 col-sm-3 col-lg-3 text-left\">\n                                { this.state.patient.id || (this.state.loading ? \"loading...\" : \"Unknown\") }\n                            </div>\n                            <div className=\"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\">MRN:</div>\n                            <div className=\"col-xs-8 col-sm-5 col-lg-3 text-left\">\n                                { getPatientMRN(this.state.patient) || (this.state.loading ? \"loading...\" : \"Unknown\") }\n                            </div>\n                            {\n                                this.state.patient.deceasedBoolean || this.state.patient.deceasedDateTime ?\n                                (\n                                    <div className=\"col-xs-4 col-sm-2 col-lg-1 text-right text-muted\">\n                                        <span className=\"deceased-label\">Deceased:</span>\n                                    </div>\n                                ) :\n                                null\n                            }\n                            {\n                                this.state.patient.deceasedBoolean || this.state.patient.deceasedDateTime ?\n                                (\n                                    <div className=\"col-xs-8 col-sm-5 col-lg-3 text-left\">\n                                        {\n                                            this.state.patient.deceasedDateTime ?\n                                            <span>{ this.state.patient.deceasedDateTime }</span> :\n                                            <span>{ this.state.patient.deceasedBoolean ? \"Yes\" : \"No\" }</span>\n                                        }\n                                    </div>\n                                ) :\n                                null\n                            }\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    renderResources(type) {\n        let items = this.state.groups[type] || [];\n        if (!items.length) {\n            return (\n                <p className=\"text-center text-muted\">\n                    No items of type \"{type}\" found\n                </p>\n            )\n        }\n\n        if (type.indexOf(\"Observation\") === 0) {\n            return <Observations resources={items}/>;\n        }\n\n        switch (type) {\n        case \"Immunization\":\n            return <ImmunizationList resources={items}/>;\n        case \"Condition\":\n            return <ConditionList resources={items}/>\n        case \"Encounter\":\n            return <Encounter resources={items}/>;\n        case \"CarePlan\":\n            return <CarePlan resources={items}/>;\n        case \"Patient\":\n        case \"Practitioner\":\n        case \"RelatedPerson\":\n            return <Person resources={items} title={type} />;\n        default:\n            return <ResourceList resources={items} type={type} settings={this.props.settings}/>;\n        }\n    }\n\n    render()\n    {\n        let groups = Object.keys(this.state.groups).sort()\n        let selectedSubCat = this.state.selectedSubCat\n        if (!selectedSubCat || !this.state.groups[selectedSubCat]) {\n            selectedSubCat = Object.keys(this.state.groups)[0] || \"\"\n        }\n\n        return (\n            <div className=\"page patient-detail-page\">\n                <nav className=\"navbar bg-primary navbar-fixed-top\">\n                    <div className=\"container-fluid\">\n                        <div className=\"row navigator\">\n                            <div className=\"col-xs-4 col-sm-4 col-md-3 col-lg-2\">\n                                <Link\n                                    to={ `/patient/${this.state.index - 1}` }\n                                    className=\"btn btn-primary btn-block\"\n                                    disabled={ this.state.index < 1 }\n                                >\n                                    <i className=\"fa fa-chevron-left\"/>\n                                    <b>Prev<span className=\"hidden-xs\">ious Patient</span></b>\n                                </Link>\n                            </div>\n                            <div className=\"col-xs-4 col-sm-4 col-md-6 col-lg-8 text-center\">\n                                <Link className=\"btn btn-block text-center\" to=\"/\">\n                                    <span className=\"hidden-xs\">Browse Patients</span>\n                                    <span className=\"visible-xs\">Browse</span>\n                                </Link>\n                            </div>\n                            <div className=\"col-xs-4 col-sm-4 col-md-3 col-lg-2 text-right\">\n                                <Link\n                                    to={ `/patient/${this.state.index + 1}` }\n                                    className=\"btn btn-primary btn-block\"\n                                    disabled={ !this.state.hasNext }\n                                >\n                                    <b>Next<span className=\"hidden-xs\"> Patient</span></b>\n                                    <i className=\"fa fa-chevron-right\"/>\n                                </Link>\n                            </div>\n                        </div>\n                    </div>\n                </nav>\n                <div className=\"container\">\n\n                    { this.renderPatient() }\n\n                    {\n                        groups.length ?\n                        <div className=\"row patient-details\">\n                            <br/>\n                            <div className=\"col-xs-12 col-sm-3\">\n                                <ul className=\"list-group\">\n                                {\n                                    groups.map((k, i) => (\n                                        <a\n                                            href=\"#\"\n                                            key={i}\n                                            className={ \"list-group-item\" + (k === selectedSubCat ? \" active\" : \"\") }\n                                            onClick={e => {\n                                                e.preventDefault()\n                                                this.setState({\n                                                    selectedSubCat: k\n                                                })\n                                            }}\n                                        >\n                                            <b className=\"badge pull-right\">{this.state.groups[k].length}</b>\n                                            <b>{k}</b>\n                                        </a>\n                                    ))\n                                }\n                                </ul>\n                            </div>\n                            <div className=\"col-xs-12 col-sm-9\">\n                                { this.renderResources(selectedSubCat) }\n                            </div>\n                        </div> :\n                        this.state.loading ?\n                            null:\n                            <div className=\"row\">\n                                <div className=\"col-xs-12 text-muted text-center\">\n                                    No additional details for this patient\n                                </div>\n                            </div>\n                    }\n                </div>\n                {\n                    window.opener || (window.parent && window.parent !== window) ?\n                    <nav className=\"navbar navbar-default navbar-fixed-bottom\">\n                        <div className=\"container-fluid\" style={{ width: \"100%\" }}>\n                            <div className=\"row\">\n                                <div className=\"col-xs-12\" style={{ paddingTop: 8 }}>\n                                    <DialogFooter/>\n                                </div>\n                            </div>\n                        </div>\n                    </nav> :\n                    null\n                }\n            </div>\n        )\n    }\n}\n\nexport default connect(state => state)(PatientDetail)\n\n\n\n// WEBPACK FOOTER //\n// ./components/PatientDetail/index.js","import React                from \"react\"\nimport PropTypes            from \"prop-types\"\nimport PatientListItem      from \"../PatientListItem\"\nimport { toggle, setAll }   from \"../../redux/selection\"\nimport { showSelectedOnly } from \"../../redux/settings\"\nimport { setParam, fetch }  from \"../../redux/query\"\nimport store                from \"../../redux\"\nimport { connect }          from \"react-redux\"\nimport Footer               from \"../Footer\"\nimport Header               from \"../Header\"\nimport ErrorMessage         from \"../ErrorMessage\"\nimport Alert                from \"../Alert\"\nimport                           \"./PatientList.less\"\n\n\nexport class PatientList extends React.Component\n{\n    static propTypes = {\n        query    : PropTypes.object,\n        selection: PropTypes.object,\n        location : PropTypes.object,\n        settings : PropTypes.object,\n        urlParams: PropTypes.object,\n        dispatch : PropTypes.func\n    };\n\n    render() {\n        return (\n            <div className=\"page\">\n                <Header\n                    query={this.props.query}\n                    settings={this.props.settings}\n                    location={this.props.location}\n                    urlParams={this.props.urlParams}\n                />\n                <div className=\"patient-search-results\">\n                    { this.renderContents() }\n                </div>\n                <Footer\n                    query={ this.props.query }\n                    bundle={ this.props.query.bundle }\n                    dispatch={ this.props.dispatch }\n                    selection={ this.props.selection }\n                    canShowSelected\n                />\n            </div>\n        )\n    }\n\n    renderContents() {\n        if (this.props.query.error) {\n            return <ErrorMessage error={this.props.query.error}/>\n        }\n\n        if (!this.props.query.bundle || this.props.query.loading) {\n            return (\n                <div className=\"patient-search-loading\">\n                    <i className=\"fa fa-spinner spin\" /> Loading. Please wait...\n                </div>\n            )\n        }\n\n        if (!this.props.query.bundle.entry || !this.props.query.bundle.entry.length) {\n            return (\n                <Alert>\n                    No patients found to match this search criteria\n                </Alert>\n            )\n        }\n\n        return this.renderPatientItems()\n    }\n\n    renderPatientItems() {\n\n        const isSelected = (item) => {\n            let idLower = (item.resource.id || \"\").toLowerCase();\n            let key = Object.keys(this.props.selection).find(k => k.toLowerCase() == idLower);\n            return key && this.props.selection[key] !== false;\n        }\n\n        let offset = this.props.query.offset || 0\n        let items = this.props.query.bundle.entry || [];\n        if (this.props.settings.renderSelectedOnly) {\n            items = items.filter(isSelected);\n        }\n        return items.map((o, i) => (\n            <PatientListItem\n                { ...o.resource }\n                patient={ o.resource }\n                key={ o.resource.id }\n                index={ offset + i }\n                selected={ isSelected(o) }\n                onSelectionChange={ patient => {\n                    if (this.props.settings.renderSelectedOnly &&\n                        Object.keys(this.props.selection).filter(k => !!this.props.selection[k]).length === 1)\n                    {\n                        store.dispatch(setAll({}))\n                        store.dispatch(showSelectedOnly(false))\n                        store.dispatch(setParam({ name: \"_id\", value: undefined }))\n                        store.dispatch(fetch())\n                    }\n                    else {\n                        store.dispatch(toggle(patient))\n                    }\n                }}\n                query={ this.props.query }\n                settings={ this.props.settings }\n            />\n        ))\n    }\n}\n\nexport default connect(state => state)(PatientList);\n\n\n\n// WEBPACK FOOTER //\n// ./components/PatientList/index.js","import React        from \"react\"\nimport PropTypes    from \"prop-types\"\nimport { Link }     from \"react-router-dom\"\nimport PatientImage from \"../PatientImage\"\nimport moment       from \"moment\"\nimport {\n    getPatientName,\n    getPatientAge,\n    renderSearchHighlight,\n    getPatientMRN\n} from \"../../lib\"\n\n\nexport default class PatientListItem extends React.Component\n{\n    /**\n     * This component expects a Fhir Bundle\n     */\n    static propTypes = {\n        patient          : PropTypes.object,\n        query            : PropTypes.object,\n        settings         : PropTypes.object,\n        selected         : PropTypes.bool,\n        onSelectionChange: PropTypes.func,\n        index            : PropTypes.number\n    };\n\n    static defaultProps = {\n        onSelectionChange: () => 1\n    };\n\n    render() {\n        let age = getPatientAge(this.props.patient)\n        let name = getPatientName(this.props)\n        if (this.props.query.params.name) {\n            name = renderSearchHighlight(name, this.props.query.params.name)\n        }\n\n        return (\n            <Link\n                to={ \"/patient/\" + this.props.index }\n                className={ \"patient\" + ( this.props.selected ? \" selected\" : \"\") }\n            >\n                <div\n                    className=\"patient-select-zone\"\n                    onClick={ e => {\n                        e.stopPropagation()\n                        e.preventDefault()\n                        this.props.onSelectionChange(this.props.patient)\n                    }}\n                >\n                    <i className={\n                        this.props.selected ?\n                        \"fa fa-check-square-o\" :\n                        \"fa fa-square-o\"\n                    }/>\n                </div>\n                <PatientImage patient={ this.props.patient } base={ this.props.settings.server.url }/>\n                <div className=\"patient-info\">\n                    <b>{ name } {\n                        this.props.patient.deceasedBoolean || this.props.patient.deceasedDateTime ?\n                        <span className=\"deceased-label\">Deceased</span> :\n                        null\n                    }</b>\n                    <small><b>{age}</b> old { this.renderGender() }</small>\n                    <footer className=\"small\">\n                        <span>\n                            DOB: { this.props.patient.birthDate || \"Unknown\" }\n                            {\n                                this.props.patient.deceasedDateTime ?\n                                ' / DOD: ' + moment(this.props.patient.deceasedDateTime).format(\"YYYY-MM-DD\") :\n                                null\n                            }\n                        </span>\n                        <span>ID: { this.props.patient.id || \"Unknown\" }</span>\n                        <span>MRN: { getPatientMRN(this.props.patient) || \"Unknown\" }</span>\n                    </footer>\n                </div>\n                <i className=\"fa fa-angle-right\"/>\n            </Link>\n        )\n    }\n\n    renderGender() {\n        let gender = this.props.patient.gender\n        if (!gender) {\n            return null\n        }\n\n        return (\n            <span className={ gender }>{ gender }</span>\n        );\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./components/PatientListItem/index.js","import React     from \"react\"\nimport PropTypes from \"prop-types\"\nimport \"./SortWidget.less\"\n\n\nexport default class SortWidget extends React.Component\n{\n    static propTypes = {\n        /**\n         * Fhir sort string like \"status,-date,category\"\n         */\n        sort: PropTypes.string,\n\n        options: PropTypes.arrayOf(PropTypes.shape({\n            name : PropTypes.string,\n            value: PropTypes.string\n        })),\n\n        onChange: PropTypes.func\n    };\n\n    static defaultProps = {\n        sort: \"name,-birthdate\",\n        options: [\n            {\n                label: <span><span className=\"hidden-xs\">Patient </span>ID</span>,\n                name : \"Patient ID\",\n                value: \"_id\"\n            },\n            {\n                name : \"Name\",\n                value: \"given\"\n            },\n            {\n                name : \"Gender\",\n                value: \"gender\"\n            },\n            {\n                name : \"DOB\",\n                value: \"birthdate\"\n            }\n        ]\n    };\n\n    change(name, value) {\n        // console.log(name, value)\n        if (typeof this.props.onChange == \"function\") {\n            let sort = this.parseSort(this.props.sort)\n            if (!value) {\n                if (sort.hasOwnProperty(name)) {\n                    delete sort[name];\n                }\n            }\n            else {\n                sort[name] = value\n            }\n            // console.log(sort, this.compileSort(sort))\n            this.props.onChange(this.compileSort(sort))\n        }\n    }\n\n    parseSort(input) {\n        let sort = {};\n        String(input || \"\").split(\",\").filter(Boolean).forEach(s => {\n            let name = s.replace(/^\\-/, \"\");\n            sort[name] = s.indexOf(\"-\") === 0 ? \"desc\" : \"asc\";\n        })\n        return sort\n    }\n\n    compileSort(sort) {\n        return Object.keys(sort).map(k => sort[k] == \"desc\" ? `-${k}` : k).join(\",\")\n    }\n\n    render() {\n        let sort = this.parseSort(this.props.sort)\n\n        return (\n            <div className=\"sort-widget small\">\n                <span className=\"pull-left\">Sort<span className=\"hidden-xs\"> by</span>:</span>\n                <ul className=\"nav nav-pills\">\n                {\n                    this.props.options.map((o, i) => (\n                        <li\n                            key={ i }\n                            role=\"presentation\"\n                            className={ o.value in sort ? \"active\" : null }\n                        >\n                            <a href=\"#\" onClick={ e => {\n                                e.preventDefault()\n                                let _sort = this.parseSort(this.props.sort)\n                                switch (_sort[o.value]) {\n                                case \"asc\":\n                                    return this.change(o.value, \"desc\")\n                                case \"desc\":\n                                    return this.change(o.value, \"\")\n                                default:\n                                    return this.change(o.value, \"asc\")\n                                }\n                            }}>\n                                { o.label || o.name }\n                                {\n                                    sort[o.value] == \"asc\" ?\n                                    <span className=\"sort\"><span className=\"hidden-xs\"> Asc</span> <i className=\"fa fa-sort-amount-asc\"/></span> :\n                                        sort[o.value] == \"desc\" ?\n                                        <span className=\"sort\"><span className=\"hidden-xs\"> Desc</span> <i className=\"fa fa-sort-amount-desc\"/></span> :\n                                        null\n                                }\n                            </a>\n                        </li>\n                    ))\n                }\n                </ul>\n            </div>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./components/SortWidget/index.js","import React     from \"react\"\nimport PropTypes from \"prop-types\"\nimport $ from \"jquery\"\nimport { renderSearchHighlight } from \"../../lib\"\nimport \"./TagSelector.less\"\n\nexport default class TagSelector extends React.Component\n{\n    static propTypes = {\n        tags    : PropTypes.arrayOf(PropTypes.object),\n        selected: PropTypes.arrayOf(PropTypes.string),\n        onChange: PropTypes.func,\n        search  : PropTypes.string,\n        label   : PropTypes.string\n    };\n\n    static defaultProps = {\n        onChange: () => 1,\n        tags    : [],\n        selected: [],\n        search  : \"\"\n    }\n\n    constructor(...args) {\n        super(...args)\n\n        this.state = {\n            // the selected items as a map of unique keys and tag objects\n            selected: [],\n\n            // is the menu currently visible?\n            open: false,\n\n            // the index of the currently selected option (-1 means no\n            // selection).\n            selectedIndex: -1,\n\n            // The search therm (the value of the input field)\n            search : \"\"\n        };\n\n        this.stateFromProps(this.state, this.props)\n\n        // bind the event handlers to preserve the \"this\" context\n        this.addTag       = this.addTag.bind(this)\n        this.removeTag    = this.removeTag.bind(this)\n        this.onFocus      = this.onFocus.bind(this)\n        this.onBlur       = this.onBlur.bind(this)\n        this.onKeyDown    = this.onKeyDown.bind(this)\n        this.onInput      = this.onInput.bind(this)\n    }\n\n    stateFromProps(state, nextProps) {\n        let hasChanged = false\n        if (nextProps.search) {\n            state.search = nextProps.search;\n            hasChanged = true;\n        }\n\n        if (nextProps.selected) {\n            state.selected = [ ...nextProps.selected.map(\n                t => this.props.tags.find(tag => tag.key === t) || {\n                    key: t,\n                    label: t,\n                    custom: true,\n                    data : {\n                        description: t,\n                        codes: {\n                            \"\": [t]\n                        }\n                    }\n                }\n            ) ]\n            hasChanged = true\n        }\n\n        return hasChanged;\n    }\n\n    componentWillReceiveProps(nextProps) {\n        let nextState = {}\n        if (this.stateFromProps(nextState, nextProps)) {\n            this.setState(nextState);\n        }\n    }\n\n    /**\n     * Updates the scroll position of the menu if it is opened and if some of\n     * it's options is selected so that the selected option is always in view.\n     */\n    componentDidUpdate() {\n        let menu = this.refs.menu;\n        if (menu) {\n            let menuHeight    = menu.clientHeight;\n            let menuScrollTop = menu.scrollTop;\n            let paddingTop    = parseInt($(menu).css(\"paddingTop\"), 10);\n            let paddingBottom = parseInt($(menu).css(\"paddingBottom\"), 10);\n            let selected      = $(\".selected\", this.refs.menu);\n\n            if (selected.length) {\n                let selectedTop    = selected[0].offsetTop;\n                let selectedHeight = selected[0].offsetHeight;\n                if (selectedTop < menuScrollTop) {\n                    requestAnimationFrame(() => this.refs.menu.scrollTop = selectedTop - paddingTop)\n                }\n                else if (selectedTop + selectedHeight - menuScrollTop > menuHeight) {\n                    requestAnimationFrame(() => this.refs.menu.scrollTop = selectedTop + selectedHeight +\n                        paddingBottom - menuHeight);\n                }\n            }\n        }\n    }\n\n\n\n    // Event handlers ----------------------------------------------------------\n\n    onFocus() {\n        this.setState({ open: true })\n    }\n\n    onBlur() {\n        this.setState({ open: false })\n    }\n\n    onInput(e) {\n        let listed = this.filterTags(e.target.value);\n        this.setState({\n            search: e.target.value,\n            open: true,\n            selectedIndex: listed.length && this.state.selectedIndex == -1 ?\n                0 :\n                this.state.selectedIndex\n        })\n    }\n\n    /**\n     * This will handle special keys like Enter, Escape and arrows for scrolling\n     */\n    onKeyDown(e) {\n        let listed = this.filterTags(this.state.search);\n        switch (e.keyCode) {\n\n        case 27: // Esc\n            this.setState({ open: false })\n            break;\n\n        case 13: { // Enter\n            // make sure we don't submit the form (if in any)\n            e.preventDefault();\n\n            if (listed.length < 2) {\n                this.setState({ open: false })\n            }\n\n            let index = this.state.selectedIndex;\n            if (index === listed.length - 1) {\n                this.setState({ selectedIndex: index - 1 }, () => {\n                    this.addTag(listed[index])\n                })\n            }\n            else {\n                this.addTag(listed[index])\n            }\n\n            break;\n        }\n\n        case 40: { // Down arrow\n            e.preventDefault();\n            let maxIndex = listed.length - 1\n            this.setState({\n                open         : true,\n                selectedIndex: Math.min(this.state.selectedIndex + 1, maxIndex)\n            });\n            break;\n        }\n\n        case 38: // Up arrow\n            e.preventDefault();\n            if (this.state.selectedIndex > 0) {\n                this.setState({\n                    selectedIndex: this.state.selectedIndex - 1\n                });\n            }\n            else if (this.state.open) {\n                this.setState({\n                    open: false,\n                    selectedIndex: -1\n                })\n            }\n            break;\n        }\n    }\n\n    /**\n     * Happens when the user clicks on an option (or hits the enter key on\n     * selected option)\n     * @param {*} tag\n     * @returns {void}\n     */\n    addTag(tag) {\n\n        if (!tag || !tag.key) {\n            return;\n        }\n\n        // this.shouldn't happen but just in case, check if somebody is trying\n        // to select something that is already selected\n        if (this.state.selected.find(t => t.key === tag.key)) {\n            return;\n        }\n\n        this.setState({\n            ...this.state,\n            selected     : [ ...this.state.selected, tag ],\n            search       : \"\",\n            open         : false,\n            selectedIndex: -1\n        }, () => this.props.onChange(this.state.selected))\n    }\n\n    /**\n     * Happens when the user clicks a close button on a selected tag\n     * @param {*} key\n     */\n    removeTag(key) {\n        if (!key) return;\n        let idx = this.state.selected.findIndex(t => t.key === key);\n        if (idx > -1) {\n            this.state.selected.splice(idx, 1);\n            this.setState({}, () => this.props.onChange(this.state.selected));\n        }\n    }\n\n    // Private helper methods --------------------------------------------------\n\n    filterTags(search) {\n        let tags = this.props.tags.filter(t => {\n\n            // skip the already selected options\n            if (this.state.selected.find(tag => t.key === tag.key)) {\n                return false\n            }\n\n            // search for matches\n            if (search) {\n\n                // first search by name\n                let index = t.label.toLowerCase().indexOf(search.toLowerCase())\n                if (index > -1) {\n                    return true\n                }\n\n                // then search by code\n                if (t.data && t.data.codes && typeof t.data.codes == \"object\") {\n                    for (let system in t.data.codes) {\n                        return t.data.codes[system].some(c => (\n                            c.toLowerCase().indexOf(search.toLowerCase()) > -1\n                        ))\n                    }\n                }\n\n                return false\n            }\n            return true;\n        }).sort((a, b) => {\n            if (a.label > b.label) return 1\n            if (a.label < b.label) return -1\n            return 0\n        }).map(t => ({ ...t }))\n\n        if (this.state.search) {\n            tags.unshift({\n                key   : this.state.search,\n                label : this.state.search,\n                custom: true,\n                data : {\n                    description: this.state.search,\n                    codes: {\n                        \"\": [this.state.search]\n                    }\n                }\n            })\n        }\n\n        return tags\n    }\n\n    // Rendering methods -------------------------------------------------------\n\n    renderTagCode(tag) {\n        if (!tag || !tag.data || !tag.data.codes) {\n            return null;\n        }\n\n        let code = \"\", codes = tag.data.codes;\n        if (codes[\"SNOMED-CT\"]) {\n            code = codes[\"SNOMED-CT\"].join(\"|\")\n        }\n        else {\n            for (let system in codes) {\n                code = `${codes[system].join(\",\")} (${system})`\n                break;\n            }\n        }\n\n        if (this.state.search) {\n            code = renderSearchHighlight(code, this.state.search)\n        }\n\n        return code ?\n            <small key={tag.key} className=\"text-muted code\">{code}:</small> :\n            null;\n    }\n\n    renderTag(tag, index) {\n        return (\n            <div\n                className={\n                    \"menu-item\" +\n                    (this.state.selectedIndex === index ? \" selected\" : \"\") +\n                     (tag.custom ? \" custom text-primary\" : \"\")\n                }\n                key={tag.key}\n                onMouseDown={ e => { e.preventDefault(); this.addTag(tag) }}\n                title={tag.label}\n            >\n                {\n                    tag.custom ?\n                    <span>\n                    Search for <b className=\"tag custom\">\n                        { this.state.search }\n                    </b>{ this.props.label ? \" \" + this.props.label : \"\"}</span> :\n                    null\n                }\n                { tag.custom ? null : this.renderTagCode(tag) }\n                { tag.custom ? null : renderSearchHighlight(tag.label, this.state.search) }\n            </div>\n        )\n    }\n\n    render() {\n        let menuItems = this.filterTags(this.state.search).map(this.renderTag, this)\n        let emptyMenu = menuItems.length === 0\n        let tags = this.state.selected.map(tag => (\n            <div className={\"tag\" + (tag.custom ? \" custom\" : \"\") } key={ tag.key }>\n                { tag.label }\n                <i\n                    className=\"tag-remove fa fa-times-circle\"\n                    title=\"Remove\"\n                    onMouseDown={\n                        e => {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            this.removeTag(tag.key)\n                        }\n                    }\n                />\n            </div>\n        ))\n\n        let placeholder = \"Type to search\"\n        if (this.props.label) {\n            placeholder += ` for ${this.props.label}s`\n        }\n        placeholder += ' ...'\n\n        return (\n            <div className={ \"tag-selector\" + (this.state.open ? \" open\" : \"\") }>\n                { tags.length ? <div className=\"tags\">{tags}</div> : null }\n                <input\n                    className=\"input form-control input-sm\"\n                    placeholder={placeholder}\n                    onFocus={ this.onFocus }\n                    onClick={ this.onFocus }\n                    onBlur={ this.onBlur }\n                    onKeyDown={ this.onKeyDown }\n                    onInput={ this.onInput }\n                    onChange={ ()=>1 }\n                    value={ this.state.search }\n                />\n                <i className=\"fa fa-caret-down\"/>\n                {\n                    emptyMenu && !this.state.search ?\n                    null :\n                    <div className=\"menu dropdown-menu\" ref=\"menu\">\n                        { menuItems }\n                    </div>\n                }\n            </div>\n        )\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/TagSelector/index.js","export default {\n    server: {\n        type: \"STU-3\", // \"DSTU-2\" or \"STU-3\" or \"R4\"\n\n        url: \"https://r3.smarthealthit.org\",\n\n        conditions: {},\n\n        tags: []\n    },\n\n    hideTagSelector: false,\n\n    patientsPerPage: 25,\n\n    // AJAX requests timeout\n    timeout: 20000,\n\n    // Only the selected patients are rendered. Should be false or the\n    // preselected patient IDs should be passed to the window. Otherwise\n    // It will result in rendering no patients at all.\n    renderSelectedOnly: false,\n\n    // If enabled is true (then url and param MUST be set) then clicking on the\n    // patient-related resources in detail view will open their source in that\n    // external viewer. Otherwise they will just be opened in new browser tab.\n    fhirViewer: {\n        enabled: true,\n        url    : \"http://docs.smarthealthit.org/fhir-viewer/index.html\",\n        param  : \"url\"\n    },\n\n    // What to send when the OK dialog button is clicked. Possible values:\n    // \"id-list\"  - comma-separated list of patient IDs (default)\n    // \"id-array\" - array of patient IDs\n    // \"patients\" - array of patient JSON objects\n    outputMode: \"id-list\",\n\n    // \"automatic\" -> onChange plus defer in some cases\n    // \"manual\" -> render a submit button\n    submitStrategy: \"manual\"\n}\n\n\n\n// WEBPACK FOOTER //\n// ./config.default.js","import moment from \"moment\"\nimport { CODE_SYSTEMS } from \"./constants\"\nimport { parseQueryString, request } from \".\"\nimport { intVal, getPath } from \".\"\n\n/**\n * This is just a helper class that is used as a query builder. It has some\n * dedicated setter methods for various query parameters and knows how to\n * compile those into a query string that can be passed to the Patient endpoint\n * of a fhir api server.\n */\nexport default class PatientSearch\n{\n    /**\n     * The constructor just creates an empty instance. Use the setter methods\n     * to set query params and then call compile to build the query string.\n     */\n    constructor(options = {}) {\n\n        this.__cache__ = {};\n\n        this.__scheduled__ = {};\n\n        /**\n         * The list of conditions that should be included in the query.\n         * @type {Object} A map of unique keys and condition objects\n         * @private\n         */\n        this.conditions = { ...(options.conditions || {}) };\n\n        /**\n         * The desired minimal age of the patients as an object like\n         * { value: 5, units: \"years\" }\n         * @type {Object}\n         * @private\n         */\n        this.minAge = null;\n\n        /**\n         * The desired maximal age of the patients as an object like\n         * { value: 5, units: \"years\" }\n         * @type {Object}\n         * @private\n         */\n        this.maxAge = null;\n\n        /**\n         * The patient gender to search for (male|female)\n         * @type {String}\n         * @private\n         */\n        this.gender = options.gender || null;\n\n        /**\n         * How many patients to fetch per page. Defaults to null meaning that\n         * this param will not be included in the query and we are leaving it\n         * for the server to decide.\n         * @type {Number}\n         * @private\n         */\n        this.limit = options.limit || null;\n\n        /**\n         * How many patients to skip. Defaults to null meaning that\n         * this param will not be included in the query and we are leaving it\n         * for the server to decide.\n         * @type {Number}\n         * @private\n         */\n        this.offset = null;\n\n        /**\n         * A collection of additional parameters\n         * @type {Object}\n         * @private\n         */\n        this.params = {};\n\n        /**\n         * This is like a flag that toggle the instance to different modes\n         * (currently only advanced and default are supported)\n         * @type {String} \"advanced\" or \"default\"\n         * @private\n         */\n        this.queryType = options.queryType || \"default\";\n\n        /**\n         * The query string to use if in advanced mode\n         * @type {String}\n         * @private\n         */\n        this.queryString = options.queryString || \"\";\n\n        /**\n         * The sort parameters list\n         * @type {String}\n         * @private\n         */\n        this.sort = options.sort || \"\";\n\n        /**\n         * All the tags that the patients should be filtered by\n         * @type {Array<String>}\n         * @private\n         */\n        this.tags = String(options.tags || \"\").split(/\\s*,\\s*/).filter(Boolean);\n    }\n\n    /**\n     * Schedule a prop change to be made before the next compile\n     * @param {Object} props\n     */\n    schedule(props) {\n        this.__scheduled__ = { ...this.__scheduled__, ...props };\n    }\n\n    hasParam(name) {\n        return this.params.hasOwnProperty(name);\n    }\n\n    /**\n     * Sets a param by name. Note that this is a lower level interface. It does\n     * not know anything about the parameter thus it will not handle UI\n     * dependencies (eg. it won't reset the offset for you)\n     * @param {Name} name The name of the parameter to set\n     * @param {*} value The value to set. Use undefined to remove a parameter\n     * @returns {PatientSearch} Returns the instance\n     */\n    setParam(name, value) {\n        let has = this.hasParam(name)\n        if (value === undefined) {\n            if (has) {\n                delete this.params[name]\n            }\n        }\n        else {\n            this.params[name] = value\n        }\n        this.offset  = null;\n        this.cacheId = null;\n        return this\n    }\n\n    /**\n     * Sets the query type. In advanced mode a query string is provided and\n     * parsed and all the other parameters are ignored. In default mode the\n     * query string is ignored and only the other params are used.\n     * @param {String} type \"advanced\" or anything else for \"default\"\n     * @returns {PatientSearch} Returns the instance\n     */\n    setQueryType(type) {\n        this.queryType = type == \"advanced\" ? \"advanced\" : \"default\"\n        return this\n    }\n\n    /**\n     * Sets the query string to be used while in advanced mode. Note that this\n     * will not be used if not in advanced mode but the query string will still\n     * be persisted so that if the user switches the UI to advanced the last\n     * query can be displayed...\n     * @param {String} query The query string to use if in advanced mode\n     * @returns {PatientSearch} Returns the instance\n     */\n    setQueryString(query) {\n        this.queryString = String(query || \"\")\n        return this\n    }\n\n    /**\n     * Adds a condition to the list of patient conditions\n     * @param {String} key Unique string identifier for that condition\n     * @param {Object} condition The condition to add\n     * @returns {PatientSearch} Returns the instance\n     */\n    addCondition(key, condition) {\n        this.conditions[key] = condition;\n        this.__cache__.patientIDs = null;\n        return this;\n    }\n\n    /**\n     * Removes the condition identified by it's key. If that condition is not\n     * currently included it does nothing\n     * @param {*} key Unique string identifier for that condition\n     * @returns {PatientSearch} Returns the instance\n     */\n    removeCondition(key) {\n        if (this.conditions.hasOwnProperty(key)) {\n            delete this.conditions[key];\n            this.__cache__.patientIDs = null;\n        }\n        return this;\n    }\n\n    /**\n     * Replaces the entire set of conditions at once\n     * @param {Object} conditions The new conditions to set\n     * @returns {PatientSearch} Returns the instance\n     */\n    setConditions(conditions) {\n        this.conditions = { ...conditions };\n        this.schedule({\n            offset: null,\n            cacheId: null\n        });\n        this.__cache__.patientIDs = null;\n        return this;\n    }\n\n    addTag(tag) {\n        if (this.tags.findIndex(tag) == -1) {\n            this.tags.push(tag);\n        }\n        return this;\n    }\n\n    removeTag(tag) {\n        let index = this.tags.findIndex(tag);\n        if (index > -1) {\n            this.tags.splice(index, 1);\n        }\n        return this;\n    }\n\n    setTags(tags) {\n        this.tags = [ ...tags ]\n        this.schedule({\n            offset: null,\n            cacheId: null\n        });\n        return this;\n    }\n\n    /**\n     * Sets the desired min age af the patients. This can also be set to null\n     * (or other falsy value) to exclude the minAge restrictions from the query.\n     * @param {object} age The age\n     * @param {number} age.value The age as number of units\n     * @param {string} age.units The units for the value (years|months|days)\n     * @returns {PatientSearch} Returns the instance\n     */\n    setMinAge(age) {\n        this.minAge  = age;\n        this.schedule({\n            offset: null,\n            cacheId: null\n        });\n        return this;\n    }\n\n    /**\n     * Sets the desired max age af the patients. This can also be set to null\n     * (or other falsy value) to exclude the maxAge restrictions from the query.\n     * @param {object} age The age\n     * @param {number} age.value The age as number of units\n     * @param {string} age.units The units for the value (years|months|days)\n     * @returns {PatientSearch} Returns the instance\n     */\n    setMaxAge(age) {\n        this.maxAge  = age;\n        this.schedule({\n            offset: null,\n            cacheId: null\n        });\n        return this;\n    }\n\n    /**\n     * Sets the min and max ages depending on the specified age group keyword\n     * @param {*} group Can be one of infant, child, adult, elderly.\n     *                  Anything else will clear the age constraints!\n     * @returns {PatientSearch} Returns the instance\n     */\n    setAgeGroup(group) {\n        this.ageGroup = group;\n        this.schedule({\n            offset: null,\n            cacheId: null\n        });\n\n        switch (group) {\n\n        // infant - 0 to 12 months\n        case \"infant\":\n            this.setMinAge(null);\n            this.setMaxAge({ value: 1, units: \"years\" });\n            break;\n\n        // child - 1 to 18 years\n        case \"child\":\n            this.setMinAge({ value: 1 , units: \"years\" });\n            this.setMaxAge({ value: 18, units: \"years\" });\n            break;\n\n        // adult - 18 to 65 years\n        case \"adult\":\n            this.setMinAge({ value: 18, units: \"years\" });\n            this.setMaxAge({ value: 65, units: \"years\" });\n            break;\n\n        // Elderly - 65+\n        case \"elderly\":\n            this.setMinAge({ value: 65, units: \"years\" });\n            this.setMaxAge(null);\n            break;\n\n        // Anything else clears the birthdate param\n        default:\n            this.setMinAge(null);\n            this.setMaxAge(null);\n            // this.ageGroup = null;\n            break;\n        }\n        return this;\n    }\n\n    /**\n     * Sets the gender to search for. Can be \"male\" or \"female\". Any falsy value\n     * will clear the gender param\n     * @param {String} gender \"male\" or \"female\"\n     * @returns {PatientSearch} Returns the instance\n     */\n    setGender(gender) {\n        if (gender !== this.gender) {\n            this.gender  = gender;\n            this.schedule({\n                offset : null,\n                cacheId: null\n            });\n        }\n        return this;\n    }\n\n    /**\n     * Sets how many patients will be fetched per page\n     * @param {number|string} limit The number of records to fetch\n     * @returns {PatientSearch} Returns the instance\n     */\n    setLimit(limit) {\n        this.limit = intVal(limit)\n        if (this.limit < 1) {\n            this.limit = null;\n        }\n        return this;\n    }\n\n    /**\n     * Sets how many patients will be skipped\n     * @param {string} cacheId The id generated by the server (_getpages)\n     * @param {number|string} offset The number of records to skip\n     * @returns {PatientSearch} Returns the instance\n     */\n    setOffset(cacheId, offset) {\n        this.offset = intVal(offset)\n        this.cacheId = cacheId\n        if (this.offset < 1) {\n            this.offset = null;\n            this.cacheId = null;\n        }\n        return this;\n    }\n\n    /**\n     * Sets the sorting to use\n     * @param {string} sort A fhir sort string like \"status,-date,category\"\n     * @returns {PatientSearch} Returns the instance\n     */\n    setSort(sort) {\n        this.sort = sort;\n        this.offset = null;\n        this.cacheId = null;\n        return this\n    }\n\n    /**\n     * Returns another PatientSearch instance with the exact same state as this.\n     * @returns {PatientSearch} Returns the new copy\n     */\n    clone() {\n        let inst = new PatientSearch();\n\n        inst.conditions = { ...this.conditions };\n        inst.params = { ...this.params };\n        inst.tags = [ ...this.tags ];\n\n        inst.setSort(this.sort)\n            .setAgeGroup(this.ageGroup)\n            .setMinAge(this.minAge)\n            .setMaxAge(this.maxAge)\n            .setGender(this.gender)\n            .setLimit(this.limit)\n            .setOffset(this.cacheId, this.offset)\n            .setQueryType(this.queryType)\n            .setQueryString(this.queryString);\n\n        return inst;\n    }\n\n    /**\n     * Clear all params. If you call compile after clear only the \"_format=json\"\n     * part should be returned\n     * @returns {PatientSearch} Returns the instance\n     */\n    reset() {\n        this.conditions   = {};\n        this.minAge       = null;\n        this.maxAge       = null;\n        this.gender       = null;\n        this.limit        = null;\n        this.offset       = null;\n        this.cacheId      = null;\n        this.ageGroup     = null;\n        this.params       = {};\n        this.queryString  = \"\";\n        this.queryType    = \"default\"\n        this.sort         = \"\";\n        this.tags         = [];\n        return this;\n    }\n\n    /**\n     * Returns an object representing the current state of the instance.\n     * The object contains COPIES of the current param values.\n     * @returns {Object}\n     */\n    getState() {\n        return {\n            conditions  : this.conditions,\n            minAge      : this.minAge,\n            maxAge      : this.maxAge,\n            gender      : this.gender,\n            limit       : this.limit,\n            offset      : this.offset,\n            cacheId     : this.cacheId,\n            ageGroup    : this.ageGroup,\n            params      : { ...this.params },\n            queryString : this.queryString,\n            queryType   : this.queryType,\n            sort        : this.sort,\n            tags        : [ ...this.tags ]\n        };\n    }\n\n    /**\n     * Compiles and returns the query string that can be send to the Patient\n     * endpoint.\n     * @return {String} The compiled query string (without the \"?\" in front)\n     */\n    compile(encode=true) {\n        let params = [];\n\n        [\n            // conditions\n            \"minAge\",\n            \"maxAge\",\n            \"gender\",\n            \"limit\",\n            \"offset\",\n            // \"params\",\n            \"queryType\",\n            \"queryString\",\n            \"sort\"//,\n            // tags\n        ].forEach(prop => {\n            if (this.__scheduled__.hasOwnProperty(prop)) {\n                this[prop] = this.__scheduled__[prop];\n                delete this.__scheduled__[prop];\n            }\n        })\n\n        // Tags ----------------------------------------------------------------\n        if (this.tags.length && !this.params._id) {\n            params.push({ name: \"_tag\", value: this.tags.join(\",\") });\n        }\n\n        // Advanced query ------------------------------------------------------\n        if (this.queryType == \"advanced\") {\n            let str = this.queryString.trim()\n            if (str) {\n                let _query = parseQueryString(str);\n                for (let name in _query) {\n                    params.push({ name, value: _query[name] });\n                }\n            }\n        }\n\n        // Default query -------------------------------------------------------\n        else {\n\n            // Custom params ---------------------------------------------------\n            Object.keys(this.params).forEach(k => {\n                if (String(this.params[k]).trim()) {\n                    params.push({\n                        name : k,\n                        value: this.params[k]\n                    });\n                }\n            });\n\n            // sort ------------------------------------------------------------\n            if (this.sort) {\n                String(this.sort).split(\",\").forEach(token => {\n                    if (token.indexOf(\"-\") === 0) {\n                        params.push({\n                            name : \"_sort:desc\",\n                            value: token.substring(1)\n                        })\n                    }\n                    else {\n                        params.push({\n                            name : \"_sort:asc\",\n                            value: token\n                        })\n                    }\n                })\n                // params.push({\n                //     name : \"_sort\",\n                //     value: this.sort\n                // })\n            }\n\n            if (!this.params._id) {\n\n                // Min age -----------------------------------------------------\n                if (this.minAge) {\n                    let d = moment().subtract(\n                        this.minAge.value,\n                        this.minAge.units\n                    );\n                    params.push({\n                        name : \"birthdate\",\n                        value: \"le\" + d.format('YYYY-MM-DD')\n                    });\n                }\n\n                // Max age -----------------------------------------------------\n                if (this.maxAge) {\n                    let d = moment().subtract(\n                        this.maxAge.value,\n                        this.maxAge.units\n                    );\n                    params.push({\n                        name : \"birthdate\",\n                        value: \"ge\" + d.format('YYYY-MM-DD')\n                    });\n                }\n\n                // exclude deceased patients if age is specified ---------------\n                if (this.maxAge || this.minAge) {\n                    let existing = params.find(p => p.name === \"deceased\");\n                    if (existing) {\n                        existing.value = false;\n                    }\n                    else {\n                        params.push({\n                            name : \"deceased\",\n                            value: false\n                        });\n                    }\n                }\n\n                // Gender ------------------------------------------------------\n                if (this.gender) {\n                    params.push({\n                        name : \"gender\",\n                        value: this.gender\n                    });\n                }\n            }\n        }\n\n        // limit ---------------------------------------------------------------\n        if (this.limit) {\n            params.push({\n                name : \"_count\",\n                value: this.limit\n            });\n        }\n\n        // offset --------------------------------------------------------------\n        if (this.offset && this.cacheId) {\n            params.push({\n                name: \"_getpages\",\n                value: this.cacheId\n            }, {\n                name : \"_getpagesoffset\",\n                value: this.offset\n            });\n        }\n\n        // Compile and return --------------------------------------------------\n        return params.map(p => (\n            encode ?\n                encodeURIComponent(p.name) + \"=\" + encodeURIComponent(p.value) :\n                p.name + \"=\" + p.value\n        )).join(\"&\");\n    }\n\n    /**\n     * Checks if there are any conditions chosen at the moment\n     * @returns {Boolean}\n     */\n    hasConditions() {\n        for (let key in this.conditions) {\n            if (this.conditions.hasOwnProperty(key)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Compiles the current conditions into URL-encoded parameter list\n     * @returns {String}\n     */\n    compileConditions() {\n        // let params = [];\n\n        // for (let key in this.conditions) {\n        //     let condition = this.conditions[key]\n\n        //     // system\n        //     let value = [];\n        //     for (let system in condition.codes) {\n        //         let systemUrl = (CODE_SYSTEMS[system] || {}).url;\n\n        //         // system.code[n] - OR\n        //         condition.codes[system].forEach(c => {\n        //             value.push( systemUrl ? systemUrl + \"|\" + c : c );\n        //         })\n        //     }\n\n        //     if (value.length) {\n        //         params.push({\n        //             name : \"code\",\n        //             value: value.join(\",\")\n        //         })\n        //     }\n        // }\n\n        // return params.map(p => (\n        //     encodeURIComponent(p.name) + \"=\" + encodeURIComponent(p.value)\n        // )).join(\"&\");\n        let out = []\n        for (let key in this.conditions) {\n            let condition = this.conditions[key]\n\n            // system\n            let value = [];\n            for (let system in condition.codes) {\n                let systemUrl = (CODE_SYSTEMS[system] || {}).url || \"http://snomed.info/sct\";\n\n                // system.code[n] - OR\n                condition.codes[system].forEach(c => {\n                    value.push(systemUrl + \"|\" + c);\n                })\n            }\n\n            if (value.length) {\n                out.push(value.join(\",\"));\n            }\n        }\n        return out.length ? \"code=\" + encodeURIComponent(out.join(\",\")) : \"\";\n    }\n\n    getConditionKeys() {\n        let out = []\n        for (let key in this.conditions) {\n            let condition = this.conditions[key]\n\n            // system\n            let value = [];\n            for (let system in condition.codes) {\n                let systemUrl = (CODE_SYSTEMS[system] || {}).url || \"http://snomed.info/sct\";\n\n                // system.code[n] - OR\n                condition.codes[system].forEach(c => {\n                    value.push(systemUrl + \"|\" + c);\n                })\n            }\n\n            if (value.length) {\n                out.push(value.join(\",\"));\n            }\n        }\n        return out;\n    }\n\n    /**\n     * Returns a promise resolved with a list of patient IDs that have the\n     * specified condition(s)\n     * @param {String} baseURL\n     * @returns {Promise<String[]>}\n     */\n    getPatientIDs(server) {\n\n        if (this.__cache__.patientIDs) {\n            return Promise.resolve(this.__cache__.patientIDs);\n        }\n\n        let conditions = this.compileConditions();\n\n        if (!conditions) {\n            return Promise.resolve([]);\n        }\n\n        /**\n         * The keys (eg: \"http://snomed.info/sct|44054006\") that were set by the\n         * user.\n         * @type {Array<String>}\n         * @private\n         */\n        let conditionKeys = this.getConditionKeys();\n\n        /**\n         * Map of patient IDs as keys and array of condition keys as values.\n         * @private\n         */\n        let patientIDs = {};\n\n        /**\n         * Handles the JSON response (single page) of the conditions query.\n         * Collects the patient IDs and their condition codes into the\n         * patientIDs local variable. When all the pages are fetched, cleans up\n         * the IDs to only contain those that have all the conditions specified\n         * by the user.\n         * @param {Object} response The JSON Conditions bundle response\n         * @returns {Promise<any>} Array of patient ID strings (can be empty)\n         */\n        const handleConditionsResponse = response => {\n\n            // Collect the data\n            if (response.entry) {\n                response.entry.forEach(condition => {\n                    let patientID = server.type == \"DSTU-2\" ?\n                        condition.resource.patient.reference.split(\"/\").pop():\n                        condition.resource.subject.reference.split(\"/\").pop();\n                    if (!patientIDs[patientID]) {\n                        patientIDs[patientID] = [];\n                    }\n                    patientIDs[patientID].push(\n                        (getPath(condition, \"resource.code.coding.0.system\") || \"http://snomed.info/sct\")\n                        + \"|\" + getPath(condition, \"resource.code.coding.0.code\")\n                    );\n                });\n\n                let nextLink = (response.link || []).find(l => l.relation == \"next\");\n                if (nextLink) {\n                    return request({ url: nextLink.url }).then(handleConditionsResponse);\n                }\n            }\n            // console.log(conditionKeys, patientIDs)\n            // Clean up and only leave patients having all the conditions\n            patientIDs = Object.keys(patientIDs).filter(key => {\n                return conditionKeys.every(\n                    conditionKey => patientIDs[key].indexOf(conditionKey) > -1\n                );\n            });\n            // console.log(patientIDs)\n\n            // finally return a promise resolved with the compiled ID array\n            return Promise.resolve(patientIDs);\n        }\n\n        // The conditions to search for\n        let params = [conditions];\n\n        // only need the patient - skip the rest to reduce the response\n        params.push(\n            server.type == \"DSTU-2\" ?\n                \"_elements=patient,code\" :\n                \"_elements=subject,code\"\n        );\n\n        // Set bigger limit here to reduce the chance of having to\n        // make other queries to fetch subsequent pages\n        params.push(\"_count=500\");\n\n        // Tags (not currently available in STU2)\n        if (this.tags.length) {\n            params.push( \"_tag=\" + encodeURIComponent(this.tags.join(\",\")) );\n        }\n\n        return request({\n            url: `${server.url}/Condition?${params.join(\"&\")}`\n        })\n        .then(handleConditionsResponse)\n        .then(ids => {\n            this.__cache__.patientIDs = ids;\n            return ids;\n        });\n    }\n\n    /**\n     * Fetches the patients matching the user-defined conditions. The actual\n     * strategy may vary but regardless of the implementation, a promise is\n     * returned that should eventually be resolved with the result bundle.\n     * @param {String} baseURL\n     * @returns {Promise<Bundle>}\n     */\n    fetch(server) {\n\n        let data = this.compile()\n\n        // STU2 does not work with the deceased param\n        if (server.type == \"DSTU-2\") {\n            data = data.replace(/\\bdeceased=(true|false)\\b/gi, \"\");\n        }\n\n        // prepare the base options for the patient ajax request\n        let options = {\n            url: this.offset && this.cacheId ? server.url : `${server.url}/Patient/_search`,\n            method: this.offset && this.cacheId ? \"GET\" : \"POST\",\n            processData: false,\n            data,\n            headers: {\n                accept: \"application/fhir+json\",\n                \"content-type\": \"application/x-www-form-urlencoded\"\n            }\n        };\n\n        return this.getPatientIDs(server)\n        .then(ids => {\n            if (ids.length) {\n                // if IDs were found - add them to the patient query\n                options.data = [\n                    options.data,\n                    \"_id=\" + encodeURIComponent(ids.join(\",\"))\n                ].filter(Boolean).join(\"&\");\n            }\n            else {\n                // If conditions were specified but no patients were found to\n                // have those conditions, then we should exit early.\n                if (this.hasConditions()) {\n                    return Promise.reject(\n                        \"No patients found with the specified conditions!\"\n                    );\n                }\n            }\n            return options;\n        })\n        .then(request);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/PatientSearch.js","import { parseQueryString } from \"../lib\"\n\n/**\n * The initial state is just an empty object that will be filled\n * with patient IDs as keys and booleans as values to indicate if\n * that patient is selected.\n */\nconst INITIAL_STATE = parseQueryString(\n    location.hash.replace(/^.*\\?/, \"\")\n)\n\n\n// Export the reducer as default\nexport default function() {\n    return { ...INITIAL_STATE }\n}\n\n\n// WEBPACK FOOTER //\n// ./redux/urlParams.js","import React     from \"react\"\nimport PropTypes from \"prop-types\"\nimport Moment    from \"moment\"\n\nexport default function Date({ moment, format=\"MM/DD/YYYY\", ...rest }) {\n    return <span {...rest}>{ Moment(moment).format(format) }</span>;\n}\n\nDate.propTypes = {\n    format: PropTypes.string,\n    moment: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.instanceOf(Date),\n        PropTypes.object // moment\n    ]).isRequired\n};\n\n\n// WEBPACK FOOTER //\n// ./components/Fhir/Date.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".age-widget-wrap {\\n  display: flex;\\n  flex-direction: row;\\n  flex-wrap: nowrap;\\n  white-space: nowrap;\\n  padding: 0;\\n  position: relative;\\n  font-size: 12px;\\n}\\n.age-widget-wrap > * {\\n  display: flex;\\n  flex-grow: 1;\\n  flex-shrink: 1;\\n  margin: 0;\\n  height: 100%;\\n  font-size: 13px;\\n}\\n.age-widget-wrap select {\\n  border: 1px solid transparent;\\n  border-radius: 4px;\\n  height: 100%;\\n}\\n.age-widget-wrap.custom > select {\\n  flex-grow: 0;\\n  min-width: 0;\\n  flex-basis: 180px;\\n}\\n.age-widget-wrap input {\\n  height: 100%;\\n  border: 1px solid transparent;\\n}\\n.age-widget {\\n  display: flex;\\n  flex-basis: 30%;\\n  min-width: 0;\\n  overflow: hidden;\\n  align-items: center;\\n  box-shadow: 2px 1px 2px -2px #BBB inset;\\n}\\n.age-widget:last-of-type {\\n  border-radius: 0 3px 3px 0;\\n}\\n.age-widget span {\\n  display: flex;\\n  white-space: nowrap;\\n  flex-basis: 7ex;\\n  flex-shrink: 0;\\n  flex-grow: 0;\\n  margin: 0 1ex 0 0;\\n  flex-direction: column;\\n  align-content: flex-end;\\n  background: rgba(0, 0, 0, 0.06);\\n  box-shadow: 1px 0 0 0 rgba(0, 0, 0, 0.1), 1px 0 2px 0px rgba(0, 0, 0, 0.1);\\n  line-height: 2.1em;\\n  padding: 0 1ex;\\n  text-align: right;\\n  height: 100%;\\n  font-weight: 500;\\n}\\n.age-widget input {\\n  flex-shrink: 1;\\n  flex-grow: 2;\\n  flex-basis: 30px;\\n  display: flex;\\n  margin: 0;\\n  background: transparent;\\n  min-width: 32px;\\n  border-right: 1px dotted rgba(0, 0, 0, 0.2);\\n}\\n.age-widget select {\\n  display: flex;\\n  flex-shrink: 1;\\n  flex-grow: 1;\\n  flex-basis: 6em;\\n  min-width: 6em;\\n}\\n.age-widget:hover {\\n  box-shadow: 0 0 0 1px #369;\\n  background: #ebf0f5;\\n}\\n.age-widget.invalid {\\n  background: rgba(255, 0, 0, 0.1);\\n  background: rgba(255, 0, 0, 0.03) repeating-linear-gradient(-45deg, rgba(255, 50, 0, 0), rgba(255, 50, 0, 0) 2.5px, rgba(255, 0, 0, 0.2) 3px, rgba(255, 50, 0, 0) 3.5px);\\n  background-size: 40px 40px;\\n}\\n@media (max-width: 600px) {\\n  .age-widget-wrap.custom {\\n    flex-wrap: wrap;\\n    white-space: normal;\\n    height: auto;\\n  }\\n  .age-widget-wrap.custom > select {\\n    flex-basis: 600px;\\n    flex-grow: 1;\\n    flex-shrink: 1;\\n    width: 100%;\\n    line-height: 2.1em;\\n    height: 2.1em;\\n  }\\n  .age-widget-wrap.custom .age-widget {\\n    flex-basis: 50%;\\n    flex-grow: 1;\\n    min-width: none;\\n    box-shadow: 0px 3px 0px -2px #DDD inset;\\n  }\\n  .age-widget-wrap.custom .age-widget:hover {\\n    box-shadow: 0 0 0 1px #369;\\n    background: #ebf0f5;\\n  }\\n  .age-widget-wrap.custom .age-widget:last-of-type {\\n    border-radius: 0 0 3px 0;\\n  }\\n  .age-widget-wrap.custom .age-widget ~ .age-widget span {\\n    box-shadow: 1px 0 0 0 rgba(0, 0, 0, 0.1), 1px 0 0 0 rgba(0, 0, 0, 0.1) inset, 1px 0 2px 0px rgba(0, 0, 0, 0.1);\\n  }\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/less-loader/dist/cjs.js!./components/AgeSelector/AgeSelector.less\n// module id = 330\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"* {\\n  box-sizing: border-box;\\n}\\nhtml {\\n  height: 100%;\\n  display: block;\\n}\\nbody {\\n  background: linear-gradient(#F6F6F6, #FFF);\\n  color: #444;\\n  margin: 0;\\n  padding: 0;\\n  overflow: hidden;\\n  height: 100%;\\n  font-family: \\\"Helvetica Neue\\\", Arial, sans-serif;\\n  font-size: 14px;\\n  line-height: normal;\\n}\\na {\\n  text-decoration: none;\\n  color: #369;\\n}\\na:disabled,\\na[disabled] {\\n  pointer-events: none;\\n  opacity: 0.4 !important;\\n}\\nhr {\\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\\n  border-bottom: 1px solid rgba(255, 255, 255, 0.9);\\n}\\n*:focus {\\n  outline: none !important;\\n}\\n.tab-content {\\n  background: linear-gradient(#FFF, transparent);\\n  border: 1px solid #DDD;\\n  border-top: 0;\\n  padding: 15px 15px 0;\\n  border-radius: 0 0 5px 5px;\\n}\\n#overlay {\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: rgba(150, 150, 150, 0.1);\\n  z-index: 1000000000;\\n}\\n#main {\\n  height: 100%;\\n}\\n.app {\\n  display: flex;\\n  flex-direction: column;\\n  flex-shrink: 0;\\n  height: 100%;\\n}\\n.page {\\n  display: flex;\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n}\\n.page {\\n  display: flex;\\n}\\n.patient-search-loading {\\n  display: flex;\\n  flex-grow: 1;\\n  align-content: center;\\n  align-items: center;\\n  align-self: center;\\n}\\n.patient-search-loading .fa {\\n  margin: 1ex;\\n}\\n.spin {\\n  animation: spin 2s linear infinite;\\n}\\n@keyframes spin {\\n  0% {\\n    transform: rotate(0deg);\\n  }\\n  100% {\\n    transform: rotate(359deg);\\n  }\\n}\\n.page {\\n  display: flex;\\n  flex-grow: 1;\\n  flex-direction: column;\\n  height: 100%;\\n}\\n.pre {\\n  white-space: pre;\\n  font-family: monospace;\\n  font-size: 12px;\\n  display: block;\\n}\\n.search-match {\\n  background: #FFCF39;\\n  box-shadow: 0 0 1px rgba(255, 255, 255, 0.8) inset, 0 0 1px rgba(0, 0, 0, 0.99) !important;\\n  border-radius: 2px;\\n  text-shadow: 0 0 1px #FFF !important;\\n  color: #000 !important;\\n}\\n.small.pull-left,\\n.small.pull-right,\\nsmall.pull-left,\\nsmall.pull-right {\\n  margin-top: 0.5ex;\\n}\\nlabel[disabled] {\\n  color: rgba(0, 0, 0, 0.4);\\n  cursor: not-allowed;\\n  user-select: none;\\n}\\n.deceased-label {\\n  vertical-align: baseline;\\n  color: #e45f00;\\n  font-size: 11px;\\n  padding: 0px 4px 1px;\\n  border-radius: 3px;\\n  border: 1px solid #ff6a00;\\n  box-shadow: 0 1px 4px 0px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(255, 255, 255, 0.31) inset;\\n}\\nselect,\\nselect.form-control {\\n  padding: 0 10px;\\n  line-height: 30px;\\n  font: inherit;\\n  background-color: transparent;\\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwMCIgaGVpZ2h0PSI1MTIiIHZpZXdCb3g9IjAgMCAxMDAwIDUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTSA5Ni4wMCw5Ni4wMGwtOTYuMDAsOTYuMDBsIDI1Ni4wMCwyNTYuMDBsIDI1Ni4wMC0yNTYuMDBsLTk2LjAwLTk2LjAwTCAyNTYuMDAsMjU2LjAwTCA5Ni4wMCw5Ni4wMHoiID48L3BhdGg+PC9zdmc+');\\n  background-position: 100% 50%;\\n  background-repeat: no-repeat;\\n  background-size: 15px;\\n  position: relative;\\n  padding-right: 20px;\\n  -webkit-appearance: none;\\n  -moz-appearance: none;\\n  -ms-appearance: none;\\n}\\nselect::-ms-expand,\\nselect.form-control::-ms-expand {\\n  display: none;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/less-loader/dist/cjs.js!./components/App/App.less\n// module id = 331\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".dialog-buttons button {\\n  min-width: 10em;\\n  margin: 0 0 0 1em;\\n}\\n.dialog-buttons label {\\n  margin: 2px 0;\\n  display: flex;\\n  align-items: center;\\n  min-height: 30px;\\n}\\n.dialog-buttons .btn-group {\\n  display: inline-flex;\\n  flex: 0 1 18em;\\n  line-height: 1;\\n  flex-direction: row;\\n  box-shadow: 0 1px 1px #FFF;\\n  margin: 0 6px;\\n}\\n.dialog-buttons .btn-group > .btn {\\n  display: flex;\\n  flex: 1 1 120px;\\n  align-items: center;\\n  align-content: center;\\n  align-self: center;\\n  flex-direction: column;\\n  min-width: 4em;\\n  margin: 0;\\n  border: 1px solid #BBB;\\n  padding: 4px 2ex;\\n  background: linear-gradient(#F9F9F9, #E9E9E9);\\n  font-weight: normal;\\n  color: #666;\\n  text-shadow: 0 1px 0 #FFF;\\n  box-shadow: 0 1px 1px #FFF inset;\\n  overflow: hidden;\\n}\\n.dialog-buttons .btn-group > .btn:hover {\\n  background: linear-gradient(#FFF, #EEE);\\n}\\n.dialog-buttons .btn-group > .btn:active,\\n.dialog-buttons .btn-group > .btn.active {\\n  background: linear-gradient(#CCC, #DDD);\\n  box-shadow: 0 1px 1px #BBB inset;\\n  border-color: #999 #AAA #BBB;\\n}\\n.dialog-buttons .btn-group > .btn + .btn {\\n  margin-left: -1px;\\n}\\n.dialog-buttons .btn-group > .btn:first-child {\\n  border-radius: 4px 0 0 4px;\\n}\\n.dialog-buttons .btn-group > .btn:last-child {\\n  border-radius: 0 4px 4px 0;\\n}\\n.dialog-buttons :disabled .btn-group,\\n.dialog-buttons [disabled] .btn-group,\\n.dialog-buttons .disabled .btn-group {\\n  opacity: 0.5;\\n  pointer-events: none;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/less-loader/dist/cjs.js!./components/DialogFooter/DialogFooter.less\n// module id = 332\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".app-footer {\\n  position: relative;\\n  z-index: 3;\\n  display: flex;\\n  flex-grow: 0;\\n  flex-shrink: 0;\\n  justify-content: center;\\n  align-items: center;\\n  box-shadow: 0 -1px 0 rgba(0, 0, 0, 0.2), 0 0 5px 0 rgba(0, 0, 0, 0.25);\\n  text-shadow: 0 1px 0 #FFF;\\n  background: #F0F0F0;\\n  white-space: nowrap;\\n}\\n.app-footer .row {\\n  padding: 4px 0;\\n  box-shadow: 0 -1px 0 0 rgba(0, 0, 0, 0.1) inset;\\n}\\n.app-footer .row + .row {\\n  box-shadow: 0 -1px 0 0 rgba(0, 0, 0, 0.1) inset, 0 1px 0 0 rgba(255, 255, 255, 0.9) inset;\\n}\\n.app-footer .row:first-child .col-xs-6 {\\n  padding: 6px 0px;\\n}\\n.app-footer a {\\n  display: block;\\n  padding: 5px 0px;\\n  text-align: center;\\n  border-radius: 4px;\\n  border: 1px solid transparent;\\n}\\n.app-footer a:hover {\\n  background: rgba(51, 122, 183, 0.15);\\n  border: 1px solid rgba(51, 122, 183, 0.29);\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/less-loader/dist/cjs.js!./components/Footer/Footer.less\n// module id = 333\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".app-header {\\n  color: #1f3d5c;\\n  padding: 5px 0 0;\\n  background: linear-gradient(#DFDFDF, #EEE 5px, #e2e2e2);\\n  position: relative;\\n  z-index: 3;\\n  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 5px 0 rgba(0, 0, 0, 0.5);\\n  text-shadow: 0 1px 0 #FFF;\\n  display: flex;\\n  flex-shrink: 0;\\n  flex-direction: column;\\n}\\n.app-header .nav.nav-tabs {\\n  padding-left: 5px;\\n}\\n.app-header .nav.nav-tabs a {\\n  padding: 5px 10px;\\n}\\n.app-header .tab-content {\\n  background: linear-gradient(#FFF, #F6F6F6);\\n  border: 0;\\n  border-bottom: 1px solid #BBB;\\n  padding: 5px 5px 0;\\n  border-radius: 0;\\n  font-size: small;\\n  box-shadow: 0 2px 1px -1px rgba(0, 0, 0, 0.1);\\n}\\n.app-header .badge {\\n  text-shadow: 0 0 1px #FFF;\\n  background: rgba(0, 0, 0, 0.08);\\n  color: #444;\\n  font-weight: 400;\\n  box-shadow: 0 0 0.5px 0 rgba(0, 0, 0, 0.2) inset;\\n}\\n.app-header .advanced-label {\\n  margin: 7px 6px 0 0;\\n}\\n.app-header .advanced-label input[type=\\\"checkbox\\\"] {\\n  margin: 0;\\n  vertical-align: middle;\\n}\\n.app-header .form-group {\\n  margin-bottom: 5px;\\n}\\n.app-header label,\\n.app-header .alert {\\n  margin-bottom: 3px;\\n}\\n.app-header .alert {\\n  padding: 5px 10px;\\n}\\n.app-header .btn-submit {\\n  margin: 4px 5px 0 auto;\\n  padding: 3px 8px;\\n  box-shadow: -13px 3px 0px -6px #e3e3e3, 13px 3px 0px -6px #e3e3e3, 0px 1px 0px 2px #e3e3e3, 0 2px 0 2px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.4), 0px 1px 1px -1px #FFF inset, 0px -17px 0px -5px rgba(0, 0, 0, 0.05) inset;\\n  border-radius: 30px;\\n  text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25), 0 0 1px rgba(0, 0, 0, 0.5);\\n  border-color: rgba(0, 0, 0, 0.5);\\n  position: relative;\\n  z-index: 100000000;\\n  min-width: 10%;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/less-loader/dist/cjs.js!./components/Header/Header.less\n// module id = 334\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".loader {\\n  background: rgba(255, 255, 255, 0.5);\\n  text-align: center;\\n  position: absolute;\\n  z-index: 2;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  border-radius: inherit;\\n}\\n.loader div {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  font-size: 18px;\\n  transform: translate(-50%, -50%);\\n  background: #FFF;\\n  border-radius: 5px;\\n  padding: 1ex 2em;\\n  box-shadow: 0 0 1px 0px rgba(0, 0, 0, 0.5), 0 0 15px 1px rgba(0, 0, 0, 0.15);\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/less-loader/dist/cjs.js!./components/Loader/Loader.less\n// module id = 335\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".patient-detail-page {\\n  overflow: auto;\\n  padding: 65px 0 50px;\\n  display: block;\\n  -webkit-overflow-scrolling: touch;\\n}\\n.patient-detail-page > .container {\\n  width: 100%;\\n}\\n.patient-detail-page .navigator {\\n  color: #FFF;\\n}\\n.patient-detail-page .navigator a {\\n  white-space: nowrap;\\n  padding: 8px 15px;\\n  margin: 5px 0;\\n  color: #FFF;\\n}\\n.patient-detail-page .navigator a:hover {\\n  background: rgba(0, 0, 0, 0.05);\\n}\\n.patient-detail-page .navigator .fa {\\n  margin: 0 5px;\\n}\\n.patient-detail-page .embed-responsive {\\n  padding-bottom: 100%;\\n}\\n.patient-detail-page .page-header {\\n  margin: 0;\\n  padding-bottom: 1.5ex;\\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\\n}\\n.patient-detail-page .patient {\\n  background: transparent;\\n  padding: 0;\\n  border: 0;\\n  box-shadow: none;\\n  position: relative;\\n}\\n.patient-detail-page .patient .text-left {\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.1);\\n}\\n.patient-detail-page .patient-row {\\n  background: rgba(0, 0, 0, 0.05);\\n  border-radius: 3px;\\n  margin-bottom: 5px;\\n  padding: 5px;\\n}\\n.patient-detail-page .patient-row:after {\\n  content: \\\"\\\";\\n  display: table;\\n  clear: both;\\n}\\n.patient-detail-page .patient-row ~ .row > div {\\n  padding: 3px 5px;\\n}\\n.patient-detail-page .patient-row h3 {\\n  margin: 0;\\n  line-height: 1.45em;\\n}\\n.patient-detail-page .patient-row .label {\\n  margin: 8px 0 0 12px;\\n  font-size: 13px;\\n}\\n.patient-detail-page .patient-row .btn {\\n  min-width: 7em;\\n  margin: 2px;\\n}\\n.patient-detail-page .patient-image-wrap {\\n  margin-right: 1ex;\\n}\\n.patient-detail-page .patient-name {\\n  font-size: 24px;\\n}\\n.patient-detail-page td,\\n.patient-detail-page th {\\n  font-size: 13px;\\n  line-height: 16px;\\n}\\n.patient-detail-page td .text-muted,\\n.patient-detail-page th .text-muted {\\n  font-weight: 400;\\n}\\n.patient-detail-page td b,\\n.patient-detail-page th b {\\n  font-weight: 500;\\n}\\n.patient-detail-page td label,\\n.patient-detail-page th label {\\n  margin-bottom: 0;\\n}\\n.patient-detail-page td td,\\n.patient-detail-page th td {\\n  vertical-align: top;\\n  font-size: 12px;\\n  line-height: 16px;\\n}\\n.patient-detail-page td .label-cell,\\n.patient-detail-page th .label-cell {\\n  color: #888;\\n  white-space: nowrap;\\n  text-align: right;\\n  font-weight: 400;\\n  padding-right: 1ex;\\n}\\n.patient-detail-page td .label-cell:after,\\n.patient-detail-page th .label-cell:after {\\n  content: \\\": \\\";\\n}\\n.patient-detail-page td {\\n  font-weight: 500;\\n}\\n.patient-detail-page th {\\n  font-weight: 700;\\n}\\n.patient-detail-page thead th .glyphicon,\\n.patient-detail-page thead th .fa {\\n  text-shadow: 0 1px 2px #FFF, 0 0 0px #214b6f;\\n  color: rgba(51, 122, 183, 0.3);\\n}\\n.patient-detail-page .patient-details {\\n  white-space: normal;\\n  word-wrap: break-word;\\n}\\n.patient-detail-page .patient-details .badge {\\n  opacity: 0.75;\\n  margin: 0 0 0 2px;\\n}\\n.patient-detail-page .patient-details table a {\\n  white-space: normal;\\n  word-break: break-all;\\n  word-wrap: break-word;\\n}\\n.patient-detail-page .patient-details .panel-heading {\\n  text-shadow: 0 1px 0 #FFF;\\n}\\n.patient-detail-page .list-group-item {\\n  padding-top: 7px;\\n  padding-bottom: 7px;\\n}\\n.patient-detail-page .group-header {\\n  cursor: pointer;\\n  background: linear-gradient(90deg, #ebf2f8, #f5f8fb);\\n  text-indent: 0;\\n}\\n.patient-detail-page .group-header .glyphicon-triangle-bottom {\\n  position: relative;\\n  top: 2px;\\n}\\n.patient-detail-page .group-header ~ tr > td:first-child {\\n  text-indent: 17px;\\n}\\n.patient-detail-page .group-clear + tr > td:first-child {\\n  text-indent: 0;\\n}\\n.patient-detail-page .group-clear + tr > td:first-child:before {\\n  content: \\\"\\\\E250\\\";\\n  position: relative;\\n  top: 1px;\\n  display: inline-block;\\n  font-family: 'Glyphicons Halflings';\\n  font-style: normal;\\n  font-weight: 400;\\n  line-height: 1;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n  margin-right: 3px;\\n  opacity: 0.3;\\n}\\n.patient-detail-page .table-responsive {\\n  border: none !important;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/less-loader/dist/cjs.js!./components/PatientDetail/PatientDetail.less\n// module id = 336\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".patient-image-wrap {\\n  height: 80px;\\n  width: 80px;\\n  background: #F6F6F6;\\n  border-radius: 3px;\\n  text-align: center;\\n  position: relative;\\n  box-shadow: 0 0 0.5px 0 rgba(0, 0, 0, 0.5) inset, 0 0 1px 1px #FFF;\\n  background-size: cover;\\n  background-position: center;\\n  flex-shrink: 0;\\n  flex-grow: 0;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/less-loader/dist/cjs.js!./components/PatientImage/PatientImage.less\n// module id = 337\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".patient-search-results {\\n  display: flex;\\n  flex-grow: 1;\\n  flex-direction: column;\\n  background: #FFF;\\n  overflow: auto;\\n  -webkit-overflow-scrolling: touch;\\n}\\n.patient-search-results .male {\\n  color: #369;\\n}\\n.patient-search-results .female {\\n  color: #936;\\n}\\n.patient-search-results .patient {\\n  position: relative;\\n  padding: 1ex;\\n  cursor: pointer;\\n  flex-flow: 0;\\n  flex-shrink: 0;\\n  align-items: center;\\n  display: flex;\\n  transition: background 0.1s;\\n  color: #444;\\n  text-decoration: none;\\n  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.85) inset, 0 -1px 0 rgba(0, 0, 0, 0.15) inset;\\n}\\n.patient-search-results .patient:hover {\\n  background: rgba(0, 0, 0, 0.05);\\n}\\n.patient-search-results .patient .patient-select-zone {\\n  display: inline-block;\\n  vertical-align: middle;\\n  height: 54px;\\n  line-height: 54px;\\n  width: 30px;\\n  border-radius: 3px;\\n  text-align: center;\\n  color: #369;\\n  min-width: 30px;\\n}\\n.patient-search-results .patient .patient-select-zone:hover {\\n  background: rgba(51, 102, 153, 0.1);\\n}\\n.patient-search-results .patient .fa-angle-right {\\n  opacity: 0.5;\\n  font-size: 20px;\\n  display: flex;\\n  flex-basis: 1em;\\n}\\n.patient-search-results .patient .patient-image-wrap {\\n  height: 54px;\\n  width: 54px;\\n  margin: 0 1ex;\\n}\\n.patient-search-results .patient .patient-info {\\n  flex-grow: 1;\\n}\\n.patient-search-results .patient .patient-info > b {\\n  font-size: 16px;\\n  line-height: 1;\\n  display: block;\\n  margin-bottom: 2px;\\n}\\n.patient-search-results .patient .patient-info small {\\n  opacity: 0.7;\\n  display: block;\\n}\\n.patient-search-results .patient .patient-info footer {\\n  opacity: 0.7;\\n  display: flex;\\n  flex-direction: row;\\n  margin-top: 5px;\\n}\\n.patient-search-results .patient .patient-info footer > span {\\n  display: flex;\\n  flex-basis: 14em;\\n  flex-grow: 1;\\n}\\n.patient-search-results .patient .patient-info footer > span + span {\\n  margin-left: 2em;\\n}\\n.patient-search-results .patient.selected {\\n  background: #369;\\n  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.05) inset, 0 -1px 0 rgba(0, 0, 0, 0.15) inset;\\n  text-shadow: 0 0 1px #000;\\n}\\n.patient-search-results .patient.selected,\\n.patient-search-results .patient.selected * {\\n  color: #FFF;\\n}\\n.patient-search-results .patient.selected .patient-image-wrap {\\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.3), 0 0 0 0.5px rgba(255, 255, 255, 0.5) inset;\\n}\\n.patient-search-results .patient.selected .patient-select-zone:hover {\\n  background: rgba(255, 255, 255, 0.07);\\n}\\n.patient-search-results .patient.selected:hover {\\n  background: #2f5e8e;\\n}\\n@media (max-width: 480px) {\\n  .patient-search-results .patient .patient-info footer span + span {\\n    display: none;\\n  }\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/less-loader/dist/cjs.js!./components/PatientList/PatientList.less\n// module id = 338\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".sort-widget {\\n  padding: 0 5px;\\n  float: left;\\n  width: 100%;\\n}\\n.sort-widget > span {\\n  padding: 6px 1ex 0 0;\\n  font-weight: bold;\\n}\\n.sort-widget .nav.nav-pills li {\\n  margin: 3px 3px 3px 0;\\n}\\n.sort-widget .nav.nav-pills li a {\\n  padding: 4px 8px;\\n}\\n.sort-widget .nav.nav-pills li a .sort {\\n  opacity: 0.6;\\n}\\n.sort-widget .nav.nav-pills li.active a,\\n.sort-widget .nav.nav-pills li:hover a,\\n.sort-widget .nav.nav-pills li:active a,\\n.sort-widget .nav.nav-pills li a:focus {\\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.2) inset;\\n}\\n.sort-widget .nav.nav-pills li.active a {\\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.3);\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/less-loader/dist/cjs.js!./components/SortWidget/SortWidget.less\n// module id = 339\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".tag-selector {\\n  position: relative;\\n  display: block;\\n  width: 100%;\\n  color: #000;\\n  min-width: 200px;\\n  font-size: small;\\n}\\n.tag-selector .tags {\\n  margin-bottom: 4px;\\n}\\n.tag-selector input {\\n  padding-right: 24px;\\n}\\n.tag-selector .tag {\\n  margin: 1px 6px 1px 0px;\\n  padding: 3px 26px 3px 6px;\\n  background: #DC9;\\n  box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.5) inset;\\n  border-radius: 3px;\\n  color: #520;\\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.3);\\n  display: inline-block;\\n  position: relative;\\n  font-weight: 500;\\n  line-height: 1.2;\\n  font-size: 12px;\\n  cursor: default;\\n}\\n.tag-selector .tag:last-of-type {\\n  margin-right: 0;\\n}\\n.tag-selector .tag .tag-remove {\\n  position: absolute;\\n  top: 4px;\\n  right: 5px;\\n  color: rgba(0, 0, 0, 0.4);\\n  text-shadow: none;\\n  opacity: 0.6;\\n}\\n.tag-selector .tag:hover {\\n  background-color: #d7c286;\\n}\\n.tag-selector .tag:hover .tag-remove {\\n  opacity: 0.5;\\n}\\n.tag-selector .tag:hover .tag-remove:hover {\\n  opacity: 1;\\n  color: #900;\\n}\\n.tag-selector .tag.custom {\\n  background: #adc2d6;\\n  color: #19334d;\\n}\\n.tag-selector .tag.custom:hover {\\n  background-color: #9cb5ce;\\n}\\n.tag-selector .menu {\\n  padding: 4px;\\n  top: 100%;\\n  width: 100%;\\n  text-align: left;\\n  max-height: 50vh;\\n  overflow: auto;\\n  z-index: 10000000000;\\n}\\n.tag-selector .menu-item {\\n  padding: 5px 10px;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  cursor: default;\\n}\\n.tag-selector .menu-item small {\\n  line-height: 1.4;\\n  font-weight: 400;\\n}\\n.tag-selector .menu-item .code {\\n  width: 110px;\\n  display: inline-block;\\n  text-align: right;\\n  padding-right: 1ex;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  float: left;\\n  margin: 1px 0 -1px;\\n}\\n.tag-selector .menu-item:hover {\\n  background: rgba(0, 0, 0, 0.1);\\n}\\n.tag-selector .menu-item.selected {\\n  color: #FFF;\\n  background: #369;\\n  text-shadow: 0 0 1px #000000;\\n}\\n.tag-selector .menu-item.selected small {\\n  color: rgba(255, 255, 255, 0.6);\\n  text-shadow: none;\\n}\\n.tag-selector .menu-item.selected .tag.custom {\\n  box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.5);\\n}\\n.tag-selector .menu-item.custom {\\n  font-weight: bold;\\n  cursor: pointer;\\n  padding: 3px 10px;\\n}\\n.tag-selector .menu-item.custom + .menu-item {\\n  position: relative;\\n  overflow: visible;\\n  margin-top: 9px;\\n}\\n.tag-selector .menu-item.custom + .menu-item:before {\\n  content: \\\"\\\";\\n  display: block;\\n  height: 1px;\\n  background: #CCC;\\n  position: absolute;\\n  top: -5px;\\n  left: 0;\\n  right: 0;\\n}\\n.tag-selector .menu-item.custom .tag {\\n  margin: 0 1px;\\n  padding: 3px 6px;\\n  line-height: 1;\\n}\\n.tag-selector.open {\\n  outline: none;\\n}\\n.tag-selector .fa.fa-caret-down {\\n  position: absolute;\\n  right: 10px;\\n  bottom: 10px;\\n  pointer-events: none;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/postcss-loader!../~/less-loader/dist/cjs.js!./components/TagSelector/TagSelector.less\n// module id = 340\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/events/events.js\n// module id = 341\n// module chunks = 0","/*!\n * for-in <https://github.com/jonschlinkert/for-in>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function forIn(obj, fn, thisArg) {\n  for (var key in obj) {\n    if (fn.call(thisArg, obj[key], key, obj) === false) {\n      break;\n    }\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/for-in/index.js\n// module id = 354\n// module chunks = 0","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/is-plain-object/index.js\n// module id = 360\n// module chunks = 0","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/is-plain-object/~/isobject/index.js\n// module id = 361\n// module chunks = 0","// json5.js\n// Modern JSON. See README.md for details.\n//\n// This file is based directly off of Douglas Crockford's json_parse.js:\n// https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\n\nvar JSON5 = (typeof exports === 'object' ? exports : {});\n\nJSON5.parse = (function () {\n    \"use strict\";\n\n// This is a function that can parse a JSON5 text, producing a JavaScript\n// data structure. It is a simple, recursive descent parser. It does not use\n// eval or regular expressions, so it can be used as a model for implementing\n// a JSON5 parser in other languages.\n\n// We are defining the function inside of another function to avoid creating\n// global variables.\n\n    var at,           // The index of the current character\n        lineNumber,   // The current line number\n        columnNumber, // The current column number\n        ch,           // The current character\n        escapee = {\n            \"'\":  \"'\",\n            '\"':  '\"',\n            '\\\\': '\\\\',\n            '/':  '/',\n            '\\n': '',       // Replace escaped newlines in strings w/ empty string\n            b:    '\\b',\n            f:    '\\f',\n            n:    '\\n',\n            r:    '\\r',\n            t:    '\\t'\n        },\n        ws = [\n            ' ',\n            '\\t',\n            '\\r',\n            '\\n',\n            '\\v',\n            '\\f',\n            '\\xA0',\n            '\\uFEFF'\n        ],\n        text,\n\n        renderChar = function (chr) {\n            return chr === '' ? 'EOF' : \"'\" + chr + \"'\";\n        },\n\n        error = function (m) {\n\n// Call error when something is wrong.\n\n            var error = new SyntaxError();\n            // beginning of message suffix to agree with that provided by Gecko - see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse\n            error.message = m + \" at line \" + lineNumber + \" column \" + columnNumber + \" of the JSON5 data. Still to read: \" + JSON.stringify(text.substring(at - 1, at + 19));\n            error.at = at;\n            // These two property names have been chosen to agree with the ones in Gecko, the only popular\n            // environment which seems to supply this info on JSON.parse\n            error.lineNumber = lineNumber;\n            error.columnNumber = columnNumber;\n            throw error;\n        },\n\n        next = function (c) {\n\n// If a c parameter is provided, verify that it matches the current character.\n\n            if (c && c !== ch) {\n                error(\"Expected \" + renderChar(c) + \" instead of \" + renderChar(ch));\n            }\n\n// Get the next character. When there are no more characters,\n// return the empty string.\n\n            ch = text.charAt(at);\n            at++;\n            columnNumber++;\n            if (ch === '\\n' || ch === '\\r' && peek() !== '\\n') {\n                lineNumber++;\n                columnNumber = 0;\n            }\n            return ch;\n        },\n\n        peek = function () {\n\n// Get the next character without consuming it or\n// assigning it to the ch varaible.\n\n            return text.charAt(at);\n        },\n\n        identifier = function () {\n\n// Parse an identifier. Normally, reserved words are disallowed here, but we\n// only use this for unquoted object keys, where reserved words are allowed,\n// so we don't check for those here. References:\n// - http://es5.github.com/#x7.6\n// - https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Variables\n// - http://docstore.mik.ua/orelly/webprog/jscript/ch02_07.htm\n// TODO Identifiers can have Unicode \"letters\" in them; add support for those.\n\n            var key = ch;\n\n            // Identifiers must start with a letter, _ or $.\n            if ((ch !== '_' && ch !== '$') &&\n                    (ch < 'a' || ch > 'z') &&\n                    (ch < 'A' || ch > 'Z')) {\n                error(\"Bad identifier as unquoted key\");\n            }\n\n            // Subsequent characters can contain digits.\n            while (next() && (\n                    ch === '_' || ch === '$' ||\n                    (ch >= 'a' && ch <= 'z') ||\n                    (ch >= 'A' && ch <= 'Z') ||\n                    (ch >= '0' && ch <= '9'))) {\n                key += ch;\n            }\n\n            return key;\n        },\n\n        number = function () {\n\n// Parse a number value.\n\n            var number,\n                sign = '',\n                string = '',\n                base = 10;\n\n            if (ch === '-' || ch === '+') {\n                sign = ch;\n                next(ch);\n            }\n\n            // support for Infinity (could tweak to allow other words):\n            if (ch === 'I') {\n                number = word();\n                if (typeof number !== 'number' || isNaN(number)) {\n                    error('Unexpected word for number');\n                }\n                return (sign === '-') ? -number : number;\n            }\n\n            // support for NaN\n            if (ch === 'N' ) {\n              number = word();\n              if (!isNaN(number)) {\n                error('expected word to be NaN');\n              }\n              // ignore sign as -NaN also is NaN\n              return number;\n            }\n\n            if (ch === '0') {\n                string += ch;\n                next();\n                if (ch === 'x' || ch === 'X') {\n                    string += ch;\n                    next();\n                    base = 16;\n                } else if (ch >= '0' && ch <= '9') {\n                    error('Octal literal');\n                }\n            }\n\n            switch (base) {\n            case 10:\n                while (ch >= '0' && ch <= '9' ) {\n                    string += ch;\n                    next();\n                }\n                if (ch === '.') {\n                    string += '.';\n                    while (next() && ch >= '0' && ch <= '9') {\n                        string += ch;\n                    }\n                }\n                if (ch === 'e' || ch === 'E') {\n                    string += ch;\n                    next();\n                    if (ch === '-' || ch === '+') {\n                        string += ch;\n                        next();\n                    }\n                    while (ch >= '0' && ch <= '9') {\n                        string += ch;\n                        next();\n                    }\n                }\n                break;\n            case 16:\n                while (ch >= '0' && ch <= '9' || ch >= 'A' && ch <= 'F' || ch >= 'a' && ch <= 'f') {\n                    string += ch;\n                    next();\n                }\n                break;\n            }\n\n            if(sign === '-') {\n                number = -string;\n            } else {\n                number = +string;\n            }\n\n            if (!isFinite(number)) {\n                error(\"Bad number\");\n            } else {\n                return number;\n            }\n        },\n\n        string = function () {\n\n// Parse a string value.\n\n            var hex,\n                i,\n                string = '',\n                delim,      // double quote or single quote\n                uffff;\n\n// When parsing for string values, we must look for ' or \" and \\ characters.\n\n            if (ch === '\"' || ch === \"'\") {\n                delim = ch;\n                while (next()) {\n                    if (ch === delim) {\n                        next();\n                        return string;\n                    } else if (ch === '\\\\') {\n                        next();\n                        if (ch === 'u') {\n                            uffff = 0;\n                            for (i = 0; i < 4; i += 1) {\n                                hex = parseInt(next(), 16);\n                                if (!isFinite(hex)) {\n                                    break;\n                                }\n                                uffff = uffff * 16 + hex;\n                            }\n                            string += String.fromCharCode(uffff);\n                        } else if (ch === '\\r') {\n                            if (peek() === '\\n') {\n                                next();\n                            }\n                        } else if (typeof escapee[ch] === 'string') {\n                            string += escapee[ch];\n                        } else {\n                            break;\n                        }\n                    } else if (ch === '\\n') {\n                        // unescaped newlines are invalid; see:\n                        // https://github.com/aseemk/json5/issues/24\n                        // TODO this feels special-cased; are there other\n                        // invalid unescaped chars?\n                        break;\n                    } else {\n                        string += ch;\n                    }\n                }\n            }\n            error(\"Bad string\");\n        },\n\n        inlineComment = function () {\n\n// Skip an inline comment, assuming this is one. The current character should\n// be the second / character in the // pair that begins this inline comment.\n// To finish the inline comment, we look for a newline or the end of the text.\n\n            if (ch !== '/') {\n                error(\"Not an inline comment\");\n            }\n\n            do {\n                next();\n                if (ch === '\\n' || ch === '\\r') {\n                    next();\n                    return;\n                }\n            } while (ch);\n        },\n\n        blockComment = function () {\n\n// Skip a block comment, assuming this is one. The current character should be\n// the * character in the /* pair that begins this block comment.\n// To finish the block comment, we look for an ending */ pair of characters,\n// but we also watch for the end of text before the comment is terminated.\n\n            if (ch !== '*') {\n                error(\"Not a block comment\");\n            }\n\n            do {\n                next();\n                while (ch === '*') {\n                    next('*');\n                    if (ch === '/') {\n                        next('/');\n                        return;\n                    }\n                }\n            } while (ch);\n\n            error(\"Unterminated block comment\");\n        },\n\n        comment = function () {\n\n// Skip a comment, whether inline or block-level, assuming this is one.\n// Comments always begin with a / character.\n\n            if (ch !== '/') {\n                error(\"Not a comment\");\n            }\n\n            next('/');\n\n            if (ch === '/') {\n                inlineComment();\n            } else if (ch === '*') {\n                blockComment();\n            } else {\n                error(\"Unrecognized comment\");\n            }\n        },\n\n        white = function () {\n\n// Skip whitespace and comments.\n// Note that we're detecting comments by only a single / character.\n// This works since regular expressions are not valid JSON(5), but this will\n// break if there are other valid values that begin with a / character!\n\n            while (ch) {\n                if (ch === '/') {\n                    comment();\n                } else if (ws.indexOf(ch) >= 0) {\n                    next();\n                } else {\n                    return;\n                }\n            }\n        },\n\n        word = function () {\n\n// true, false, or null.\n\n            switch (ch) {\n            case 't':\n                next('t');\n                next('r');\n                next('u');\n                next('e');\n                return true;\n            case 'f':\n                next('f');\n                next('a');\n                next('l');\n                next('s');\n                next('e');\n                return false;\n            case 'n':\n                next('n');\n                next('u');\n                next('l');\n                next('l');\n                return null;\n            case 'I':\n                next('I');\n                next('n');\n                next('f');\n                next('i');\n                next('n');\n                next('i');\n                next('t');\n                next('y');\n                return Infinity;\n            case 'N':\n              next( 'N' );\n              next( 'a' );\n              next( 'N' );\n              return NaN;\n            }\n            error(\"Unexpected \" + renderChar(ch));\n        },\n\n        value,  // Place holder for the value function.\n\n        array = function () {\n\n// Parse an array value.\n\n            var array = [];\n\n            if (ch === '[') {\n                next('[');\n                white();\n                while (ch) {\n                    if (ch === ']') {\n                        next(']');\n                        return array;   // Potentially empty array\n                    }\n                    // ES5 allows omitting elements in arrays, e.g. [,] and\n                    // [,null]. We don't allow this in JSON5.\n                    if (ch === ',') {\n                        error(\"Missing array element\");\n                    } else {\n                        array.push(value());\n                    }\n                    white();\n                    // If there's no comma after this value, this needs to\n                    // be the end of the array.\n                    if (ch !== ',') {\n                        next(']');\n                        return array;\n                    }\n                    next(',');\n                    white();\n                }\n            }\n            error(\"Bad array\");\n        },\n\n        object = function () {\n\n// Parse an object value.\n\n            var key,\n                object = {};\n\n            if (ch === '{') {\n                next('{');\n                white();\n                while (ch) {\n                    if (ch === '}') {\n                        next('}');\n                        return object;   // Potentially empty object\n                    }\n\n                    // Keys can be unquoted. If they are, they need to be\n                    // valid JS identifiers.\n                    if (ch === '\"' || ch === \"'\") {\n                        key = string();\n                    } else {\n                        key = identifier();\n                    }\n\n                    white();\n                    next(':');\n                    object[key] = value();\n                    white();\n                    // If there's no comma after this pair, this needs to be\n                    // the end of the object.\n                    if (ch !== ',') {\n                        next('}');\n                        return object;\n                    }\n                    next(',');\n                    white();\n                }\n            }\n            error(\"Bad object\");\n        };\n\n    value = function () {\n\n// Parse a JSON value. It could be an object, an array, a string, a number,\n// or a word.\n\n        white();\n        switch (ch) {\n        case '{':\n            return object();\n        case '[':\n            return array();\n        case '\"':\n        case \"'\":\n            return string();\n        case '-':\n        case '+':\n        case '.':\n            return number();\n        default:\n            return ch >= '0' && ch <= '9' ? number() : word();\n        }\n    };\n\n// Return the json_parse function. It will have access to all of the above\n// functions and variables.\n\n    return function (source, reviver) {\n        var result;\n\n        text = String(source);\n        at = 0;\n        lineNumber = 1;\n        columnNumber = 1;\n        ch = ' ';\n        result = value();\n        white();\n        if (ch) {\n            error(\"Syntax error\");\n        }\n\n// If there is a reviver function, we recursively walk the new structure,\n// passing each name/value pair to the reviver function for possible\n// transformation, starting with a temporary root object that holds the result\n// in an empty key. If there is not a reviver function, we simply return the\n// result.\n\n        return typeof reviver === 'function' ? (function walk(holder, key) {\n            var k, v, value = holder[key];\n            if (value && typeof value === 'object') {\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = walk(value, k);\n                        if (v !== undefined) {\n                            value[k] = v;\n                        } else {\n                            delete value[k];\n                        }\n                    }\n                }\n            }\n            return reviver.call(holder, key, value);\n        }({'': result}, '')) : result;\n    };\n}());\n\n// JSON5 stringify will not quote keys where appropriate\nJSON5.stringify = function (obj, replacer, space) {\n    if (replacer && (typeof(replacer) !== \"function\" && !isArray(replacer))) {\n        throw new Error('Replacer must be a function or an array');\n    }\n    var getReplacedValueOrUndefined = function(holder, key, isTopLevel) {\n        var value = holder[key];\n\n        // Replace the value with its toJSON value first, if possible\n        if (value && value.toJSON && typeof value.toJSON === \"function\") {\n            value = value.toJSON();\n        }\n\n        // If the user-supplied replacer if a function, call it. If it's an array, check objects' string keys for\n        // presence in the array (removing the key/value pair from the resulting JSON if the key is missing).\n        if (typeof(replacer) === \"function\") {\n            return replacer.call(holder, key, value);\n        } else if(replacer) {\n            if (isTopLevel || isArray(holder) || replacer.indexOf(key) >= 0) {\n                return value;\n            } else {\n                return undefined;\n            }\n        } else {\n            return value;\n        }\n    };\n\n    function isWordChar(c) {\n        return (c >= 'a' && c <= 'z') ||\n            (c >= 'A' && c <= 'Z') ||\n            (c >= '0' && c <= '9') ||\n            c === '_' || c === '$';\n    }\n\n    function isWordStart(c) {\n        return (c >= 'a' && c <= 'z') ||\n            (c >= 'A' && c <= 'Z') ||\n            c === '_' || c === '$';\n    }\n\n    function isWord(key) {\n        if (typeof key !== 'string') {\n            return false;\n        }\n        if (!isWordStart(key[0])) {\n            return false;\n        }\n        var i = 1, length = key.length;\n        while (i < length) {\n            if (!isWordChar(key[i])) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    }\n\n    // export for use in tests\n    JSON5.isWord = isWord;\n\n    // polyfills\n    function isArray(obj) {\n        if (Array.isArray) {\n            return Array.isArray(obj);\n        } else {\n            return Object.prototype.toString.call(obj) === '[object Array]';\n        }\n    }\n\n    function isDate(obj) {\n        return Object.prototype.toString.call(obj) === '[object Date]';\n    }\n\n    var objStack = [];\n    function checkForCircular(obj) {\n        for (var i = 0; i < objStack.length; i++) {\n            if (objStack[i] === obj) {\n                throw new TypeError(\"Converting circular structure to JSON\");\n            }\n        }\n    }\n\n    function makeIndent(str, num, noNewLine) {\n        if (!str) {\n            return \"\";\n        }\n        // indentation no more than 10 chars\n        if (str.length > 10) {\n            str = str.substring(0, 10);\n        }\n\n        var indent = noNewLine ? \"\" : \"\\n\";\n        for (var i = 0; i < num; i++) {\n            indent += str;\n        }\n\n        return indent;\n    }\n\n    var indentStr;\n    if (space) {\n        if (typeof space === \"string\") {\n            indentStr = space;\n        } else if (typeof space === \"number\" && space >= 0) {\n            indentStr = makeIndent(\" \", space, true);\n        } else {\n            // ignore space parameter\n        }\n    }\n\n    // Copied from Crokford's implementation of JSON\n    // See https://github.com/douglascrockford/JSON-js/blob/e39db4b7e6249f04a195e7dd0840e610cc9e941e/json2.js#L195\n    // Begin\n    var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        meta = { // table of character substitutions\n        '\\b': '\\\\b',\n        '\\t': '\\\\t',\n        '\\n': '\\\\n',\n        '\\f': '\\\\f',\n        '\\r': '\\\\r',\n        '\"' : '\\\\\"',\n        '\\\\': '\\\\\\\\'\n    };\n    function escapeString(string) {\n\n// If the string contains no control characters, no quote characters, and no\n// backslash characters, then we can safely slap some quotes around it.\n// Otherwise we must also replace the offending characters with safe escape\n// sequences.\n        escapable.lastIndex = 0;\n        return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n            var c = meta[a];\n            return typeof c === 'string' ?\n                c :\n                '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n        }) + '\"' : '\"' + string + '\"';\n    }\n    // End\n\n    function internalStringify(holder, key, isTopLevel) {\n        var buffer, res;\n\n        // Replace the value, if necessary\n        var obj_part = getReplacedValueOrUndefined(holder, key, isTopLevel);\n\n        if (obj_part && !isDate(obj_part)) {\n            // unbox objects\n            // don't unbox dates, since will turn it into number\n            obj_part = obj_part.valueOf();\n        }\n        switch(typeof obj_part) {\n            case \"boolean\":\n                return obj_part.toString();\n\n            case \"number\":\n                if (isNaN(obj_part) || !isFinite(obj_part)) {\n                    return \"null\";\n                }\n                return obj_part.toString();\n\n            case \"string\":\n                return escapeString(obj_part.toString());\n\n            case \"object\":\n                if (obj_part === null) {\n                    return \"null\";\n                } else if (isArray(obj_part)) {\n                    checkForCircular(obj_part);\n                    buffer = \"[\";\n                    objStack.push(obj_part);\n\n                    for (var i = 0; i < obj_part.length; i++) {\n                        res = internalStringify(obj_part, i, false);\n                        buffer += makeIndent(indentStr, objStack.length);\n                        if (res === null || typeof res === \"undefined\") {\n                            buffer += \"null\";\n                        } else {\n                            buffer += res;\n                        }\n                        if (i < obj_part.length-1) {\n                            buffer += \",\";\n                        } else if (indentStr) {\n                            buffer += \"\\n\";\n                        }\n                    }\n                    objStack.pop();\n                    if (obj_part.length) {\n                        buffer += makeIndent(indentStr, objStack.length, true)\n                    }\n                    buffer += \"]\";\n                } else {\n                    checkForCircular(obj_part);\n                    buffer = \"{\";\n                    var nonEmpty = false;\n                    objStack.push(obj_part);\n                    for (var prop in obj_part) {\n                        if (obj_part.hasOwnProperty(prop)) {\n                            var value = internalStringify(obj_part, prop, false);\n                            isTopLevel = false;\n                            if (typeof value !== \"undefined\" && value !== null) {\n                                buffer += makeIndent(indentStr, objStack.length);\n                                nonEmpty = true;\n                                key = isWord(prop) ? prop : escapeString(prop);\n                                buffer += key + \":\" + (indentStr ? ' ' : '') + value + \",\";\n                            }\n                        }\n                    }\n                    objStack.pop();\n                    if (nonEmpty) {\n                        buffer = buffer.substring(0, buffer.length-1) + makeIndent(indentStr, objStack.length) + \"}\";\n                    } else {\n                        buffer = '{}';\n                    }\n                }\n                return buffer;\n            default:\n                // functions and undefined should be ignored\n                return undefined;\n        }\n    }\n\n    // special case...when undefined is used inside of\n    // a compound object/array, return null.\n    // but when top-level, return undefined\n    var topLevelHolder = {\"\":obj};\n    if (obj === undefined) {\n        return getReplacedValueOrUndefined(topLevelHolder, '', true);\n    }\n    return internalStringify(topLevelHolder, '', true);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/json5/lib/json5.js\n// module id = 362\n// module chunks = 0","//     keymaster.js\n//     (c) 2011-2013 Thomas Fuchs\n//     keymaster.js may be freely distributed under the MIT license.\n\n;(function(global){\n  var k,\n    _handlers = {},\n    _mods = { 16: false, 18: false, 17: false, 91: false },\n    _scope = 'all',\n    // modifier keys\n    _MODIFIERS = {\n      '⇧': 16, shift: 16,\n      '⌥': 18, alt: 18, option: 18,\n      '⌃': 17, ctrl: 17, control: 17,\n      '⌘': 91, command: 91\n    },\n    // special keys\n    _MAP = {\n      backspace: 8, tab: 9, clear: 12,\n      enter: 13, 'return': 13,\n      esc: 27, escape: 27, space: 32,\n      left: 37, up: 38,\n      right: 39, down: 40,\n      del: 46, 'delete': 46,\n      home: 36, end: 35,\n      pageup: 33, pagedown: 34,\n      ',': 188, '.': 190, '/': 191,\n      '`': 192, '-': 189, '=': 187,\n      ';': 186, '\\'': 222,\n      '[': 219, ']': 221, '\\\\': 220\n    },\n    code = function(x){\n      return _MAP[x] || x.toUpperCase().charCodeAt(0);\n    },\n    _downKeys = [];\n\n  for(k=1;k<20;k++) _MAP['f'+k] = 111+k;\n\n  // IE doesn't support Array#indexOf, so have a simple replacement\n  function index(array, item){\n    var i = array.length;\n    while(i--) if(array[i]===item) return i;\n    return -1;\n  }\n\n  // for comparing mods before unassignment\n  function compareArray(a1, a2) {\n    if (a1.length != a2.length) return false;\n    for (var i = 0; i < a1.length; i++) {\n        if (a1[i] !== a2[i]) return false;\n    }\n    return true;\n  }\n\n  var modifierMap = {\n      16:'shiftKey',\n      18:'altKey',\n      17:'ctrlKey',\n      91:'metaKey'\n  };\n  function updateModifierKey(event) {\n      for(k in _mods) _mods[k] = event[modifierMap[k]];\n  };\n\n  // handle keydown event\n  function dispatch(event) {\n    var key, handler, k, i, modifiersMatch, scope;\n    key = event.keyCode;\n\n    if (index(_downKeys, key) == -1) {\n        _downKeys.push(key);\n    }\n\n    // if a modifier key, set the key.<modifierkeyname> property to true and return\n    if(key == 93 || key == 224) key = 91; // right command on webkit, command on Gecko\n    if(key in _mods) {\n      _mods[key] = true;\n      // 'assignKey' from inside this closure is exported to window.key\n      for(k in _MODIFIERS) if(_MODIFIERS[k] == key) assignKey[k] = true;\n      return;\n    }\n    updateModifierKey(event);\n\n    // see if we need to ignore the keypress (filter() can can be overridden)\n    // by default ignore key presses if a select, textarea, or input is focused\n    if(!assignKey.filter.call(this, event)) return;\n\n    // abort if no potentially matching shortcuts found\n    if (!(key in _handlers)) return;\n\n    scope = getScope();\n\n    // for each potential shortcut\n    for (i = 0; i < _handlers[key].length; i++) {\n      handler = _handlers[key][i];\n\n      // see if it's in the current scope\n      if(handler.scope == scope || handler.scope == 'all'){\n        // check if modifiers match if any\n        modifiersMatch = handler.mods.length > 0;\n        for(k in _mods)\n          if((!_mods[k] && index(handler.mods, +k) > -1) ||\n            (_mods[k] && index(handler.mods, +k) == -1)) modifiersMatch = false;\n        // call the handler and stop the event if neccessary\n        if((handler.mods.length == 0 && !_mods[16] && !_mods[18] && !_mods[17] && !_mods[91]) || modifiersMatch){\n          if(handler.method(event, handler)===false){\n            if(event.preventDefault) event.preventDefault();\n              else event.returnValue = false;\n            if(event.stopPropagation) event.stopPropagation();\n            if(event.cancelBubble) event.cancelBubble = true;\n          }\n        }\n      }\n    }\n  };\n\n  // unset modifier keys on keyup\n  function clearModifier(event){\n    var key = event.keyCode, k,\n        i = index(_downKeys, key);\n\n    // remove key from _downKeys\n    if (i >= 0) {\n        _downKeys.splice(i, 1);\n    }\n\n    if(key == 93 || key == 224) key = 91;\n    if(key in _mods) {\n      _mods[key] = false;\n      for(k in _MODIFIERS) if(_MODIFIERS[k] == key) assignKey[k] = false;\n    }\n  };\n\n  function resetModifiers() {\n    for(k in _mods) _mods[k] = false;\n    for(k in _MODIFIERS) assignKey[k] = false;\n  };\n\n  // parse and assign shortcut\n  function assignKey(key, scope, method){\n    var keys, mods;\n    keys = getKeys(key);\n    if (method === undefined) {\n      method = scope;\n      scope = 'all';\n    }\n\n    // for each shortcut\n    for (var i = 0; i < keys.length; i++) {\n      // set modifier keys if any\n      mods = [];\n      key = keys[i].split('+');\n      if (key.length > 1){\n        mods = getMods(key);\n        key = [key[key.length-1]];\n      }\n      // convert to keycode and...\n      key = key[0]\n      key = code(key);\n      // ...store handler\n      if (!(key in _handlers)) _handlers[key] = [];\n      _handlers[key].push({ shortcut: keys[i], scope: scope, method: method, key: keys[i], mods: mods });\n    }\n  };\n\n  // unbind all handlers for given key in current scope\n  function unbindKey(key, scope) {\n    var multipleKeys, keys,\n      mods = [],\n      i, j, obj;\n\n    multipleKeys = getKeys(key);\n\n    for (j = 0; j < multipleKeys.length; j++) {\n      keys = multipleKeys[j].split('+');\n\n      if (keys.length > 1) {\n        mods = getMods(keys);\n        key = keys[keys.length - 1];\n      }\n\n      key = code(key);\n\n      if (scope === undefined) {\n        scope = getScope();\n      }\n      if (!_handlers[key]) {\n        return;\n      }\n      for (i = 0; i < _handlers[key].length; i++) {\n        obj = _handlers[key][i];\n        // only clear handlers if correct scope and mods match\n        if (obj.scope === scope && compareArray(obj.mods, mods)) {\n          _handlers[key][i] = {};\n        }\n      }\n    }\n  };\n\n  // Returns true if the key with code 'keyCode' is currently down\n  // Converts strings into key codes.\n  function isPressed(keyCode) {\n      if (typeof(keyCode)=='string') {\n        keyCode = code(keyCode);\n      }\n      return index(_downKeys, keyCode) != -1;\n  }\n\n  function getPressedKeyCodes() {\n      return _downKeys.slice(0);\n  }\n\n  function filter(event){\n    var tagName = (event.target || event.srcElement).tagName;\n    // ignore keypressed in any elements that support keyboard data input\n    return !(tagName == 'INPUT' || tagName == 'SELECT' || tagName == 'TEXTAREA');\n  }\n\n  // initialize key.<modifier> to false\n  for(k in _MODIFIERS) assignKey[k] = false;\n\n  // set current scope (default 'all')\n  function setScope(scope){ _scope = scope || 'all' };\n  function getScope(){ return _scope || 'all' };\n\n  // delete all handlers for a given scope\n  function deleteScope(scope){\n    var key, handlers, i;\n\n    for (key in _handlers) {\n      handlers = _handlers[key];\n      for (i = 0; i < handlers.length; ) {\n        if (handlers[i].scope === scope) handlers.splice(i, 1);\n        else i++;\n      }\n    }\n  };\n\n  // abstract key logic for assign and unassign\n  function getKeys(key) {\n    var keys;\n    key = key.replace(/\\s/g, '');\n    keys = key.split(',');\n    if ((keys[keys.length - 1]) == '') {\n      keys[keys.length - 2] += ',';\n    }\n    return keys;\n  }\n\n  // abstract mods logic for assign and unassign\n  function getMods(key) {\n    var mods = key.slice(0, key.length - 1);\n    for (var mi = 0; mi < mods.length; mi++)\n    mods[mi] = _MODIFIERS[mods[mi]];\n    return mods;\n  }\n\n  // cross-browser events\n  function addEvent(object, event, method) {\n    if (object.addEventListener)\n      object.addEventListener(event, method, false);\n    else if(object.attachEvent)\n      object.attachEvent('on'+event, function(){ method(window.event) });\n  };\n\n  // set the handlers globally on document\n  addEvent(document, 'keydown', function(event) { dispatch(event) }); // Passing _scope to a callback to ensure it remains the same by execution. Fixes #48\n  addEvent(document, 'keyup', clearModifier);\n\n  // reset modifiers to false whenever the window is (re)focused.\n  addEvent(window, 'focus', resetModifiers);\n\n  // store previously defined key\n  var previousKey = global.key;\n\n  // restore previously defined key and return reference to our key object\n  function noConflict() {\n    var k = global.key;\n    global.key = previousKey;\n    return k;\n  }\n\n  // set window.key and window.key.set/get/deleteScope, and the default filter\n  global.key = assignKey;\n  global.key.setScope = setScope;\n  global.key.getScope = getScope;\n  global.key.deleteScope = deleteScope;\n  global.key.filter = filter;\n  global.key.isPressed = isPressed;\n  global.key.getPressedKeyCodes = getPressedKeyCodes;\n  global.key.noConflict = noConflict;\n  global.key.unbind = unbindKey;\n\n  if(typeof module !== 'undefined') module.exports = assignKey;\n\n})(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/keymaster/keymaster.js\n// module id = 363\n// module chunks = 0","'use strict';\n\nvar isExtendable = require('is-extendable');\nvar forIn = require('for-in');\n\nfunction mixinDeep(target, objects) {\n  var len = arguments.length, i = 0;\n  while (++i < len) {\n    var obj = arguments[i];\n    if (isObject(obj)) {\n      forIn(obj, copy, target);\n    }\n  }\n  return target;\n}\n\n/**\n * Copy properties from the source object to the\n * target object.\n *\n * @param  {*} `val`\n * @param  {String} `key`\n */\n\nfunction copy(val, key) {\n  if (key === '__proto__') {\n    return;\n  }\n\n  var obj = this[key];\n  if (isObject(val) && isObject(obj)) {\n    mixinDeep(obj, val);\n  } else {\n    this[key] = val;\n  }\n}\n\n/**\n * Returns true if `val` is an object or function.\n *\n * @param  {any} val\n * @return {Boolean}\n */\n\nfunction isObject(val) {\n  return isExtendable(val) && !Array.isArray(val);\n}\n\n/**\n * Expose `mixinDeep`\n */\n\nmodule.exports = mixinDeep;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/mixin-deep/index.js\n// module id = 372\n// module chunks = 0","/*!\n * is-extendable <https://github.com/jonschlinkert/is-extendable>\n *\n * Copyright (c) 2015-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isPlainObject = require('is-plain-object');\n\nmodule.exports = function isExtendable(val) {\n  return isPlainObject(val) || typeof val === 'function' || Array.isArray(val);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/mixin-deep/~/is-extendable/index.js\n// module id = 373\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } _setPrototypeOf(subClass.prototype, superClass && superClass.prototype); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) { return o.__proto__; }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar PopupAction =\n/*#__PURE__*/\nfunction (_React$Component) {\n  function PopupAction() {\n    _classCallCheck(this, PopupAction);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(PopupAction).apply(this, arguments));\n  }\n\n  _createClass(PopupAction, [{\n    key: \"handleClick\",\n    value: function handleClick() {\n      return this.props.onClick();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var className = this.props.className;\n\n      if (this.props.url && this.props.url !== '#') {\n        return _react.default.createElement(\"a\", {\n          href: this.props.url,\n          target: \"_blank\",\n          className: className\n        }, this.props.children);\n      }\n\n      return _react.default.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this.handleClick();\n        },\n        className: className\n      }, this.props.children);\n    }\n  }]);\n\n  _inherits(PopupAction, _React$Component);\n\n  return PopupAction;\n}(_react.default.Component);\n\n_defineProperty(PopupAction, \"defaultProps\", {\n  onClick: function onClick() {},\n  className: 'btn',\n  url: null\n});\n\nPopupAction.propTypes = {\n  onClick: _propTypes.default.func,\n  className: _propTypes.default.string,\n  children: _propTypes.default.node.isRequired,\n  url: _propTypes.default.string\n};\nvar _default = PopupAction;\nexports.default = _default;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/react-popup/dist/ActionButton.react.js\n// module id = 443\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _ActionButton = _interopRequireDefault(require(\"./ActionButton.react\"));\n\nvar _Bem = require(\"./Bem\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } _setPrototypeOf(subClass.prototype, superClass && superClass.prototype); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) { return o.__proto__; }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar PopupFooterButtons =\n/*#__PURE__*/\nfunction (_React$Component) {\n  function PopupFooterButtons() {\n    _classCallCheck(this, PopupFooterButtons);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(PopupFooterButtons).apply(this, arguments));\n  }\n\n  _createClass(PopupFooterButtons, [{\n    key: \"onOk\",\n    value: function onOk() {\n      return this.props.onOk();\n    }\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      return this.props.onClose();\n    }\n  }, {\n    key: \"buttonClick\",\n    value: function buttonClick(action) {\n      return this.props.buttonClick(action);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      if (!this.props.buttons) {\n        return null;\n      }\n\n      var btns = [];\n      this.props.buttons.forEach(function (btn, i) {\n        var url = btn.url ? btn.url : null;\n        var key = i;\n\n        if (typeof btn === 'string') {\n          if (btn === 'ok') {\n            btns.push(_react.default.createElement(_ActionButton.default, {\n              className: \"\".concat(_this.props.btnClass, \" \").concat(_this.props.btnClass, \"--ok\"),\n              key: key,\n              onClick: function onClick() {\n                return _this.onOk();\n              }\n            }, _this.props.defaultOk));\n          } else if (btn === 'cancel') {\n            btns.push(_react.default.createElement(_ActionButton.default, {\n              className: \"\".concat(_this.props.btnClass, \" \").concat(_this.props.btnClass, \"--cancel\"),\n              key: key,\n              onClick: function onClick() {\n                return _this.onClose();\n              }\n            }, _this.props.defaultCancel));\n          }\n        } else if (_react.default.isValidElement(btn)) {\n          btns.push(btn);\n        } else {\n          var className = \"\".concat(_this.props.btnClass, \" \").concat((0, _Bem.modifier)(btn.className, _this.props.btnClass));\n\n          var btnComponent = _react.default.createElement(_ActionButton.default, {\n            className: className,\n            key: key,\n            url: url,\n            onClick: function onClick() {\n              return _this.buttonClick(btn.action);\n            }\n          }, btn.text);\n\n          btns.push(btnComponent);\n        }\n      });\n      return _react.default.createElement(\"div\", {\n        className: this.props.className\n      }, btns);\n    }\n  }]);\n\n  _inherits(PopupFooterButtons, _React$Component);\n\n  return PopupFooterButtons;\n}(_react.default.Component);\n\nexports.default = PopupFooterButtons;\n\n_defineProperty(PopupFooterButtons, \"defaultProps\", {\n  buttons: null,\n  className: null,\n  onOk: function onOk() {},\n  onClose: function onClose() {},\n  buttonClick: function buttonClick() {},\n  btnClass: null,\n  defaultOk: null,\n  defaultCancel: null\n});\n\nPopupFooterButtons.propTypes = {\n  buttons: _propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object])),\n  className: _propTypes.default.string,\n  onOk: _propTypes.default.func,\n  onClose: _propTypes.default.func,\n  buttonClick: _propTypes.default.func,\n  btnClass: _propTypes.default.string,\n  defaultOk: _propTypes.default.string,\n  defaultCancel: _propTypes.default.string\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/react-popup/dist/ButtonsSpace.react.js\n// module id = 444\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _ButtonsSpace = _interopRequireDefault(require(\"./ButtonsSpace.react\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PopupFooter = function PopupFooter(props) {\n  if (!props.buttons) {\n    return null;\n  }\n\n  return _react.default.createElement(\"footer\", {\n    className: props.className\n  }, _react.default.createElement(_ButtonsSpace.default, {\n    buttonClick: props.buttonClick,\n    onOk: props.onOk,\n    onClose: props.onClose,\n    className: \"\".concat(props.className, \"__left-space\"),\n    btnClass: props.btnClass,\n    defaultOk: props.defaultOk,\n    defaultCancel: props.defaultCancel,\n    buttons: props.buttons.left\n  }), _react.default.createElement(_ButtonsSpace.default, {\n    buttonClick: props.buttonClick,\n    onOk: props.onOk,\n    onClose: props.onClose,\n    className: \"\".concat(props.className, \"__right-space\"),\n    btnClass: props.btnClass,\n    defaultOk: props.defaultOk,\n    defaultCancel: props.defaultCancel,\n    buttons: props.buttons.right\n  }));\n};\n\nPopupFooter.propTypes = {\n  buttons: _propTypes.default.shape({\n    left: _propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object])),\n    right: _propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object]))\n  }),\n  className: _propTypes.default.string,\n  btnClass: _propTypes.default.string,\n  onOk: _propTypes.default.func,\n  onClose: _propTypes.default.func,\n  buttonClick: _propTypes.default.func,\n  defaultOk: _propTypes.default.string,\n  defaultCancel: _propTypes.default.string\n};\nPopupFooter.defaultProps = {\n  buttons: null,\n  className: null,\n  btnClass: null,\n  defaultOk: null,\n  defaultCancel: null,\n  buttonClick: function buttonClick() {},\n  onOk: function onOk() {},\n  onClose: function onClose() {}\n};\nvar _default = PopupFooter;\nexports.default = _default;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/react-popup/dist/Footer.react.js\n// module id = 445\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PopupHeader = function PopupHeader(props) {\n  if (!props.title) {\n    return null;\n  }\n\n  return _react.default.createElement(\"header\", {\n    className: props.className\n  }, _react.default.createElement(\"h1\", {\n    className: \"\".concat(props.className, \"__title\")\n  }, props.title));\n};\n\nPopupHeader.defaultProps = {\n  title: null,\n  className: null\n};\nPopupHeader.propTypes = {\n  title: _propTypes.default.string,\n  className: _propTypes.default.string\n};\nvar _default = PopupHeader;\nexports.default = _default;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/react-popup/dist/Header.react.js\n// module id = 446\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _keymaster = _interopRequireDefault(require(\"keymaster\"));\n\nvar _Store = _interopRequireDefault(require(\"./Store\"));\n\nvar _Header = _interopRequireDefault(require(\"./Header.react\"));\n\nvar _Footer = _interopRequireDefault(require(\"./Footer.react\"));\n\nvar _Constants = _interopRequireDefault(require(\"./Constants\"));\n\nvar _Bem = require(\"./Bem\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } _setPrototypeOf(subClass.prototype, superClass && superClass.prototype); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) { return o.__proto__; }; return _getPrototypeOf(o); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar defaultKeyFilter = _keymaster.default.filter;\nvar Store = new _Store.default();\n\nvar handleClose = function handleClose() {\n  _keymaster.default.deleteScope('react-popup');\n\n  _keymaster.default.filter = defaultKeyFilter;\n  Store.close();\n};\n\nvar initialState = {\n  id: null,\n  title: null,\n  buttons: null,\n  content: null,\n  visible: false,\n  className: null,\n  noOverlay: false,\n  position: false,\n  closeOnOutsideClick: true,\n  onClose: function onClose() {},\n  onOpen: function onOpen() {}\n};\n\nvar Popup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _createClass(Popup, null, [{\n    key: \"addShowListener\",\n    value: function addShowListener(callback) {\n      Store.on(_Constants.default.SHOW, callback);\n    }\n  }, {\n    key: \"removeShowListener\",\n    value: function removeShowListener(callback) {\n      Store.removeListener(_Constants.default.SHOW, callback);\n    }\n  }, {\n    key: \"addCloseListener\",\n    value: function addCloseListener(callback) {\n      Store.on(_Constants.default.CLOSE, callback);\n    }\n  }, {\n    key: \"removeCloseListener\",\n    value: function removeCloseListener(callback) {\n      Store.removeListener(_Constants.default.CLOSE, callback);\n    }\n  }, {\n    key: \"register\",\n    value: function register(data) {\n      var id = Store.getId();\n      Store.popups[id] = Object.assign({}, initialState, data);\n      return id;\n    }\n  }, {\n    key: \"queue\",\n    value: function queue(id) {\n      if (!Object.prototype.hasOwnProperty.call(Store.popups, id)) {\n        return false;\n      }\n      /** Add popup to queue */\n\n\n      Store.queue.push(id);\n      /** Dispatch queue */\n\n      Store.dispatch();\n      return id;\n    }\n  }, {\n    key: \"create\",\n    value: function create(data, bringToFront) {\n      /** Register popup */\n      var id = this.register(data);\n      /** Queue popup */\n\n      if (bringToFront === true) {\n        var currentlyActive = Store.active;\n        Store.active = null;\n        this.queue(id);\n        this.queue(currentlyActive);\n        Store.dispatch();\n      } else {\n        this.queue(id);\n      }\n\n      return id;\n    }\n  }, {\n    key: \"alert\",\n    value: function alert(text, title, bringToFront) {\n      var data = {\n        title: title,\n        content: text,\n        buttons: {\n          right: ['ok']\n        }\n      };\n      return this.create(data, bringToFront);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      Store.close();\n    }\n  }, {\n    key: \"registerPlugin\",\n    value: function registerPlugin(name, callback) {\n      Store.plugins[name] = callback.bind(this);\n    }\n  }, {\n    key: \"plugins\",\n    value: function plugins() {\n      return Store.plugins;\n    }\n  }, {\n    key: \"refreshPosition\",\n    value: function refreshPosition(position) {\n      return Store.refreshPosition(position);\n    }\n  }, {\n    key: \"clearQueue\",\n    value: function clearQueue() {\n      return Store.clearQueue();\n    }\n  }]);\n\n  function Popup(props) {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Popup).call(this, props));\n    initialState.closeOnOutsideClick = _this.props.closeOnOutsideClick;\n    _this.state = initialState;\n    _this.bound = {\n      onShow: _this.onShow.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      onClose: _this.onClose.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      onRefresh: _this.onRefresh.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      containerClick: _this.containerClick.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      handleButtonClick: _this.handleButtonClick.bind(_assertThisInitialized(_assertThisInitialized(_this)))\n    };\n    _this.boxRef = null;\n    _this.defaultKeyBindings = {\n      ok: _this.props.defaultOkKey,\n      cancel: _this.props.defaultCancelKey\n    };\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      Store.on(_Constants.default.SHOW, this.bound.onShow);\n      Store.on(_Constants.default.CLOSE, this.bound.onClose);\n      Store.on(_Constants.default.REFRESH, this.bound.onRefresh);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.boxRef) {\n        this.boxRef.focus();\n      }\n\n      this.setPosition(this.state.position);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      Store.removeListener(_Constants.default.SHOW, this.bound.onShow);\n      Store.removeListener(_Constants.default.CLOSE, this.bound.onClose);\n      Store.removeListener(_Constants.default.REFRESH, this.bound.onRefresh);\n\n      _keymaster.default.deleteScope('react-popup');\n\n      _keymaster.default.filter = defaultKeyFilter;\n    }\n    /**\n     * Refresh popup position\n     * @param position\n     * @private\n     */\n\n  }, {\n    key: \"onRefresh\",\n    value: function onRefresh(position) {\n      this.setPosition(position);\n    }\n    /**\n     * On popup close\n     * @private\n     */\n\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      _keymaster.default.deleteScope('react-popup');\n\n      _keymaster.default.filter = defaultKeyFilter;\n      this.state.onClose(this.state.id, this.state.title);\n      this.setState(initialState);\n    }\n    /**\n     * On popup show\n     * @private\n     */\n\n  }, {\n    key: \"onShow\",\n    value: function onShow(id) {\n      var _this2 = this;\n\n      _keymaster.default.deleteScope('react-popup');\n\n      _keymaster.default.filter = function () {\n        return true;\n      };\n\n      var popup = Store.activePopup();\n\n      if (popup.buttons && !Object.prototype.hasOwnProperty.call(popup.buttons, 'left')) {\n        popup.buttons.left = [];\n      }\n\n      if (popup.buttons && !Object.prototype.hasOwnProperty.call(popup.buttons, 'right')) {\n        popup.buttons.right = [];\n      }\n\n      this.setState({\n        id: id,\n        title: popup.title,\n        content: popup.content,\n        buttons: popup.buttons,\n        visible: true,\n        className: popup.className,\n        noOverlay: popup.noOverlay,\n        position: popup.position,\n        closeOnOutsideClick: popup.closeOnOutsideClick,\n        onClose: popup.onClose,\n        onOpen: popup.onOpen\n      }, function () {\n        _keymaster.default.setScope('react-popup');\n\n        _this2.state.onOpen(_this2.state.id, _this2.state.title);\n\n        if (_this2.props.escToClose) {\n          (0, _keymaster.default)('esc', 'react-popup', _this2.handleKeyEvent.bind(_this2, 'cancel', _this2.state.id));\n        }\n\n        if (_this2.state.buttons) {\n          if (_this2.state.buttons.left.length) {\n            _this2.state.buttons.left.forEach(function (button) {\n              return _this2.bindKeyEvents(button);\n            });\n          }\n\n          if (_this2.state.buttons.right.length) {\n            _this2.state.buttons.right.forEach(function (button) {\n              return _this2.bindKeyEvents(button);\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(position) {\n      var box = this.boxRef;\n      var boxPosition = position;\n\n      if (!box) {\n        return;\n      }\n\n      if (!boxPosition) {\n        boxPosition = this.state.position;\n      }\n\n      if (!boxPosition) {\n        box.style.opacity = 1;\n        box.style.top = null;\n        box.style.left = null;\n        box.style.margin = null;\n        return;\n      }\n\n      if (typeof boxPosition === 'function') {\n        boxPosition.call(null, box);\n        return;\n      }\n\n      box.style.top = \"\".concat(parseInt(boxPosition.y, 10), \"px\");\n      box.style.left = \"\".concat(parseInt(boxPosition.x, 10), \"px\");\n      box.style.margin = 0;\n      box.style.opacity = 1;\n    }\n    /**\n     * Handle container click\n     * @param e\n     * @private\n     */\n\n  }, {\n    key: \"containerClick\",\n    value: function containerClick() {\n      if (this.state.closeOnOutsideClick) {\n        handleClose();\n      }\n    }\n  }, {\n    key: \"bindKeyEvents\",\n    value: function bindKeyEvents(button) {\n      var code = null;\n\n      if (typeof button === 'string') {\n        code = this.defaultKeyBindings[button];\n      } else if (Object.prototype.hasOwnProperty.call(button, 'key')) {\n        code = button.key;\n      }\n\n      if (this.props.escToClose && code === 'esc') {\n        return;\n      }\n\n      if (code) {\n        (0, _keymaster.default)(code, 'react-popup', this.handleKeyEvent.bind(this, button, this.state.id));\n      }\n    }\n  }, {\n    key: \"handleKeyEvent\",\n    value: function handleKeyEvent(button, id, e) {\n      var excludeTags = ['INPUT', 'TEXTAREA', 'BUTTON'];\n\n      if (this.state.id !== id || button.key === 'enter' && excludeTags.indexOf(e.target.tagName) >= 0) {\n        return true;\n      }\n\n      if (typeof button === 'string') {\n        handleClose();\n      } else if (Object.prototype.hasOwnProperty.call(button, 'action')) {\n        this.handleButtonClick(button.action);\n      }\n\n      return false;\n    }\n    /**\n     * Handle button clicks\n     * @param action\n     * @returns {*}\n     * @private\n     */\n\n  }, {\n    key: \"handleButtonClick\",\n    value: function handleButtonClick(action) {\n      if (typeof action === 'function') {\n        return action.call(this, Store);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"className\",\n    value: function className(_className) {\n      return (0, _Bem.element)(_className, this.props.className);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var className = this.props.className;\n      var box = null;\n      var overlayStyle = {};\n\n      if (this.state.visible) {\n        var closeBtn = null;\n        className += \" \".concat(this.props.className, \"--visible\");\n\n        if (this.props.closeBtn) {\n          closeBtn = _react.default.createElement(\"button\", {\n            onClick: handleClose,\n            className: \"\".concat(this.props.className, \"__close\")\n          }, this.props.closeHtml);\n        }\n\n        var boxClass = this.className('box');\n\n        if (this.state.className) {\n          boxClass += \" \".concat((0, _Bem.modifier)(this.state.className, boxClass));\n        }\n\n        box = _react.default.createElement(\"article\", {\n          role: \"dialog\",\n          tabIndex: \"-1\",\n          ref: function ref(el) {\n            _this3.boxRef = el;\n          },\n          style: {\n            opacity: 0,\n            outline: 'none'\n          },\n          className: boxClass\n        }, closeBtn, _react.default.createElement(_Header.default, {\n          title: this.state.title,\n          className: this.className('box__header')\n        }), _react.default.createElement(\"div\", {\n          className: this.className('box__body')\n        }, this.state.content), _react.default.createElement(_Footer.default, {\n          className: this.className('box__footer'),\n          btnClass: this.props.btnClass,\n          buttonClick: this.bound.handleButtonClick,\n          onClose: handleClose,\n          onOk: handleClose,\n          defaultOk: this.props.defaultOk,\n          defaultCancel: this.props.defaultCancel,\n          buttons: this.state.buttons\n        }));\n      }\n\n      if (this.state.noOverlay) {\n        overlayStyle.background = 'transparent';\n      }\n\n      return _react.default.createElement(\"div\", {\n        className: className\n      }, _react.default.createElement(\"div\", {\n        role: \"presentation\",\n        onClick: this.bound.containerClick,\n        className: this.className('overlay'),\n        style: overlayStyle\n      }), box);\n    }\n  }]);\n\n  _inherits(Popup, _React$Component);\n\n  return Popup;\n}(_react.default.Component);\n\n_defineProperty(Popup, \"defaultProps\", {\n  className: 'mm-popup',\n  btnClass: 'mm-popup__btn',\n  closeBtn: true,\n  closeHtml: null,\n  defaultOk: 'Ok',\n  defaultOkKey: 'enter',\n  defaultCancel: 'Cancel',\n  defaultCancelKey: 'esc',\n  closeOnOutsideClick: true,\n  escToClose: true,\n  onClose: function onClose() {},\n  onOpen: function onOpen() {}\n});\n\nPopup.propTypes = {\n  className: _propTypes.default.string,\n  btnClass: _propTypes.default.string,\n  closeBtn: _propTypes.default.bool,\n  closeHtml: _propTypes.default.node,\n  defaultOk: _propTypes.default.string,\n  defaultOkKey: _propTypes.default.string,\n  defaultCancel: _propTypes.default.string,\n  defaultCancelKey: _propTypes.default.string,\n  closeOnOutsideClick: _propTypes.default.bool,\n  escToClose: _propTypes.default.bool,\n  onClose: _propTypes.default.func,\n  onOpen: _propTypes.default.func\n};\nvar _default = Popup;\nexports.default = _default;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/react-popup/dist/Popup.react.js\n// module id = 447\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _events = require(\"events\");\n\nvar _Constants = _interopRequireDefault(require(\"./Constants\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } _setPrototypeOf(subClass.prototype, superClass && superClass.prototype); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) { return o.__proto__; }; return _getPrototypeOf(o); }\n\nvar PopupStore =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  function PopupStore(props) {\n    var _this;\n\n    _classCallCheck(this, PopupStore);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PopupStore).call(this, props));\n    _this.id = 1;\n    _this.popups = {};\n    _this.queue = [];\n    _this.active = null;\n    _this.plugins = {};\n    return _this;\n  }\n  /**\n   * Get popup ID\n   */\n\n\n  _createClass(PopupStore, [{\n    key: \"getId\",\n    value: function getId() {\n      return \"id_\".concat(this.id++);\n    }\n    /**\n     * Get active popup\n     * @returns {*}\n     */\n\n  }, {\n    key: \"activePopup\",\n    value: function activePopup() {\n      return this.popups[this.active];\n    }\n    /**\n     * Close current popup\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      if (!this.active) {\n        return false;\n      }\n\n      var id = this.active;\n      this.active = null;\n      this.emit(_Constants.default.CLOSE, id);\n      this.dispatch();\n      this.value = null;\n      return id;\n    }\n    /**\n     * Dispatch next popup in queue\n     */\n\n  }, {\n    key: \"dispatch\",\n    value: function dispatch() {\n      if (this.active || this.queue.length < 1) {\n        return false;\n      }\n\n      var id = this.queue.shift();\n      /** Set active */\n\n      this.active = id;\n      this.emit(_Constants.default.SHOW, id);\n      return true;\n    }\n    /**\n     * Refresh popup position\n     * @param position\n     */\n\n  }, {\n    key: \"refreshPosition\",\n    value: function refreshPosition(position) {\n      this.emit(_Constants.default.REFRESH, position);\n    }\n    /**\n     * Clear queue\n     */\n\n  }, {\n    key: \"clearQueue\",\n    value: function clearQueue() {\n      this.queue = [];\n    }\n  }]);\n\n  _inherits(PopupStore, _EventEmitter);\n\n  return PopupStore;\n}(_events.EventEmitter);\n\nexports.default = PopupStore;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/react-popup/dist/Store.js\n// module id = 448\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _Popup.default;\n  }\n});\n\nvar _Popup = _interopRequireDefault(require(\"./Popup.react\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/react-popup/dist/index.js\n// module id = 449\n// module chunks = 0","import React  from \"react\"\nimport moment from \"moment\"\n\nexport default function Period(period) {\n    let from = period.start || \"\";\n    let to   = period.end   || \"\";\n\n    if (from && to) {\n        from = moment(from);\n        to = moment(to);\n\n        if (from.isSame(to, \"day\")) {\n            return (\n                <span>\n                    {\n                        from.format(\"MM/DD/YYYY\")\n                    }\n                    {   from.isSame(to, \"hour\") ?\n                        null :\n                        <span>\n                            <small className=\"text-muted\"> from </small>\n                            { from.format(\"HH:mm\") }\n                            <small className=\"text-muted\"> to </small>\n                            { to.format(\"HH:mm\") }\n                        </span>\n                    }\n                </span>\n            )\n        }\n        else {\n            return (\n                <span>\n                    <small className=\"text-muted\"> from </small>\n                    { from.format(\"MM/DD/YYYY\") }\n                    <small className=\"text-muted\"> to </small>\n                    { to.format(\"MM/DD/YYYY\") }\n                </span>\n            )\n        }\n    }\n    else {\n        if (from) {\n            from = moment(from);\n            return (\n                <span>\n                    <small className=\"text-muted\"> from </small>\n                    { from.format(\"MM/DD/YYYY\") }\n                </span>\n            )\n        }\n        else if (to) {\n            to = moment(to);\n            return (\n                <span>\n                    <small className=\"text-muted\"> to </small>\n                    { to.format(\"MM/DD/YYYY\") }\n                </span>\n            )\n        }\n    }\n    return <small className=\"text-muted\">N/A</small>\n}\n\n\n// WEBPACK FOOTER //\n// ./components/Fhir/Period.js","/**\n * The purpose of this file is to combine reducers and create the single store.\n * One should use it simply like so:\n *\n * ```import STORE from \"./redux\"```\n */\nimport { createStore, applyMiddleware, combineReducers } from \"redux\"\nimport thunk     from \"redux-thunk\"\nimport selection from \"./selection\"\nimport query     from \"./query\"\nimport settings  from \"./settings\"\nimport urlParams from \"./urlParams\"\n\nconst middleWares = [thunk]\n\n// Create logger middleware that will log all redux action but only\n// use that in development env.\nif (process.env.NODE_ENV == \"development\" && console && console.groupCollapsed) {\n    let logger = _store => next => action => {\n        let result;\n        if (!action.__no_log) {\n            console.groupCollapsed(action.type)\n            console.info(\"dispatching\", action)\n            result = next(action)\n            console.log(\"next state\", _store.getState())\n            console.groupEnd(action.type)\n        }\n        else {\n            result = next(action)\n        }\n        return result\n    }\n\n    middleWares.push(logger)\n}\n\nexport default createStore(\n    combineReducers({\n        selection,\n        query,\n        settings,\n        urlParams\n    }),\n    applyMiddleware(...middleWares)\n);\n\n\n\n// WEBPACK FOOTER //\n// ./redux/index.js","import { createAction, handleActions } from \"redux-actions\"\nimport { setHashParam, parseQueryString, boolVal } from \"../lib\"\n\nconst PARAMS = parseQueryString(location.hash)\nconst SINGLE = boolVal(PARAMS[\"single-selection\"])\n\n/**\n * For the initial selection state parse the query portion of the URL hash (if\n * any). Note that this is not enough! The hash query can provide list of\n * patient IDs but we initialize them as true. Later they should be updated to\n * contain actual patient objects instead of true!\n */\nlet initialSelection = {};\n(PARAMS._selection || \"\").split(/\\s*,\\s*/).forEach(k => {\n    if (k) {\n\n        // In single mode the last id will become the selected one!\n        if (SINGLE) {\n            initialSelection = {\n                [k]: true\n            };\n        }\n        else {\n            initialSelection[k] = true;\n        }\n    }\n})\n\n/**\n * The initial state is just an empty object that will be filled\n * with patient IDs as keys and booleans as values to indicate if\n * that patient is selected.\n */\nconst INITIAL_STATE = {\n    ...initialSelection,\n    selectionCleared: false\n}\n\n// Private action constants\nconst TOGGLE  = \"app/selection/TOGGLE\"\nconst SET_ALL = \"app/selection/SET_ALL\"\nconst SELECTION_CLEARED = \"app/selection/SELECTION_CLEARED\"\n\n// Create (and export) the redux actions\nexport const toggle = createAction(TOGGLE)\nexport const setAll = createAction(SET_ALL)\nexport const setSelectionCleared = createAction(SELECTION_CLEARED)\n\n/**\n * Update the \"_selection\" hash parameter whenever the selection changes\n * @param {Object} selection The selection to set\n */\nfunction setHashSelection(selection) {\n    setHashParam(\n        \"_selection\",\n        Object.keys(selection).filter(\n            k => selection.hasOwnProperty(k) && !!selection[k]\n        ).join(\",\")\n    )\n}\n\n// Export the reducer as default\nexport default handleActions({\n\n    /**\n     * Toggle the selected state of action.payload.id\n     */\n    [TOGGLE]: (state, action) => {\n        let id = String(action.payload.id);\n        let newState = {\n            [id]: state[id] ? false : action.payload,\n            selectionCleared: false\n        };\n\n        if (!SINGLE) {\n            newState = { ...state, ...newState }\n        }\n        setHashSelection(newState)\n        return newState\n    },\n\n    /**\n     * If user's most recent action was to clear selection,\n     * track that so we can skip showing warning dialog on close\n     */\n    [SELECTION_CLEARED]: (state, action) => {\n        return { ...state, selectionCleared: true }\n    },\n\n    /**\n     * Set the entire selection. Useful if an initial selection\n     * needs to be provided from the host application.\n     */\n    [SET_ALL]: (_, action) => {\n        let newState = { ...action.payload, selectionCleared: false }\n        setHashSelection(newState)\n        return newState\n    }\n\n}, INITIAL_STATE)\n\n\n\n// WEBPACK FOOTER //\n// ./redux/selection.js","import { createAction, handleActions } from \"redux-actions\"\nimport INITIAL_STATE                   from \"../config.default.js\"\nimport mixinDeep from \"mixin-deep\";\n\n// Private action constants\nconst MERGE                = \"app/settings/MERGE\"\nconst REPLACE              = \"app/settings/REPLACE\"\nconst RENDER_SELECTED_ONLY = \"app/settings/RENDER_SELECTED_ONLY\"\n\n// Create (and export) the redux actions\nexport const merge            = createAction(MERGE)\nexport const replace          = createAction(REPLACE)\nexport const showSelectedOnly = createAction(RENDER_SELECTED_ONLY)\n\n// Export the reducer as default\nexport default handleActions({\n\n    [MERGE]: (state, action) => mixinDeep(state, action.payload, { loaded: true }),\n\n    [RENDER_SELECTED_ONLY]: (state, action) => ({\n        ...state,\n        renderSelectedOnly: !!action.payload\n    }),\n\n    // Replace the entire state (useful for testing)\n    [REPLACE]: (_, action) => ({ ...action.payload })\n}, INITIAL_STATE)\n\n\n\n// WEBPACK FOOTER //\n// ./redux/settings.js","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/style-loader/fixUrls.js\n// module id = 537\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./AgeSelector.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./AgeSelector.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./AgeSelector.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/AgeSelector/AgeSelector.less\n// module id = 538\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./App.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./App.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./App.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/App/App.less\n// module id = 539\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./DialogFooter.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./DialogFooter.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./DialogFooter.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/DialogFooter/DialogFooter.less\n// module id = 540\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Footer.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Footer.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Footer.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/Footer/Footer.less\n// module id = 541\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Header.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Header.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Header.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/Header/Header.less\n// module id = 542\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Loader.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Loader.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./Loader.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/Loader/Loader.less\n// module id = 543\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientDetail.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientDetail.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientDetail.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/PatientDetail/PatientDetail.less\n// module id = 544\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientImage.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientImage.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientImage.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/PatientImage/PatientImage.less\n// module id = 545\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientList.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientList.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./PatientList.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/PatientList/PatientList.less\n// module id = 546\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./SortWidget.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./SortWidget.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./SortWidget.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/SortWidget/SortWidget.less\n// module id = 547\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./TagSelector.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {\"singleton\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./TagSelector.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./TagSelector.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/TagSelector/TagSelector.less\n// module id = 548\n// module chunks = 0","import * as React from \"react\"\nimport moment     from \"moment\"\nimport $          from \"jquery\"\n\n/**\n * Returns the int representation of the first argument or the\n * \"defaultValue\" if the int conversion is not possible.\n * @param {number|string} x The argument to convert\n * @param {number} defaultValue The fall-back return value. This will be\n *                              converted to integer too.\n * @return {Number} The resulting integer.\n */\nexport function intVal(x, defaultValue = 0) {\n    var out = parseInt(x + \"\", 10);\n    if (isNaN(out) || !isFinite(out)) {\n        out = intVal(defaultValue);\n    }\n    return out;\n}\n\n/**\n * Converts the argument to boolean value. \"0\" and \"no\" are recognized as false.\n * \"1\" and \"yes\" are recognized as true. Everything else is just !!var\n * @param {*} x The argument to convert\n * @returns {Boolean} The argument converted to boolean\n */\nexport function boolVal(x) {\n    return (/^(false|0|no)$/i).test(String(x)) ?\n        false :\n        (/^(true|1|yes)$/i).test(String(x)) ?\n            true :\n            !!x;\n}\n\n/**\n * Given some input argument, this function tries to treat it like an error and\n * extract an error message out of it. Supported input types are:\n * - String\n * - Error\n * - AJAX JSON response\n * - FHIR JSON response\n * - Object map of error messages\n * @param {*} input The input to analyse\n * @param {String|JSX.Element} error(s)\n */\nexport function getErrorMessage(input) {\n    if (input && typeof input == \"string\") {\n        return input;\n    }\n\n    let out = \"Unknown error\"\n\n    if (input && input instanceof Error) {\n        out = String(input);\n    }\n\n    else if (input && input.responseJSON) {\n        if (Array.isArray(input.responseJSON.issue) && input.responseJSON.issue.length) {\n            out = input.responseJSON.issue.map(o => o.diagnostics || \"-\").join(\"\\n\")\n        }\n        else {\n            out = (\n                input.responseJSON.message ||\n                input.responseJSON.error ||\n                \"Unknown error\"\n            )\n        }\n    }\n\n    else if (input && input.responseText) {\n        out = ( input.responseText + \" - \" + input.statusText) || \"Unknown error\"\n    }\n\n    else if (input && input.statusText) {\n        if (input.statusText == \"timeout\") {\n            out = \"The server failed to respond in the desired number of seconds\"\n        }\n        else {\n            out = input.statusText || \"Unknown error\"\n        }\n    }\n\n    if (out && typeof out == \"object\") {\n        let out2 = []\n        for (let key in (out)) {\n            out2.push(React.createElement(\"li\", { key }, out[key]));\n        }\n        return React.createElement(\"div\", null, [\n            \"Multiple errors\",\n            React.createElement(\"ul\", null, out2)\n        ])\n    }\n\n    return String(out).replace(/(Error\\:\\s)+/, \"Error: \");\n}\n\n/**\n * Walks thru an object (ar array) and returns the value found at the provided\n * path. This function is very simple so it intentionally does not support any\n * argument polymorphism, meaning that the path can only be a dot-separated\n * string. If the path is invalid returns undefined.\n * @param {Object} obj The object (or Array) to walk through\n * @param {String} path The path (eg. \"a.b.4.c\")\n * @returns {*} Whatever is found in the path or undefined\n */\nexport function getPath(obj, path = \"\") {\n    return path.split(\".\").reduce((out, key) => out ? out[key] : undefined, obj)\n}\n\nexport function compileQueryString(params) {\n    let query = []\n\n    for (let key in params) {\n        let p = params[key]\n\n        // If the parameter value is falsy (and other than 0) just don't include\n        // it in the query\n        if (!p && p !== 0) {\n            continue;\n        }\n\n        // if the value is an array then include that parameter multiple times\n        // with different values\n        if (Array.isArray(p)) {\n            p.forEach(v => {\n\n                // skip falsy not 0 values same as above\n                if (v || v === 0) {\n                    query.push(\n                        encodeURIComponent(key) + \"=\"\n                        + encodeURIComponent(v)\n                    )\n                }\n            })\n        }\n\n        // Add normal param to the query string\n        else {\n            query.push(\n                encodeURIComponent(key) + \"=\"\n                + encodeURIComponent(p)\n            )\n        }\n    }\n\n    return query.join(\"&\")\n}\n\nexport function parseQueryString(str) {\n    let out = {};\n    str = String(str || \"\").trim().split(\"?\").pop();\n    str.split(/&/).forEach(pair => {\n        let tokens = pair.split(\"=\")\n        let key    = decodeURIComponent(tokens[0])\n        if (key) {\n            let value = decodeURIComponent(tokens[1] || \"true\")\n            if (out.hasOwnProperty(key)) {\n                if (!Array.isArray(out[key])) {\n                    out[key] = [out[key]]\n                }\n                out[key].push(value)\n            }\n            else {\n                out[key] = value\n            }\n        }\n    })\n    return out\n}\n\nexport function setHashParam(name, value) {\n    let query = location.hash.split(\"?\")[1] || \"\";\n    let hash  = location.hash.replace(/\\?.*/, \"\");\n    // console.warn(query)\n    query = parseQueryString(query || \"\");\n    if (value === undefined) {\n        if (query.hasOwnProperty(name)) {\n            delete query[name]\n        }\n    }\n    else {\n        query[name] = value\n    }\n\n    query = compileQueryString(query)\n    location.hash = hash + (query ? \"?\" + query : \"\")\n}\n\n// Fhir parsing helpers --------------------------------------------------------\n\n/**\n * Given an array of Coding objects finds and returns the one that contains\n * an MRN (using a code == \"MR\" check)\n * @export\n * @param {Object[]} codings Fhir.Coding[]\n * @returns {Object} Fhir.Coding | undefined\n */\nexport function findMRNCoding(codings) {\n    if (Array.isArray(codings)) {\n        return codings.find(coding => coding.code == \"MR\");\n    }\n}\n\n/**\n * Given an array of identifier objects finds and returns the one that contains an MRN\n * @export\n * @param {Object[]} identifiers\n * @returns {Object}\n */\nexport function findMRNIdentifier(identifiers) {\n    return identifiers.find(\n        identifier => !!findMRNCoding(getPath(identifier, \"type.coding\"))\n    );\n}\n\n/**\n * Given a patient returns his MRN\n * @export\n * @param {Object} patient\n * @returns {string}\n */\nexport function getPatientMRN(patient) {\n    let mrn = null;\n\n    if (Array.isArray(patient.identifier) && patient.identifier.length) {\n        mrn = findMRNIdentifier(patient.identifier);\n        if (mrn) {\n            return mrn.value;\n        }\n    }\n\n    return mrn;\n}\n\n/**\n * Extracts and returns a human-readable name string from FHIR patient object.\n * @param {Object} patient FHIR patient object\n * @returns {String} Patient's name or an empty string\n */\nexport function getPatientName(patient) {\n    if (!patient) {\n        return \"\"\n    }\n\n    let name = patient.name;\n    if (!Array.isArray(name)) {\n        name = [name];\n    }\n    name = name[0];\n    if (!name) {\n        return \"\";\n    }\n\n    let family = Array.isArray(name.family) ? name.family : [ name.family ];\n    let given  = Array.isArray(name.given ) ? name.given  : [ name.given  ];\n    let prefix = Array.isArray(name.prefix) ? name.prefix : [ name.prefix ];\n    let suffix = Array.isArray(name.suffix) ? name.suffix : [ name.suffix ];\n\n    return [\n        prefix.map(t => String(t || \"\").trim()).join(\" \"),\n        given .map(t => String(t || \"\").trim()).join(\" \"),\n        family.map(t => String(t || \"\").trim()).join(\" \"),\n        suffix.map(t => String(t || \"\").trim()).join(\" \")\n    ].filter(Boolean).join(\" \");\n}\n\n/**\n * Given a FHIR patient object, returns the patient's phone number (or empty string).\n * Note that if the patient have multiple phones this will only return the first one.\n * @param {Object} patient FHIR patient object\n * @returns {String} Patient's phone or an empty string\n */\nexport function getPatientPhone(patient = {}) {\n    let phone = (patient.telecom || []).find(c => c.system == \"phone\");\n    return phone ? phone.value : \"\";\n}\n\n/**\n * Given a FHIR patient object, returns the patient's email (or an empty string).\n * Note that if the patient have multiple emails this will only return the first one.\n * @param {Object} patient FHIR patient object\n * @returns {String} Patient's email address or an empty string\n */\nexport function getPatientEmail(patient = {}) {\n    let phone = (patient.telecom || []).find(c => c.system == \"email\");\n    return phone ? phone.value || \"\" : \"\";\n}\n\n/**\n * Extracts and returns a human-readable address string from FHIR patient object.\n * @param {Object} patient FHIR patient object\n * @returns {String} Patient's address or an empty string\n */\nexport function getPatientHomeAddress(patient = {}) {\n    let a = (patient.address || []);\n    a = a.find(c => c.use == \"home\") || a[0] || {};\n    var l = [a.line, a.postalCode, a.city, a.country]\n        .map(x => String(x || \"\").trim())\n        .filter(Boolean)\n        .join(\" \");\n    return l ? l : a.text || \"\";\n}\n\n/**\n * Extracts and returns a human-readable age string from FHIR patient object.\n * @param {Object} patient FHIR patient object\n * @returns {String} Patient's age\n */\nexport function getPatientAge(patient) {\n    let from  = moment(patient.birthDate);\n    let to    = moment(patient.deceasedDateTime || undefined);\n    let age   = to - from;\n\n    let seconds = Math.round(age / 1000)\n    if (seconds < 60) {\n        return seconds + \" second\"\n    }\n\n    let minutes = Math.round(seconds / 60)\n    if (minutes < 60) {\n        return minutes + \" minute\"\n    }\n\n    let hours = Math.round(minutes / 60)\n    if (hours < 24) {\n        return hours + \" hour\"\n    }\n\n    let days = Math.round(hours / 24)\n    if (days < 30) {\n        return days + \" day\"\n    }\n\n    let months = Math.round(days / 30)\n    if (months < 24) {\n        return months + \" month\"\n    }\n\n    let years = Math.round(days / 365)\n    return years + \" year\"\n}\n\n/**\n * Extracts and returns an URL pointing to the patient photo (or an empty string)\n * @param {Object} patient FHIR patient object\n * @returns {String} Patient's image URL\n */\nexport function getPatientImageUri(patient, base=\"\") {\n    let data = getPath(patient, \"photo.0.data\") || \"\";\n    let url  = getPath(patient, \"photo.0.url\") || \"\";\n    let type = getPath(patient, \"photo.0.contentType\") || \"\";\n    if (url.indexOf(\"/\") === 0) {\n        url = base + \"\" + url;\n    }\n    let http = url && url.match(/^https?:\\/\\//);\n    if (!http && data) {\n        if (type && data.indexOf(\"data:\") !== 0) {\n            data = `data:${type};base64,${data}`;\n        }\n        url = data;\n    }\n    else if (type && !http) {\n        url = `data:${type};base64,${url}`;\n    }\n    return url;\n}\n\n/**\n * Return the display text for the given CodeableConcept\n * @param {Object} concept CodeableConcept\n * @returns {String}\n */\nexport function getCodeableConcept(concept, defaultValue = \"-\") {\n    return String(\n        getPath(concept, \"coding.0.display\") ||\n        getPath(concept, \"coding.0.code\") ||\n        concept.text ||\n        defaultValue\n    );\n}\n\n/**\n * Some elements are of type `code` in older FHIR versions, but have been\n * converted to CodeableConcept in later versions\n * @param {String|Object} data Code or CodeableConcept\n * @returns {String}\n */\nexport function getCodeOrConcept(data, defaultValue = \"-\") {\n    if (typeof data == \"string\") return data || defaultValue;\n    return getCodeableConcept(data, defaultValue);\n}\n\n/**\n * Returns whether a codeOrConcept is the result of NLP insight\n * @param {Object} data Code or CodeableConcept\n * @returns {Boolean}\n */\nexport function codeIsNLPInsight(data) {\n    return getPath(data, \"coding.0.extension.0.url\") == \"http://ibm.com/fhir/cdm/insight/reference\";\n}\n\nexport const InsightSource = {\n    NONE: \"none\",\n    SELF: \"self\",\n    DOCUMENT: \"document\"\n}\n\n/**\n * Gets the source type of an insight\n * @param {Object} data FHIR Resource\n * @returns {InsightSource}\n */\nexport function getInsightSource(data) {\n    // get data.meta.extension.*.extension.*\n    // this would be one big getPath() call but we need to check all array indices\n    let meta = getPath(data, \"meta\");\n    if (meta) {\n        let ext_outer = getPath(meta, \"extension\")\n        if (ext_outer && Array.isArray(ext_outer)) {\n            for (let item_outer in ext_outer) {\n                if (getPath(ext_outer[item_outer], \"url\") == \"http://ibm.com/fhir/cdm/insight/result\") {\n                    let ext_inner = getPath(ext_outer[item_outer], \"extension\")\n                    if (ext_inner && Array.isArray(ext_inner)) {\n                        for (let item_inner in ext_inner) {\n                            // check if at the process type\n                            if (getPath(ext_inner[item_inner], \"url\") == \"http://ibm.com/fhir/cdm/StructureDefinition/process-type\") {\n                                // NOW we can check the insight source\n                                let valueString = getPath(ext_inner[item_inner], \"valueString\");\n                                if (typeof valueString != 'string') {\n                                    return InsightSource.NONE;\n                                }\n                                let valueStringArr = valueString.toLowerCase().split(\" \");\n                                if (valueStringArr.includes(\"unstructured\")) {\n                                    return InsightSource.DOCUMENT;\n                                } else if (valueStringArr.includes(\"structured\")) {\n                                    return InsightSource.SELF;\n                                } else {\n                                    // It's not good if this happens\n                                    return InsightSource.NONE;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return InsightSource.NONE\n}\n\n/**\n * Given some input string (@input) and a string to search for (@query), this\n * function will highlight all the occurrences by wrapping them in\n * \"<span class=\"search-match\"></span>\" tag.\n * @param {String} input The input string\n * @param {String} query The string to search for\n * @param {Boolean} caseSensitive Defaults to false\n * @returns {String} The input string with the matches highlighted\n */\nexport function searchHighlight(input, query, caseSensitive = false) {\n    let s = String(input);\n    let q = String(query);\n    let x = s;\n\n    if (!caseSensitive) {\n        x = x.toLowerCase();\n        q = q.toLowerCase();\n    }\n\n    let i = x.indexOf(q);\n\n    if (i > -1) {\n        return (\n            s.substr(0, i) +\n            `<span class=\"search-match\">` +\n            s.substr(i, q.length) +\n            \"</span>\" +\n            s.substr(i + q.length)\n        );\n    }\n\n    return input;\n}\n\n/**\n * Uses searchHighlight() to generate and return a JSX.span element containing\n * the @html string with @search highlighted\n * @param {String} html The input string\n * @param {String} search The string to search for\n * @returns {JSX.span} SPAN element with the matches highlighted\n */\nexport function renderSearchHighlight(html, search) {\n    return (\n        <span dangerouslySetInnerHTML={{\n            __html: search ? searchHighlight(html, search) : html\n        }}/>\n    )\n}\n\n/**\n * Given a fhir bundle fins it's link having the given rel attribute.\n * @param {Object} bundle FHIR JSON Bundle object\n * @param {String} rel The rel attribute to look for: prev|next|self... (see\n * http://www.iana.org/assignments/link-relations/link-relations.xhtml#link-relations-1)\n * @returns {String|null} Returns the url of the link or null if the link was\n *                        not found.\n */\nexport function getBundleURL(bundle, rel) {\n    let nextLink = bundle.link;\n    if (nextLink) {\n        nextLink = nextLink.find(l => l.relation === rel);\n        return nextLink && nextLink.url ? nextLink.url : null\n    }\n    return null;\n}\n\nexport function request(options) {\n    options = typeof options == \"string\" ? { url : options } : options || {};\n    let cfg = $.extend(true, options, {\n        headers: {\n            Accept: \"application/fhir+json\"\n        }\n    })\n\n    return new Promise((resolve, reject) => {\n        // console.info(\"Requesting \" + decodeURIComponent(cfg.url))\n        $.ajax(cfg).then(\n            resolve,\n            xhr => {\n                let message = getErrorMessage(xhr)\n                if (message && typeof message == \"string\") {\n                    return reject(new Error(message))\n                }\n                else {\n                    return reject({ message })\n                }\n            }\n        )\n    })\n}\n\nexport function getAllPages(options, result = []) {\n    return request(options).then(bundle => {\n        (bundle.entry || []).forEach(item => {\n            if (item.fullUrl && result.findIndex(o => (o.fullUrl === item.fullUrl)) == -1) {\n                result.push(item);\n            }\n        })\n        let nextUrl = getBundleURL(bundle, \"next\");\n        if (nextUrl) {\n            return getAllPages({ ...options, url: nextUrl }, result);\n        }\n        return result;\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js","import React     from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst ICONS = {\n    info   : \"fa fa-info-circle\",\n    warning: \"fa fa-exclamation-circle\",\n    danger : \"fa fa-exclamation-triangle\",\n    success: \"fa fa-thumbs-up\"\n};\n\nexport default class Alert extends React.Component\n{\n    static propTypes = {\n        type    : PropTypes.oneOf([\"info\", \"warning\", \"danger\", \"success\"]),\n        close   : PropTypes.bool,\n        icon    : PropTypes.bool,\n        children: PropTypes.any\n    };\n\n    static defaultProps = {\n        type : \"info\",\n        close: true,\n        icon : true\n    };\n\n    render() {\n        return (\n            <div className=\"container-fluid\" style={{ width: \"100%\" }}>\n                <div className=\"row\">\n                    <div className=\"col-xs-12\">\n                        <br/>\n                        <div className={ \"alert alert-\" + this.props.type }>\n                            {\n                                this.props.close ?\n                                <span\n                                    aria-hidden=\"true\"\n                                    data-dismiss=\"alert\"\n                                    className=\"close\"\n                                    style={{ lineHeight: \"1.2rem\" }}\n                                >&times;</span> :\n                                null\n                            }\n                            {\n                                this.props.icon ?\n                                <i className={ICONS[this.props.type]} style={{\n                                    marginRight: \"1ex\"\n                                }}/> :\n                                null\n                            }\n                            { this.props.children }\n                        </div>\n                        <br/>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./components/Alert/index.js","import React                from \"react\"\nimport PropTypes            from \"prop-types\"\nimport { connect }          from \"react-redux\"\nimport { showSelectedOnly } from \"../../redux/settings\"\nimport { setParam, fetch }  from \"../../redux/query\"\nimport { setAll, setSelectionCleared } from \"../../redux/selection\"\nimport \"./DialogFooter.less\"\n\nconst IS_POPUP  = window.opener && window.name;\nconst IS_FRAME  = parent !== self;\n\nclass SelectionUI extends React.Component {\n\n    static propTypes = {\n        settings        : PropTypes.object.isRequired,\n        selection       : PropTypes.object.isRequired,\n        onToggleSelectionVisibility: PropTypes.func.isRequired,\n        onResetSelection: PropTypes.func.isRequired,\n        canShowSelected : PropTypes.bool\n    };\n\n    render() {\n        let len = Object.keys(this.props.selection).filter(key => !!this.props.selection[key] && key !== \"selectionCleared\").length;\n        let viewClass = [\"btn\"];\n        let resetClass = [\"btn\"];\n\n        if (len === 0) {\n            viewClass.push(\"disabled\");\n            resetClass.push(\"disabled\");\n        }\n\n        if (this.props.settings.renderSelectedOnly) {\n            viewClass.push(\"active\");\n        }\n\n        const hasSelection = this.props.canShowSelected && len > 0\n        return (\n            <label disabled={ len === 0 }>\n                <span>\n                    { `${len} patient${len === 1 ? \"\" : \"s\"} selected${hasSelection ? ':' : ''}` }\n                </span>\n                { hasSelection ? (\n                    <div className=\"btn-group\">\n                        <div className={ viewClass.join(\" \") } onClick={\n                            () => {\n                                this.props.onToggleSelectionVisibility(\n                                    !this.props.settings.renderSelectedOnly\n                                );\n                            }\n                        }>View Selected</div>\n                        <div className={ resetClass.join(\" \") } onClick={\n                            () => { this.props.onResetSelection(); }\n                        }>Clear Selected</div>\n                    </div>\n                ) : null }\n            </label>\n        );\n    }\n}\n\nexport class DialogFooter extends React.Component\n{\n    static propTypes = {\n        selection       : PropTypes.object.isRequired,\n        settings        : PropTypes.object.isRequired,\n        showSelectedOnly: PropTypes.func.isRequired,\n        resetSelection  : PropTypes.func.isRequired,\n        setParam        : PropTypes.func.isRequired,\n        fetch           : PropTypes.func.isRequired,\n        canShowSelected : PropTypes.bool\n    };\n\n    /**\n     * Generates and returns the object that will be sent back to the client\n     * when the OK button is clicked\n     */\n    export() {\n        // debugger;\n        const selection = this.props.selection;\n\n        switch (this.props.settings.outputMode) {\n\n        case \"id-array\": // array of patient IDs\n            return Object.keys(selection).filter(k => !!selection[k] && k !== \"selectionCleared\");\n\n        case \"transactions\": // array of JSON transactions objects for each patient\n            return Object.keys(selection).filter(k => !!selection[k] && k !== \"selectionCleared\").map(\n                k => this.createPatientTransaction(selection[k])\n            );\n\n        case \"patients\": // array of patient JSON objects\n            return Object.keys(selection).filter(k => !!selection[k] && k !== \"selectionCleared\").map(\n                k => selection[k]\n            );\n\n        case \"id-list\": // comma-separated list of patient IDs (default)\n            return Object.keys(selection).filter(k => !!selection[k] && k !== \"selectionCleared\").join(\",\")\n        }\n    }\n\n    createPatientTransaction() {\n        throw new Error(\"No implemented\");\n    }\n\n    showSelectedOnly(bOn) {\n        if (bOn) {\n            const selection = this.props.selection;\n            this.props.setParam({\n                name : \"_id\",\n                value: Object.keys(selection).filter(k => !!selection[k]).join(\",\")\n            })\n        }\n        else {\n            this.props.setParam({\n                name : \"_id\",\n                value: undefined\n            })\n        }\n        this.props.showSelectedOnly(bOn)\n    }\n\n    renderDialogButtons() {\n        if (!IS_POPUP && !IS_FRAME) {\n            return null\n        }\n\n        const OWNER = window.opener || window.parent\n        let selectionCount = Object.keys(this.props.selection).filter(key => !!this.props.selection[key]).length;\n\n\n        return (\n            <div className=\"col-xs-6 text-right\">\n                <button className=\"btn btn-default\" onClick={ () => {\n                    OWNER.postMessage({ type: \"close\" }, \"*\")\n                }}>\n                    Cancel\n                </button>\n                <button className=\"btn btn-primary\" onClick={ () => {\n                    let confirmClose = true;\n                    if (selectionCount <= 0 && !this.props.selection.selectionCleared) {\n                        confirmClose = window.confirm(\"No patients have been selected. Choose 'Cancel' to return to making a selection or 'OK' to close without selecting\")\n                    }\n                    if (confirmClose) {\n                        OWNER.postMessage(\n                            {\n                                type: \"result\",\n                                data: this.export()\n                            },\n                            \"*\"\n                        );\n                    }\n                }}>\n                    OK\n                </button>\n            </div>\n        );\n    }\n\n    render() {\n        let selection = this.props.selection;\n        selection = Object.keys(selection).filter(k => !!selection[k])\n        return (\n            <div className=\"row dialog-buttons\">\n                <div className=\"col-xs-6 text-left\">\n                    <SelectionUI\n                        selection={ this.props.selection }\n                        settings={ this.props.settings }\n                        onToggleSelectionVisibility={ this.showSelectedOnly.bind(this) }\n                        onResetSelection={ this.props.resetSelection }\n                        canShowSelected={ this.props.canShowSelected }\n                    />\n                </div>\n                { this.renderDialogButtons() }\n            </div>\n        )\n    }\n}\n\nexport default connect(\n    state => ({\n        selection: state.selection,\n        settings : state.settings,\n        query    : state.query\n    }),\n    dispatch => ({\n        showSelectedOnly: bValue => {\n            dispatch(showSelectedOnly(bValue))\n            dispatch(fetch())\n        },\n        resetSelection  : () => {\n            dispatch(setAll({}))\n            dispatch(showSelectedOnly(false))\n            dispatch(setParam({ name: \"_id\", value: undefined }))\n            dispatch(fetch())\n            dispatch(setSelectionCleared())\n        },\n        setParam: (name, value) => dispatch(setParam(name, value)),\n        fetch: () => dispatch(fetch())\n    })\n)(DialogFooter)\n\n\n\n// WEBPACK FOOTER //\n// ./components/DialogFooter/index.js"],"sourceRoot":""}